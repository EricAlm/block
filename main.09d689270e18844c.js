(self.webpackChunkblocks=self.webpackChunkblocks||[]).push([[179],{202:(Rt,Ee,Ae)=>{"use strict";function ne(t){return"function"==typeof t}function G(t){const r=t(s=>{Error.call(s),s.stack=(new Error).stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}const h=G(t=>function(r){t(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((s,l)=>`${l+1}) ${s.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r});function Z(t,o){if(t){const r=t.indexOf(o);0<=r&&t.splice(r,1)}}class S{constructor(o){this.initialTeardown=o,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let o;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const c of r)c.remove(this);else r.remove(this);const{initialTeardown:s}=this;if(ne(s))try{s()}catch(c){o=c instanceof h?c.errors:[c]}const{_finalizers:l}=this;if(l){this._finalizers=null;for(const c of l)try{so(c)}catch(u){o=o??[],u instanceof h?o=[...o,...u.errors]:o.push(u)}}if(o)throw new h(o)}}add(o){var r;if(o&&o!==this)if(this.closed)so(o);else{if(o instanceof S){if(o.closed||o._hasParent(this))return;o._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(o)}}_hasParent(o){const{_parentage:r}=this;return r===o||Array.isArray(r)&&r.includes(o)}_addParent(o){const{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(o),r):r?[r,o]:o}_removeParent(o){const{_parentage:r}=this;r===o?this._parentage=null:Array.isArray(r)&&Z(r,o)}remove(o){const{_finalizers:r}=this;r&&Z(r,o),o instanceof S&&o._removeParent(this)}}S.EMPTY=(()=>{const t=new S;return t.closed=!0,t})();const g=S.EMPTY;function wt(t){return t instanceof S||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function so(t){ne(t)?t():t.unsubscribe()}const zn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},us={setTimeout(t,o,...r){const{delegate:s}=us;return s?.setTimeout?s.setTimeout(t,o,...r):setTimeout(t,o,...r)},clearTimeout(t){const{delegate:o}=us;return(o?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Cl(t){us.setTimeout(()=>{const{onUnhandledError:o}=zn;if(!o)throw t;o(t)})}function Fo(){}const js=ot("C",void 0,void 0);function ot(t,o,r){return{kind:t,value:o,error:r}}let ve=null;function St(t){if(zn.useDeprecatedSynchronousErrorHandling){const o=!ve;if(o&&(ve={errorThrown:!1,error:null}),t(),o){const{errorThrown:r,error:s}=ve;if(ve=null,r)throw s}}else t()}class Qt extends S{constructor(o){super(),this.isStopped=!1,o?(this.destination=o,wt(o)&&o.add(this)):this.destination=Qe}static create(o,r,s){return new io(o,r,s)}next(o){this.isStopped?ln(function ue(t){return ot("N",t,void 0)}(o),this):this._next(o)}error(o){this.isStopped?ln(function xr(t){return ot("E",void 0,t)}(o),this):(this.isStopped=!0,this._error(o))}complete(){this.isStopped?ln(js,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(o){this.destination.next(o)}_error(o){try{this.destination.error(o)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ws=Function.prototype.bind;function To(t,o){return Ws.call(t,o)}class Tr{constructor(o){this.partialObserver=o}next(o){const{partialObserver:r}=this;if(r.next)try{r.next(o)}catch(s){Qo(s)}}error(o){const{partialObserver:r}=this;if(r.error)try{r.error(o)}catch(s){Qo(s)}else Qo(o)}complete(){const{partialObserver:o}=this;if(o.complete)try{o.complete()}catch(r){Qo(r)}}}class io extends Qt{constructor(o,r,s){let l;if(super(),ne(o)||!o)l={next:o??void 0,error:r??void 0,complete:s??void 0};else{let c;this&&zn.useDeprecatedNextContext?(c=Object.create(o),c.unsubscribe=()=>this.unsubscribe(),l={next:o.next&&To(o.next,c),error:o.error&&To(o.error,c),complete:o.complete&&To(o.complete,c)}):l=o}this.destination=new Tr(l)}}function Qo(t){zn.useDeprecatedSynchronousErrorHandling?function Ve(t){zn.useDeprecatedSynchronousErrorHandling&&ve&&(ve.errorThrown=!0,ve.error=t)}(t):Cl(t)}function ln(t,o){const{onStoppedNotification:r}=zn;r&&us.setTimeout(()=>r(t,o))}const Qe={closed:!0,next:Fo,error:function sn(t){throw t},complete:Fo},an="function"==typeof Symbol&&Symbol.observable||"@@observable";function Mt(t){return t}function pe(t){return 0===t.length?Mt:1===t.length?t[0]:function(r){return t.reduce((s,l)=>l(s),r)}}let Dt=(()=>{class t{constructor(r){r&&(this._subscribe=r)}lift(r){const s=new t;return s.source=this,s.operator=r,s}subscribe(r,s,l){const c=function w(t){return t&&t instanceof Qt||function $(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}(t)&&wt(t)}(r)?r:new io(r,s,l);return St(()=>{const{operator:u,source:p}=this;c.add(u?u.call(c,p):p?this._subscribe(c):this._trySubscribe(c))}),c}_trySubscribe(r){try{return this._subscribe(r)}catch(s){r.error(s)}}forEach(r,s){return new(s=v(s))((l,c)=>{const u=new io({next:p=>{try{r(p)}catch(f){c(f),u.unsubscribe()}},error:c,complete:l});this.subscribe(u)})}_subscribe(r){var s;return null===(s=this.source)||void 0===s?void 0:s.subscribe(r)}[an](){return this}pipe(...r){return pe(r)(this)}toPromise(r){return new(r=v(r))((s,l)=>{let c;this.subscribe(u=>c=u,u=>l(u),()=>s(c))})}}return t.create=o=>new t(o),t})();function v(t){var o;return null!==(o=t??zn.Promise)&&void 0!==o?o:Promise}const O=G(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let F=(()=>{class t extends Dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const s=new k(this,this);return s.operator=r,s}_throwIfClosed(){if(this.closed)throw new O}next(r){St(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const s of this.currentObservers)s.next(r)}})}error(r){St(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:s}=this;for(;s.length;)s.shift().error(r)}})}complete(){St(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:s,isStopped:l,observers:c}=this;return s||l?g:(this.currentObservers=null,c.push(r),new S(()=>{this.currentObservers=null,Z(c,r)}))}_checkFinalizedStatuses(r){const{hasError:s,thrownError:l,isStopped:c}=this;s?r.error(l):c&&r.complete()}asObservable(){const r=new Dt;return r.source=this,r}}return t.create=(o,r)=>new k(o,r),t})();class k extends F{constructor(o,r){super(),this.destination=o,this.source=r}next(o){var r,s;null===(s=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===s||s.call(r,o)}error(o){var r,s;null===(s=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===s||s.call(r,o)}complete(){var o,r;null===(r=null===(o=this.destination)||void 0===o?void 0:o.complete)||void 0===r||r.call(o)}_subscribe(o){var r,s;return null!==(s=null===(r=this.source)||void 0===r?void 0:r.subscribe(o))&&void 0!==s?s:g}}function Q(t){return ne(t?.lift)}function Ge(t){return o=>{if(Q(o))return o.lift(function(r){try{return t(r,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(t,o,r,s,l){return new Pt(t,o,r,s,l)}class Pt extends Qt{constructor(o,r,s,l,c,u){super(o),this.onFinalize=c,this.shouldUnsubscribe=u,this._next=r?function(p){try{r(p)}catch(f){o.error(f)}}:super._next,this._error=l?function(p){try{l(p)}catch(f){o.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(p){o.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var o;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:r}=this;super.unsubscribe(),!r&&(null===(o=this.onFinalize)||void 0===o||o.call(this))}}}function ie(t,o){return Ge((r,s)=>{let l=0;r.subscribe(ce(s,c=>{s.next(t.call(o,c,l++))}))})}function Fr(t){return this instanceof Fr?(this.v=t,this):new Fr(t)}function wu(t,o,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,s=r.apply(t,o||[]),c=[];return l={},u("next"),u("throw"),u("return"),l[Symbol.asyncIterator]=function(){return this},l;function u(A){s[A]&&(l[A]=function(x){return new Promise(function(H,X){c.push([A,x,H,X])>1||p(A,x)})})}function p(A,x){try{!function f(A){A.value instanceof Fr?Promise.resolve(A.value.v).then(E,y):I(c[0][2],A)}(s[A](x))}catch(H){I(c[0][3],H)}}function E(A){p("next",A)}function y(A){p("throw",A)}function I(A,x){A(x),c.shift(),c.length&&p(c[0][0],c[0][1])}}function Rl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=t[Symbol.asyncIterator];return o?o.call(t):(t=function Go(t){var o="function"==typeof Symbol&&Symbol.iterator,r=o&&t[o],s=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(c){r[c]=t[c]&&function(u){return new Promise(function(p,f){!function l(c,u,p,f){Promise.resolve(f).then(function(E){c({value:E,done:p})},u)}(p,f,(u=t[c](u)).done,u.value)})}}}const zs=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function wl(t){return ne(t?.then)}function Sl(t){return ne(t[an])}function Gr(t){return Symbol.asyncIterator&&ne(t?.[Symbol.asyncIterator])}function Dl(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Uo=function Au(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ya(t){return ne(t?.[Uo])}function Ur(t){return wu(this,arguments,function*(){const r=t.getReader();try{for(;;){const{value:s,done:l}=yield Fr(r.read());if(l)return yield Fr(void 0);yield yield Fr(s)}}finally{r.releaseLock()}})}function Ol(t){return ne(t?.getReader)}function cn(t){if(t instanceof Dt)return t;if(null!=t){if(Sl(t))return function ku(t){return new Dt(o=>{const r=t[an]();if(ne(r.subscribe))return r.subscribe(o);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(zs(t))return function bh(t){return new Dt(o=>{for(let r=0;r<t.length&&!o.closed;r++)o.next(t[r]);o.complete()})}(t);if(wl(t))return function Le(t){return new Dt(o=>{t.then(r=>{o.closed||(o.next(r),o.complete())},r=>o.error(r)).then(null,Cl)})}(t);if(Gr(t))return Ys(t);if(Ya(t))return function Mu(t){return new Dt(o=>{for(const r of t)if(o.next(r),o.closed)return;o.complete()})}(t);if(Ol(t))return function Ka(t){return Ys(Ur(t))}(t)}throw Dl(t)}function Ys(t){return new Dt(o=>{(function Ja(t,o){var r,s,l,c;return function Br(t,o,r,s){return new(r||(r=Promise))(function(c,u){function p(y){try{E(s.next(y))}catch(I){u(I)}}function f(y){try{E(s.throw(y))}catch(I){u(I)}}function E(y){y.done?c(y.value):function l(c){return c instanceof r?c:new r(function(u){u(c)})}(y.value).then(p,f)}E((s=s.apply(t,o||[])).next())})}(this,void 0,void 0,function*(){try{for(r=Rl(t);!(s=yield r.next()).done;)if(o.next(s.value),o.closed)return}catch(u){l={error:u}}finally{try{s&&!s.done&&(c=r.return)&&(yield c.call(r))}finally{if(l)throw l.error}}o.complete()})})(t,o).catch(r=>o.error(r))})}function Un(t,o,r,s=0,l=!1){const c=o.schedule(function(){r(),l?t.add(this.schedule(null,s)):this.unsubscribe()},s);if(t.add(c),!l)return c}function Ot(t,o,r=1/0){return ne(o)?Ot((s,l)=>ie((c,u)=>o(s,c,l,u))(cn(t(s,l))),r):("number"==typeof o&&(r=o),Ge((s,l)=>function Ai(t,o,r,s,l,c,u,p){const f=[];let E=0,y=0,I=!1;const A=()=>{I&&!f.length&&!E&&o.complete()},x=X=>E<s?H(X):f.push(X),H=X=>{c&&o.next(X),E++;let J=!1;cn(r(X,y++)).subscribe(ce(o,te=>{l?.(te),c?x(te):o.next(te)},()=>{J=!0},void 0,()=>{if(J)try{for(E--;f.length&&E<s;){const te=f.shift();u?Un(o,u,()=>H(te)):H(te)}A()}catch(te){o.error(te)}}))};return t.subscribe(ce(o,x,()=>{I=!0,A()})),()=>{p?.()}}(s,l,t,r)))}function Xt(t=1/0){return Ot(Mt,t)}const Kn=new Dt(t=>t.complete());function me(t){return t[t.length-1]}function Hr(t){return function un(t){return t&&ne(t.schedule)}(me(t))?t.pop():void 0}function Js(t,o=0){return Ge((r,s)=>{r.subscribe(ce(s,l=>Un(s,t,()=>s.next(l),o),()=>Un(s,t,()=>s.complete(),o),l=>Un(s,t,()=>s.error(l),o)))})}function Ft(t,o=0){return Ge((r,s)=>{s.add(t.schedule(()=>r.subscribe(s),o))})}function Lu(t,o){if(!t)throw new Error("Iterable cannot be null");return new Dt(r=>{Un(r,o,()=>{const s=t[Symbol.asyncIterator]();Un(r,o,()=>{s.next().then(l=>{l.done?r.complete():r.next(l.value)})},0,!0)})})}function dn(t,o){return o?function qa(t,o){if(null!=t){if(Sl(t))return function Gt(t,o){return cn(t).pipe(Ft(o),Js(o))}(t,o);if(zs(t))return function yt(t,o){return new Dt(r=>{let s=0;return o.schedule(function(){s===t.length?r.complete():(r.next(t[s++]),r.closed||this.schedule())})})}(t,o);if(wl(t))return function zt(t,o){return cn(t).pipe(Ft(o),Js(o))}(t,o);if(Gr(t))return Lu(t,o);if(Ya(t))return function de(t,o){return new Dt(r=>{let s;return Un(r,o,()=>{s=t[Uo](),Un(r,o,()=>{let l,c;try{({value:l,done:c}=s.next())}catch(u){return void r.error(u)}c?r.complete():r.next(l)},0,!0)}),()=>ne(s?.return)&&s.return()})}(t,o);if(Ol(t))return function ki(t,o){return Lu(Ur(t),o)}(t,o)}throw Dl(t)}(t,o):cn(t)}function oe(t,o,...r){if(!0===o)return void t();if(!1===o)return;const s=new io({next:()=>{s.unsubscribe(),t()}});return o(...r).subscribe(s)}function vt(t){for(let o in t)if(t[o]===vt)return o;throw Error("Could not find renamed property on target object.")}function be(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(be).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const o=t.toString();if(null==o)return""+o;const r=o.indexOf("\n");return-1===r?o:o.substring(0,r)}function Jn(t,o){return null==t||""===t?null===o?"":o:null==o||""===o?t:t+" "+o}const Za=vt({__forward_ref__:vt});function Mi(t){return t.__forward_ref__=Mi,t.toString=function(){return be(this())},t}function we(t){return function en(t){return"function"==typeof t&&t.hasOwnProperty(Za)&&t.__forward_ref__===Mi}(t)?t():t}class b extends Error{constructor(o,r){super(function D(t,o){return`NG0${Math.abs(t)}${o?": "+o.trim():""}`}(o,r)),this.code=o}}function U(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function M(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function kl(t,o){throw new b(-201,!1)}function Ut(t,o){null==t&&function gt(t,o,r,s){throw new Error(`ASSERTION ERROR: ${t}`+(null==s?"":` [Expected=> ${r} ${s} ${o} <=Actual]`))}(o,t,null,"!=")}function Ke(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Vr(t){return{providers:t.providers||[],imports:t.imports||[]}}function nc(t){return Li(t,Ll)||Li(t,wh)}function Li(t,o){return t.hasOwnProperty(o)?t[o]:null}function ps(t){return t&&(t.hasOwnProperty(co)||t.hasOwnProperty(qn))?t[co]:null}const Ll=vt({\u0275prov:vt}),co=vt({\u0275inj:vt}),wh=vt({ngInjectableDef:vt}),qn=vt({ngInjectorDef:vt});var ke=(()=>((ke=ke||{})[ke.Default=0]="Default",ke[ke.Host=1]="Host",ke[ke.Self=2]="Self",ke[ke.SkipSelf=4]="SkipSelf",ke[ke.Optional=8]="Optional",ke))();let Vo;function An(t){const o=Vo;return Vo=t,o}function Fu(t,o,r){const s=nc(t);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:r&ke.Optional?null:void 0!==o?o:void kl(be(t))}function jr(t){return{toString:t}.toString()}var vo=(()=>((vo=vo||{})[vo.OnPush=0]="OnPush",vo[vo.Default=1]="Default",vo))(),tr=(()=>{return(t=tr||(tr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",tr;var t})();const At=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),xi={},ft=[],xl=vt({\u0275cmp:vt}),gs=vt({\u0275dir:vt}),Pl=vt({\u0275pipe:vt}),fs=vt({\u0275mod:vt}),vr=vt({\u0275fac:vt}),Bl=vt({__NG_ELEMENT_ID__:vt});let Gu=0;function Fl(t){return jr(()=>{const r=!0===t.standalone,s={},l={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===vo.OnPush,directiveDefs:null,pipeDefs:null,standalone:r,dependencies:r&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||ft,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||tr.Emulated,id:"c"+Gu++,styles:t.styles||ft,_:null,setInput:null,schemas:t.schemas||null,tView:null},c=t.dependencies,u=t.features;return l.inputs=oc(t.inputs,s),l.outputs=oc(t.outputs),u&&u.forEach(p=>p(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(Uu).filter(Dh):null,l.pipeDefs=c?()=>("function"==typeof c?c():c).map(Tn).filter(Dh):null,l})}function Uu(t){return Tt(t)||Rn(t)}function Dh(t){return null!==t}function qs(t){return jr(()=>({type:t.type,bootstrap:t.bootstrap||ft,declarations:t.declarations||ft,imports:t.imports||ft,exports:t.exports||ft,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function oc(t,o){if(null==t)return xi;const r={};for(const s in t)if(t.hasOwnProperty(s)){let l=t[s],c=l;Array.isArray(l)&&(c=l[1],l=l[0]),r[l]=s,o&&(o[l]=c)}return r}const tn=Fl;function Tt(t){return t[xl]||null}function Rn(t){return t[gs]||null}function Tn(t){return t[Pl]||null}function Qn(t,o){const r=t[fs]||null;if(!r&&!0===o)throw new Error(`Type ${be(t)} does not have '\u0275mod' property.`);return r}function eo(t){return Array.isArray(t)&&"object"==typeof t[1]}function or(t){return Array.isArray(t)&&!0===t[1]}function Hu(t){return 0!=(8&t.flags)}function to(t){return 2==(2&t.flags)}function lc(t){return 1==(1&t.flags)}function yn(t){return null!==t.template}function Ah(t){return 0!=(256&t[2])}function N(t,o){return t.hasOwnProperty(vr)?t[vr]:null}class W{constructor(o,r,s){this.previousValue=o,this.currentValue=r,this.firstChange=s}isFirstChange(){return this.firstChange}}function It(t){return t.type.prototype.ngOnChanges&&(t.setInput=no),Ro}function Ro(){const t=Ul(this),o=t?.current;if(o){const r=t.previous;if(r===xi)t.previous=o;else for(let s in o)r[s]=o[s];t.current=null,this.ngOnChanges(o)}}function no(t,o,r,s){const l=Ul(t)||function Ag(t,o){return t[ni]=o}(t,{previous:xi,current:null}),c=l.current||(l.current={}),u=l.previous,p=this.declaredInputs[r],f=u[p];c[p]=new W(f&&f.currentValue,o,u===xi),t[s]=o}const ni="__ngSimpleChanges__";function Ul(t){return t[ni]||null}function mt(t){for(;Array.isArray(t);)t=t[0];return t}function rt(t,o){return mt(o[t.index])}function $t(t,o){const r=o[t];return eo(r)?r:r[0]}function ju(t){return 64==(64&t[2])}function Hi(t,o){return null==o?null:t[o]}function fm(t){t[18]=0}function Ng(t,o){t[5]+=o;let r=t,s=t[3];for(;null!==s&&(1===o&&1===r[5]||-1===o&&0===r[5]);)s[5]+=o,r=s,s=s[3]}const Ye={lFrame:Ug(null),bindingsEnabled:!0};function mm(){return Ye.bindingsEnabled}function K(){return Ye.lFrame.lView}function pt(){return Ye.lFrame.tView}function Mn(){let t=$m();for(;null!==t&&64===t.type;)t=t.parent;return t}function $m(){return Ye.lFrame.currentTNode}function bs(t,o){const r=Ye.lFrame;r.currentTNode=t,r.isParent=o}function xh(){return Ye.lFrame.isParent}function zT(t,o){const r=Ye.lFrame;r.bindingIndex=r.bindingRootIndex=t,Pg(o)}function Pg(t){Ye.lFrame.currentDirectiveIndex=t}function Ph(t){Ye.lFrame.currentQueryIndex=t}function vm(t){const o=t[1];return 2===o.type?o.declTNode:1===o.type?t[6]:null}function Fg(t,o,r){if(r&ke.SkipSelf){let l=o,c=t;for(;!(l=l.parent,null!==l||r&ke.Host||(l=vm(c),null===l||(c=c[15],10&l.type))););if(null===l)return!1;o=l,t=c}const s=Ye.lFrame=Gg();return s.currentTNode=o,s.lView=t,!0}function Bh(t){const o=Gg(),r=t[1];Ye.lFrame=o,o.currentTNode=r.firstChild,o.lView=t,o.tView=r,o.contextLView=t,o.bindingIndex=r.bindingStartIndex,o.inI18n=!1}function Gg(){const t=Ye.lFrame,o=null===t?null:t.child;return null===o?Ug(t):o}function Ug(t){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=o),o}function dc(){const t=Ye.lFrame;return Ye.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const hc=dc;function Hg(){const t=dc();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function li(t){Ye.lFrame.selectedIndex=t}function zu(t,o){for(let r=o.directiveStart,s=o.directiveEnd;r<s;r++){const c=t.data[r].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:p,ngAfterViewInit:f,ngAfterViewChecked:E,ngOnDestroy:y}=c;u&&(t.contentHooks||(t.contentHooks=[])).push(-r,u),p&&((t.contentHooks||(t.contentHooks=[])).push(r,p),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(r,p)),f&&(t.viewHooks||(t.viewHooks=[])).push(-r,f),E&&((t.viewHooks||(t.viewHooks=[])).push(r,E),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(r,E)),null!=y&&(t.destroyHooks||(t.destroyHooks=[])).push(r,y)}}function Hh(t,o,r){Im(t,o,3,r)}function Yu(t,o,r,s){(3&t[2])===r&&Im(t,o,r,s)}function Vh(t,o){let r=t[2];(3&r)===o&&(r&=2047,r+=1,t[2]=r)}function Im(t,o,r,s){const c=s??-1,u=o.length-1;let p=0;for(let f=void 0!==s?65535&t[18]:0;f<u;f++)if("number"==typeof o[f+1]){if(p=o[f],null!=s&&p>=s)break}else o[f]<0&&(t[18]+=65536),(p<c||-1==c)&&(jg(t,r,o,f),t[18]=(4294901760&t[18])+f+2),f++}function jg(t,o,r,s){const l=r[s]<0,c=r[s+1],p=t[l?-r[s]:r[s]];if(l){if(t[2]>>11<t[18]>>16&&(3&t[2])===o){t[2]+=2048;try{c.call(p)}finally{}}}else try{c.call(p)}finally{}}class Vl{constructor(o,r,s){this.factory=o,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=s}}function vs(t,o,r){let s=0;for(;s<r.length;){const l=r[s];if("number"==typeof l){if(0!==l)break;s++;const c=r[s++],u=r[s++],p=r[s++];t.setAttribute(o,u,p,c)}else{const c=l,u=r[++s];Is(c)?t.setProperty(o,c,u):t.setAttribute(o,c,u),s++}}return s}function Wg(t){return 3===t||4===t||6===t}function Is(t){return 64===t.charCodeAt(0)}function gc(t,o){if(null!==o&&0!==o.length)if(null===t||0===t.length)t=o.slice();else{let r=-1;for(let s=0;s<o.length;s++){const l=o[s];"number"==typeof l?r=l:0===r||Xg(t,r,l,null,-1===r||2===r?o[++s]:null)}}return t}function Xg(t,o,r,s,l){let c=0,u=t.length;if(-1===o)u=-1;else for(;c<t.length;){const p=t[c++];if("number"==typeof p){if(p===o){u=-1;break}if(p>o){u=c-1;break}}}for(;c<t.length;){const p=t[c];if("number"==typeof p)break;if(p===r){if(null===s)return void(null!==l&&(t[c+1]=l));if(s===t[c+1])return void(t[c+2]=l)}c++,null!==s&&c++,null!==l&&c++}-1!==u&&(t.splice(u,0,o),c=u+1),t.splice(c++,0,r),null!==s&&t.splice(c++,0,s),null!==l&&t.splice(c++,0,l)}function zg(t){return-1!==t}function fc(t){return 32767&t}function _c(t,o){let r=function Dm(t){return t>>16}(t),s=o;for(;r>0;)s=s[15],r--;return s}let Ku=!0;function Ju(t){const o=Ku;return Ku=t,o}let nb=0;const Cs={};function ai(t,o){const r=Wh(t,o);if(-1!==r)return r;const s=o[1];s.firstCreatePass&&(t.injectorIndex=o.length,Jg(s.data,t),Jg(o,null),Jg(s.blueprint,null));const l=Vi(t,o),c=t.injectorIndex;if(zg(l)){const u=fc(l),p=_c(l,o),f=p[1].data;for(let E=0;E<8;E++)o[c+E]=p[u+E]|f[u+E]}return o[c+8]=l,c}function Jg(t,o){t.push(0,0,0,0,0,0,0,0,o)}function Wh(t,o){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===o[t.injectorIndex+8]?-1:t.injectorIndex}function Vi(t,o){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,s=null,l=o;for(;null!==l;){if(s=Mm(l),null===s)return-1;if(r++,l=l[15],-1!==s.injectorIndex)return s.injectorIndex|r<<16}return-1}function Xh(t,o,r){!function Kg(t,o,r){let s;"string"==typeof r?s=r.charCodeAt(0)||0:r.hasOwnProperty(Bl)&&(s=r[Bl]),null==s&&(s=r[Bl]=nb++);const l=255&s;o.data[t+(l>>5)]|=1<<l}(t,o,r)}function qg(t,o,r){if(r&ke.Optional||void 0!==t)return t;kl()}function zh(t,o,r,s){if(r&ke.Optional&&void 0===s&&(s=null),0==(r&(ke.Self|ke.Host))){const l=t[9],c=An(void 0);try{return l?l.get(o,s,r&ke.Optional):Fu(o,s,r&ke.Optional)}finally{An(c)}}return qg(s,0,r)}function Yh(t,o,r,s=ke.Default,l){if(null!==t){if(1024&o[2]){const u=function km(t,o,r,s,l){let c=t,u=o;for(;null!==c&&null!==u&&1024&u[2]&&!(256&u[2]);){const p=Kh(c,u,r,s|ke.Self,Cs);if(p!==Cs)return p;let f=c.parent;if(!f){const E=u[21];if(E){const y=E.get(r,Cs,s);if(y!==Cs)return y}f=Mm(u),u=u[15]}c=f}return l}(t,o,r,s,Cs);if(u!==Cs)return u}const c=Kh(t,o,r,s,Cs);if(c!==Cs)return c}return zh(o,r,s,l)}function Kh(t,o,r,s,l){const c=function rb(t){if("string"==typeof t)return t.charCodeAt(0)||0;const o=t.hasOwnProperty(Bl)?t[Bl]:void 0;return"number"==typeof o?o>=0?255&o:Qg:o}(r);if("function"==typeof c){if(!Fg(o,t,s))return s&ke.Host?qg(l,0,s):zh(o,r,s,l);try{const u=c(s);if(null!=u||s&ke.Optional)return u;kl()}finally{hc()}}else if("number"==typeof c){let u=null,p=Wh(t,o),f=-1,E=s&ke.Host?o[16][6]:null;for((-1===p||s&ke.SkipSelf)&&(f=-1===p?Vi(t,o):o[p+8],-1!==f&&Jh(s,!1)?(u=o[1],p=fc(f),o=_c(f,o)):p=-1);-1!==p;){const y=o[1];if(Am(c,p,y.data)){const I=Zg(p,o,r,u,s,E);if(I!==Cs)return I}f=o[p+8],-1!==f&&Jh(s,o[1].data[p+8]===E)&&Am(c,p,o)?(u=y,p=fc(f),o=_c(f,o)):p=-1}}return l}function Zg(t,o,r,s,l,c){const u=o[1],p=u.data[t+8],y=function qu(t,o,r,s,l){const c=t.providerIndexes,u=o.data,p=1048575&c,f=t.directiveStart,y=c>>20,A=l?p+y:t.directiveEnd;for(let x=s?p:p+y;x<A;x++){const H=u[x];if(x<f&&r===H||x>=f&&H.type===r)return x}if(l){const x=u[f];if(x&&yn(x)&&x.type===r)return f}return null}(p,u,r,null==s?to(p)&&Ku:s!=u&&0!=(3&p.type),l&ke.Host&&c===p);return null!==y?mc(o,u,y,p):Cs}function mc(t,o,r,s){let l=t[r];const c=o.data;if(function Cm(t){return t instanceof Vl}(l)){const u=l;u.resolving&&function j(t,o){const r=o?`. Dependency path: ${o.join(" > ")} > ${t}`:"";throw new b(-200,`Circular dependency in DI detected for ${t}${r}`)}(U(c[r]));const p=Ju(u.canSeeViewProviders);u.resolving=!0;const f=u.injectImpl?An(u.injectImpl):null;Fg(t,s,ke.Default);try{l=t[r]=u.factory(void 0,c,t,s),o.firstCreatePass&&r>=s.directiveStart&&function Uh(t,o,r){const{ngOnChanges:s,ngOnInit:l,ngDoCheck:c}=o.type.prototype;if(s){const u=It(o);(r.preOrderHooks||(r.preOrderHooks=[])).push(t,u),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,u)}l&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-t,l),c&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t,c),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,c))}(r,c[r],o)}finally{null!==f&&An(f),Ju(p),u.resolving=!1,hc()}}return l}function Am(t,o,r){return!!(r[o+(t>>5)]&1<<t)}function Jh(t,o){return!(t&ke.Self||t&ke.Host&&o)}class ji{constructor(o,r){this._tNode=o,this._lView=r}get(o,r,s){return Yh(this._tNode,this._lView,o,s,r)}}function Qg(){return new ji(Mn(),K())}function Mm(t){const o=t[1],r=o.type;return 2===r?o.declTNode:1===r?t[6]:null}const $c="__parameters__";function Tc(t,o,r){return jr(()=>{const s=function tf(t){return function(...r){if(t){const s=t(...r);for(const l in s)this[l]=s[l]}}}(o);function l(...c){if(this instanceof l)return s.apply(this,c),this;const u=new l(...c);return p.annotation=u,p;function p(f,E,y){const I=f.hasOwnProperty($c)?f[$c]:Object.defineProperty(f,$c,{value:[]})[$c];for(;I.length<=y;)I.push(null);return(I[y]=I[y]||[]).push(u),f}}return r&&(l.prototype=Object.create(r.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}class We{constructor(o,r){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=Ke({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rs(t,o){t.forEach(r=>Array.isArray(r)?Rs(r,o):o(r))}function Bm(t,o,r){o>=t.length?t.push(r):t.splice(o,0,r)}function Zu(t,o){return o>=t.length-1?t.pop():t.splice(o,1)[0]}const Xi={},ci="__NG_DI_FLAG__",zl="ngTempTokenPath",rf=/\n/gm,sf="__source";let vc;function ui(t){const o=vc;return vc=t,o}function Qh(t,o=ke.Default){if(void 0===vc)throw new b(-203,!1);return null===vc?Fu(t,void 0,o):vc.get(t,o&ke.Optional?null:void 0,o)}function Oe(t,o=ke.Default){return(function Rg(){return Vo}()||Qh)(we(t),o)}function pn(t,o=ke.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Oe(t,o)}function ep(t){const o=[];for(let r=0;r<t.length;r++){const s=we(t[r]);if(Array.isArray(s)){if(0===s.length)throw new b(900,!1);let l,c=ke.Default;for(let u=0;u<s.length;u++){const p=s[u],f=jm(p);"number"==typeof f?-1===f?l=p.token:c|=f:l=p}o.push(Oe(l,c))}else o.push(Oe(s))}return o}function ed(t,o){return t[ci]=o,t.prototype[ci]=o,t}function jm(t){return t[ci]}const Ic=ed(Tc("Optional"),8),Yl=ed(Tc("SkipSelf"),4);var go=(()=>((go=go||{})[go.Important=1]="Important",go[go.DashCase=2]="DashCase",go))();const Vt=new Map;let qi=0;const hf="__ngContext__";function Ln(t,o){eo(o)?(t[hf]=o[20],function sp(t){Vt.set(t[20],t)}(o)):t[hf]=o}function pi(t,o){return undefined(t,o)}function lr(t){const o=t[3];return or(o)?o[3]:o}function wr(t){return oa(t[13])}function Zi(t){return oa(t[4])}function oa(t){for(;null!==t&&!or(t);)t=t[4];return t}function ar(t,o,r,s,l){if(null!=s){let c,u=!1;or(s)?c=s:eo(s)&&(u=!0,s=s[0]);const p=mt(s);0===t&&null!==r?null==l?ad(o,r,p):cr(o,r,p,l||null,!0):1===t&&null!==r?cr(o,r,p,l||null,!0):2===t?function mf(t,o,r){const s=ud(t,o);s&&function ff(t,o,r,s){t.removeChild(o,r,s)}(t,s,o,r)}(o,p,u):3===t&&o.destroyNode(p),null!=c&&function $f(t,o,r,s,l){const c=r[7];c!==mt(r)&&ar(o,t,s,c,l);for(let p=10;p<r.length;p++){const f=r[p];hd(f[1],f,t,o,s,c)}}(o,t,c,r,l)}}function Sr(t,o,r){return t.createElement(o,r)}function id(t,o){const r=t[9],s=r.indexOf(o),l=o[3];512&o[2]&&(o[2]&=-513,Ng(l,-1)),r.splice(s,1)}function Lc(t,o){if(t.length<=10)return;const r=10+o,s=t[r];if(s){const l=s[17];null!==l&&l!==t&&id(l,s),o>0&&(t[r-1][4]=s[4]);const c=Zu(t,10+o);!function ra(t,o){hd(t,o,o[11],2,null,null),o[0]=null,o[6]=null}(s[1],s);const u=c[19];null!==u&&u.detachView(c[1]),s[3]=null,s[4]=null,s[2]&=-65}return s}function ld(t,o){if(!(128&o[2])){const r=o[11];r.destroyNode&&hd(t,o,r,3,null,null),function lp(t){let o=t[13];if(!o)return xc(t[1],t);for(;o;){let r=null;if(eo(o))r=o[13];else{const s=o[10];s&&(r=s)}if(!r){for(;o&&!o[4]&&o!==t;)eo(o)&&xc(o[1],o),o=o[3];null===o&&(o=t),eo(o)&&xc(o[1],o),r=o&&o[4]}o=r}}(o)}}function xc(t,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function gf(t,o){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let s=0;s<r.length;s+=2){const l=o[r[s]];if(!(l instanceof Vl)){const c=r[s+1];if(Array.isArray(c))for(let u=0;u<c.length;u+=2){const p=l[c[u]],f=c[u+1];try{f.call(p)}finally{}}else try{c.call(l)}finally{}}}}(t,o),function Pc(t,o){const r=t.cleanup,s=o[7];let l=-1;if(null!==r)for(let c=0;c<r.length-1;c+=2)if("string"==typeof r[c]){const u=r[c+1],p="function"==typeof u?u(o):mt(o[u]),f=s[l=r[c+2]],E=r[c+3];"boolean"==typeof E?p.removeEventListener(r[c],f,E):E>=0?s[l=E]():s[l=-E].unsubscribe(),c+=2}else{const u=s[l=r[c+1]];r[c].call(u)}if(null!==s){for(let c=l+1;c<s.length;c++)(0,s[c])();o[7]=null}}(t,o),1===o[1].type&&o[11].destroy();const r=o[17];if(null!==r&&or(o[3])){r!==o[3]&&id(r,o);const s=o[19];null!==s&&s.detachView(t)}!function ee(t){Vt.delete(t[20])}(o)}}function Se(t,o,r){return function Ue(t,o,r){let s=o;for(;null!==s&&40&s.type;)s=(o=s).parent;if(null===s)return r[0];if(2&s.flags){const l=t.data[s.directiveStart].encapsulation;if(l===tr.None||l===tr.Emulated)return null}return rt(s,r)}(t,o.parent,r)}function cr(t,o,r,s,l){t.insertBefore(o,r,s,l)}function ad(t,o,r){t.appendChild(o,r)}function cd(t,o,r,s,l){null!==s?cr(t,o,r,s,l):ad(t,o,r)}function ud(t,o){return t.parentNode(o)}let bf,De=function _o(t,o,r){return 40&t.type?rt(t,r):null};function up(t,o,r,s){const l=Se(t,s,o),c=o[11],p=function _f(t,o,r){return De(t,o,r)}(s.parent||o[6],s,o);if(null!=l)if(Array.isArray(r))for(let f=0;f<r.length;f++)cd(c,l,r[f],p,!1);else cd(c,l,r,p,!1)}function fi(t,o){if(null!==o){const r=o.type;if(3&r)return rt(o,t);if(4&r)return Bc(-1,t[o.index]);if(8&r){const s=o.child;if(null!==s)return fi(t,s);{const l=t[o.index];return or(l)?Bc(-1,l):mt(l)}}if(32&r)return pi(o,t)()||mt(t[o.index]);{const s=Zm(t,o);return null!==s?Array.isArray(s)?s[0]:fi(lr(t[16]),s):fi(t,o.next)}}return null}function Zm(t,o){return null!==o?t[16][6].projection[o.projection]:null}function Bc(t,o){const r=10+t+1;if(r<o.length){const s=o[r],l=s[1].firstChild;if(null!==l)return fi(s,l)}return o[7]}function el(t,o,r,s,l,c,u){for(;null!=r;){const p=s[r.index],f=r.type;if(u&&0===o&&(p&&Ln(mt(p),s),r.flags|=4),64!=(64&r.flags))if(8&f)el(t,o,r.child,s,l,c,!1),ar(o,t,l,p,c);else if(32&f){const E=pi(r,s);let y;for(;y=E();)ar(o,t,l,y,c);ar(o,t,l,p,c)}else 16&f?gd(t,o,s,r,l,c):ar(o,t,l,p,c);r=u?r.projectionNext:r.next}}function hd(t,o,r,s,l,c){el(r,s,t.firstChild,o,l,c,!1)}function gd(t,o,r,s,l,c){const u=r[16],f=u[6].projection[s.projection];if(Array.isArray(f))for(let E=0;E<f.length;E++)ar(o,t,l,f[E],c);else el(t,o,f,u[3],l,c,!0)}function Qm(t,o,r){t.setAttribute(o,"style",r)}function Yo(t,o,r){""===r?t.removeAttribute(o,"class"):t.setAttribute(o,"class",r)}const Rf=new We("ENVIRONMENT_INITIALIZER"),i$=new We("INJECTOR",-1),vd=new We("INJECTOR_DEF_TYPES");class Id{get(o,r=Xi){if(r===Xi){const s=new Error(`NullInjectorError: No provider for ${be(o)}!`);throw s.name="NullInjectorError",s}return r}}function l$(...t){return{\u0275providers:Ht(0,t)}}function Ht(t,...o){const r=[],s=new Set;let l;return Rs(o,c=>{const u=c;xe(u,r,[],s)&&(l||(l=[]),l.push(u))}),void 0!==l&&a$(l,r),r}function a$(t,o){for(let r=0;r<t.length;r++){const{providers:l}=t[r];Rs(l,c=>{o.push(c)})}}function xe(t,o,r,s){if(!(t=we(t)))return!1;let l=null,c=ps(t);const u=!c&&Tt(t);if(c||u){if(u&&!u.standalone)return!1;l=t}else{const f=t.ngModule;if(c=ps(f),!c)return!1;l=f}const p=s.has(l);if(u){if(p)return!1;if(s.add(l),u.dependencies){const f="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const E of f)xe(E,o,r,s)}}else{if(!c)return!1;{if(null!=c.imports&&!p){let E;s.add(l);try{Rs(c.imports,y=>{xe(y,o,r,s)&&(E||(E=[]),E.push(y))})}finally{}void 0!==E&&a$(E,o)}if(!p){const E=N(l)||(()=>new l);o.push({provide:l,useFactory:E,deps:ft},{provide:vd,useValue:l,multi:!0},{provide:Rf,useValue:()=>Oe(l),multi:!0})}const f=c.providers;null==f||p||Rs(f,y=>{o.push(y)})}}return l!==t&&void 0!==t.providers}const wf=vt({provide:String,useValue:vt});function Tp(t){return null!==t&&"object"==typeof t&&wf in t}function Zr(t){return"function"==typeof t}const Sf=new We("Set Injector scope."),bp={},Gb={};let aa;function yp(){return void 0===aa&&(aa=new Id),aa}class Ls{}class Df extends Ls{constructor(o,r,s,l){super(),this.parent=r,this.source=s,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qr(o,u=>this.processProvider(u)),this.records.set(i$,jc(void 0,this)),l.has("environment")&&this.records.set(Ls,jc(void 0,this));const c=this.records.get(Sf);null!=c&&"string"==typeof c.value&&this.scopes.add(c.value),this.injectorDefTypes=new Set(this.get(vd.multi,ft,ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const r=ui(this),s=An(void 0);try{return o()}finally{ui(r),An(s)}}get(o,r=Xi,s=ke.Default){this.assertNotDestroyed();const l=ui(this),c=An(void 0);try{if(!(s&ke.SkipSelf)){let p=this.records.get(o);if(void 0===p){const f=function Ub(t){return"function"==typeof t||"object"==typeof t&&t instanceof We}(o)&&nc(o);p=f&&this.injectableDefInScope(f)?jc(Pe(o),bp):null,this.records.set(o,p)}if(null!=p)return this.hydrate(o,p)}return(s&ke.Self?yp():this.parent).get(o,r=s&ke.Optional&&r===Xi?null:r)}catch(u){if("NullInjectorError"===u.name){if((u[zl]=u[zl]||[]).unshift(be(o)),l)throw u;return function af(t,o,r,s){const l=t[zl];throw o[sf]&&l.unshift(o[sf]),t.message=function tp(t,o,r,s=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=be(o);if(Array.isArray(o))l=o.map(be).join(" -> ");else if("object"==typeof o){let c=[];for(let u in o)if(o.hasOwnProperty(u)){let p=o[u];c.push(u+":"+("string"==typeof p?JSON.stringify(p):be(p)))}l=`{${c.join(", ")}}`}return`${r}${s?"("+s+")":""}[${l}]: ${t.replace(rf,"\n  ")}`}("\n"+t.message,l,r,s),t.ngTokenPath=l,t[zl]=null,t}(u,o,"R3InjectorError",this.source)}throw u}finally{An(c),ui(l)}}resolveInjectorInitializers(){const o=ui(this),r=An(void 0);try{const s=this.get(Rf.multi,ft,ke.Self);for(const l of s)l()}finally{ui(o),An(r)}}toString(){const o=[],r=this.records;for(const s of r.keys())o.push(be(s));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new b(205,!1)}processProvider(o){let r=Zr(o=we(o))?o:we(o&&o.provide);const s=function ol(t){return Tp(t)?jc(void 0,t.useValue):jc(function hr(t,o,r){let s;if(Zr(t)){const l=we(t);return N(l)||Pe(l)}if(Tp(t))s=()=>we(t.useValue);else if(function c$(t){return!(!t||!t.useFactory)}(t))s=()=>t.useFactory(...ep(t.deps||[]));else if(function Vc(t){return!(!t||!t.useExisting)}(t))s=()=>Oe(we(t.useExisting));else{const l=we(t&&(t.useClass||t.provide));if(!function d$(t){return!!t.deps}(t))return N(l)||Pe(l);s=()=>new l(...ep(t.deps))}return s}(t),bp)}(o);if(Zr(o)||!0!==o.multi)this.records.get(r);else{let l=this.records.get(r);l||(l=jc(void 0,bp,!0),l.factory=()=>ep(l.multi),this.records.set(r,l)),r=o,l.multi.push(o)}this.records.set(r,s)}hydrate(o,r){return r.value===bp&&(r.value=Gb,r.value=r.factory()),"object"==typeof r.value&&r.value&&function Wc(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}injectableDefInScope(o){if(!o.providedIn)return!1;const r=we(o.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}}function Pe(t){const o=nc(t),r=null!==o?o.factory:N(t);if(null!==r)return r;if(t instanceof We)throw new b(204,!1);if(t instanceof Function)return function u$(t){const o=t.length;if(o>0)throw function Qu(t,o){const r=[];for(let s=0;s<t;s++)r.push(o);return r}(o,"?"),new b(204,!1);const r=function Ch(t){const o=t&&(t[Ll]||t[wh]);if(o){const r=function Rh(t){if(t.hasOwnProperty("name"))return t.name;const o=(""+t).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),o}return null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new b(204,!1)}function jc(t,o,r=!1){return{factory:t,value:o,multi:r?[]:void 0}}function h$(t){return!!t.\u0275providers}function Qr(t,o){for(const r of t)Array.isArray(r)?Qr(r,o):h$(r)?Qr(r.\u0275providers,o):o(r)}class tt{}class Pn{resolveComponentFactory(o){throw function vp(t){const o=Error(`No component factory found for ${be(t)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=t,o}(o)}}let Cd=(()=>{class t{}return t.NULL=new Pn,t})();function Rd(){return ca(Mn(),K())}function ca(t,o){return new Or(rt(t,o))}let Or=(()=>{class t{constructor(r){this.nativeElement=r}}return t.__NG_ELEMENT_ID__=Rd,t})();class ua{}let _$=(()=>{class t{}return t.\u0275prov=Ke({token:t,providedIn:"root",factory:()=>null}),t})();class da{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Of=new da("14.2.12"),m$={};function Xc(t){return t.ngOriginalError}class zc{constructor(){this._console=console}handleError(o){const r=this._findOriginalError(o);this._console.error("ERROR",o),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(o){let r=o&&Xc(o);for(;r&&Xc(r);)r=Xc(r);return r||null}}function _i(t){return t instanceof Function?t():t}function Dd(t,o,r){let s=t.length;for(;;){const l=t.indexOf(o,r);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const c=o.length;if(l+c===s||t.charCodeAt(l+c)<=32)return l}r=l+1}}const qc="ng-template";function kf(t,o,r){let s=0;for(;s<t.length;){let l=t[s++];if(r&&"class"===l){if(l=t[s],-1!==Dd(l.toLowerCase(),o,0))return!0}else if(1===l){for(;s<t.length&&"string"==typeof(l=t[s++]);)if(l.toLowerCase()===o)return!0;return!1}}return!1}function $$(t){return 4===t.type&&t.value!==qc}function mi(t,o,r){return o===(4!==t.type||r?t.value:qc)}function Mf(t,o,r){let s=4;const l=t.attrs||[],c=function dt(t){for(let o=0;o<t.length;o++)if(Wg(t[o]))return o;return t.length}(l);let u=!1;for(let p=0;p<o.length;p++){const f=o[p];if("number"!=typeof f){if(!u)if(4&s){if(s=2|1&s,""!==f&&!mi(t,f,r)||""===f&&1===o.length){if(Oo(s))return!1;u=!0}}else{const E=8&s?f:o[++p];if(8&s&&null!==t.attrs){if(!kf(t.attrs,E,r)){if(Oo(s))return!1;u=!0}continue}const I=Od(8&s?"class":f,l,$$(t),r);if(-1===I){if(Oo(s))return!1;u=!0;continue}if(""!==E){let A;A=I>c?"":l[I+1].toLowerCase();const x=8&s?A:null;if(x&&-1!==Dd(x,E,0)||2&s&&E!==A){if(Oo(s))return!1;u=!0}}}}else{if(!u&&!Oo(s)&&!Oo(f))return!1;if(u&&Oo(f))continue;u=!1,s=f|1&s}}return Oo(s)||u}function Oo(t){return 0==(1&t)}function Od(t,o,r,s){if(null===o)return-1;let l=0;if(s||!r){let c=!1;for(;l<o.length;){const u=o[l];if(u===t)return l;if(3===u||6===u)c=!0;else{if(1===u||2===u){let p=o[++l];for(;"string"==typeof p;)p=o[++l];continue}if(4===u)break;if(0===u){l+=4;continue}}l+=c?1:2}return-1}return function Wb(t,o){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const s=t[r];if("number"==typeof s)return-1;if(s===o)return r;r++}return-1}(o,t)}function wp(t,o,r=!1){for(let s=0;s<o.length;s++)if(Mf(t,o[s],r))return!0;return!1}function kd(t,o){return t?":not("+o.trim()+")":o}function Sp(t){let o=t[0],r=1,s=2,l="",c=!1;for(;r<t.length;){let u=t[r];if("string"==typeof u)if(2&s){const p=t[++r];l+="["+u+(p.length>0?'="'+p+'"':"")+"]"}else 8&s?l+="."+u:4&s&&(l+=" "+u);else""!==l&&!Oo(u)&&(o+=kd(c,l),l=""),s=u,c=c||!Oo(s);r++}return""!==l&&(o+=kd(c,l)),o}const He={};function b$(t,o=null,r=null,s){const l=Lf(t,o,r,s);return l.resolveInjectorInitializers(),l}function Lf(t,o=null,r=null,s,l=new Set){const c=[r||ft,l$(t)];return s=s||("object"==typeof t?void 0:be(t)),new Df(c,o||yp(),s||null,l)}let pr=(()=>{class t{static create(r,s){if(Array.isArray(r))return b$({name:""},s,r,"");{const l=r.name??"";return b$({name:l},r.parent,r.providers,l)}}}return t.THROW_IF_NOT_FOUND=Xi,t.NULL=new Id,t.\u0275prov=Ke({token:t,providedIn:"any",factory:()=>Oe(i$)}),t.__NG_ELEMENT_ID__=-1,t})();function Re(t,o=ke.Default){const r=K();return null===r?Oe(t,o):Yh(Mn(),r,we(t),o)}function Vf(){throw new Error("invalid")}function $a(t,o){const r=t.contentQueries;if(null!==r)for(let s=0;s<r.length;s+=2){const l=r[s],c=r[s+1];if(-1!==c){const u=t.data[c];Ph(l),u.contentQueries(2,o[c],c)}}}function Gp(t,o,r,s,l,c,u,p,f,E,y){const I=o.blueprint.slice();return I[0]=l,I[2]=76|s,(null!==y||t&&1024&t[2])&&(I[2]|=1024),fm(I),I[3]=I[15]=t,I[8]=r,I[10]=u||t&&t[10],I[11]=p||t&&t[11],I[12]=f||t&&t[12]||null,I[9]=E||t&&t[9]||null,I[6]=c,I[20]=function vb(){return qi++}(),I[21]=y,I[16]=2==o.type?t[16]:I,I}function fr(t,o,r,s,l){let c=t.data[o];if(null===c)c=function Jf(t,o,r,s,l){const c=$m(),u=xh(),f=t.data[o]=function hy(t,o,r,s,l,c){return{type:r,index:s,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?c:c&&c.parent,r,o,s,l);return null===t.firstChild&&(t.firstChild=f),null!==c&&(u?null==c.child&&null!==f.parent&&(c.child=f):null===c.next&&(c.next=f)),f}(t,o,r,s,l),function XT(){return Ye.lFrame.inI18n}()&&(c.flags|=64);else if(64&c.type){c.type=r,c.value=s,c.attrs=l;const u=function Wu(){const t=Ye.lFrame,o=t.currentTNode;return t.isParent?o:o.parent}();c.injectorIndex=null===u?-1:u.injectorIndex}return bs(c,!0),c}function Mo(t,o,r,s){if(0===r)return-1;const l=o.length;for(let c=0;c<r;c++)o.push(s),t.blueprint.push(s),t.data.push(null);return l}function qf(t,o,r){Bh(o);try{const s=t.viewQuery;null!==s&&va(1,s,r);const l=t.template;null!==l&&M$(t,o,l,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$a(t,o),t.staticViewQueries&&va(2,t.viewQuery,r);const c=t.components;null!==c&&function Fp(t,o){for(let r=0;r<o.length;r++)Ey(t,o[r])}(o,c)}catch(s){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),s}finally{o[2]&=-5,Hg()}}function hl(t,o,r,s){const l=o[2];if(128!=(128&l)){Bh(o);try{fm(o),function ym(t){return Ye.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&M$(t,o,r,2,s);const u=3==(3&l);if(u){const E=t.preOrderCheckHooks;null!==E&&Hh(o,E,null)}else{const E=t.preOrderHooks;null!==E&&Yu(o,E,0,null),Vh(o,0)}if(function ba(t){for(let o=wr(t);null!==o;o=Zi(o)){if(!o[2])continue;const r=o[9];for(let s=0;s<r.length;s++){const l=r[s],c=l[3];0==(512&l[2])&&Ng(c,1),l[2]|=512}}}(o),function my(t){for(let o=wr(t);null!==o;o=Zi(o))for(let r=10;r<o.length;r++){const s=o[r],l=s[1];ju(s)&&hl(l,s,l.template,s[8])}}(o),null!==t.contentQueries&&$a(t,o),u){const E=t.contentCheckHooks;null!==E&&Hh(o,E)}else{const E=t.contentHooks;null!==E&&Yu(o,E,1),Vh(o,1)}!function ay(t,o){const r=t.hostBindingOpCodes;if(null!==r)try{for(let s=0;s<r.length;s++){const l=r[s];if(l<0)li(~l);else{const c=l,u=r[++s],p=r[++s];zT(u,c),p(2,o[c])}}}finally{li(-1)}}(t,o);const p=t.components;null!==p&&function cy(t,o){for(let r=0;r<o.length;r++)$y(t,o[r])}(o,p);const f=t.viewQuery;if(null!==f&&va(2,f,s),u){const E=t.viewCheckHooks;null!==E&&Hh(o,E)}else{const E=t.viewHooks;null!==E&&Yu(o,E,2),Vh(o,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Ng(o[3],-1))}finally{Hg()}}}function M$(t,o,r,s,l){const c=function So(){return Ye.lFrame.selectedIndex}(),u=2&s;try{li(-1),u&&o.length>22&&function Dp(t,o,r,s){if(!s)if(3==(3&o[2])){const c=t.preOrderCheckHooks;null!==c&&Hh(o,c,r)}else{const c=t.preOrderHooks;null!==c&&Yu(o,c,0,r)}li(r)}(t,o,22,!1),r(s,l)}finally{li(c)}}function N$(t){const o=t.tView;return null===o||o.incompleteFirstPass?t.tView=Bd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):o}function Bd(t,o,r,s,l,c,u,p,f,E){const y=22+s,I=y+l,A=function uy(t,o){const r=[];for(let s=0;s<o;s++)r.push(s<t?null:He);return r}(y,I),x="function"==typeof E?E():E;return A[1]={type:t,blueprint:A,template:r,queries:null,viewQuery:p,declTNode:o,data:A.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof c?c():c,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:f,consts:x,incompleteFirstPass:!1}}function Ea(t,o,r){for(let s in t)if(t.hasOwnProperty(s)){const l=t[s];(r=null===r?{}:r).hasOwnProperty(s)?r[s].push(o,l):r[s]=[o,l]}return r}function L$(t,o){const s=o.directiveEnd,l=t.data,c=o.attrs,u=[];let p=null,f=null;for(let E=o.directiveStart;E<s;E++){const y=l[E],I=y.inputs,A=null===c||$$(o)?null:Ko(I,c);u.push(A),p=Ea(I,E,p),f=Ea(y.outputs,E,f)}null!==p&&(p.hasOwnProperty("class")&&(o.flags|=16),p.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=u,o.inputs=p,o.outputs=f}function P$(t,o,r,s,l,c){const u=c.hostBindings;if(u){let p=t.hostBindingOpCodes;null===p&&(p=t.hostBindingOpCodes=[]);const f=~o.index;(function Qf(t){let o=t.length;for(;o>0;){const r=t[--o];if("number"==typeof r&&r<0)return r}return 0})(p)!=f&&p.push(f),p.push(s,l,u)}}function B$(t,o){null!==t.hostBindings&&t.hostBindings(1,o)}function F$(t,o){o.flags|=2,(t.components||(t.components=[])).push(o.index)}function _y(t,o,r){if(r){if(o.exportAs)for(let s=0;s<o.exportAs.length;s++)r[o.exportAs[s]]=t;yn(o)&&(r[""]=t)}}function Ud(t,o,r){t.flags|=1,t.directiveStart=o,t.directiveEnd=o+r,t.providerIndexes=o}function G$(t,o,r,s,l){t.data[s]=l;const c=l.factory||(l.factory=N(l.type)),u=new Vl(c,yn(l),Re);t.blueprint[s]=u,r[s]=u,P$(t,o,0,s,Mo(t,r,l.hostVars,He),l)}function ru(t,o,r){const s=rt(o,t),l=N$(r),c=t[10],u=jp(t,Gp(t,l,null,r.onPush?32:16,s,o,c,c.createRenderer(s,r),null,null,null));t[o.index]=u}function e_(t,o,r,s,l,c){const u=c[o];if(null!==u){const p=s.setInput;for(let f=0;f<u.length;){const E=u[f++],y=u[f++],I=u[f++];null!==p?s.setInput(r,I,E,y):r[y]=I}}}function Ko(t,o){let r=null,s=0;for(;s<o.length;){const l=o[s];if(0!==l)if(5!==l){if("number"==typeof l)break;t.hasOwnProperty(l)&&(null===r&&(r=[]),r.push(l,t[l],o[s+1])),s+=2}else s+=2;else s+=4}return r}function $y(t,o){const r=$t(o,t);if(ju(r)){const s=r[1];48&r[2]?hl(s,r,s.template,r[8]):r[5]>0&&su(r)}}function su(t){for(let s=wr(t);null!==s;s=Zi(s))for(let l=10;l<s.length;l++){const c=s[l];if(ju(c))if(512&c[2]){const u=c[1];hl(u,c,u.template,c[8])}else c[5]>0&&su(c)}const r=t[1].components;if(null!==r)for(let s=0;s<r.length;s++){const l=$t(r[s],t);ju(l)&&l[5]>0&&su(l)}}function Ey(t,o){const r=$t(o,t),s=r[1];(function Ty(t,o){for(let r=o.length;r<t.blueprint.length;r++)o.push(t.blueprint[r])})(s,r),qf(s,r,r[8])}function jp(t,o){return t[13]?t[14][4]=o:t[13]=o,t[14]=o,o}function t_(t){for(;t;){t[2]|=32;const o=lr(t);if(Ah(t)&&!o)return t;t=o}return null}function ya(t,o,r,s=!0){const l=o[10];l.begin&&l.begin();try{hl(t,o,t.template,r)}catch(u){throw s&&o_(o,u),u}finally{l.end&&l.end()}}function va(t,o,r){Ph(0),o(t,r)}function n_(t){return t[7]||(t[7]=[])}function No(t){return t.cleanup||(t.cleanup=[])}function o_(t,o){const r=t[9],s=r?r.get(zc,null):null;s&&s.handleError(o)}function pl(t,o,r,s,l){for(let c=0;c<r.length;){const u=r[c++],p=r[c++],f=o[u],E=t.data[u];null!==E.setInput?E.setInput(f,l,s,p):f[p]=l}}function st(t,o,r){let s=r?t.styles:null,l=r?t.classes:null,c=0;if(null!==o)for(let u=0;u<o.length;u++){const p=o[u];"number"==typeof p?c=p:1==c?l=Jn(l,p):2==c&&(s=Jn(s,p+": "+o[++u]+";"))}r?t.styles=s:t.stylesWithoutHost=s,r?t.classes=l:t.classesWithoutHost=l}function iu(t,o,r,s,l=!1){for(;null!==r;){const c=o[r.index];if(null!==c&&s.push(mt(c)),or(c))for(let p=10;p<c.length;p++){const f=c[p],E=f[1].firstChild;null!==E&&iu(f[1],f,E,s)}const u=r.type;if(8&u)iu(t,o,r.child,s);else if(32&u){const p=pi(r,o);let f;for(;f=p();)s.push(f)}else if(16&u){const p=Zm(o,r);if(Array.isArray(p))s.push(...p);else{const f=lr(o[16]);iu(f[1],f,p,s,!0)}}r=l?r.projectionNext:r.next}return s}class Vd{constructor(o,r){this._lView=o,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,r=o[1];return iu(r,o,r.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(or(o)){const r=o[8],s=r?r.indexOf(this):-1;s>-1&&(Lc(o,s),Zu(r,s))}this._attachedToViewContainer=!1}ld(this._lView[1],this._lView)}onDestroy(o){!function Fd(t,o,r,s){const l=n_(o);null===r?l.push(s):(l.push(r),t.firstCreatePass&&No(t).push(s,l.length-1))}(this._lView[1],this._lView,null,o)}markForCheck(){t_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ya(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sd(t,o){hd(t,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=o}}class Wp extends Vd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;ya(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class H$ extends Cd{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const r=Tt(o);return new Ia(r,this.ngModule)}}function by(t){const o=[];for(let r in t)t.hasOwnProperty(r)&&o.push({propName:t[r],templateName:r});return o}class gl{constructor(o,r){this.injector=o,this.parentInjector=r}get(o,r,s){const l=this.injector.get(o,m$,s);return l!==m$||r===m$?l:this.parentInjector.get(o,r,s)}}class Ia extends tt{constructor(o,r){super(),this.componentDef=o,this.ngModule=r,this.componentType=o.type,this.selector=function $i(t){return t.map(Sp).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return by(this.componentDef.inputs)}get outputs(){return by(this.componentDef.outputs)}create(o,r,s,l){let c=(l=l||this.ngModule)instanceof Ls?l:l?.injector;c&&null!==this.componentDef.getStandaloneInjector&&(c=this.componentDef.getStandaloneInjector(c)||c);const u=c?new gl(o,c):o,p=u.get(ua,null);if(null===p)throw new b(407,!1);const f=u.get(_$,null),E=p.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",I=s?function dy(t,o,r){return t.selectRootElement(o,r===tr.ShadowDom)}(E,s,this.componentDef.encapsulation):Sr(E,y,function qC(t){const o=t.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(y)),A=this.componentDef.onPush?288:272,x=Bd(0,null,null,1,0,null,null,null,null,null),H=Gp(null,x,null,A,null,null,p,E,f,u,null);let X,J;Bh(H);try{const te=function Iy(t,o,r,s,l,c){const u=r[1];r[22]=t;const f=fr(u,22,2,"#host",null),E=f.mergedAttrs=o.hostAttrs;null!==E&&(st(f,E,!0),null!==t&&(vs(l,t,E),null!==f.classes&&Yo(l,t,f.classes),null!==f.styles&&Qm(l,t,f.styles)));const y=s.createRenderer(t,o),I=Gp(r,N$(o),null,o.onPush?32:16,r[22],f,s,y,c||null,null,null);return u.firstCreatePass&&(Xh(ai(f,r),u,o.type),F$(u,f),Ud(f,r.length,1)),jp(r,I),r[22]=I}(I,this.componentDef,H,p,E);if(I)if(s)vs(E,I,["ng-version",Of.full]);else{const{attrs:_e,classes:q}=function Md(t){const o=[],r=[];let s=1,l=2;for(;s<t.length;){let c=t[s];if("string"==typeof c)2===l?""!==c&&o.push(c,t[++s]):8===l&&r.push(c);else{if(!Oo(l))break;l=c}s++}return{attrs:o,classes:r}}(this.componentDef.selectors[0]);_e&&vs(E,I,_e),q&&q.length>0&&Yo(E,I,q.join(" "))}if(J=function Hl(t,o){return t.data[o]}(x,22),void 0!==r){const _e=J.projection=[];for(let q=0;q<this.ngContentSelectors.length;q++){const Ne=r[q];_e.push(null!=Ne?Array.from(Ne):null)}}X=function Xp(t,o,r,s){const l=r[1],c=function gy(t,o,r){const s=Mn();t.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),G$(t,s,o,Mo(t,o,1,null),r),L$(t,s));const l=mc(o,t,s.directiveStart,s);Ln(l,o);const c=rt(s,o);return c&&Ln(c,o),l}(l,r,o);if(t[8]=r[8]=c,null!==s)for(const p of s)p(c,o);if(o.contentQueries){const p=Mn();o.contentQueries(1,c,p.directiveStart)}const u=Mn();return!l.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(li(u.index),P$(r[1],u,0,u.directiveStart,u.directiveEnd,o),B$(o,c)),c}(te,this.componentDef,H,[Cy]),qf(x,H,null)}finally{Hg()}return new vy(this.componentType,X,ca(J,H),H,J)}}class vy extends class xC{}{constructor(o,r,s,l,c){super(),this.location=s,this._rootLView=l,this._tNode=c,this.instance=r,this.hostView=this.changeDetectorRef=new Wp(l),this.componentType=o}setInput(o,r){const s=this._tNode.inputs;let l;if(null!==s&&(l=s[o])){const c=this._rootLView;pl(c[1],c,l,o,r),function Hp(t,o){const r=$t(o,t);16&r[2]||(r[2]|=32)}(c,this._tNode.index)}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Cy(){const t=Mn();zu(K()[1],t)}function Wd(t,o,r,s,l){const u=l?"class":"style";pl(t,r,o.inputs[u],u,s)}function bl(t,o,r,s){const l=K(),c=pt(),u=22+t,p=l[11],f=l[u]=Sr(p,o,function ZT(){return Ye.lFrame.currentNamespace}()),E=c.firstCreatePass?function Ny(t,o,r,s,l,c,u){const p=o.consts,E=fr(o,t,2,l,Hi(p,c));return function Gd(t,o,r,s){let l=!1;if(mm()){const c=function Vp(t,o,r){const s=t.directiveRegistry;let l=null;if(s)for(let c=0;c<s.length;c++){const u=s[c];wp(r,u.selectors,!1)&&(l||(l=[]),Xh(ai(r,o),t,u.type),yn(u)?(F$(t,r),l.unshift(u)):l.push(u))}return l}(t,o,r),u=null===s?null:{"":-1};if(null!==c){l=!0,Ud(r,t.data.length,c.length);for(let y=0;y<c.length;y++){const I=c[y];I.providersResolver&&I.providersResolver(I)}let p=!1,f=!1,E=Mo(t,o,c.length,null);for(let y=0;y<c.length;y++){const I=c[y];r.mergedAttrs=gc(r.mergedAttrs,I.hostAttrs),G$(t,r,o,E,I),_y(E,I,u),null!==I.contentQueries&&(r.flags|=8),(null!==I.hostBindings||null!==I.hostAttrs||0!==I.hostVars)&&(r.flags|=128);const A=I.type.prototype;!p&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r.index),p=!0),!f&&(A.ngOnChanges||A.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r.index),f=!0),E++}L$(t,r)}u&&function ou(t,o,r){if(o){const s=t.localNames=[];for(let l=0;l<o.length;l+=2){const c=r[o[l+1]];if(null==c)throw new b(-301,!1);s.push(o[l],c)}}}(r,s,u)}return r.mergedAttrs=gc(r.mergedAttrs,r.attrs),l}(o,r,E,Hi(p,u)),null!==E.attrs&&st(E,E.attrs,!1),null!==E.mergedAttrs&&st(E,E.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,E),E}(u,c,l,0,o,r,s):c.data[u];bs(E,!0);const y=E.mergedAttrs;null!==y&&vs(p,f,y);const I=E.classes;null!==I&&Yo(p,f,I);const A=E.styles;return null!==A&&Qm(p,f,A),64!=(64&E.flags)&&up(c,l,f,E),0===function GT(){return Ye.lFrame.elementDepthCount}()&&Ln(f,l),function UT(){Ye.lFrame.elementDepthCount++}(),lc(E)&&(function Zf(t,o,r){!mm()||(function fy(t,o,r,s){const l=r.directiveStart,c=r.directiveEnd;t.firstCreatePass||ai(r,o),Ln(s,o);const u=r.initialInputs;for(let p=l;p<c;p++){const f=t.data[p],E=yn(f);E&&ru(o,r,f);const y=mc(o,t,p,r);Ln(y,o),null!==u&&e_(0,p-l,y,f,0,u),E&&($t(r.index,o)[8]=y)}}(t,o,r,rt(r,o)),128==(128&r.flags)&&function nu(t,o,r){const s=r.directiveStart,l=r.directiveEnd,c=r.index,u=function YT(){return Ye.lFrame.currentDirectiveIndex}();try{li(c);for(let p=s;p<l;p++){const f=t.data[p],E=o[p];Pg(p),(null!==f.hostBindings||0!==f.hostVars||null!==f.hostAttrs)&&B$(f,E)}}finally{li(-1),Pg(u)}}(t,o,r))}(c,l,E),function Ti(t,o,r){if(Hu(o)){const l=o.directiveEnd;for(let c=o.directiveStart;c<l;c++){const u=t.data[c];u.contentQueries&&u.contentQueries(1,r[c],c)}}}(c,E,l)),null!==s&&function tu(t,o,r=rt){const s=o.localNames;if(null!==s){let l=o.index+1;for(let c=0;c<s.length;c+=2){const u=s[c+1],p=-1===u?r(o,t):t[u];t[l++]=p}}}(l,E),bl}function Sa(){let t=Mn();xh()?function ri(){Ye.lFrame.isParent=!1}():(t=t.parent,bs(t,!1));const o=t;!function HT(){Ye.lFrame.elementDepthCount--}();const r=pt();return r.firstCreatePass&&(zu(r,t),Hu(t)&&r.queries.elementEnd(t)),null!=o.classesWithoutHost&&function wm(t){return 0!=(16&t.flags)}(o)&&Wd(r,o,K(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Sm(t){return 0!=(32&t.flags)}(o)&&Wd(r,o,K(),o.stylesWithoutHost,!1),Sa}function Da(t,o,r,s){return bl(t,o,r,s),Sa(),Da}function qp(t){return!!t&&"function"==typeof t.then}const q$=function Zp(t){return!!t&&"function"==typeof t.subscribe};function Aa(t,o,r,s){const l=K(),c=pt(),u=Mn();return function Q$(t,o,r,s,l,c,u,p){const f=lc(s),y=t.firstCreatePass&&No(t),I=o[8],A=n_(o);let x=!0;if(3&s.type||p){const J=rt(s,o),te=p?p(J):J,_e=A.length,q=p?bt=>p(mt(bt[s.index])):s.index;let Ne=null;if(!p&&f&&(Ne=function g_(t,o,r,s){const l=t.cleanup;if(null!=l)for(let c=0;c<l.length-1;c+=2){const u=l[c];if(u===r&&l[c+1]===s){const p=o[7],f=l[c+2];return p.length>f?p[f]:null}"string"==typeof u&&(c+=2)}return null}(t,o,l,s.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=c,Ne.__ngLastListenerFn__=c,x=!1;else{c=eE(s,o,I,c,!1);const bt=r.listen(te,l,c);A.push(c,bt),y&&y.push(l,q,_e,_e+1)}}else c=eE(s,o,I,c,!1);const H=s.outputs;let X;if(x&&null!==H&&(X=H[l])){const J=X.length;if(J)for(let te=0;te<J;te+=2){const $n=o[X[te]][X[te+1]].subscribe(c),Eh=A.length;A.push(c,$n),y&&y.push(l,s.index,Eh,-(Eh+1))}}}(c,l,l[11],u,t,o,0,s),Aa}function Qp(t,o,r,s){try{return!1!==r(s)}catch(l){return o_(t,l),!1}}function eE(t,o,r,s,l){return function c(u){if(u===Function)return s;t_(2&t.flags?$t(t.index,o):o);let f=Qp(o,0,s,u),E=c.__ngNextListenerFn__;for(;E;)f=Qp(o,0,E,u)&&f,E=E.__ngNextListenerFn__;return l&&!1===f&&(u.preventDefault(),u.returnValue=!1),f}}function v_(t,o=""){const r=K(),s=pt(),l=t+22,c=s.firstCreatePass?fr(s,l,1,o,null):s.data[l],u=r[l]=function As(t,o){return t.createText(o)}(r[11],o);up(s,r,u,c),bs(c,!1)}const _u="en-US";let DE=_u;class ch{}class TR{}class bR extends ch{constructor(o,r){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new H$(this);const s=Qn(o);this._bootstrapComponents=_i(s.bootstrap),this._r3Injector=Lf(o,r,[{provide:ch,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],be(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Mv extends TR{constructor(o){super(),this.moduleType=o}create(o){return new bR(this.moduleType,o)}}class oO extends ch{constructor(o,r,s){super(),this.componentFactoryResolver=new H$(this),this.instance=null;const l=new Df([...o,{provide:ch,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],r||yp(),s,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function UE(t,o,r=null){return new oO(t,o,r).injector}let rO=(()=>{class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r.id)){const s=Ht(0,r.type),l=s.length>0?UE([s],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r.id,l)}return this.cachedInjectors.get(r.id)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=Ke({token:t,providedIn:"environment",factory:()=>new t(Oe(Ls))}),t})();function yR(t){t.getStandaloneInjector=o=>o.get(rO).getOrCreateStandaloneInjector(t)}function Lv(t){return o=>{setTimeout(t,void 0,o)}}const $r=class OO extends F{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,r,s){let l=o,c=r||(()=>null),u=s;if(o&&"object"==typeof o){const f=o;l=f.next?.bind(f),c=f.error?.bind(f),u=f.complete?.bind(f)}this.__isAsync&&(c=Lv(c),l&&(l=Lv(l)),u&&(u=Lv(u)));const p=super.subscribe({next:l,error:c,complete:u});return o instanceof S&&o.add(p),p}};let Ri=(()=>{class t{}return t.__NG_ELEMENT_ID__=LO,t})();function LO(){return function xR(t,o){let r;const s=o[t.index];if(or(s))r=s;else{let l;if(8&t.type)l=mt(s);else{const c=o[11];l=c.createComment("");const u=rt(t,o);cr(c,ud(c,u),l,function qm(t,o){return t.nextSibling(o)}(c,u),!1)}o[t.index]=r=function Ta(t,o,r,s){return new Array(t,!0,!1,o,null,0,s,r,null,null)}(s,o,l,t),jp(o,r)}return new NR(r,t,o)}(Mn(),K())}const xO=Ri,NR=class extends xO{constructor(o,r,s){super(),this._lContainer=o,this._hostTNode=r,this._hostLView=s}get element(){return ca(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const o=Vi(this._hostTNode,this._hostLView);if(zg(o)){const r=_c(o,this._hostLView),s=fc(o);return new ji(r[1].data[s+8],r)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const r=LR(this._lContainer);return null!==r&&r[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,r,s){let l,c;"number"==typeof s?l=s:null!=s&&(l=s.index,c=s.injector);const u=o.createEmbeddedView(r||{},c);return this.insert(u,l),u}createComponent(o,r,s,l,c){const u=o&&!function bc(t){return"function"==typeof t}(o);let p;if(u)p=r;else{const I=r||{};p=I.index,s=I.injector,l=I.projectableNodes,c=I.environmentInjector||I.ngModuleRef}const f=u?o:new Ia(Tt(o)),E=s||this.parentInjector;if(!c&&null==f.ngModule){const A=(u?E:this.parentInjector).get(Ls,null);A&&(c=A)}const y=f.create(E,l,void 0,c);return this.insert(y.hostView,p),y}insert(o,r){const s=o._lView,l=s[1];if(function FT(t){return or(t[3])}(s)){const y=this.indexOf(o);if(-1!==y)this.detach(y);else{const I=s[3],A=new NR(I,I[6],I[3]);A.detach(A.indexOf(o))}}const c=this._adjustIndex(r),u=this._lContainer;!function ap(t,o,r,s){const l=10+s,c=r.length;s>0&&(r[l-1][4]=o),s<c-10?(o[4]=r[l],Bm(r,10+s,o)):(r.push(o),o[4]=null),o[3]=r;const u=o[17];null!==u&&r!==u&&function cp(t,o){const r=t[9];o[16]!==o[3][3][16]&&(t[2]=!0),null===r?t[9]=[o]:r.push(o)}(u,o);const p=o[19];null!==p&&p.insertView(t),o[2]|=64}(l,s,u,c);const p=Bc(c,u),f=s[11],E=ud(f,u[7]);return null!==E&&function ip(t,o,r,s,l,c){s[0]=l,s[6]=o,hd(t,s,r,1,l,c)}(l,u[6],f,s,E,p),o.attachToViewContainerRef(),Bm(Pv(u),c,o),o}move(o,r){return this.insert(o,r)}indexOf(o){const r=LR(this._lContainer);return null!==r?r.indexOf(o):-1}remove(o){const r=this._adjustIndex(o,-1),s=Lc(this._lContainer,r);s&&(Zu(Pv(this._lContainer),r),ld(s[1],s))}detach(o){const r=this._adjustIndex(o,-1),s=Lc(this._lContainer,r);return s&&null!=Zu(Pv(this._lContainer),r)?new Vd(s):null}_adjustIndex(o,r=0){return o??this.length+r}};function LR(t){return t[8]}function Pv(t){return t[8]||(t[8]=[])}function jE(...t){}const WE=new We("Application Initializer");let XE=(()=>{class t{constructor(r){this.appInits=r,this.resolve=jE,this.reject=jE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,l)=>{this.resolve=s,this.reject=l})}runInitializers(){if(this.initialized)return;const r=[],s=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const c=this.appInits[l]();if(qp(c))r.push(c);else if(q$(c)){const u=new Promise((p,f)=>{c.subscribe({complete:p,error:f})});r.push(u)}}Promise.all(r).then(()=>{s()}).catch(l=>{this.reject(l)}),0===r.length&&s(),this.initialized=!0}}return t.\u0275fac=function(r){return new(r||t)(Oe(WE,8))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const x_=new We("AppId",{providedIn:"root",factory:function iw(){return`${Jv()}${Jv()}${Jv()}`}});function Jv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lw=new We("Platform Initializer"),aw=new We("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cw=new We("appBootstrapListener");let hA=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Ba=new We("LocaleId",{providedIn:"root",factory:()=>pn(Ba,ke.Optional|ke.SkipSelf)||function pA(){return typeof $localize<"u"&&$localize.locale||_u}()});class fA{constructor(o,r){this.ngModuleFactory=o,this.componentFactories=r}}let qv=(()=>{class t{compileModuleSync(r){return new Mv(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const s=this.compileModuleSync(r),c=_i(Qn(r).declarations).reduce((u,p)=>{const f=Tt(p);return f&&u.push(new Ia(f)),u},[]);return new fA(s,c)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const $A=(()=>Promise.resolve(0))();function Zv(t){typeof Zone>"u"?$A.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class oo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $r(!1),this.onMicrotaskEmpty=new $r(!1),this.onStable=new $r(!1),this.onError=new $r(!1),typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const c=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new c("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!s&&r,l.shouldCoalesceRunChangeDetection=s,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function EA(){let t=At.requestAnimationFrame,o=At.cancelAnimationFrame;if(typeof Zone<"u"&&t&&o){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const s=o[Zone.__symbol__("OriginalDelegate")];s&&(o=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function yA(t){const o=()=>{!function bA(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,eI(t),t.isCheckStableRunning=!0,Qv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),eI(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,s,l,c,u,p)=>{try{return hw(t),r.invokeTask(l,c,u,p)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||t.shouldCoalesceRunChangeDetection)&&o(),pw(t)}},onInvoke:(r,s,l,c,u,p,f)=>{try{return hw(t),r.invoke(l,c,u,p,f)}finally{t.shouldCoalesceRunChangeDetection&&o(),pw(t)}},onHasTask:(r,s,l,c)=>{r.hasTask(l,c),s===l&&("microTask"==c.change?(t._hasPendingMicrotasks=c.microTask,eI(t),Qv(t)):"macroTask"==c.change&&(t.hasPendingMacrotasks=c.macroTask))},onHandleError:(r,s,l,c)=>(r.handleError(l,c),t.runOutsideAngular(()=>t.onError.emit(c)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oo.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(oo.isInAngularZone())throw new b(909,!1)}run(o,r,s){return this._inner.run(o,r,s)}runTask(o,r,s,l){const c=this._inner,u=c.scheduleEventTask("NgZoneEvent: "+l,o,TA,jE,jE);try{return c.runTask(u,r,s)}finally{c.cancelTask(u)}}runGuarded(o,r,s){return this._inner.runGuarded(o,r,s)}runOutsideAngular(o){return this._outer.run(o)}}const TA={};function Qv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function eI(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function hw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pw(t){t._nesting--,Qv(t)}class vA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $r,this.onMicrotaskEmpty=new $r,this.onStable=new $r,this.onError=new $r}run(o,r,s){return o.apply(r,s)}runGuarded(o,r,s){return o.apply(r,s)}runOutsideAngular(o){return o()}runTask(o,r,s,l){return o.apply(r,s)}}const gw=new We(""),zE=new We("");let oI,tI=(()=>{class t{constructor(r,s,l){this._ngZone=r,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,oI||(function IA(t){oI=t}(l),l.addToWindow(s)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oo.assertNotInAngularZone(),Zv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zv(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(r)||(clearTimeout(s.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,s,l){let c=-1;s&&s>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==c),r(this._didWork,this.getPendingTasks())},s)),this._callbacks.push({doneCb:r,timeoutId:c,updateCb:l})}whenStable(r,s,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,s,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,s,l){return[]}}return t.\u0275fac=function(r){return new(r||t)(Oe(oo),Oe(nI),Oe(zE))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),nI=(()=>{class t{constructor(){this._applications=new Map}registerApplication(r,s){this._applications.set(r,s)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,s=!0){return oI?.findTestabilityInTree(this,r,s)??null}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),mu=null;const fw=new We("AllowMultipleToken"),rI=new We("PlatformDestroyListeners");class _w{constructor(o,r){this.name=o,this.token=r}}function $w(t,o,r=[]){const s=`Platform: ${o}`,l=new We(s);return(c=[])=>{let u=sI();if(!u||u.injector.get(fw,!1)){const p=[...r,...c,{provide:l,useValue:!0}];t?t(p):function wA(t){if(mu&&!mu.get(fw,!1))throw new b(400,!1);mu=t;const o=t.get(Tw);(function mw(t){const o=t.get(lw,null);o&&o.forEach(r=>r())})(t)}(function Ew(t=[],o){return pr.create({name:o,providers:[{provide:Sf,useValue:"platform"},{provide:rI,useValue:new Set([()=>mu=null])},...t]})}(p,s))}return function DA(t){const o=sI();if(!o)throw new b(401,!1);return o}()}}function sI(){return mu?.get(Tw)??null}let Tw=(()=>{class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,s){const l=function yw(t,o){let r;return r="noop"===t?new vA:("zone.js"===t?void 0:t)||new oo(o),r}(s?.ngZone,function bw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(s)),c=[{provide:oo,useValue:l}];return l.run(()=>{const u=pr.create({providers:c,parent:this.injector,name:r.moduleType.name}),p=r.create(u),f=p.injector.get(zc,null);if(!f)throw new b(402,!1);return l.runOutsideAngular(()=>{const E=l.onError.subscribe({next:y=>{f.handleError(y)}});p.onDestroy(()=>{KE(this._modules,p),E.unsubscribe()})}),function vw(t,o,r){try{const s=r();return qp(s)?s.catch(l=>{throw o.runOutsideAngular(()=>t.handleError(l)),l}):s}catch(s){throw o.runOutsideAngular(()=>t.handleError(s)),s}}(f,l,()=>{const E=p.injector.get(XE);return E.runInitializers(),E.donePromise.then(()=>(function OE(t){Ut(t,"Expected localeId to be defined"),"string"==typeof t&&(DE=t.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Ba,_u)||_u),this._moduleDoBootstrap(p),p))})})}bootstrapModule(r,s=[]){const l=Iw({},s);return function CA(t,o,r){const s=new Mv(r);return Promise.resolve(s)}(0,0,r).then(c=>this.bootstrapModuleFactory(c,l))}_moduleDoBootstrap(r){const s=r.injector.get(YE);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(l=>s.bootstrap(l));else{if(!r.instance.ngDoBootstrap)throw new b(403,!1);r.instance.ngDoBootstrap(s)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new b(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const r=this._injector.get(rI,null);r&&(r.forEach(s=>s()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(r){return new(r||t)(Oe(pr))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function Iw(t,o){return Array.isArray(o)?o.reduce(Iw,t):{...t,...o}}let YE=(()=>{class t{constructor(r,s,l){this._zone=r,this._injector=s,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new Dt(p=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{p.next(this._stable),p.complete()})}),u=new Dt(p=>{let f;this._zone.runOutsideAngular(()=>{f=this._zone.onStable.subscribe(()=>{oo.assertNotInAngularZone(),Zv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,p.next(!0))})})});const E=this._zone.onUnstable.subscribe(()=>{oo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{p.next(!1)}))});return()=>{f.unsubscribe(),E.unsubscribe()}});this.isStable=function Te(...t){const o=Hr(t),r=function Ks(t,o){return"number"==typeof me(t)?t.pop():o}(t,1/0),s=t;return s.length?1===s.length?cn(s[0]):Xt(r)(dn(s,o)):Kn}(c,u.pipe(function Ho(t={}){const{connector:o=(()=>new F),resetOnError:r=!0,resetOnComplete:s=!0,resetOnRefCountZero:l=!0}=t;return c=>{let u,p,f,E=0,y=!1,I=!1;const A=()=>{p?.unsubscribe(),p=void 0},x=()=>{A(),u=f=void 0,y=I=!1},H=()=>{const X=u;x(),X?.unsubscribe()};return Ge((X,J)=>{E++,!I&&!y&&A();const te=f=f??o();J.add(()=>{E--,0===E&&!I&&!y&&(p=oe(H,l))}),te.subscribe(J),!u&&E>0&&(u=new io({next:_e=>te.next(_e),error:_e=>{I=!0,A(),p=oe(x,r,_e),te.error(_e)},complete:()=>{y=!0,A(),p=oe(x,s),te.complete()}}),cn(X).subscribe(u))})(c)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,s){const l=r instanceof tt;if(!this._injector.get(XE).done)throw!l&&function Pi(t){const o=Tt(t)||Rn(t)||Tn(t);return null!==o&&o.standalone}(r),new b(405,false);let u;u=l?r:this._injector.get(Cd).resolveComponentFactory(r),this.componentTypes.push(u.componentType);const p=function RA(t){return t.isBoundToModule}(u)?void 0:this._injector.get(ch),E=u.create(pr.NULL,[],s||u.selector,p),y=E.location.nativeElement,I=E.injector.get(gw,null);return I?.registerApplication(y),E.onDestroy(()=>{this.detachView(E.hostView),KE(this.components,E),I?.unregisterApplication(y)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new b(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const s=r;this._views.push(s),s.attachToAppRef(this)}detachView(r){const s=r;KE(this._views,s),s.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(cw,[]).concat(this._bootstrapListeners).forEach(l=>l(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>KE(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new b(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(r){return new(r||t)(Oe(oo),Oe(Ls),Oe(zc))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function KE(t,o){const r=t.indexOf(o);r>-1&&t.splice(r,1)}let Rw=!0,iI=(()=>{class t{}return t.__NG_ELEMENT_ID__=kA,t})();function kA(t){return function MA(t,o,r){if(to(t)&&!r){const s=$t(t.index,o);return new Vd(s,s)}return 47&t.type?new Vd(o[16],o):null}(Mn(),K(),16==(16&t))}const XA=$w(null,"core",[]);let zA=(()=>{class t{constructor(r){}}return t.\u0275fac=function(r){return new(r||t)(Oe(YE))},t.\u0275mod=qs({type:t}),t.\u0275inj=Vr({}),t})(),QE=null;function $u(){return QE}const Nr=new We("DocumentToken");let dI=(()=>{class t{historyGo(r){throw new Error("Not implemented")}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:function(){return function qA(){return Oe(Pw)}()},providedIn:"platform"}),t})();const ZA=new We("Location Initialized");let Pw=(()=>{class t extends dI{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $u().getBaseHref(this._doc)}onPopState(r){const s=$u().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){const s=$u().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,s,l){Bw()?this._history.pushState(r,s,l):this.location.hash=l}replaceState(r,s,l){Bw()?this._history.replaceState(r,s,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return t.\u0275fac=function(r){return new(r||t)(Oe(Nr))},t.\u0275prov=Ke({token:t,factory:function(){return function QA(){return new Pw(Oe(Nr))}()},providedIn:"platform"}),t})();function Bw(){return!!window.history.pushState}function hI(t,o){if(0==t.length)return o;if(0==o.length)return t;let r=0;return t.endsWith("/")&&r++,o.startsWith("/")&&r++,2==r?t+o.substring(1):1==r?t+o:t+"/"+o}function Fw(t){const o=t.match(/#|\?|$/),r=o&&o.index||t.length;return t.slice(0,r-("/"===t[r-1]?1:0))+t.slice(r)}function Ga(t){return t&&"?"!==t[0]?"?"+t:t}let dh=(()=>{class t{historyGo(r){throw new Error("Not implemented")}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:function(){return pn(Uw)},providedIn:"root"}),t})();const Gw=new We("appBaseHref");let Uw=(()=>{class t extends dh{constructor(r,s){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??pn(Nr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return hI(this._baseHref,r)}path(r=!1){const s=this._platformLocation.pathname+Ga(this._platformLocation.search),l=this._platformLocation.hash;return l&&r?`${s}${l}`:s}pushState(r,s,l,c){const u=this.prepareExternalUrl(l+Ga(c));this._platformLocation.pushState(r,s,u)}replaceState(r,s,l,c){const u=this.prepareExternalUrl(l+Ga(c));this._platformLocation.replaceState(r,s,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return t.\u0275fac=function(r){return new(r||t)(Oe(dI),Oe(Gw,8))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ek=(()=>{class t extends dh{constructor(r,s){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(r){const s=hI(this._baseHref,r);return s.length>0?"#"+s:s}pushState(r,s,l,c){let u=this.prepareExternalUrl(l+Ga(c));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(r,s,u)}replaceState(r,s,l,c){let u=this.prepareExternalUrl(l+Ga(c));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(r,s,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return t.\u0275fac=function(r){return new(r||t)(Oe(dI),Oe(Gw,8))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),pI=(()=>{class t{constructor(r){this._subject=new $r,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const s=this._locationStrategy.getBaseHref();this._baseHref=Fw(Hw(s)),this._locationStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+Ga(s))}normalize(r){return t.stripTrailingSlash(function nk(t,o){return t&&o.startsWith(t)?o.substring(t.length):o}(this._baseHref,Hw(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,s="",l=null){this._locationStrategy.pushState(l,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ga(s)),l)}replaceState(r,s="",l=null){this._locationStrategy.replaceState(l,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ga(s)),l)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)})),()=>{const s=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(s,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(l=>l(r,s))}subscribe(r,s,l){return this._subject.subscribe({next:r,error:s,complete:l})}}return t.normalizeQueryParams=Ga,t.joinWithSlash=hI,t.stripTrailingSlash=Fw,t.\u0275fac=function(r){return new(r||t)(Oe(dh))},t.\u0275prov=Ke({token:t,factory:function(){return function tk(){return new pI(Oe(dh))}()},providedIn:"root"}),t})();function Hw(t){return t.replace(/\/index.html$/,"")}let EM=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=qs({type:t}),t.\u0275inj=Vr({}),t})();let vM=(()=>{class t{}return t.\u0275prov=Ke({token:t,providedIn:"root",factory:()=>new IM(Oe(Nr),window)}),t})();class IM{constructor(o,r){this.document=o,this.window=r,this.offset=()=>[0,0]}setOffset(o){this.offset=Array.isArray(o)?()=>o:o}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(o){this.supportsScrolling()&&this.window.scrollTo(o[0],o[1])}scrollToAnchor(o){if(!this.supportsScrolling())return;const r=function CM(t,o){const r=t.getElementById(o)||t.getElementsByName(o)[0];if(r)return r;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const s=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let l=s.currentNode;for(;l;){const c=l.shadowRoot;if(c){const u=c.getElementById(o)||c.querySelector(`[name="${o}"]`);if(u)return u}l=s.nextNode()}}return null}(this.document,o);r&&(this.scrollToElement(r),r.focus())}setHistoryScrollRestoration(o){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=o)}}scrollToElement(o){const r=o.getBoundingClientRect(),s=r.left+this.window.pageXOffset,l=r.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(s-c[0],l-c[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const o=rS(this.window.history)||rS(Object.getPrototypeOf(this.window.history));return!(!o||!o.writable&&!o.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function rS(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class DI extends class jM extends class JA{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function KA(t){QE||(QE=t)}(new DI)}onAndCancel(o,r,s){return o.addEventListener(r,s,!1),()=>{o.removeEventListener(r,s,!1)}}dispatchEvent(o,r){o.dispatchEvent(r)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,r){return(r=r||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,r){return"window"===r?window:"document"===r?o:"body"===r?o.body:null}getBaseHref(o){const r=function WM(){return U_=U_||document.querySelector("base"),U_?U_.getAttribute("href"):null}();return null==r?null:function XM(t){uT=uT||document.createElement("a"),uT.setAttribute("href",t);const o=uT.pathname;return"/"===o.charAt(0)?o:`/${o}`}(r)}resetBaseElement(){U_=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return function Fk(t,o){o=encodeURIComponent(o);for(const r of t.split(";")){const s=r.indexOf("="),[l,c]=-1==s?[r,""]:[r.slice(0,s),r.slice(s+1)];if(l.trim()===o)return decodeURIComponent(c)}return null}(document.cookie,o)}}let uT,U_=null;const aS=new We("TRANSITION_ID"),YM=[{provide:WE,useFactory:function zM(t,o,r){return()=>{r.get(XE).donePromise.then(()=>{const s=$u(),l=o.querySelectorAll(`style[ng-transition="${t}"]`);for(let c=0;c<l.length;c++)s.remove(l[c])})}},deps:[aS,Nr,pr],multi:!0}];let JM=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const dT=new We("EventManagerPlugins");let hT=(()=>{class t{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(l=>l.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,s,l){return this._findPluginFor(s).addEventListener(r,s,l)}addGlobalEventListener(r,s,l){return this._findPluginFor(s).addGlobalEventListener(r,s,l)}getZone(){return this._zone}_findPluginFor(r){const s=this._eventNameToPlugin.get(r);if(s)return s;const l=this._plugins;for(let c=0;c<l.length;c++){const u=l[c];if(u.supports(r))return this._eventNameToPlugin.set(r,u),u}throw new Error(`No event manager plugin found for event ${r}`)}}return t.\u0275fac=function(r){return new(r||t)(Oe(dT),Oe(oo))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();class cS{constructor(o){this._doc=o}addGlobalEventListener(o,r,s){const l=$u().getGlobalEventTarget(this._doc,o);if(!l)throw new Error(`Unsupported event target ${l} for event ${r}`);return this.addEventListener(l,r,s)}}let uS=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(r){const s=new Set;r.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),s.add(l))}),this.onStylesAdded(s)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),H_=(()=>{class t extends uS{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,s,l){r.forEach(c=>{const u=this._doc.createElement("style");u.textContent=c,l.push(s.appendChild(u))})}addHost(r){const s=[];this._addStylesToHost(this._stylesSet,r,s),this._hostNodes.set(r,s)}removeHost(r){const s=this._hostNodes.get(r);s&&s.forEach(dS),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((s,l)=>{this._addStylesToHost(r,l,s)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(dS))}}return t.\u0275fac=function(r){return new(r||t)(Oe(Nr))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function dS(t){$u().remove(t)}const OI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},AI=/%COMP%/g;function pT(t,o,r){for(let s=0;s<o.length;s++){let l=o[s];Array.isArray(l)?pT(t,l,r):(l=l.replace(AI,t),r.push(l))}return r}function gS(t){return o=>{if("__ngUnwrap__"===o)return t;!1===t(o)&&(o.preventDefault(),o.returnValue=!1)}}let kI=(()=>{class t{constructor(r,s,l){this.eventManager=r,this.sharedStylesHost=s,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new MI(r)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;switch(s.encapsulation){case tr.Emulated:{let l=this.rendererByCompId.get(s.id);return l||(l=new nN(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,l)),l.applyToHost(r),l}case 1:case tr.ShadowDom:return new oN(this.eventManager,this.sharedStylesHost,r,s);default:if(!this.rendererByCompId.has(s.id)){const l=pT(s.id,s.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(r){return new(r||t)(Oe(hT),Oe(H_),Oe(x_))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();class MI{constructor(o){this.eventManager=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(o,r){return r?document.createElementNS(OI[r]||r,o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,r){(_S(o)?o.content:o).appendChild(r)}insertBefore(o,r,s){o&&(_S(o)?o.content:o).insertBefore(r,s)}removeChild(o,r){o&&o.removeChild(r)}selectRootElement(o,r){let s="string"==typeof o?document.querySelector(o):o;if(!s)throw new Error(`The selector "${o}" did not match any elements`);return r||(s.textContent=""),s}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,r,s,l){if(l){r=l+":"+r;const c=OI[l];c?o.setAttributeNS(c,r,s):o.setAttribute(r,s)}else o.setAttribute(r,s)}removeAttribute(o,r,s){if(s){const l=OI[s];l?o.removeAttributeNS(l,r):o.removeAttribute(`${s}:${r}`)}else o.removeAttribute(r)}addClass(o,r){o.classList.add(r)}removeClass(o,r){o.classList.remove(r)}setStyle(o,r,s,l){l&(go.DashCase|go.Important)?o.style.setProperty(r,s,l&go.Important?"important":""):o.style[r]=s}removeStyle(o,r,s){s&go.DashCase?o.style.removeProperty(r):o.style[r]=""}setProperty(o,r,s){o[r]=s}setValue(o,r){o.nodeValue=r}listen(o,r,s){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,r,gS(s)):this.eventManager.addEventListener(o,r,gS(s))}}function _S(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class nN extends MI{constructor(o,r,s,l){super(o),this.component=s;const c=pT(l+"-"+s.id,s.styles,[]);r.addStyles(c),this.contentAttr=function QM(t){return"_ngcontent-%COMP%".replace(AI,t)}(l+"-"+s.id),this.hostAttr=function eN(t){return"_nghost-%COMP%".replace(AI,t)}(l+"-"+s.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,r){const s=super.createElement(o,r);return super.setAttribute(s,this.contentAttr,""),s}}class oN extends MI{constructor(o,r,s,l){super(o),this.sharedStylesHost=r,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=pT(l.id,l.styles,[]);for(let u=0;u<c.length;u++){const p=document.createElement("style");p.textContent=c[u],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,r){return super.appendChild(this.nodeOrShadowRoot(o),r)}insertBefore(o,r,s){return super.insertBefore(this.nodeOrShadowRoot(o),r,s)}removeChild(o,r){return super.removeChild(this.nodeOrShadowRoot(o),r)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let rN=(()=>{class t extends cS{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,l){return r.addEventListener(s,l,!1),()=>this.removeEventListener(r,s,l)}removeEventListener(r,s,l){return r.removeEventListener(s,l)}}return t.\u0275fac=function(r){return new(r||t)(Oe(Nr))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const mS=["alt","control","meta","shift"],sN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lN=(()=>{class t extends cS{constructor(r){super(r)}supports(r){return null!=t.parseEventName(r)}addEventListener(r,s,l){const c=t.parseEventName(s),u=t.eventCallback(c.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$u().onAndCancel(r,c.domEventName,u))}static parseEventName(r){const s=r.toLowerCase().split("."),l=s.shift();if(0===s.length||"keydown"!==l&&"keyup"!==l)return null;const c=t._normalizeKey(s.pop());let u="",p=s.indexOf("code");if(p>-1&&(s.splice(p,1),u="code."),mS.forEach(E=>{const y=s.indexOf(E);y>-1&&(s.splice(y,1),u+=E+".")}),u+=c,0!=s.length||0===c.length)return null;const f={};return f.domEventName=l,f.fullKey=u,f}static matchEventFullKeyCode(r,s){let l=sN[r.key]||r.key,c="";return s.indexOf("code.")>-1&&(l=r.code,c="code."),!(null==l||!l)&&(l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),mS.forEach(u=>{u!==l&&(0,iN[u])(r)&&(c+=u+".")}),c+=l,c===s)}static eventCallback(r,s,l){return c=>{t.matchEventFullKeyCode(c,r)&&l.runGuarded(()=>s(c))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return t.\u0275fac=function(r){return new(r||t)(Oe(Nr))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const dN=$w(XA,"browser",[{provide:aw,useValue:"browser"},{provide:lw,useValue:function aN(){DI.makeCurrent()},multi:!0},{provide:Nr,useFactory:function uN(){return function t$(t){bf=t}(document),document},deps:[]}]),TS=new We(""),bS=[{provide:zE,useClass:class KM{addToWindow(o){At.getAngularTestability=(s,l=!0)=>{const c=o.findTestabilityInTree(s,l);if(null==c)throw new Error("Could not find testability for element.");return c},At.getAllAngularTestabilities=()=>o.getAllTestabilities(),At.getAllAngularRootElements=()=>o.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(s=>{const l=At.getAllAngularTestabilities();let c=l.length,u=!1;const p=function(f){u=u||f,c--,0==c&&s(u)};l.forEach(function(f){f.whenStable(p)})})}findTestabilityInTree(o,r,s){return null==r?null:o.getTestability(r)??(s?$u().isShadowRoot(r)?this.findTestabilityInTree(o,r.host,!0):this.findTestabilityInTree(o,r.parentElement,!0):null)}},deps:[]},{provide:gw,useClass:tI,deps:[oo,nI,zE]},{provide:tI,useClass:tI,deps:[oo,nI,zE]}],yS=[{provide:Sf,useValue:"root"},{provide:zc,useFactory:function cN(){return new zc},deps:[]},{provide:dT,useClass:rN,multi:!0,deps:[Nr,oo,aw]},{provide:dT,useClass:lN,multi:!0,deps:[Nr]},{provide:kI,useClass:kI,deps:[hT,H_,x_]},{provide:ua,useExisting:kI},{provide:uS,useExisting:H_},{provide:H_,useClass:H_,deps:[Nr]},{provide:hT,useClass:hT,deps:[dT,oo]},{provide:class RM{},useClass:JM,deps:[]},[]];let hN=(()=>{class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:x_,useValue:r.appId},{provide:aS,useExisting:x_},YM]}}}return t.\u0275fac=function(r){return new(r||t)(Oe(TS,12))},t.\u0275mod=qs({type:t}),t.\u0275inj=Vr({providers:[...yS,...bS],imports:[EM,zA]}),t})(),vS=(()=>{class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return t.\u0275fac=function(r){return new(r||t)(Oe(Nr))},t.\u0275prov=Ke({token:t,factory:function(r){let s=null;return s=r?new r:function gN(){return new vS(Oe(Nr))}(),s},providedIn:"root"}),t})();function Be(...t){return dn(t,Hr(t))}typeof window<"u"&&window;class Oi extends F{constructor(o){super(),this._value=o}get value(){return this.getValue()}_subscribe(o){const r=super._subscribe(o);return!r.closed&&o.next(this._value),r}getValue(){const{hasError:o,thrownError:r,_value:s}=this;if(o)throw r;return this._throwIfClosed(),s}next(o){super.next(this._value=o)}}const gT=G(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:yN}=Array,{getPrototypeOf:vN,prototype:IN,keys:CN}=Object;const{isArray:SN}=Array;function RS(...t){const o=Hr(t),r=function Nu(t){return ne(me(t))?t.pop():void 0}(t),{args:s,keys:l}=function RN(t){if(1===t.length){const o=t[0];if(yN(o))return{args:o,keys:null};if(function wN(t){return t&&"object"==typeof t&&vN(t)===IN}(o)){const r=CN(o);return{args:r.map(s=>o[s]),keys:r}}}return{args:t,keys:null}}(t);if(0===s.length)return dn([],o);const c=new Dt(function kN(t,o,r=Mt){return s=>{wS(o,()=>{const{length:l}=t,c=new Array(l);let u=l,p=l;for(let f=0;f<l;f++)wS(o,()=>{const E=dn(t[f],o);let y=!1;E.subscribe(ce(s,I=>{c[f]=I,y||(y=!0,p--),p||s.next(r(c.slice()))},()=>{--u||s.complete()}))},s)},s)}}(s,o,l?u=>function AN(t,o){return t.reduce((r,s,l)=>(r[s]=o[l],r),{})}(l,u):Mt));return r?c.pipe(function ON(t){return ie(o=>function DN(t,o){return SN(o)?t(...o):t(o)}(t,o))}(r)):c}function wS(t,o,r){t?Un(r,t,o):o()}function xI(...t){return function MN(){return Xt(1)}()(dn(t,Hr(t)))}function SS(t){return new Dt(o=>{cn(t()).subscribe(o)})}function V_(t,o){const r=ne(t)?t:()=>t,s=l=>l.error(r());return new Dt(o?l=>o.schedule(s,0,l):s)}function PI(){return Ge((t,o)=>{let r=null;t._refCount++;const s=ce(o,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(r=null);const l=t._connection,c=r;r=null,l&&(!c||l===c)&&l.unsubscribe(),o.unsubscribe()});t.subscribe(s),s.closed||(r=t.connect())})}class DS extends Dt{constructor(o,r){super(),this.source=o,this.subjectFactory=r,this._subject=null,this._refCount=0,this._connection=null,Q(o)&&(this.lift=o.lift)}_subscribe(o){return this.getSubject().subscribe(o)}getSubject(){const o=this._subject;return(!o||o.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:o}=this;this._subject=this._connection=null,o?.unsubscribe()}connect(){let o=this._connection;if(!o){o=this._connection=new S;const r=this.getSubject();o.add(this.source.subscribe(ce(r,void 0,()=>{this._teardown(),r.complete()},s=>{this._teardown(),r.error(s)},()=>this._teardown()))),o.closed&&(this._connection=null,o=S.EMPTY)}return o}refCount(){return PI()(this)}}function vl(t,o){return Ge((r,s)=>{let l=null,c=0,u=!1;const p=()=>u&&!l&&s.complete();r.subscribe(ce(s,f=>{l?.unsubscribe();let E=0;const y=c++;cn(t(f,y)).subscribe(l=ce(s,I=>s.next(o?o(f,I,y,E++):I),()=>{l=null,p()}))},()=>{u=!0,p()}))})}function j_(t){return t<=0?()=>Kn:Ge((o,r)=>{let s=0;o.subscribe(ce(r,l=>{++s<=t&&(r.next(l),t<=s&&r.complete())}))})}function Tu(t,o){return Ge((r,s)=>{let l=0;r.subscribe(ce(s,c=>t.call(o,c,l++)&&s.next(c)))})}function fT(t){return Ge((o,r)=>{let s=!1;o.subscribe(ce(r,l=>{s=!0,r.next(l)},()=>{s||r.next(t),r.complete()}))})}function OS(t=LN){return Ge((o,r)=>{let s=!1;o.subscribe(ce(r,l=>{s=!0,r.next(l)},()=>s?r.complete():r.error(t())))})}function LN(){return new gT}function bu(t,o){const r=arguments.length>=2;return s=>s.pipe(t?Tu((l,c)=>t(l,c,s)):Mt,j_(1),r?fT(o):OS(()=>new gT))}function hh(t,o){return ne(o)?Ot(t,o,1):Ot(t,1)}function Zo(t,o,r){const s=ne(t)||o||r?{next:t,error:o,complete:r}:t;return s?Ge((l,c)=>{var u;null===(u=s.subscribe)||void 0===u||u.call(s);let p=!0;l.subscribe(ce(c,f=>{var E;null===(E=s.next)||void 0===E||E.call(s,f),c.next(f)},()=>{var f;p=!1,null===(f=s.complete)||void 0===f||f.call(s),c.complete()},f=>{var E;p=!1,null===(E=s.error)||void 0===E||E.call(s,f),c.error(f)},()=>{var f,E;p&&(null===(f=s.unsubscribe)||void 0===f||f.call(s)),null===(E=s.finalize)||void 0===E||E.call(s)}))}):Mt}function yu(t){return Ge((o,r)=>{let c,s=null,l=!1;s=o.subscribe(ce(r,void 0,void 0,u=>{c=cn(t(u,yu(t)(o))),s?(s.unsubscribe(),s=null,c.subscribe(r)):l=!0})),l&&(s.unsubscribe(),s=null,c.subscribe(r))})}function xN(t,o,r,s,l){return(c,u)=>{let p=r,f=o,E=0;c.subscribe(ce(u,y=>{const I=E++;f=p?t(f,y,I):(p=!0,y),s&&u.next(f)},l&&(()=>{p&&u.next(f),u.complete()})))}}function AS(t,o){return Ge(xN(t,o,arguments.length>=2,!0))}function BI(t){return t<=0?()=>Kn:Ge((o,r)=>{let s=[];o.subscribe(ce(r,l=>{s.push(l),t<s.length&&s.shift()},()=>{for(const l of s)r.next(l);r.complete()},void 0,()=>{s=null}))})}function kS(t,o){const r=arguments.length>=2;return s=>s.pipe(t?Tu((l,c)=>t(l,c,s)):Mt,BI(1),r?fT(o):OS(()=>new gT))}function FI(t){return Ge((o,r)=>{try{o.subscribe(r)}finally{r.add(t)}})}const it="primary",W_=Symbol("RouteTitle");class FN{constructor(o){this.params=o||{}}has(o){return Object.prototype.hasOwnProperty.call(this.params,o)}get(o){if(this.has(o)){const r=this.params[o];return Array.isArray(r)?r[0]:r}return null}getAll(o){if(this.has(o)){const r=this.params[o];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function fg(t){return new FN(t)}function GN(t,o,r){const s=r.path.split("/");if(s.length>t.length||"full"===r.pathMatch&&(o.hasChildren()||s.length<t.length))return null;const l={};for(let c=0;c<s.length;c++){const u=s[c],p=t[c];if(u.startsWith(":"))l[u.substring(1)]=p;else if(u!==p.path)return null}return{consumed:t.slice(0,s.length),posParams:l}}function Il(t,o){const r=t?Object.keys(t):void 0,s=o?Object.keys(o):void 0;if(!r||!s||r.length!=s.length)return!1;let l;for(let c=0;c<r.length;c++)if(l=r[c],!MS(t[l],o[l]))return!1;return!0}function MS(t,o){if(Array.isArray(t)&&Array.isArray(o)){if(t.length!==o.length)return!1;const r=[...t].sort(),s=[...o].sort();return r.every((l,c)=>s[c]===l)}return t===o}function NS(t){return Array.prototype.concat.apply([],t)}function LS(t){return t.length>0?t[t.length-1]:null}function Po(t,o){for(const r in t)t.hasOwnProperty(r)&&o(t[r],r)}function vu(t){return q$(t)?t:qp(t)?dn(Promise.resolve(t)):Be(t)}const VN={exact:function BS(t,o,r){if(!gh(t.segments,o.segments)||!_T(t.segments,o.segments,r)||t.numberOfChildren!==o.numberOfChildren)return!1;for(const s in o.children)if(!t.children[s]||!BS(t.children[s],o.children[s],r))return!1;return!0},subset:FS},xS={exact:function jN(t,o){return Il(t,o)},subset:function WN(t,o){return Object.keys(o).length<=Object.keys(t).length&&Object.keys(o).every(r=>MS(t[r],o[r]))},ignored:()=>!0};function PS(t,o,r){return VN[r.paths](t.root,o.root,r.matrixParams)&&xS[r.queryParams](t.queryParams,o.queryParams)&&!("exact"===r.fragment&&t.fragment!==o.fragment)}function FS(t,o,r){return GS(t,o,o.segments,r)}function GS(t,o,r,s){if(t.segments.length>r.length){const l=t.segments.slice(0,r.length);return!(!gh(l,r)||o.hasChildren()||!_T(l,r,s))}if(t.segments.length===r.length){if(!gh(t.segments,r)||!_T(t.segments,r,s))return!1;for(const l in o.children)if(!t.children[l]||!FS(t.children[l],o.children[l],s))return!1;return!0}{const l=r.slice(0,t.segments.length),c=r.slice(t.segments.length);return!!(gh(t.segments,l)&&_T(t.segments,l,s)&&t.children[it])&&GS(t.children[it],o,c,s)}}function _T(t,o,r){return o.every((s,l)=>xS[r](t[l].parameters,s.parameters))}class ph{constructor(o,r,s){this.root=o,this.queryParams=r,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fg(this.queryParams)),this._queryParamMap}toString(){return YN.serialize(this)}}class lt{constructor(o,r){this.segments=o,this.children=r,this.parent=null,Po(r,(s,l)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mT(this)}}class X_{constructor(o,r){this.path=o,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=fg(this.parameters)),this._parameterMap}toString(){return jS(this)}}function gh(t,o){return t.length===o.length&&t.every((r,s)=>r.path===o[s].path)}let US=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:function(){return new UI},providedIn:"root"}),t})();class UI{parse(o){const r=new oL(o);return new ph(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(o){const r=`/${z_(o.root,!0)}`,s=function qN(t){const o=Object.keys(t).map(r=>{const s=t[r];return Array.isArray(s)?s.map(l=>`${$T(r)}=${$T(l)}`).join("&"):`${$T(r)}=${$T(s)}`}).filter(r=>!!r);return o.length?`?${o.join("&")}`:""}(o.queryParams);return`${r}${s}${"string"==typeof o.fragment?`#${function KN(t){return encodeURI(t)}(o.fragment)}`:""}`}}const YN=new UI;function mT(t){return t.segments.map(o=>jS(o)).join("/")}function z_(t,o){if(!t.hasChildren())return mT(t);if(o){const r=t.children[it]?z_(t.children[it],!1):"",s=[];return Po(t.children,(l,c)=>{c!==it&&s.push(`${c}:${z_(l,!1)}`)}),s.length>0?`${r}(${s.join("//")})`:r}{const r=function zN(t,o){let r=[];return Po(t.children,(s,l)=>{l===it&&(r=r.concat(o(s,l)))}),Po(t.children,(s,l)=>{l!==it&&(r=r.concat(o(s,l)))}),r}(t,(s,l)=>l===it?[z_(t.children[it],!1)]:[`${l}:${z_(s,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[it]?`${mT(t)}/${r[0]}`:`${mT(t)}/(${r.join("//")})`}}function HS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $T(t){return HS(t).replace(/%3B/gi,";")}function HI(t){return HS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ET(t){return decodeURIComponent(t)}function VS(t){return ET(t.replace(/\+/g,"%20"))}function jS(t){return`${HI(t.path)}${function JN(t){return Object.keys(t).map(o=>`;${HI(o)}=${HI(t[o])}`).join("")}(t.parameters)}`}const ZN=/^[^\/()?;=#]+/;function TT(t){const o=t.match(ZN);return o?o[0]:""}const QN=/^[^=?&#]+/,tL=/^[^&#]+/;class oL{constructor(o){this.url=o,this.remaining=o}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lt([],{}):new lt([],this.parseChildren())}parseQueryParams(){const o={};if(this.consumeOptional("?"))do{this.parseQueryParam(o)}while(this.consumeOptional("&"));return o}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const o=[];for(this.peekStartsWith("(")||o.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),o.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(o.length>0||Object.keys(r).length>0)&&(s[it]=new lt(o,r)),s}parseSegment(){const o=TT(this.remaining);if(""===o&&this.peekStartsWith(";"))throw new b(4009,!1);return this.capture(o),new X_(ET(o),this.parseMatrixParams())}parseMatrixParams(){const o={};for(;this.consumeOptional(";");)this.parseParam(o);return o}parseParam(o){const r=TT(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const l=TT(this.remaining);l&&(s=l,this.capture(s))}o[ET(r)]=ET(s)}parseQueryParam(o){const r=function eL(t){const o=t.match(QN);return o?o[0]:""}(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const u=function nL(t){const o=t.match(tL);return o?o[0]:""}(this.remaining);u&&(s=u,this.capture(s))}const l=VS(r),c=VS(s);if(o.hasOwnProperty(l)){let u=o[l];Array.isArray(u)||(u=[u],o[l]=u),u.push(c)}else o[l]=c}parseParens(o){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=TT(this.remaining),l=this.remaining[s.length];if("/"!==l&&")"!==l&&";"!==l)throw new b(4010,!1);let c;s.indexOf(":")>-1?(c=s.slice(0,s.indexOf(":")),this.capture(c),this.capture(":")):o&&(c=it);const u=this.parseChildren();r[c]=1===Object.keys(u).length?u[it]:new lt([],u),this.consumeOptional("//")}return r}peekStartsWith(o){return this.remaining.startsWith(o)}consumeOptional(o){return!!this.peekStartsWith(o)&&(this.remaining=this.remaining.substring(o.length),!0)}capture(o){if(!this.consumeOptional(o))throw new b(4011,!1)}}function VI(t){return t.segments.length>0?new lt([],{[it]:t}):t}function bT(t){const o={};for(const s of Object.keys(t.children)){const c=bT(t.children[s]);(c.segments.length>0||c.hasChildren())&&(o[s]=c)}return function rL(t){if(1===t.numberOfChildren&&t.children[it]){const o=t.children[it];return new lt(t.segments.concat(o.segments),o.children)}return t}(new lt(t.segments,o))}function fh(t){return t instanceof ph}function lL(t,o,r,s,l){if(0===r.length)return _g(o.root,o.root,o.root,s,l);const c=function zS(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new XS(!0,0,t);let o=0,r=!1;const s=t.reduce((l,c,u)=>{if("object"==typeof c&&null!=c){if(c.outlets){const p={};return Po(c.outlets,(f,E)=>{p[E]="string"==typeof f?f.split("/"):f}),[...l,{outlets:p}]}if(c.segmentPath)return[...l,c.segmentPath]}return"string"!=typeof c?[...l,c]:0===u?(c.split("/").forEach((p,f)=>{0==f&&"."===p||(0==f&&""===p?r=!0:".."===p?o++:""!=p&&l.push(p))}),l):[...l,c]},[]);return new XS(r,o,s)}(r);return c.toRoot()?_g(o.root,o.root,new lt([],{}),s,l):function u(f){const E=function cL(t,o,r,s){if(t.isAbsolute)return new mg(o.root,!0,0);if(-1===s)return new mg(r,r===o.root,0);return function YS(t,o,r){let s=t,l=o,c=r;for(;c>l;){if(c-=l,s=s.parent,!s)throw new b(4005,!1);l=s.segments.length}return new mg(s,!1,l-c)}(r,s+(Y_(t.commands[0])?0:1),t.numberOfDoubleDots)}(c,o,t.snapshot?._urlSegment,f),y=E.processChildren?J_(E.segmentGroup,E.index,c.commands):WI(E.segmentGroup,E.index,c.commands);return _g(o.root,E.segmentGroup,y,s,l)}(t.snapshot?._lastPathIndex)}function Y_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function K_(t){return"object"==typeof t&&null!=t&&t.outlets}function _g(t,o,r,s,l){let u,c={};s&&Po(s,(f,E)=>{c[E]=Array.isArray(f)?f.map(y=>`${y}`):`${f}`}),u=t===o?r:WS(t,o,r);const p=VI(bT(u));return new ph(p,c,l)}function WS(t,o,r){const s={};return Po(t.children,(l,c)=>{s[c]=l===o?r:WS(l,o,r)}),new lt(t.segments,s)}class XS{constructor(o,r,s){if(this.isAbsolute=o,this.numberOfDoubleDots=r,this.commands=s,o&&s.length>0&&Y_(s[0]))throw new b(4003,!1);const l=s.find(K_);if(l&&l!==LS(s))throw new b(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mg{constructor(o,r,s){this.segmentGroup=o,this.processChildren=r,this.index=s}}function WI(t,o,r){if(t||(t=new lt([],{})),0===t.segments.length&&t.hasChildren())return J_(t,o,r);const s=function dL(t,o,r){let s=0,l=o;const c={match:!1,pathIndex:0,commandIndex:0};for(;l<t.segments.length;){if(s>=r.length)return c;const u=t.segments[l],p=r[s];if(K_(p))break;const f=`${p}`,E=s<r.length-1?r[s+1]:null;if(l>0&&void 0===f)break;if(f&&E&&"object"==typeof E&&void 0===E.outlets){if(!JS(f,E,u))return c;s+=2}else{if(!JS(f,{},u))return c;s++}l++}return{match:!0,pathIndex:l,commandIndex:s}}(t,o,r),l=r.slice(s.commandIndex);if(s.match&&s.pathIndex<t.segments.length){const c=new lt(t.segments.slice(0,s.pathIndex),{});return c.children[it]=new lt(t.segments.slice(s.pathIndex),t.children),J_(c,0,l)}return s.match&&0===l.length?new lt(t.segments,{}):s.match&&!t.hasChildren()?XI(t,o,r):s.match?J_(t,0,l):XI(t,o,r)}function J_(t,o,r){if(0===r.length)return new lt(t.segments,{});{const s=function uL(t){return K_(t[0])?t[0].outlets:{[it]:t}}(r),l={};return Po(s,(c,u)=>{"string"==typeof c&&(c=[c]),null!==c&&(l[u]=WI(t.children[u],o,c))}),Po(t.children,(c,u)=>{void 0===s[u]&&(l[u]=c)}),new lt(t.segments,l)}}function XI(t,o,r){const s=t.segments.slice(0,o);let l=0;for(;l<r.length;){const c=r[l];if(K_(c)){const f=hL(c.outlets);return new lt(s,f)}if(0===l&&Y_(r[0])){s.push(new X_(t.segments[o].path,KS(r[0]))),l++;continue}const u=K_(c)?c.outlets[it]:`${c}`,p=l<r.length-1?r[l+1]:null;u&&p&&Y_(p)?(s.push(new X_(u,KS(p))),l+=2):(s.push(new X_(u,{})),l++)}return new lt(s,{})}function hL(t){const o={};return Po(t,(r,s)=>{"string"==typeof r&&(r=[r]),null!==r&&(o[s]=XI(new lt([],{}),0,r))}),o}function KS(t){const o={};return Po(t,(r,s)=>o[s]=`${r}`),o}function JS(t,o,r){return t==r.path&&Il(o,r.parameters)}class Ha{constructor(o,r){this.id=o,this.url=r}}class zI extends Ha{constructor(o,r,s="imperative",l=null){super(o,r),this.type=0,this.navigationTrigger=s,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _h extends Ha{constructor(o,r,s){super(o,r),this.urlAfterRedirects=s,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yT extends Ha{constructor(o,r,s,l){super(o,r),this.reason=s,this.code=l,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qS extends Ha{constructor(o,r,s,l){super(o,r),this.error=s,this.target=l,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pL extends Ha{constructor(o,r,s,l){super(o,r),this.urlAfterRedirects=s,this.state=l,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gL extends Ha{constructor(o,r,s,l){super(o,r),this.urlAfterRedirects=s,this.state=l,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fL extends Ha{constructor(o,r,s,l,c){super(o,r),this.urlAfterRedirects=s,this.state=l,this.shouldActivate=c,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _L extends Ha{constructor(o,r,s,l){super(o,r),this.urlAfterRedirects=s,this.state=l,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mL extends Ha{constructor(o,r,s,l){super(o,r),this.urlAfterRedirects=s,this.state=l,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $L{constructor(o){this.route=o,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EL{constructor(o){this.route=o,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TL{constructor(o){this.snapshot=o,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bL{constructor(o){this.snapshot=o,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yL{constructor(o){this.snapshot=o,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vL{constructor(o){this.snapshot=o,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZS{constructor(o,r,s){this.routerEvent=o,this.position=r,this.anchor=s,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class QS{constructor(o){this._root=o}get root(){return this._root.value}parent(o){const r=this.pathFromRoot(o);return r.length>1?r[r.length-2]:null}children(o){const r=YI(o,this._root);return r?r.children.map(s=>s.value):[]}firstChild(o){const r=YI(o,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(o){const r=KI(o,this._root);return r.length<2?[]:r[r.length-2].children.map(l=>l.value).filter(l=>l!==o)}pathFromRoot(o){return KI(o,this._root).map(r=>r.value)}}function YI(t,o){if(t===o.value)return o;for(const r of o.children){const s=YI(t,r);if(s)return s}return null}function KI(t,o){if(t===o.value)return[o];for(const r of o.children){const s=KI(t,r);if(s.length)return s.unshift(o),s}return[]}class Va{constructor(o,r){this.value=o,this.children=r}toString(){return`TreeNode(${this.value})`}}function $g(t){const o={};return t&&t.children.forEach(r=>o[r.value.outlet]=r),o}class eD extends QS{constructor(o,r){super(o),this.snapshot=r,JI(this,o)}toString(){return this.snapshot.toString()}}function tD(t,o){const r=function CL(t,o){const u=new vT([],{},{},"",{},it,o,null,t.root,-1,{});return new oD("",new Va(u,[]))}(t,o),s=new Oi([new X_("",{})]),l=new Oi({}),c=new Oi({}),u=new Oi({}),p=new Oi(""),f=new mh(s,l,u,p,c,it,o,r.root);return f.snapshot=r.root,new eD(new Va(f,[]),r)}class mh{constructor(o,r,s,l,c,u,p,f){this.url=o,this.params=r,this.queryParams=s,this.fragment=l,this.data=c,this.outlet=u,this.component=p,this.title=this.data?.pipe(ie(E=>E[W_]))??Be(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ie(o=>fg(o)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ie(o=>fg(o)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nD(t,o="emptyOnly"){const r=t.pathFromRoot;let s=0;if("always"!==o)for(s=r.length-1;s>=1;){const l=r[s],c=r[s-1];if(l.routeConfig&&""===l.routeConfig.path)s--;else{if(c.component)break;s--}}return function RL(t){return t.reduce((o,r)=>({params:{...o.params,...r.params},data:{...o.data,...r.data},resolve:{...r.data,...o.resolve,...r.routeConfig?.data,...r._resolvedData}}),{params:{},data:{},resolve:{}})}(r.slice(s))}class vT{constructor(o,r,s,l,c,u,p,f,E,y,I,A){this.url=o,this.params=r,this.queryParams=s,this.fragment=l,this.data=c,this.outlet=u,this.component=p,this.title=this.data?.[W_],this.routeConfig=f,this._urlSegment=E,this._lastPathIndex=y,this._correctedLastPathIndex=A??y,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oD extends QS{constructor(o,r){super(r),this.url=o,JI(this,r)}toString(){return rD(this._root)}}function JI(t,o){o.value._routerState=t,o.children.forEach(r=>JI(t,r))}function rD(t){const o=t.children.length>0?` { ${t.children.map(rD).join(", ")} } `:"";return`${t.value}${o}`}function qI(t){if(t.snapshot){const o=t.snapshot,r=t._futureSnapshot;t.snapshot=r,Il(o.queryParams,r.queryParams)||t.queryParams.next(r.queryParams),o.fragment!==r.fragment&&t.fragment.next(r.fragment),Il(o.params,r.params)||t.params.next(r.params),function UN(t,o){if(t.length!==o.length)return!1;for(let r=0;r<t.length;++r)if(!Il(t[r],o[r]))return!1;return!0}(o.url,r.url)||t.url.next(r.url),Il(o.data,r.data)||t.data.next(r.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ZI(t,o){const r=Il(t.params,o.params)&&function XN(t,o){return gh(t,o)&&t.every((r,s)=>Il(r.parameters,o[s].parameters))}(t.url,o.url);return r&&!(!t.parent!=!o.parent)&&(!t.parent||ZI(t.parent,o.parent))}function q_(t,o,r){if(r&&t.shouldReuseRoute(o.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=o.value;const l=function SL(t,o,r){return o.children.map(s=>{for(const l of r.children)if(t.shouldReuseRoute(s.value,l.value.snapshot))return q_(t,s,l);return q_(t,s)})}(t,o,r);return new Va(s,l)}{if(t.shouldAttach(o.value)){const c=t.retrieve(o.value);if(null!==c){const u=c.route;return u.value._futureSnapshot=o.value,u.children=o.children.map(p=>q_(t,p)),u}}const s=function DL(t){return new mh(new Oi(t.url),new Oi(t.params),new Oi(t.queryParams),new Oi(t.fragment),new Oi(t.data),t.outlet,t.component,t)}(o.value),l=o.children.map(c=>q_(t,c));return new Va(s,l)}}const QI="ngNavigationCancelingError";function sD(t,o){const{redirectTo:r,navigationBehaviorOptions:s}=fh(o)?{redirectTo:o,navigationBehaviorOptions:void 0}:o,l=iD(!1,0,o);return l.url=r,l.navigationBehaviorOptions=s,l}function iD(t,o,r){const s=new Error("NavigationCancelingError: "+(t||""));return s[QI]=!0,s.cancellationCode=o,r&&(s.url=r),s}function lD(t){return aD(t)&&fh(t.url)}function aD(t){return t&&t[QI]}class OL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Z_,this.attachRef=null}}let Z_=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,s){const l=this.getOrCreateContext(r);l.outlet=s,this.contexts.set(r,l)}onChildOutletDestroyed(r){const s=this.getContext(r);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let s=this.getContext(r);return s||(s=new OL,this.contexts.set(r,s)),s}getContext(r){return this.contexts.get(r)||null}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const IT=!1;let cD=(()=>{class t{constructor(r,s,l,c,u){this.parentContexts=r,this.location=s,this.changeDetector=c,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new $r,this.deactivateEvents=new $r,this.attachEvents=new $r,this.detachEvents=new $r,this.name=l||it,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b(4012,IT);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b(4012,IT);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b(4012,IT);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new b(4013,IT);this._activatedRoute=r;const l=this.location,u=r._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,f=new AL(r,p,l.injector);if(s&&function kL(t){return!!t.resolveComponentFactory}(s)){const E=s.resolveComponentFactory(u);this.activated=l.createComponent(E,l.length,f)}else this.activated=l.createComponent(u,{index:l.length,injector:f,environmentInjector:s??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(r){return new(r||t)(Re(Z_),Re(Ri),function Wl(t){return function ob(t,o){if("class"===o)return t.classes;if("style"===o)return t.styles;const r=t.attrs;if(r){const s=r.length;let l=0;for(;l<s;){const c=r[l];if(Wg(c))break;if(0===c)l+=2;else if("number"==typeof c)for(l++;l<s&&"string"==typeof r[l];)l++;else{if(c===o)return r[l+1];l+=2}}}return null}(Mn(),t)}("name"),Re(iI),Re(Ls))},t.\u0275dir=tn({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),t})();class AL{constructor(o,r,s){this.route=o,this.childContexts=r,this.parent=s}get(o,r){return o===mh?this.route:o===Z_?this.childContexts:this.parent.get(o,r)}}let eC=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Fl({type:t,selectors:[["ng-component"]],standalone:!0,features:[yR],decls:1,vars:0,template:function(r,s){1&r&&Da(0,"router-outlet")},dependencies:[cD],encapsulation:2}),t})();function uD(t,o){return t.providers&&!t._injector&&(t._injector=UE(t.providers,o,`Route: ${t.path}`)),t._injector??o}function nC(t){const o=t.children&&t.children.map(nC),r=o?{...t,children:o}:{...t};return!r.component&&!r.loadComponent&&(o||r.loadChildren)&&r.outlet&&r.outlet!==it&&(r.component=eC),r}function Hs(t){return t.outlet||it}function dD(t,o){const r=t.filter(s=>Hs(s)===o);return r.push(...t.filter(s=>Hs(s)!==o)),r}function Q_(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let o=t.parent;o;o=o.parent){const r=o.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}class PL{constructor(o,r,s,l){this.routeReuseStrategy=o,this.futureState=r,this.currState=s,this.forwardEvent=l}activate(o){const r=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,s,o),qI(this.futureState.root),this.activateChildRoutes(r,s,o)}deactivateChildRoutes(o,r,s){const l=$g(r);o.children.forEach(c=>{const u=c.value.outlet;this.deactivateRoutes(c,l[u],s),delete l[u]}),Po(l,(c,u)=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(o,r,s){const l=o.value,c=r?r.value:null;if(l===c)if(l.component){const u=s.getContext(l.outlet);u&&this.deactivateChildRoutes(o,r,u.children)}else this.deactivateChildRoutes(o,r,s);else c&&this.deactivateRouteAndItsChildren(r,s)}deactivateRouteAndItsChildren(o,r){o.value.component&&this.routeReuseStrategy.shouldDetach(o.value.snapshot)?this.detachAndStoreRouteSubtree(o,r):this.deactivateRouteAndOutlet(o,r)}detachAndStoreRouteSubtree(o,r){const s=r.getContext(o.value.outlet),l=s&&o.value.component?s.children:r,c=$g(o);for(const u of Object.keys(c))this.deactivateRouteAndItsChildren(c[u],l);if(s&&s.outlet){const u=s.outlet.detach(),p=s.children.onOutletDeactivated();this.routeReuseStrategy.store(o.value.snapshot,{componentRef:u,route:o,contexts:p})}}deactivateRouteAndOutlet(o,r){const s=r.getContext(o.value.outlet),l=s&&o.value.component?s.children:r,c=$g(o);for(const u of Object.keys(c))this.deactivateRouteAndItsChildren(c[u],l);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(o,r,s){const l=$g(r);o.children.forEach(c=>{this.activateRoutes(c,l[c.value.outlet],s),this.forwardEvent(new vL(c.value.snapshot))}),o.children.length&&this.forwardEvent(new bL(o.value.snapshot))}activateRoutes(o,r,s){const l=o.value,c=r?r.value:null;if(qI(l),l===c)if(l.component){const u=s.getOrCreateContext(l.outlet);this.activateChildRoutes(o,r,u.children)}else this.activateChildRoutes(o,r,s);else if(l.component){const u=s.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const p=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),u.children.onOutletReAttached(p.contexts),u.attachRef=p.componentRef,u.route=p.route.value,u.outlet&&u.outlet.attach(p.componentRef,p.route.value),qI(p.route.value),this.activateChildRoutes(o,null,u.children)}else{const p=Q_(l.snapshot),f=p?.get(Cd)??null;u.attachRef=null,u.route=l,u.resolver=f,u.injector=p,u.outlet&&u.outlet.activateWith(l,u.injector),this.activateChildRoutes(o,null,u.children)}}else this.activateChildRoutes(o,null,s)}}class hD{constructor(o){this.path=o,this.route=this.path[this.path.length-1]}}class CT{constructor(o,r){this.component=o,this.route=r}}function BL(t,o,r){const s=t._root;return em(s,o?o._root:null,r,[s.value])}function Eg(t,o){const r=Symbol(),s=o.get(t,r);return s===r?"function"!=typeof t||function Ih(t){return null!==nc(t)}(t)?o.get(t):t:s}function em(t,o,r,s,l={canDeactivateChecks:[],canActivateChecks:[]}){const c=$g(o);return t.children.forEach(u=>{(function GL(t,o,r,s,l={canDeactivateChecks:[],canActivateChecks:[]}){const c=t.value,u=o?o.value:null,p=r?r.getContext(t.value.outlet):null;if(u&&c.routeConfig===u.routeConfig){const f=function UL(t,o,r){if("function"==typeof r)return r(t,o);switch(r){case"pathParamsChange":return!gh(t.url,o.url);case"pathParamsOrQueryParamsChange":return!gh(t.url,o.url)||!Il(t.queryParams,o.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ZI(t,o)||!Il(t.queryParams,o.queryParams);default:return!ZI(t,o)}}(u,c,c.routeConfig.runGuardsAndResolvers);f?l.canActivateChecks.push(new hD(s)):(c.data=u.data,c._resolvedData=u._resolvedData),em(t,o,c.component?p?p.children:null:r,s,l),f&&p&&p.outlet&&p.outlet.isActivated&&l.canDeactivateChecks.push(new CT(p.outlet.component,u))}else u&&tm(o,p,l),l.canActivateChecks.push(new hD(s)),em(t,null,c.component?p?p.children:null:r,s,l)})(u,c[u.value.outlet],r,s.concat([u.value]),l),delete c[u.value.outlet]}),Po(c,(u,p)=>tm(u,r.getContext(p),l)),l}function tm(t,o,r){const s=$g(t),l=t.value;Po(s,(c,u)=>{tm(c,l.component?o?o.children.getContext(u):null:o,r)}),r.canDeactivateChecks.push(new CT(l.component&&o&&o.outlet&&o.outlet.isActivated?o.outlet.component:null,l))}function nm(t){return"function"==typeof t}function oC(t){return t instanceof gT||"EmptyError"===t?.name}const RT=Symbol("INITIAL_VALUE");function Tg(){return vl(t=>RS(t.map(o=>o.pipe(j_(1),function NN(...t){const o=Hr(t);return Ge((r,s)=>{(o?xI(t,r,o):xI(t,r)).subscribe(s)})}(RT)))).pipe(ie(o=>{for(const r of o)if(!0!==r){if(r===RT)return RT;if(!1===r||r instanceof ph)return r}return!0}),Tu(o=>o!==RT),j_(1)))}function pD(t){return function bo(...t){return pe(t)}(Zo(o=>{if(fh(o))throw sD(0,o)}),ie(o=>!0===o))}const rC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gD(t,o,r,s,l){const c=sC(t,o,r);return c.matched?function r0(t,o,r,s){const l=o.canMatch;return l&&0!==l.length?Be(l.map(u=>{const p=Eg(u,t);return vu(function zL(t){return t&&nm(t.canMatch)}(p)?p.canMatch(o,r):t.runInContext(()=>p(o,r)))})).pipe(Tg(),pD()):Be(!0)}(s=uD(o,s),o,r).pipe(ie(u=>!0===u?c:{...rC})):Be(c)}function sC(t,o,r){if(""===o.path)return"full"===o.pathMatch&&(t.hasChildren()||r.length>0)?{...rC}:{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};const l=(o.matcher||GN)(r,t,o);if(!l)return{...rC};const c={};Po(l.posParams,(p,f)=>{c[f]=p.path});const u=l.consumed.length>0?{...c,...l.consumed[l.consumed.length-1].parameters}:c;return{matched:!0,consumedSegments:l.consumed,remainingSegments:r.slice(l.consumed.length),parameters:u,positionalParamSegments:l.posParams??{}}}function wT(t,o,r,s,l="corrected"){if(r.length>0&&function a0(t,o,r){return r.some(s=>ST(t,o,s)&&Hs(s)!==it)}(t,r,s)){const u=new lt(o,function l0(t,o,r,s){const l={};l[it]=s,s._sourceSegment=t,s._segmentIndexShift=o.length;for(const c of r)if(""===c.path&&Hs(c)!==it){const u=new lt([],{});u._sourceSegment=t,u._segmentIndexShift=o.length,l[Hs(c)]=u}return l}(t,o,s,new lt(r,t.children)));return u._sourceSegment=t,u._segmentIndexShift=o.length,{segmentGroup:u,slicedSegments:[]}}if(0===r.length&&function c0(t,o,r){return r.some(s=>ST(t,o,s))}(t,r,s)){const u=new lt(t.segments,function s0(t,o,r,s,l,c){const u={};for(const p of s)if(ST(t,r,p)&&!l[Hs(p)]){const f=new lt([],{});f._sourceSegment=t,f._segmentIndexShift="legacy"===c?t.segments.length:o.length,u[Hs(p)]=f}return{...l,...u}}(t,o,r,s,t.children,l));return u._sourceSegment=t,u._segmentIndexShift=o.length,{segmentGroup:u,slicedSegments:r}}const c=new lt(t.segments,t.children);return c._sourceSegment=t,c._segmentIndexShift=o.length,{segmentGroup:c,slicedSegments:r}}function ST(t,o,r){return(!(t.hasChildren()||o.length>0)||"full"!==r.pathMatch)&&""===r.path}function fD(t,o,r,s){return!!(Hs(t)===s||s!==it&&ST(o,r,t))&&("**"===t.path||sC(o,t,r).matched)}function _D(t,o,r){return 0===o.length&&!t.children[r]}const DT=!1;class OT{constructor(o){this.segmentGroup=o||null}}class mD{constructor(o){this.urlTree=o}}function om(t){return V_(new OT(t))}function $D(t){return V_(new mD(t))}class p0{constructor(o,r,s,l,c){this.injector=o,this.configLoader=r,this.urlSerializer=s,this.urlTree=l,this.config=c,this.allowRedirects=!0}apply(){const o=wT(this.urlTree.root,[],[],this.config).segmentGroup,r=new lt(o.segments,o.children);return this.expandSegmentGroup(this.injector,this.config,r,it).pipe(ie(c=>this.createUrlTree(bT(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yu(c=>{if(c instanceof mD)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof OT?this.noMatchError(c):c}))}match(o){return this.expandSegmentGroup(this.injector,this.config,o.root,it).pipe(ie(l=>this.createUrlTree(bT(l),o.queryParams,o.fragment))).pipe(yu(l=>{throw l instanceof OT?this.noMatchError(l):l}))}noMatchError(o){return new b(4002,DT)}createUrlTree(o,r,s){const l=VI(o);return new ph(l,r,s)}expandSegmentGroup(o,r,s,l){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(o,r,s).pipe(ie(c=>new lt([],c))):this.expandSegment(o,s,r,s.segments,l,!0)}expandChildren(o,r,s){const l=[];for(const c of Object.keys(s.children))"primary"===c?l.unshift(c):l.push(c);return dn(l).pipe(hh(c=>{const u=s.children[c],p=dD(r,c);return this.expandSegmentGroup(o,p,u,c).pipe(ie(f=>({segment:f,outlet:c})))}),AS((c,u)=>(c[u.outlet]=u.segment,c),{}),kS())}expandSegment(o,r,s,l,c,u){return dn(s).pipe(hh(p=>this.expandSegmentAgainstRoute(o,r,s,p,l,c,u).pipe(yu(E=>{if(E instanceof OT)return Be(null);throw E}))),bu(p=>!!p),yu((p,f)=>{if(oC(p))return _D(r,l,c)?Be(new lt([],{})):om(r);throw p}))}expandSegmentAgainstRoute(o,r,s,l,c,u,p){return fD(l,r,c,u)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(o,r,l,c,u):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(o,r,s,l,c,u):om(r):om(r)}expandSegmentAgainstRouteUsingRedirect(o,r,s,l,c,u){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(o,s,l,u):this.expandRegularSegmentAgainstRouteUsingRedirect(o,r,s,l,c,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(o,r,s,l){const c=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?$D(c):this.lineralizeSegments(s,c).pipe(Ot(u=>{const p=new lt(u,{});return this.expandSegment(o,p,r,u,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(o,r,s,l,c,u){const{matched:p,consumedSegments:f,remainingSegments:E,positionalParamSegments:y}=sC(r,l,c);if(!p)return om(r);const I=this.applyRedirectCommands(f,l.redirectTo,y);return l.redirectTo.startsWith("/")?$D(I):this.lineralizeSegments(l,I).pipe(Ot(A=>this.expandSegment(o,r,s,A.concat(E),u,!1)))}matchSegmentAgainstRoute(o,r,s,l,c){return"**"===s.path?(o=uD(s,o),s.loadChildren?(s._loadedRoutes?Be({routes:s._loadedRoutes,injector:s._loadedInjector}):this.configLoader.loadChildren(o,s)).pipe(ie(p=>(s._loadedRoutes=p.routes,s._loadedInjector=p.injector,new lt(l,{})))):Be(new lt(l,{}))):gD(r,s,l,o).pipe(vl(({matched:u,consumedSegments:p,remainingSegments:f})=>u?this.getChildConfig(o=s._injector??o,s,l).pipe(Ot(y=>{const I=y.injector??o,A=y.routes,{segmentGroup:x,slicedSegments:H}=wT(r,p,f,A),X=new lt(x.segments,x.children);if(0===H.length&&X.hasChildren())return this.expandChildren(I,A,X).pipe(ie(q=>new lt(p,q)));if(0===A.length&&0===H.length)return Be(new lt(p,{}));const J=Hs(s)===c;return this.expandSegment(I,X,A,H,J?it:c,!0).pipe(ie(_e=>new lt(p.concat(_e.segments),_e.children)))})):om(r)))}getChildConfig(o,r,s){return r.children?Be({routes:r.children,injector:o}):r.loadChildren?void 0!==r._loadedRoutes?Be({routes:r._loadedRoutes,injector:r._loadedInjector}):function o0(t,o,r,s){const l=o.canLoad;return void 0===l||0===l.length?Be(!0):Be(l.map(u=>{const p=Eg(u,t);return vu(function VL(t){return t&&nm(t.canLoad)}(p)?p.canLoad(o,r):t.runInContext(()=>p(o,r)))})).pipe(Tg(),pD())}(o,r,s).pipe(Ot(l=>l?this.configLoader.loadChildren(o,r).pipe(Zo(c=>{r._loadedRoutes=c.routes,r._loadedInjector=c.injector})):function d0(t){return V_(iD(DT,3))}())):Be({routes:[],injector:o})}lineralizeSegments(o,r){let s=[],l=r.root;for(;;){if(s=s.concat(l.segments),0===l.numberOfChildren)return Be(s);if(l.numberOfChildren>1||!l.children[it])return V_(new b(4e3,DT));l=l.children[it]}}applyRedirectCommands(o,r,s){return this.applyRedirectCreateUrlTree(r,this.urlSerializer.parse(r),o,s)}applyRedirectCreateUrlTree(o,r,s,l){const c=this.createSegmentGroup(o,r.root,s,l);return new ph(c,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(o,r){const s={};return Po(o,(l,c)=>{if("string"==typeof l&&l.startsWith(":")){const p=l.substring(1);s[c]=r[p]}else s[c]=l}),s}createSegmentGroup(o,r,s,l){const c=this.createSegments(o,r.segments,s,l);let u={};return Po(r.children,(p,f)=>{u[f]=this.createSegmentGroup(o,p,s,l)}),new lt(c,u)}createSegments(o,r,s,l){return r.map(c=>c.path.startsWith(":")?this.findPosParam(o,c,l):this.findOrReturn(c,s))}findPosParam(o,r,s){const l=s[r.path.substring(1)];if(!l)throw new b(4001,DT);return l}findOrReturn(o,r){let s=0;for(const l of r){if(l.path===o.path)return r.splice(s),l;s++}return o}}class f0{}class $0{constructor(o,r,s,l,c,u,p,f){this.injector=o,this.rootComponentType=r,this.config=s,this.urlTree=l,this.url=c,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=p,this.urlSerializer=f}recognize(){const o=wT(this.urlTree.root,[],[],this.config.filter(r=>void 0===r.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,o,it).pipe(ie(r=>{if(null===r)return null;const s=new vT([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},it,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new Va(s,r),c=new oD(this.url,l);return this.inheritParamsAndData(c._root),c}))}inheritParamsAndData(o){const r=o.value,s=nD(r,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),o.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(o,r,s,l){return 0===s.segments.length&&s.hasChildren()?this.processChildren(o,r,s):this.processSegment(o,r,s,s.segments,l)}processChildren(o,r,s){return dn(Object.keys(s.children)).pipe(hh(l=>{const c=s.children[l],u=dD(r,l);return this.processSegmentGroup(o,u,c,l)}),AS((l,c)=>l&&c?(l.push(...c),l):null),function PN(t,o=!1){return Ge((r,s)=>{let l=0;r.subscribe(ce(s,c=>{const u=t(c,l++);(u||o)&&s.next(c),!u&&s.complete()}))})}(l=>null!==l),fT(null),kS(),ie(l=>{if(null===l)return null;const c=ED(l);return function E0(t){t.sort((o,r)=>o.value.outlet===it?-1:r.value.outlet===it?1:o.value.outlet.localeCompare(r.value.outlet))}(c),c}))}processSegment(o,r,s,l,c){return dn(r).pipe(hh(u=>this.processSegmentAgainstRoute(u._injector??o,u,s,l,c)),bu(u=>!!u),yu(u=>{if(oC(u))return _D(s,l,c)?Be([]):Be(null);throw u}))}processSegmentAgainstRoute(o,r,s,l,c){if(r.redirectTo||!fD(r,s,l,c))return Be(null);let u;if("**"===r.path){const p=l.length>0?LS(l).parameters:{},f=bD(s)+l.length;u=Be({snapshot:new vT(l,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vD(r),Hs(r),r.component??r._loadedComponent??null,r,TD(s),f,ID(r),f),consumedSegments:[],remainingSegments:[]})}else u=gD(s,r,l,o).pipe(ie(({matched:p,consumedSegments:f,remainingSegments:E,parameters:y})=>{if(!p)return null;const I=bD(s)+f.length;return{snapshot:new vT(f,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vD(r),Hs(r),r.component??r._loadedComponent??null,r,TD(s),I,ID(r),I),consumedSegments:f,remainingSegments:E}}));return u.pipe(vl(p=>{if(null===p)return Be(null);const{snapshot:f,consumedSegments:E,remainingSegments:y}=p;o=r._injector??o;const I=r._loadedInjector??o,A=function T0(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(r),{segmentGroup:x,slicedSegments:H}=wT(s,E,y,A.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===H.length&&x.hasChildren())return this.processChildren(I,A,x).pipe(ie(J=>null===J?null:[new Va(f,J)]));if(0===A.length&&0===H.length)return Be([new Va(f,[])]);const X=Hs(r)===c;return this.processSegment(I,A,x,H,X?it:c).pipe(ie(J=>null===J?null:[new Va(f,J)]))}))}}function b0(t){const o=t.value.routeConfig;return o&&""===o.path&&void 0===o.redirectTo}function ED(t){const o=[],r=new Set;for(const s of t){if(!b0(s)){o.push(s);continue}const l=o.find(c=>s.value.routeConfig===c.value.routeConfig);void 0!==l?(l.children.push(...s.children),r.add(l)):o.push(s)}for(const s of r){const l=ED(s.children);o.push(new Va(s.value,l))}return o.filter(s=>!r.has(s))}function TD(t){let o=t;for(;o._sourceSegment;)o=o._sourceSegment;return o}function bD(t){let o=t,r=o._segmentIndexShift??0;for(;o._sourceSegment;)o=o._sourceSegment,r+=o._segmentIndexShift??0;return r-1}function vD(t){return t.data||{}}function ID(t){return t.resolve||{}}function CD(t){return"string"==typeof t.title||null===t.title}function iC(t){return vl(o=>{const r=t(o);return r?dn(r).pipe(ie(()=>o)):Be(o)})}let RD=(()=>{class t{buildTitle(r){let s,l=r.root;for(;void 0!==l;)s=this.getResolvedTitleForRoute(l)??s,l=l.children.find(c=>c.outlet===it);return s}getResolvedTitleForRoute(r){return r.data[W_]}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ke({token:t,factory:function(){return pn(wD)},providedIn:"root"}),t})(),wD=(()=>{class t extends RD{constructor(r){super(),this.title=r}updateTitle(r){const s=this.buildTitle(r);void 0!==s&&this.title.setTitle(s)}}return t.\u0275fac=function(r){return new(r||t)(Oe(vS))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class D0{}class A0 extends class O0{shouldDetach(o){return!1}store(o,r){}shouldAttach(o){return!1}retrieve(o){return null}shouldReuseRoute(o,r){return o.routeConfig===r.routeConfig}}{}const kT=new We("",{providedIn:"root",factory:()=>({})}),lC=new We("ROUTES");let aC=(()=>{class t{constructor(r,s){this.injector=r,this.compiler=s,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Be(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const s=vu(r.loadComponent()).pipe(Zo(c=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=c}),FI(()=>{this.componentLoaders.delete(r)})),l=new DS(s,()=>new F).pipe(PI());return this.componentLoaders.set(r,l),l}loadChildren(r,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return Be({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);const c=this.loadModuleFactoryOrRoutes(s.loadChildren).pipe(ie(p=>{this.onLoadEndListener&&this.onLoadEndListener(s);let f,E,y=!1;Array.isArray(p)?E=p:(f=p.create(r).injector,E=NS(f.get(lC,[],ke.Self|ke.Optional)));return{routes:E.map(nC),injector:f}}),FI(()=>{this.childrenLoaders.delete(s)})),u=new DS(c,()=>new F).pipe(PI());return this.childrenLoaders.set(s,u),u}loadModuleFactoryOrRoutes(r){return vu(r()).pipe(Ot(s=>s instanceof TR||Array.isArray(s)?Be(s):dn(this.compiler.compileModuleAsync(s))))}}return t.\u0275fac=function(r){return new(r||t)(Oe(pr),Oe(qv))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class M0{}class N0{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,r){return o}}function L0(t){throw t}function x0(t,o,r){return o.parse("/")}const P0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},B0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function DD(){const t=pn(US),o=pn(Z_),r=pn(pI),s=pn(pr),l=pn(qv),c=pn(lC,{optional:!0})??[],u=pn(kT,{optional:!0})??{},p=pn(wD),f=pn(RD,{optional:!0}),E=pn(M0,{optional:!0}),y=pn(D0,{optional:!0}),I=new Bo(null,t,o,r,s,l,NS(c));return E&&(I.urlHandlingStrategy=E),y&&(I.routeReuseStrategy=y),I.titleStrategy=f??p,function F0(t,o){t.errorHandler&&(o.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(o.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(o.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(o.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(o.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(o.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(o.canceledNavigationResolution=t.canceledNavigationResolution)}(u,I),I}let Bo=(()=>{class t{constructor(r,s,l,c,u,p,f){this.rootComponentType=r,this.urlSerializer=s,this.rootContexts=l,this.location=c,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new F,this.errorHandler=L0,this.malformedUriErrorHandler=x0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Be(void 0),this.urlHandlingStrategy=new N0,this.routeReuseStrategy=new A0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(aC),this.configLoader.onLoadEndListener=A=>this.triggerEvent(new EL(A)),this.configLoader.onLoadStartListener=A=>this.triggerEvent(new $L(A)),this.ngModule=u.get(ch),this.console=u.get(hA);const I=u.get(oo);this.isNgZoneEnabled=I instanceof oo&&oo.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function HN(){return new ph(new lt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=tD(this.currentUrlTree,this.rootComponentType),this.transitions=new Oi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(r){const s=this.events;return r.pipe(Tu(l=>0!==l.id),ie(l=>({...l,extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),vl(l=>{let c=!1,u=!1;return Be(l).pipe(Zo(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),vl(p=>{const f=this.browserUrlTree.toString(),E=!this.navigated||p.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return OD(p.source)&&(this.browserUrlTree=p.extractedUrl),Be(p).pipe(vl(I=>{const A=this.transitions.getValue();return s.next(new zI(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),A!==this.transitions.getValue()?Kn:Promise.resolve(I)}),function g0(t,o,r,s){return vl(l=>function h0(t,o,r,s,l){return new p0(t,o,r,s,l).apply()}(t,o,r,l.extractedUrl,s).pipe(ie(c=>({...l,urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Zo(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},l.urlAfterRedirects=I.urlAfterRedirects}),function v0(t,o,r,s,l,c){return Ot(u=>function m0(t,o,r,s,l,c,u="emptyOnly",p="legacy"){return new $0(t,o,r,s,l,u,p,c).recognize().pipe(vl(f=>null===f?function _0(t){return new Dt(o=>o.error(t))}(new f0):Be(f)))}(t,o,r,u.urlAfterRedirects,s.serialize(u.urlAfterRedirects),s,l,c).pipe(ie(p=>({...u,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Zo(I=>{if(l.targetSnapshot=I.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const x=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(x,I)}this.browserUrlTree=I.urlAfterRedirects}const A=new pL(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);s.next(A)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:A,extractedUrl:x,source:H,restoredState:X,extras:J}=p,te=new zI(A,this.serializeUrl(x),H,X);s.next(te);const _e=tD(x,this.rootComponentType).snapshot;return Be(l={...p,targetSnapshot:_e,urlAfterRedirects:x,extras:{...J,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),Kn}),Zo(p=>{const f=new gL(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(f)}),ie(p=>l={...p,guards:BL(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function KL(t,o){return Ot(r=>{const{targetSnapshot:s,currentSnapshot:l,guards:{canActivateChecks:c,canDeactivateChecks:u}}=r;return 0===u.length&&0===c.length?Be({...r,guardsResult:!0}):function JL(t,o,r,s){return dn(t).pipe(Ot(l=>function n0(t,o,r,s,l){const c=o&&o.routeConfig?o.routeConfig.canDeactivate:null;return c&&0!==c.length?Be(c.map(p=>{const f=Q_(o)??l,E=Eg(p,f);return vu(function XL(t){return t&&nm(t.canDeactivate)}(E)?E.canDeactivate(t,o,r,s):f.runInContext(()=>E(t,o,r,s))).pipe(bu())})).pipe(Tg()):Be(!0)}(l.component,l.route,r,o,s)),bu(l=>!0!==l,!0))}(u,s,l,t).pipe(Ot(p=>p&&function HL(t){return"boolean"==typeof t}(p)?function qL(t,o,r,s){return dn(o).pipe(hh(l=>xI(function QL(t,o){return null!==t&&o&&o(new TL(t)),Be(!0)}(l.route.parent,s),function ZL(t,o){return null!==t&&o&&o(new yL(t)),Be(!0)}(l.route,s),function t0(t,o,r){const s=o[o.length-1],c=o.slice(0,o.length-1).reverse().map(u=>function FL(t){const o=t.routeConfig?t.routeConfig.canActivateChild:null;return o&&0!==o.length?{node:t,guards:o}:null}(u)).filter(u=>null!==u).map(u=>SS(()=>Be(u.guards.map(f=>{const E=Q_(u.node)??r,y=Eg(f,E);return vu(function WL(t){return t&&nm(t.canActivateChild)}(y)?y.canActivateChild(s,t):E.runInContext(()=>y(s,t))).pipe(bu())})).pipe(Tg())));return Be(c).pipe(Tg())}(t,l.path,r),function e0(t,o,r){const s=o.routeConfig?o.routeConfig.canActivate:null;if(!s||0===s.length)return Be(!0);const l=s.map(c=>SS(()=>{const u=Q_(o)??r,p=Eg(c,u);return vu(function jL(t){return t&&nm(t.canActivate)}(p)?p.canActivate(o,t):u.runInContext(()=>p(o,t))).pipe(bu())}));return Be(l).pipe(Tg())}(t,l.route,r))),bu(l=>!0!==l,!0))}(s,c,t,o):Be(p)),ie(p=>({...r,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),Zo(p=>{if(l.guardsResult=p.guardsResult,fh(p.guardsResult))throw sD(0,p.guardsResult);const f=new fL(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(f)}),Tu(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),iC(p=>{if(p.guards.canActivateChecks.length)return Be(p).pipe(Zo(f=>{const E=new _L(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(E)}),vl(f=>{let E=!1;return Be(f).pipe(function I0(t,o){return Ot(r=>{const{targetSnapshot:s,guards:{canActivateChecks:l}}=r;if(!l.length)return Be(r);let c=0;return dn(l).pipe(hh(u=>function C0(t,o,r,s){const l=t.routeConfig,c=t._resolve;return void 0!==l?.title&&!CD(l)&&(c[W_]=l.title),function R0(t,o,r,s){const l=function w0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===l.length)return Be({});const c={};return dn(l).pipe(Ot(u=>function S0(t,o,r,s){const l=Q_(o)??s,c=Eg(t,l);return vu(c.resolve?c.resolve(o,r):l.runInContext(()=>c(o,r)))}(t[u],o,r,s).pipe(bu(),Zo(p=>{c[u]=p}))),BI(1),function BN(t){return ie(()=>t)}(c),yu(u=>oC(u)?Kn:V_(u)))}(c,t,o,s).pipe(ie(u=>(t._resolvedData=u,t.data=nD(t,r).resolve,l&&CD(l)&&(t.data[W_]=l.title),null)))}(u.route,s,t,o)),Zo(()=>c++),BI(1),Ot(u=>c===l.length?Be(r):Kn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Zo({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),Zo(f=>{const E=new mL(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(E)}))}),iC(p=>{const f=E=>{const y=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(E.routeConfig).pipe(Zo(I=>{E.component=I}),ie(()=>{})));for(const I of E.children)y.push(...f(I));return y};return RS(f(p.targetSnapshot.root)).pipe(fT(),j_(1))}),iC(()=>this.afterPreactivation()),ie(p=>{const f=function wL(t,o,r){const s=q_(t,o._root,r?r._root:void 0);return new eD(s,o)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return l={...p,targetRouterState:f}}),Zo(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((t,o,r)=>ie(s=>(new PL(o,s.targetRouterState,s.currentRouterState,r).activate(t),s)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),Zo({next(){c=!0},complete(){c=!0}}),FI(()=>{c||u||this.cancelNavigationTransition(l,"",1),this.currentNavigation?.id===l.id&&(this.currentNavigation=null)}),yu(p=>{if(u=!0,aD(p)){lD(p)||(this.navigated=!0,this.restoreHistory(l,!0));const f=new yT(l.id,this.serializeUrl(l.extractedUrl),p.message,p.cancellationCode);if(s.next(f),lD(p)){const E=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),y={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||OD(l.source)};this.scheduleNavigation(E,"imperative",null,y,{resolve:l.resolve,reject:l.reject,promise:l.promise})}else l.resolve(!1)}else{this.restoreHistory(l,!0);const f=new qS(l.id,this.serializeUrl(l.extractedUrl),p,l.targetSnapshot??void 0);s.next(f);try{l.resolve(this.errorHandler(p))}catch(E){l.reject(E)}}return Kn}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}setTransition(r){this.transitions.next({...this.transitions.value,...r})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const s="popstate"===r.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{const l={replaceUrl:!0},c=r.state?.navigationId?r.state:null;if(c){const p={...c};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(l.state=p)}const u=this.parseUrl(r.url);this.scheduleNavigation(u,s,c,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){this.config=r.map(nC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,s={}){const{relativeTo:l,queryParams:c,fragment:u,queryParamsHandling:p,preserveFragment:f}=s,E=l||this.routerState.root,y=f?this.currentUrlTree.fragment:u;let I=null;switch(p){case"merge":I={...this.currentUrlTree.queryParams,...c};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=c||null}return null!==I&&(I=this.removeEmptyProps(I)),lL(E,this.currentUrlTree,r,I,y??null)}navigateByUrl(r,s={skipLocationChange:!1}){const l=fh(r)?r:this.parseUrl(r),c=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,s)}navigate(r,s={skipLocationChange:!1}){return function G0(t){for(let o=0;o<t.length;o++){if(null==t[o])throw new b(4008,false)}}(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let s;try{s=this.urlSerializer.parse(r)}catch(l){s=this.malformedUriErrorHandler(l,this.urlSerializer,r)}return s}isActive(r,s){let l;if(l=!0===s?{...P0}:!1===s?{...B0}:s,fh(r))return PS(this.currentUrlTree,r,l);const c=this.parseUrl(r);return PS(this.currentUrlTree,c,l)}removeEmptyProps(r){return Object.keys(r).reduce((s,l)=>{const c=r[l];return null!=c&&(s[l]=c),s},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new _h(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,s,l,c,u){if(this.disposed)return Promise.resolve(!1);let p,f,E;u?(p=u.resolve,f=u.reject,E=u.promise):E=new Promise((A,x)=>{p=A,f=x});const y=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),I=l&&l.\u0275routerPageId?l.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:y,targetPageId:I,source:s,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:c,resolve:p,reject:f,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(A=>Promise.reject(A))}setBrowserUrl(r,s){const l=this.urlSerializer.serialize(r),c={...s.extras.state,...this.generateNgRouterState(s.id,s.targetPageId)};this.location.isCurrentPathEqualTo(l)||s.extras.replaceUrl?this.location.replaceState(l,"",c):this.location.go(l,"",c)}restoreHistory(r,s=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===l?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===l&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,s,l){const c=new yT(r.id,this.serializeUrl(r.extractedUrl),s,l);this.triggerEvent(c),r.resolve(!1)}generateNgRouterState(r,s){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}}return t.\u0275fac=function(r){Vf()},t.\u0275prov=Ke({token:t,factory:function(){return DD()},providedIn:"root"}),t})();function OD(t){return"imperative"!==t}class AD{}let V0=(()=>{class t{constructor(r,s,l,c,u){this.router=r,this.injector=l,this.preloadingStrategy=c,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Tu(r=>r instanceof _h),hh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,s){const l=[];for(const c of s){c.providers&&!c._injector&&(c._injector=UE(c.providers,r,`Route: ${c.path}`));const u=c._injector??r,p=c._loadedInjector??u;c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent?l.push(this.preloadConfig(u,c)):(c.children||c._loadedRoutes)&&l.push(this.processRoutes(p,c.children??c._loadedRoutes))}return dn(l).pipe(Xt())}preloadConfig(r,s){return this.preloadingStrategy.preload(s,()=>{let l;l=s.loadChildren&&void 0===s.canLoad?this.loader.loadChildren(r,s):Be(null);const c=l.pipe(Ot(u=>null===u?Be(void 0):(s._loadedRoutes=u.routes,s._loadedInjector=u.injector,this.processRoutes(u.injector??r,u.routes))));return s.loadComponent&&!s._loadedComponent?dn([c,this.loader.loadComponent(s)]).pipe(Xt()):c})}}return t.\u0275fac=function(r){return new(r||t)(Oe(Bo),Oe(qv),Oe(Ls),Oe(AD),Oe(aC))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const dC=new We("");let kD=(()=>{class t{constructor(r,s,l={}){this.router=r,this.viewportScroller=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof zI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof _h&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof ZS&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,s){this.router.triggerEvent(new ZS(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(r){Vf()},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function bg(t,o){return{\u0275kind:t,\u0275providers:o}}function hC(t){return[{provide:lC,multi:!0,useValue:t}]}function ND(){const t=pn(pr);return o=>{const r=t.get(YE);if(o!==r.components[0])return;const s=t.get(Bo),l=t.get(LD);1===t.get(pC)&&s.initialNavigation(),t.get(xD,null,ke.Optional)?.setUpPreloading(),t.get(dC,null,ke.Optional)?.init(),s.resetRootComponentType(r.componentTypes[0]),l.closed||(l.next(),l.unsubscribe())}}const LD=new We("",{factory:()=>new F}),pC=new We("",{providedIn:"root",factory:()=>1});const xD=new We("");function z0(t){return bg(0,[{provide:xD,useExisting:V0},{provide:AD,useExisting:t}])}const PD=new We("ROUTER_FORROOT_GUARD"),Y0=[pI,{provide:US,useClass:UI},{provide:Bo,useFactory:DD},Z_,{provide:mh,useFactory:function MD(t){return t.routerState.root},deps:[Bo]},aC];function K0(){return new _w("Router",Bo)}let BD=(()=>{class t{constructor(r){}static forRoot(r,s){return{ngModule:t,providers:[Y0,[],hC(r),{provide:PD,useFactory:Q0,deps:[[Bo,new Ic,new Yl]]},{provide:kT,useValue:s||{}},s?.useHash?{provide:dh,useClass:ek}:{provide:dh,useClass:Uw},{provide:dC,useFactory:()=>{const t=pn(Bo),o=pn(vM),r=pn(kT);return r.scrollOffset&&o.setOffset(r.scrollOffset),new kD(t,o,r)}},s?.preloadingStrategy?z0(s.preloadingStrategy).\u0275providers:[],{provide:_w,multi:!0,useFactory:K0},s?.initialNavigation?ex(s):[],[{provide:FD,useFactory:ND},{provide:cw,multi:!0,useExisting:FD}]]}}static forChild(r){return{ngModule:t,providers:[hC(r)]}}}return t.\u0275fac=function(r){return new(r||t)(Oe(PD,8))},t.\u0275mod=qs({type:t}),t.\u0275inj=Vr({imports:[eC]}),t})();function Q0(t){return"guarded"}function ex(t){return["disabled"===t.initialNavigation?bg(3,[{provide:WE,multi:!0,useFactory:()=>{const o=pn(Bo);return()=>{o.setUpLocationChangeListener()}}},{provide:pC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?bg(2,[{provide:pC,useValue:0},{provide:WE,multi:!0,deps:[pr],useFactory:o=>{const r=o.get(ZA,Promise.resolve());let s=!1;return()=>r.then(()=>new Promise(c=>{const u=o.get(Bo),p=o.get(LD);(function l(c){o.get(Bo).events.pipe(Tu(p=>p instanceof _h||p instanceof yT||p instanceof qS),ie(p=>p instanceof _h||p instanceof yT&&(0===p.code||1===p.code)&&null),Tu(p=>null!==p),j_(1)).subscribe(()=>{c()})})(()=>{c(!0),s=!0}),u.afterPreactivation=()=>(c(!0),s||p.closed?Be(void 0):p),u.initialNavigation()}))}}]).\u0275providers:[]]}const FD=new We(""),nx=[];let ox=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=qs({type:t}),t.\u0275inj=Vr({imports:[BD.forRoot(nx),BD]}),t})();function GD(t,o,r,s,l,c,u){try{var p=t[c](u),f=p.value}catch(E){return void r(E)}p.done?o(f):Promise.resolve(f).then(s,l)}function UD(t){return function(){var o=this,r=arguments;return new Promise(function(s,l){var c=t.apply(o,r);function u(f){GD(c,s,l,u,p,"next",f)}function p(f){GD(c,s,l,u,p,"throw",f)}u(void 0)})}}var $h=Ae(279),rx=Ae(482),Vs=Ae(782),sx=Ae(226),HD=Ae.n(sx);let ix=(()=>{class t{constructor(){this._dirHandle=null,this.device=null,$h.setLocale(rx)}ngOnInit(){this.codeDiv=document.getElementById("generatedCode")?.firstChild;const r=document.getElementById("blocklyDiv"),l=$h.common.createBlockDefinitionsFromJsonArray([{type:"encender_led",message0:"encender led %1",args0:[{type:"field_number",name:"numero",value:0,min:.1,max:1}],inputsInline:!1,colour:170,tooltip:"Enciende el Led"},{type:"matriz_initialize",message0:"Inicializar Matriz %1 Tenacidad de led's  %2",args0:[{type:"input_dummy"},{type:"field_number",name:"input_brillo",value:.1,min:.1,max:.5,precision:.1}],inputsInline:!1,nextStatement:null,colour:240,tooltip:"Inicializa los parametros de la matriz",helpUrl:""},{type:"set_colour_all",message0:"Pintar matriz de color %1",args0:[{type:"field_colour",name:"color_matriz",colour:"#ff0000"}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:240,tooltip:"Pinta toda la matriz de un \xfanico color",helpUrl:""},{type:"input_number_led",message0:"%1",args0:[{type:"field_number",name:"number_data",value:0,min:0,max:7,precision:1}],inputsInline:!1,output:null,colour:240,tooltip:"Ingresar un n\xfamero entero.",helpUrl:""},{type:"paint_rectangle",lastDummyAlign0:"CENTRE",message0:"Pintar Rect\xe1ngulo %1 Coordenada X %2 %3 Coordenada Y %4 %5 Tama\xf1o Horizontal %6 %7 Tama\xf1o Vertical %8 %9 Color %10",args0:[{type:"input_dummy",align:"CENTRE"},{type:"field_number",name:"coord_x",value:0,min:0,max:7,precision:1},{type:"input_dummy",align:"CENTRE"},{type:"field_number",name:"coord_y",value:0,min:0,max:7,precision:1},{type:"input_dummy",align:"CENTRE"},{type:"field_number",name:"size_a",value:3,min:1,max:7,precision:1},{type:"input_dummy",align:"CENTRE"},{type:"field_number",name:"size_b",value:0,min:1,max:7,precision:1},{type:"input_dummy",align:"CENTRE"},{type:"field_colour",name:"colour_rectangle",colour:"#ff0000"}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:240,tooltip:"Pinta un rect\xe1ngulo con inicio en X,Y de tama\xf1o A,B",helpUrl:""},{type:"write_string",lastDummyAlign0:"CENTRE",message0:"Escribir texto  %1 Palabra %2 %3 Columna %4 %5 Fila %6 %7 Color %8",args0:[{type:"input_dummy",align:"CENTRE"},{type:"field_input",name:"string_input",text:"Hola"},{type:"input_dummy",align:"CENTRE"},{type:"field_number",name:"coord_y",value:0,min:0,max:7,precision:1},{type:"input_dummy",align:"CENTRE"},{type:"field_number",name:"coord_x",value:0,min:0,max:7,precision:1},{type:"input_dummy",align:"CENTRE"},{type:"field_colour",name:"colour_string",colour:"#ff9900"}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:240,tooltip:"Escribe un texto en la pantalla",helpUrl:""},{type:"sleep",message0:"Pausa de  %1 %2 %3 segundos",args0:[{type:"input_dummy"},{type:"field_number",name:"sleep_input",value:.5,min:.1,max:4},{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:240,tooltip:"Acciona una demora de X segundos. (M\xe1x. 4s)",helpUrl:""},{type:"slider_text",message0:"Slider de Texto %1 %2 Color %3 %4 Velocidad %5",args0:[{type:"field_input",name:"string_input",text:"Hola"},{type:"input_dummy"},{type:"field_colour",name:"input_colour",colour:"#3366ff"},{type:"input_dummy"},{type:"field_number",name:"input_velocity",value:.1,min:.05,max:1,precision:.01}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:240,tooltip:"Mueve el texto de derecha a izquierda.",helpUrl:""}]);$h.common.defineBlocks(l),this.workspace=$h.inject(r,{toolbox:{kind:"categoryToolbox",contents:[{kind:"category",name:"Logica",categorystyle:"logic_category",contents:[{kind:"label",text:"Condicional If"},{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_boolean"}]},{kind:"category",name:"Bucles",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext"},{kind:"block",type:"controls_whileUntil"}]},{kind:"category",name:"Matem\xe1tica",categorystyle:"math_category",contents:[{kind:"block",type:"math_number"},{kind:"block",type:"math_arithmetic"}]},{kind:"category",name:"Texto",categorystyle:"text_category",contents:[{kind:"block",type:"text"},{kind:"block",type:"text_print"}]},{kind:"category",name:"RP2040",colour:170,contents:[{kind:"block",type:"encender_led"}]},{kind:"category",name:"Matriz",colour:240,contents:[{kind:"block",type:"matriz_initialize"},{kind:"block",type:"set_colour_all"},{kind:"block",type:"input_number_led"},{kind:"block",type:"paint_rectangle"},{kind:"block",type:"write_string"},{kind:"block",type:"sleep"},{kind:"block",type:"slider_text"}]}]},theme:$h.Theme.defineTheme("myTemplate",{name:"myTemplate",base:$h.Themes.Zelos,fontStyle:{family:"Cursive, serif",weight:"normal",size:10},componentStyles:{workspaceBackgroundColour:"#cfbce1",toolboxBackgroundColour:"#622d94",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#b58cdc",flyoutForegroundColour:"#ccc",scrollbarColour:"#53188a",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.3,flyoutOpacity:.7}})}),Vs.pythonGenerator.encender_led=function(c){return Vs.pythonGenerator.provideFunction_("import_led",["import board","import digitalio","import time"]),`led = digitalio.DigitalInOut(board.LED)\nled.direction = digitalio.Direction.OUTPUT\nwhile True:\n  led.value = True\n  time.sleep(${c.getFieldValue("numero")})\n  led.value = False\n  time.sleep(${c.getFieldValue("numero")})`},Vs.pythonGenerator.matriz_initialize=function(c){return Vs.pythonGenerator.provideFunction_("imports_matriz",["import board","import neopixel","from adafruit_pixel_framebuf import PixelFramebuffer"]),`pixel_pin = board.NEOPIXEL\npixel_width = 8\npixel_height = 8\npixel_num = 64\npixels = neopixel.NeoPixel(pixel_pin, pixel_num, brightness=${c.getFieldValue("input_brillo")}, auto_write=False)\npixel_framebuf = PixelFramebuffer(pixels, pixel_width, pixel_height, alternating=False)\n`},Vs.pythonGenerator.set_colour_all=function(c){return`pixel_framebuf.fill(0x${c.getFieldValue("color_matriz").split("#")[1]})\npixel_framebuf.display()\n`},Vs.pythonGenerator.paint_rectangle=function(c){const u=c.getFieldValue("colour_rectangle").split("#");return`pixel_framebuf.fill_rect(${c.getFieldValue("coord_x")}, ${c.getFieldValue("coord_y")}, ${c.getFieldValue("size_a")}, ${c.getFieldValue("size_b")}, 0x${u[1]})\npixel_framebuf.display()\n`},Vs.pythonGenerator.write_string=function(c){const u=c.getFieldValue("colour_string").split("#");return`pixel_framebuf.text("${c.getFieldValue("string_input")}", ${c.getFieldValue("coord_y")}, ${c.getFieldValue("coord_x")}, 0x${u[1]})\npixel_framebuf.display()\n`},Vs.pythonGenerator.sleep=function(c){return Vs.pythonGenerator.provideFunction_("import_time",["import time"]),`time.sleep(${c.getFieldValue("sleep_input")})\n`},Vs.pythonGenerator.slider_text=function(c){Vs.pythonGenerator.provideFunction_("import_time",["import time"]);const u=c.getFieldValue("input_colour").split("#"),p=c.getFieldValue("string_input"),f=c.getFieldValue("input_velocity");return`for i in range(8, -6*len("${p}"), -1):\n  pixel_framebuf.fill(0x000000)\n  pixel_framebuf.text("${p}",i,0,0x${u[1]})\n  pixel_framebuf.display()\n  time.sleep(${f})\n`},this.runCode(),this.workspace.addChangeListener(c=>{}),this.workspace.addChangeListener(c=>{c.isUiEvent||c.type==$h.Events.FINISHED_LOADING||this.workspace.isDragging()||this.runCode()})}sendData(){HD().showLoading(),fetch("http://localhost:5000",{method:"POST",headers:{"Content-Type":"text/plain"},body:this.codeSend}).then(function(){var r=UD(function*(s){console.log(yield s.text()),HD().close()});return function(s){return r.apply(this,arguments)}}()).catch(r=>{console.error(r)})}pressButton(){var r=this;return UD(function*(){"serial"in navigator?(r.device=yield navigator.serial.requestPort({filters:[]}),yield r.device.open({baudRate:115200}),r.sendData(),yield r.device.close()):console.log("error")})()}runCode(){const r=Vs.pythonGenerator.workspaceToCode(this.workspace);this.codeDiv.innerText=r,this.codeSend=r}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Fl({type:t,selectors:[["app-root"]],decls:12,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-7"],["id","blocklyDiv",2,"height","500px","width","700px"],[1,"col-5"],["id","generatedCode"],["type","button",1,"btn","btn-success",3,"click"]],template:function(r,s){1&r&&(bl(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"div"),v_(5,"etiqueta1"),Sa(),Da(6,"div",3),Sa()(),bl(7,"div",4)(8,"pre",5),Da(9,"code"),Sa()()(),bl(10,"button",6),Aa("click",function(){return s.pressButton()}),v_(11,"Enviar codigo"),Sa()())},styles:[".box[_ngcontent-%COMP%]{width:100vw;height:100vh}"]}),t})(),lx=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=qs({type:t,bootstrap:[ix]}),t.\u0275inj=Vr({imports:[hN,ox]}),t})();(function AA(){Rw=!1})(),dN().bootstrapModule(lx).catch(t=>console.error(t))},931:function(Rt,Ee,Ae){var G,h;G=[Ae(69)],void 0!==(h=function(Z){return Z}.apply(Ee,G))&&(Rt.exports=h)},69:function(Rt,Ee){var G;void 0!==(G=function(){var h={},Z=function(e,n,i,a){e=e+" was deprecated in "+n+" and will be deleted in "+i+".",a&&(e+="\nUse "+a+" instead."),console.warn(e)},S=function(e,n){g(),zl=setTimeout(function(){n&&n.handleRightClick(e)},Zh)},g=function(){zl&&(clearTimeout(zl),zl=0)},wt=function(){Xi=null},so=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&us(e)},zn=function(e){return`${e.pointerId}`},us=function(e){const n=zn(e);return Xi?Xi===n:"pointerdown"===e.type&&(Xi=n,!0)},ue=function(e,n,i,a,d,_){function R(L){(d||so(L))&&(i?a.call(i,L):a(L))}if(void 0!==_&&Z("The opt_noPreventDefault argument of conditionalBind","version 9","version 10"),_=[],n in ci)for(let L=0;L<ci[n].length;L++){const z=ci[n][L];e.addEventListener(z,R,!1),_.push([e,z,R])}else e.addEventListener(n,R,!1),_.push([e,n,R]);return _},ot=function(e,n,i,a){function d(R){i?a.call(i,R):a(R)}const _=[];if(n in ci)for(let R=0;R<ci[n].length;R++){const L=ci[n][R];e.addEventListener(L,d,!1),_.push([e,L,d])}else e.addEventListener(n,d,!1),_.push([e,n,d]);return _},ve=function(e){const n=e[e.length-1][2];for(;e.length;){const i=e.pop();i[0].removeEventListener(i[1],i[2],!1)}return n},St=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||"true"===e.target.getAttribute("data-is-text-input"))return!0;if(e.target instanceof HTMLInputElement)return"text"===(e=e.target).type||"number"===e.type||"email"===e.type||"password"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type;if(e.target instanceof HTMLTextAreaElement)return!0}return!1},Ve=function(e){return!(!e.ctrlKey||!np)||2===e.button},Qt=function(e,n,i){const a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,i||(i=n.getScreenCTM().inverse()),a.matrixTransform(i)},Ws=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*cf,y:e.deltaY*cf};case 2:return{x:e.deltaX*Cc,y:e.deltaY*Cc}}},To=function(e){return Rc[e]||null},Tr=function(){const e=[];for(const n in Rc)e.push(Rc[n]);return e},io=function(e){Rc[e.id]=e},Qo=function(e){delete Rc[e.id]},sn=function(){return Kl},ln=function(e){Kl=e},Qe=function(){return Jl},an=function(e){Jl=e},Mt=function(){return Wm},bo=function(e){Wm=e},pe=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const n=e.getParentSvg(),i=e.getCachedParentSvgSize();var a=n.parentElement;if(a instanceof HTMLElement){var d=a.offsetWidth;a=a.offsetHeight,i.width!==d&&(n.setAttribute("width",d+"px"),e.setCachedParentSvgSize(d,null)),i.height!==a&&(n.setAttribute("height",a+"px"),e.setCachedParentSvgSize(null,a)),e.resize()}},Dt=function(e,n){const i=Object.create(null),a=e.getDescendants(!0);n&&(e=e.getNextBlock())&&(e=a.indexOf(e),a.splice(e,a.length-e));for(let _,d=0;_=a[d];d++)i[_.type]?i[_.type]++:i[_.type]=1;return i},v=function(e){return function(){this.jsonInit(e)}},$=function(e){op.defineBlocksWithJsonArrayInternal(e)},O=function(e){const n={};for(let i=0;i<e.length;i++){const a=e[i];if(!a){console.warn(`Block definition #${i} in JSON array is ${a}. Skipping`);continue}const d=a.type;d?n[d]={init:v(a)}:console.warn(`Block definition #${i} in JSON array is missing a type attribute. Skipping.`)}return n},F=function(e){for(const n of Object.keys(e)){const i=e[n];n in po&&console.warn(`Block definiton "${n}" overwrites previous definition.`),po[n]=i}},k=function(e,n,i){e=document.createElementNS(Sc,String(e));for(const a in n)e.setAttribute(a,`${n[a]}`);return i&&i.appendChild(e),e},Q=function(e,n){return!(n=n.split(" ")).every(i=>e.classList.contains(i))&&(e.classList.add(...n),!0)},Ge=function(e,n){e.classList.remove(...n.split(" "))},ce=function(e,n){return!(n=n.split(" ")).every(i=>!e.classList.contains(i))&&(e.classList.remove(...n),!0)},ie=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},Xe=function(e,n){const i=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");i?n.insertBefore(e,i):n.appendChild(e)},Cn=function(e,n){return!!(e.compareDocumentPosition(n)&Ss.DOCUMENT_POSITION_CONTAINED_BY)},br=function(e,n){e.style.transform=n,e.style["-webkit-transform"]=n},Pr=function(){Dc++,Yr||(Yr=Object.create(null))},Je=function(){--Dc||(Yr=null)},Bt=function(e,n,i,a){return ds(e,n+"pt",i,a)},ds=function(e,n,i,a){const d=e.textContent;var _;return e=d+"\n"+e.className.baseVal,Yr&&(_=Yr[e])||(td||((_=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(_),td=_.getContext("2d")),td.font=i+" "+n+" "+a,_=d?td.measureText(d).width:0,Yr&&(Yr[e]=_)),_},En=function(e,n,i,a){const d=document.createElement("span");d.style.font=i+" "+n+" "+a,d.textContent=e,(e=document.createElement("div")).style.width="1px",e.style.height="0",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(d),n.appendChild(e),document.body.appendChild(n),i={height:0,baseline:0};try{n.style.alignItems="baseline",i.baseline=e.offsetTop-d.offsetTop,n.style.alignItems="flex-end",i.height=e.offsetTop-d.offsetTop}finally{document.body.removeChild(n)}return i},Wt=function(e){return e*Math.PI/180},Iu=function(e){return 180*e/Math.PI},Br=function(e,n,i){if(i<e){const a=i;i=e,e=a}return Math.max(e,Math.min(n,i))},Gn=function(e){return Tb.getSizeInternal(e)},Ru=function(e){return new Nn(e.offsetWidth,e.offsetHeight)},Go=function(e,n){return(e=window.getComputedStyle(e))[n]||e.getPropertyValue(n)},Xs=function(e){const n=new re(0,0);e=e.getBoundingClientRect();var i=document.documentElement;return i=new re(window.pageXOffset||i.scrollLeft,window.pageYOffset||i.scrollTop),n.x=e.left+i.x,n.y=e.top+i.y,n},Th=function(){const e=document.body,n=document.documentElement;return new re(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},ge=function(e){const n=parseFloat(Go(e,"borderLeftWidth")),i=parseFloat(Go(e,"borderRightWidth")),a=parseFloat(Go(e,"borderTopWidth"));return e=parseFloat(Go(e,"borderBottomWidth")),new on(a,e,n,i)},Fr=function(e,n,i){e=wu(e,n,i),n.scrollLeft=e.x,n.scrollTop=e.y},wu=function(e,n,i){var a=Xs(e),d=Xs(n),_=ge(n);const R=a.x-d.x-_.left;return a=a.y-d.y-_.top,d=Ru(e),e=n.clientWidth-d.width,d=n.clientHeight-d.height,_=n.scrollLeft,n=n.scrollTop,i?(_+=R-e/2,n+=a-d/2):(_+=Math.min(R,Math.max(R-e,0)),n+=Math.min(a,Math.max(a-d,0))),new re(_,n)},Wa=function(){ct||((ct=document.createElement("div")).className="blocklyDropDownDiv",(Mt()||document.body).appendChild(ct),(ea=document.createElement("div")).className="blocklyDropDownContent",ct.appendChild(ea),(Ki=document.createElement("div")).className="blocklyDropDownArrow",ct.appendChild(Ki),ct.style.opacity="0",ct.style.transition="transform "+df+"s, opacity "+df+"s",ct.addEventListener("focusin",function(){Q(ct,"blocklyFocused")}),ct.addEventListener("focusout",function(){ce(ct,"blocklyFocused")}))},Rl=function(e){go=e},Xa=function(){return Ji},Yn=function(){return ea},Su=function(){ea.textContent="",ea.style.width=""},Du=function(e,n){ct.style.backgroundColor=e,ct.style.borderColor=n},za=function(e,n,i){return Jm=!0,wl(zs(e),e,n,i)},Ou=function(e){var n=e.getSvgRoot();const i=e.workspace.scale,a=e.height*i;return e=e.width*i,n=Xs(n),new on(n.y,n.y+a,n.x,n.x+e)},zs=function(e){return e=e.getScaledBBox(),new on(e.top,e.bottom,e.left,e.right)},wl=function(e,n,i,a){const d=e.left+(e.right-e.left)/2,_=e.bottom;e=e.top,a&&(e+=a);let R=(a=n.getSourceBlock()).workspace;for(;R.options.parentWorkspace;)R=R.options.parentWorkspace;return Rl(R.getParentSvg().parentNode),Sl(n,a.RTL,d,_,d,e,i)},Sl=function(e,n,i,a,d,_,R){return Ji=e,Zl=R||null,ct.style.direction=n?"rtl":"ltr",e=sn(),Ql=e.getRenderer().getClassName(),Yi=e.getTheme().getClassName(),Ql&&Q(ct,Ql),Yi&&Q(ct,Yi),ku(i,a,d,_)},Gr=function(e,n,i,a){return{initialX:(e=Uo(e,i.left,i.right,a.width)).divX,initialY:n,finalX:e.divX,finalY:n+Ym,arrowX:e.arrowX,arrowY:-(ql/2+zm),arrowAtTop:!0,arrowVisible:!0}},Dl=function(e,n,i,a){return{initialX:(e=Uo(e,i.left,i.right,a.width)).divX,initialY:n-a.height,finalX:e.divX,finalY:n-a.height-Ym,arrowX:e.arrowX,arrowY:a.height-2*zm-ql/2,arrowAtTop:!1,arrowVisible:!0}},Uo=function(e,n,i,a){return n=Br(n,e-a/2,i-a),{arrowX:e=Br(i=bb,e=e-ql/2-n,a-i-ql),divX:n}},Ya=function(){return!!Ji},Ur=function(e,n){return Ji===e&&(n?cn():Ol(),!0)},Ol=function(){ct.style.transform="translate(0, 0)",ct.style.opacity="0",Km=setTimeout(function(){cn()},1e3*df),Zl&&(Zl(),Zl=null)},cn=function(){Ya()&&(Km&&clearTimeout(Km),ct.style.transform="",ct.style.left="",ct.style.top="",ct.style.opacity="0",ct.style.display="none",ct.style.backgroundColor="",ct.style.borderColor="",Zl&&(Zl(),Zl=null),Su(),Ji=null,Ql&&(ce(ct,Ql),Ql=""),Yi&&(ce(ct,Yi),Yi=""),sn().markFocused())},ku=function(e,n,i,a){(e=rp.getPositionMetrics(e,n,i,a)).arrowVisible?(Ki.style.display="",Ki.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",Ki.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Ki.style.display="none",n=Math.floor(e.initialX),i=Math.floor(e.initialY),a=Math.floor(e.finalX);const d=Math.floor(e.finalY);return ct.style.left=n+"px",ct.style.top=i+"px",ct.style.display="block",ct.style.opacity="1",ct.style.transform="translate("+(a-n)+"px,"+(d-i)+"px)",!!e.arrowAtTop},Le=function(e,n,i,a){if(!(e instanceof ee)&&"string"!=typeof e||""===String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof n||""===n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');const d=n.toLowerCase();if(!i)throw Error("Can not register a null value");let _=qi[e],R=sp[e];if(_||(_=qi[e]=Object.create(null),R=sp[e]=Object.create(null)),Mu(e,i),!a&&_[d])throw Error('Name "'+d+'" with type "'+e+'" already registered.');_[d]=i,R[d]=n},Mu=function(e,n){if(e===String(ee.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},Ys=function(e,n){e=String(e).toLowerCase(),n=n.toLowerCase();const i=qi[e];i&&i[n]?(delete qi[e][n],delete sp[e][n]):console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},Ka=function(e,n,i){e=String(e).toLowerCase(),n=n.toLowerCase();const a=qi[e];if(!a||!a[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",i)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return a[n]},Ja=function(e,n){return e=String(e).toLowerCase(),n=n.toLowerCase(),!!(e=qi[e])&&!!e[n]},Un=function(e,n,i){return Ka(e,n,i)},Ai=function(e,n,i){return Ka(e,n,i)},Ot=function(e,n,i){e=String(e).toLowerCase();var a=qi[e];if(!a){if(a=`Unable to find [${e}] in the registry.`,i)throw Error(`${a} You must require or register a ${e} plugin.`);return console.warn(a),null}if(!n)return a;e=sp[e],i=Object.create(null),n=Object.keys(a);for(let d=0;d<n.length;d++){const _=n[d];i[e[_]]=a[_]}return i},Xt=function(e,n,i){return"function"==typeof(n=n.plugins[e.toString()]||Ds)?n:Un(e,n,i)},Kn=function(){return"blockly-"+(hf++).toString(36)},lo=function(){return od.genUid()},Ct=function(e){Ac=e},un=function(){return Ac},me=function(e){gf.fireInternal(e)},Hr=function(){const e=Ks(Pc,!0);Pc.length=0;for(let i,n=0;i=e[n];n++){if(!i.workspaceId)continue;const a=To(i.workspaceId);a&&a.fireChangeListener(i)}},Ks=function(e,n){e=e.slice(),n||e.reverse();const i=[],a=Object.create(null);for(let L,R=0;L=e[R];R++)if(!L.isNull()){var d=[L.isUiEvent?ta:L.type,L.blockId,L.workspaceId].join(" "),_=a[d];const z=_?_.event:null;_?L.type===Hn&&_.index===R-1?(z.newParentId=(d=L).newParentId,z.newInputName=d.newInputName,z.newCoordinate=d.newCoordinate,_.index=R):L.type===gn&&L.element===z.element&&L.name===z.name?z.newValue=L.newValue:L.type===ar?(z.viewTop=(_=L).viewTop,z.viewLeft=_.viewLeft,z.scale=_.scale,z.oldScale=_.oldScale):(L.type!==gi||z.type!==wr)&&(a[d]={event:L,index:R},i.push(L)):(a[d]={event:L,index:R},i.push(L))}e=i.filter(function(R){return!R.isNull()}),n||e.reverse();for(let L,R=1;L=e[R];R++)L.type===gn&&"mutation"===L.element&&e.unshift(e.splice(R,1)[0]);return e},Js=function(){for(let n,e=0;n=Pc[e];e++)n.recordUndo=!1},Ft=function(){pf++},Gt=function(){pf--},zt=function(){return 0===pf},yt=function(){return Oc},de=function(e){gf.setGroupInternal(e)},ki=function(e){const n=[];e=e.getDescendants(!1);for(let a,i=0;a=e[i];i++)n[i]=a.id;return n},qa=function(e,n){var i=Te(e.type);if(!i)throw Error("Unknown event type.");return dn(i)?i.fromJson(e,n):((i=new i).fromJson(e),i.workspaceId=n.id,i)},dn=function(e){return Object.getOwnPropertyDescriptors(e).fromJson&&"function"==typeof e.fromJson},Te=function(e){const n=Un(ee.EVENT,e);if(!n)throw Error(`Event type ${e} not found in registry.`);return n},Ho=function(e){if((e.type===Hn||e.type===On)&&e.workspaceId){var n=To(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=n.getBlockById(e.blockId)){const i=Ac;try{Ac=!1;const a=e.getParent();if(a&&a.isEnabled()){const d=e.getDescendants(!1);for(let R,_=0;R=d[_];_++)R.setEnabled(!0)}else if((e.outputConnection||e.previousConnection)&&!n.isDragging())do{e.setEnabled(!1),e=e.getNextBlock()}while(e)}finally{Ac=i}}}},be=function(e){return cr.createElementNS(ff,e)},Jn=function(e){return cr.createTextNode(e)},Za=function(e){return(new ad).parseFromString(e,"text/xml")},Mi=function(e){return(new cd).serializeToString(e)},we=function(e,n){Sb(e,n)},Qa=function(e,n){_f.confirmInternal(e,n)},M=function(e,n,i){qm(e,n,i)},j=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let i=0;i<e.length;i++){const a=e[i].getVarModels();if(a)for(let d=0;d<a.length;d++){const _=a[d];_.getId()&&n.add(_)}}return Array.from(n.values())},hs=function(e){let n=[];const i=document.createElement("button");return i.setAttribute("text","%{BKY_NEW_VARIABLE}"),i.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(a){Ml(a.getTargetWorkspace())}),n.push(i),e=kl(e),n.concat(e)},kl=function(e){const n=[];if(0<(e=e.getVariablesOfType("")).length){var i=e[e.length-1];if(po.variables_set){var a=be("block");a.setAttribute("type","variables_set"),a.setAttribute("gap",po.math_change?"8":"24"),a.appendChild(Nl(i)),n.push(a)}if(po.math_change&&((a=be("block")).setAttribute("type","math_change"),a.setAttribute("gap",po.variables_get?"20":"8"),a.appendChild(Nl(i)),i=qn('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),a.appendChild(i),n.push(a)),po.variables_get){e.sort(el.compareByName);for(let _,d=0;_=e[d];d++)(i=be("block")).setAttribute("type","variables_get"),i.setAttribute("gap","8"),i.appendChild(Nl(_)),n.push(i)}}return n},ao=function(e){return $f.generateUniqueNameInternal(e)},xu=function(e,n){if(!n.length)return e;const i=gd;let a="",d=i.indexOf(e);for(;;){let _=!1;for(let R=0;R<n.length;R++)if(n[R].toLowerCase()===e){_=!0;break}if(!_)break;d++,d===i.length&&(d=0,a=`${Number(a)+1}`),e=i.charAt(d)+a}return e},Ml=function(e,n,i){const d=i||"";!function a(_){yh(De.NEW_VARIABLE_TITLE,_,function(R){if(R){const L=vg(R,e);if(L){let z;L.type===d?z=De.VARIABLE_ALREADY_EXISTS.replace("%1",L.name):(z=De.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,z=z.replace("%1",L.name).replace("%2",L.type)),we(z,function(){a(R)})}else e.createVariable(R,d),n&&n(R)}else n&&n(null)})}("")},yr=function(e,n,i){!function a(d){const _=De.RENAME_VARIABLE_TITLE.replace("%1",n.name);yh(_,d,function(R){if(R){var L=rm(R,n.type,e);L?(L=De.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",L.name).replace("%2",L.type),we(L,function(){a(R)})):(e.renameVariableById(n.getId(),R),i&&i(R))}else i&&i(null)})}("")},yh=function(e,n,i){M(e,n,function(a){a&&((a=a.replace(/[\s\xa0]+/g," ").trim())===De.RENAME_VARIABLE||a===De.NEW_VARIABLE)&&(a=null),i(a)})},rm=function(e,n,i){i=i.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let d,a=0;d=i[a];a++)if(d.name.toLowerCase()===e&&d.type!==n)return d;return null},vg=function(e,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let a,i=0;a=n[i];i++)if(a.name.toLowerCase()===e)return a;return null},Nl=function(e){const n=be("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=Jn(e.name),n.appendChild(e),n},tc=function(e,n,i,a){let d=Pu(e,n,i,a);return d||(d=Ig(e,n,i,a)),d},Pu=function(e,n,i,a){const d=e.getPotentialVariableMap();let _=null;if(n&&(_=e.getVariableById(n),!_&&d&&(_=d.getVariableById(n)),_))return _;if(i){if(void 0===a)throw Error("Tried to look up a variable by name without a type");_=e.getVariable(i,a),!_&&d&&(_=d.getVariable(i,a))}return _},Ig=function(e,n,i,a){const d=e.getPotentialVariableMap();return i||(i=ao(e.isFlyout?e.targetWorkspace:e)),d?d.createVariable(i,a,n):e.createVariable(i,a,n)},vh=function(e,n){e=e.getAllVariables();const i=[];if(n.length!==e.length)for(let a=0;a<e.length;a++){const d=e[a];-1===n.indexOf(d)&&i.push(d)}return i},Ut=function(e){if(Ef)throw Error("CSS already injected");Tf+="\n"+e},gt=function(e,n){Ef||(Ef=!0,e&&(e=n.replace(/[\\/]$/,""),n=Tf.replace(/<<<PATH>>>/g,e),Tf="",(e=document.createElement("style")).id="blockly-common-style",n=document.createTextNode(n),e.appendChild(n),document.head.insertBefore(e,document.head.firstChild)))},yo=function(e){const n=new re(0,0);var i=e.x&&e.getAttribute("x");const a=e.y&&e.getAttribute("y");return i&&(n.x=parseInt(i)),a&&(n.y=parseInt(a)),(i=(i=e.getAttribute("transform"))&&i.match(t$))&&(n.x+=Number(i[1]),i[3]&&(n.y+=Number(i[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(yf))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},Bu=function(e){let n=0,i=0;for(;e;){const a=yo(e);if(n+=a.x,i+=a.y,-1!==(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new re(n,i)},Cg=function(){return Z("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},Ke=function(){const e=Th();return new on(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Ni=function(){const e=document.documentElement,n=window;return new re(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},Vr=function(e,n){var i=n.x;n=n.y;const a=e.getInjectionDiv().getBoundingClientRect();return i=new re(i-a.left,n-a.top),n=e.getOriginOffsetInPixels(),re.difference(i,n).scale(1/e.scale)},Ih=function(e){const n=be("variables");for(let i=0;i<e.length;i++){const a=e[i],d=be("variable");d.appendChild(Jn(a.name)),a.type&&d.setAttribute("type",a.type),d.id=a.getId(),n.appendChild(d)}return n},Li=function(e,n){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;let i=0;e.workspace.RTL&&(i=e.workspace.getWidth()),n=ps(e,n);const a=e.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(e.workspace.RTL?i-a.x:a.x)),n.setAttribute("y",Math.round(a.y)),n},Ch=function(e){if(e.isSerializable()){const n=be("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},ps=function(e,n){if(e.isInsertionMarker())return(n=e.getChildren(!1)[0])?ps(n):new DocumentFragment;const i=be(e.isShadow()?"shadow":"block");if(i.setAttribute("type",e.type),n||i.setAttribute("id",e.id),e.mutationToDom){var a=e.mutationToDom();a&&(a.hasChildNodes()||a.hasAttributes())&&i.appendChild(a)}if(function(e,n){for(let i=0;i<e.inputList.length;i++){const a=e.inputList[i];for(let d=0;d<a.fieldRow.length;d++){const _=Ch(a.fieldRow[d]);_&&n.appendChild(_)}}}(e,i),a=e.getCommentText()){var d=e.commentModel.size,_=e.commentModel.pinned,R=be("comment");R.appendChild(Jn(a)),R.setAttribute("pinned",_),R.setAttribute("h",d.height),R.setAttribute("w",d.width),i.appendChild(R)}for(e.data&&((a=be("data")).appendChild(Jn(e.data)),i.appendChild(a)),a=0;a<e.inputList.length;a++){var L=void 0;if(_=!0,(d=e.inputList[a]).type!==Ue.DUMMY){R=d.connection.targetBlock(),d.type===Ue.VALUE?L=be("value"):d.type===Ue.STATEMENT&&(L=be("statement"));const se=d.connection.getShadowDom();!se||R&&R.isShadow()||L.appendChild(Ll(se,n)),R&&(R=ps(R,n)).nodeType===Ss.ELEMENT_NODE&&(L.appendChild(R),_=!1),L.setAttribute("name",d.name),_||i.appendChild(L)}}let z;return void 0!==e.inputsInline&&e.inputsInline!==e.inputsInlineDefault&&i.setAttribute("inline",e.inputsInline.toString()),e.isCollapsed()&&i.setAttribute("collapsed","true"),e.isEnabled()||i.setAttribute("disabled","true"),e.isDeletable()||e.isShadow()||i.setAttribute("deletable","false"),e.isMovable()||e.isShadow()||i.setAttribute("movable","false"),e.isEditable()||i.setAttribute("editable","false"),(L=e.getNextBlock())&&(a=ps(L,n)).nodeType===Ss.ELEMENT_NODE&&(z=be("next"),z.appendChild(a),i.appendChild(z)),!(e=e.nextConnection&&e.nextConnection.getShadowDom())||L&&L.isShadow()||z.appendChild(Ll(e,n)),i},Ll=function(e,n){let a,i=e=e.cloneNode(!0);for(;i;)if(n&&"shadow"===i.nodeName&&i.removeAttribute("id"),i.firstChild)i=i.firstChild;else{for(;i&&!i.nextSibling;){let d;a=i,i=i.parentNode,a.nodeType===Ss.TEXT_NODE&&""===a.data.trim()&&(null==(d=i)?void 0:d.firstChild)!==a&&ie(a)}i&&(a=i,i=i.nextSibling,a.nodeType===Ss.TEXT_NODE&&""===a.data.trim()&&ie(a))}return e},co=function(e){return Mi(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},qn=function(e){const n=Za(e);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return n.documentElement},Vo=function(e,n){let i=0;n.RTL&&(i=n.getWidth());const a=[];Pr();const d=yt();d||de(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);let _=!0;try{for(let L,R=0;L=e.childNodes[R];R++){const z=L.nodeName.toLowerCase(),se=L;if("block"===z||"shadow"===z&&!un()){const nt=An(se,n);a.push(nt.id);const jt=se.hasAttribute("x")?parseInt(se.getAttribute("x")):10,Jo=se.hasAttribute("y")?parseInt(se.getAttribute("y")):10;isNaN(jt)||isNaN(Jo)||nt.moveBy(n.RTL?i-jt:jt,Jo),_=!1}else{if("shadow"===z)throw TypeError("Shadow block cannot be a top-level block.");if("comment"===z)n.rendered?jn.fromXmlRendered(se,n,i):Jr.fromXml(se,n);else if("variables"===z){if(!_)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");Fu(se,n),_=!1}}}}finally{d||de(!1),Je()}return n.setResizesEnabled&&n.setResizesEnabled(!0),me(new(Te(ra))(n)),a},An=function(e,n){Ft();var i=n.getAllVariables();let a;try{if(a=Sh(e,n),n.rendered){const d=a,_=a.getDescendants(!1);d.setConnectionTracking(!1);for(let R=_.length-1;0<=R;R--)_[R].initSvg();for(let R=_.length-1;0<=R;R--)_[R].render(!1);setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1),d.updateDisabled(),n.resizeContents()}else{const d=a.getDescendants(!1);for(let _=d.length-1;0<=_;_--)d[_].initModel()}}finally{Gt()}if(zt()){for(e=vh(n,i),n=0;n<e.length;n++)i=e[n],me(new(Te(Os))(i));me(new(Te(On))(a))}return a},Fu=function(e,n){for(let i=0;i<e.children.length;i++){const a=e.children[i],d=a.getAttribute("type"),_=a.getAttribute("id");n.createVariable(a.textContent,d,_)}},tr=function(e){const n={childBlockElement:null,childShadowElement:null};for(let i=0;i<e.childNodes.length;i++){const a=e.childNodes[i];a.nodeType===Ss.ELEMENT_NODE&&("block"===a.nodeName.toLowerCase()?n.childBlockElement=a:"shadow"===a.nodeName.toLowerCase()&&(n.childShadowElement=a))}return n},Sh=function(e,n,i,a){const d=e.getAttribute("type");if(!d)throw TypeError("Block type unspecified: "+e.outerHTML);var _=e.getAttribute("id");_=n.newBlock(d,_);const R=function(e){const n={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let i=0;i<e.children.length;i++){const a=e.children[i];if(a.nodeType!==Ss.TEXT_NODE)switch(a.nodeName.toLowerCase()){case"mutation":n.mutation.push(a);break;case"comment":n.comment.push(a);break;case"data":n.data.push(a);break;case"title":case"field":n.field.push(a);break;case"value":case"statement":n.input.push(a);break;case"next":n.next.push(a);break;default:console.warn("Ignoring unknown tag: "+a.nodeName)}}return n}(e),L=function(e,n){let i=!1;for(let a=0;a<e.length;a++){const d=e[a];n.domToMutation&&(n.domToMutation(d),n.initSvg&&(i=!0))}return i}(R.mutation,_);if(function(e,n){for(let a=0;a<e.length;a++){var i=e[a];const d=i.textContent,_="true"===i.getAttribute("pinned"),R=parseInt(i.getAttribute("w"));if(i=parseInt(i.getAttribute("h")),n.setCommentText(d),n.commentModel.pinned=_,isNaN(R)||isNaN(i)||(n.commentModel.size=new Nn(R,i)),_&&n.getCommentIcon&&!n.isInFlyout){const L=n;setTimeout(function(){L.getCommentIcon().setVisible(!0)},1)}}}(R.comment,_),function(e,n){for(let i=0;i<e.length;i++)n.data=e[i].textContent}(R.data,_),i)if(a){if(!_.previousConnection)throw TypeError("Next block does not have previous statement.");i.connect(_.previousConnection)}else if(_.outputConnection)i.connect(_.outputConnection);else{if(!_.previousConnection)throw TypeError("Child block does not have output or previous statement.");i.connect(_.previousConnection)}if(function(e,n){for(let i=0;i<e.length;i++){const a=e[i],d=a.getAttribute("name");xi(n,d,a)}}(R.field,_),function(e,n,i,a){for(let _=0;_<e.length;_++){var d=e[_];const R=d.getAttribute("name"),L=i.getInput(R);if(!L){console.warn("Ignoring non-existent input "+R+" in block "+a);break}if((d=tr(d)).childBlockElement){if(!L.connection)throw TypeError("Input connection does not exist.");Sh(d.childBlockElement,n,L.connection,!1)}if(d.childShadowElement){let z;null==(z=L.connection)||z.setShadowDom(d.childShadowElement)}}}(R.input,n,_,d),function(e,n,i){for(let a=0;a<e.length;a++){const d=tr(e[a]);if(d.childBlockElement){if(!i.nextConnection)throw TypeError("Next statement does not exist.");if(i.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Sh(d.childBlockElement,n,i.nextConnection,!0)}d.childShadowElement&&i.nextConnection&&i.nextConnection.setShadowDom(d.childShadowElement)}}(R.next,n,_),L&&_.initSvg(),(n=e.getAttribute("inline"))&&_.setInputsInline("true"===n),(n=e.getAttribute("disabled"))&&_.setEnabled("true"!==n&&"disabled"!==n),(n=e.getAttribute("deletable"))&&_.setDeletable("true"===n),(n=e.getAttribute("movable"))&&_.setMovable("true"===n),(n=e.getAttribute("editable"))&&_.setEditable("true"===n),(n=e.getAttribute("collapsed"))&&_.setCollapsed("true"===n),"shadow"===e.nodeName.toLowerCase()){for(e=_.getChildren(!1),n=0;n<e.length;n++)if(!e[n].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(_.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");_.setShadow(!0)}return _},xi=function(e,n,i){const a=e.getField(n);a?a.fromXml(i):console.warn("Ignoring non-existent field "+n+" in block "+e.type)},gs=function(e){return e.length?e.reduce(function(n,i){return n.length<i.length?n:i}).length:0},Pl=function(e,n){if(!e.length)return 0;if(1===e.length)return e[0].length;let a,i=0;for(n=n||gs(e),a=0;a<n;a++){for(var d=e[0][a],_=1;_<e.length;_++)if(d!==e[_][a])return i;" "===d&&(i=a+1)}for(d=1;d<e.length;d++)if((_=e[d][a])&&" "!==_)return i;return n},fs=function(e,n){if(!e.length)return 0;if(1===e.length)return e[0].length;let a,i=0;for(n=n||gs(e),a=0;a<n;a++){for(var d=e[0].substr(-a-1,1),_=1;_<e.length;_++)if(d!==e[_].substr(-a-1,1))return i;" "===d&&(i=a+1)}for(d=1;d<e.length;d++)if((_=e[d].charAt(e[d].length-a-1))&&" "!==_)return i;return n},vr=function(e,n){e=e.split("\n");for(let i=0;i<e.length;i++)e[i]=Bl(e[i],n);return e.join("\n")},Bl=function(e,n){if(e.length<=n)return e;const i=e.trim().split(/\s+/);for(var a=0;a<i.length;a++)i[a].length>n&&(n=i[a].length);var d=-1/0;let _,R=1;do{a=d,_=e,e=[],d=i.length/R;let L=1;for(let z=0;z<i.length-1;z++)L<(z+1.5)/d?(L++,e[z]=!0):e[z]=!1;e=Fl(i,e,n),d=Gu(i,e,n),e=Sg(i,e),R++}while(d>a);return _},Gu=function(e,n,i){const a=[0],d=[];for(var _=0;_<e.length;_++)a[a.length-1]+=e[_].length,!0===n[_]?(a.push(0),d.push(e[_].charAt(e[_].length-1))):!1===n[_]&&a[a.length-1]++;for(e=Math.max(...a),n=0,_=0;_<a.length;_++)n-=2*Math.pow(Math.abs(i-a[_]),1.5),n-=Math.pow(e-a[_],1.5),-1!==".?!".indexOf(d[_])?n+=i/3:-1!==",;)]}".indexOf(d[_])&&(n+=i/4);return 1<a.length&&a[a.length-1]<=a[a.length-2]&&(n+=.5),n},Fl=function(e,n,i){let d,a=Gu(e,n,i);for(let _=0;_<n.length-1;_++){if(n[_]===n[_+1])continue;const R=[].concat(n);R[_]=!R[_],R[_+1]=!R[_+1];const L=Gu(e,R,i);L>a&&(a=L,d=R)}return d?Fl(e,d,i):n},Sg=function(e,n){const i=[];for(let a=0;a<e.length;a++)i.push(e[a]),void 0!==n[a]&&i.push(n[a]?"\n":" ");return i.join("")},Uu=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},tn=function(e){if(e=Zn(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},Zn=function(e){for(;e&&e.tooltip;){if("string"==typeof e.tooltip||"function"==typeof e.tooltip)return e;e=e.tooltip}return null},Tt=function(){fn||((fn=document.createElement("div")).className="blocklyTooltipDiv",(Mt()||document.body).appendChild(fn))},Rn=function(e){e.mouseOverWrapper_=ot(e,"pointerover",null,Pi),e.mouseOutWrapper_=ot(e,"pointerout",null,Qn),e.addEventListener("pointermove",uo,!1)},Tn=function(e){e&&(ve(e.mouseOverWrapper_),ve(e.mouseOutWrapper_),e.removeEventListener("pointermove",uo))},Pi=function(e){md||(e=Zn(e.currentTarget),Dr!==e&&(Me(),$d=null,Dr=e),clearTimeout(Mb))},Qn=function(e){md||(Mb=setTimeout(function(){$d=Dr=null,Me()},1),clearTimeout(fp))},uo=function(e){if(Dr&&Dr.tooltip&&!md)if(gp){const n=_p-e.pageX;e=vf-e.pageY,Math.sqrt(n*n+e*e)>Ns&&Me()}else $d!==Dr&&(clearTimeout(fp),_p=e.pageX,vf=e.pageY,fp=setTimeout(Yt,Gc))},le=function(){$d=Dr=null,Me()},Me=function(){gp&&(gp=!1,fn&&(fn.style.display="none")),fp&&clearTimeout(fp)},Nt=function(){Me(),md=!0},ho=function(){md=!1},nn=function(){var e=tn(Dr);e=(e=vr(e,kb)).split("\n");for(let n=0;n<e.length;n++){const i=document.createElement("div");i.appendChild(document.createTextNode(e[n])),fn.appendChild(i)}},Yt=function(){if(!md&&($d=Dr,fn)){fn.textContent="",fn&&Dr&&("function"==typeof pp?pp(fn,Dr):nn());var e=Dr.RTL;fn.style.direction=e?"rtl":"ltr",fn.style.display="block",gp=!0;var{x:n,y:i}=function(e){const n=document.documentElement.clientWidth,i=document.documentElement.clientHeight;let a=_p;a=e?a-(If+fn.offsetWidth):a+If;let d=vf+Ed;return d+fn.offsetHeight>i+window.scrollY&&(d-=fn.offsetHeight+2*Ed),e?a=Math.max(Td-window.scrollX,a):a+fn.offsetWidth>n+window.scrollX-2*Td&&(a=n-fn.offsetWidth-2*Td),{x:a,y:d}}(e);fn.style.left=n+"px",fn.style.top=i+"px"}},Bi=function(){return o$},ze=function(){return r$},jo=function(e){e=String(e).toLowerCase().trim();var n=Nb[e];if(n||(n="0x"===e.substring(0,2)?"#"+e.substring(2):e,/^#[0-9a-f]{6}$/.test(n="#"===n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var i=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return i&&(e=Number(i[1]),n=Number(i[2]),i=Number(i[3]),0<=e&&256>e&&0<=n&&256>n&&0<=i&&256>i)?Fi(e,n,i):null},Fi=function(e,n,i){return n=e<<16|n<<8|i,16>e?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},Wr=function(e){return(e=jo(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},bn=function(e,n,i){let a=0,d=0,_=0;if(0===n)_=d=a=i;else{const R=Math.floor(e/60),L=e/60-R;e=i*(1-n);const z=i*(1-n*L);switch(n=i*(1-n*(1-L)),R){case 1:a=z,d=i,_=e;break;case 2:a=e,d=i,_=n;break;case 3:a=e,d=z,_=i;break;case 4:a=n,d=e,_=i;break;case 5:a=i,d=e,_=z;break;case 6:case 0:a=i,d=n,_=e}}return Fi(Math.floor(a),Math.floor(d),Math.floor(_))},nr=function(e,n,i){return(e=jo(e))&&(n=jo(n))?(e=Wr(e),n=Wr(n),Fi(Math.round(n[0]+i*(e[0]-n[0])),Math.round(n[1]+i*(e[1]-n[1])),Math.round(n[2]+i*(e[2]-n[2])))):null},_s=function(e){return bn(e,o$,255*r$)},Io=function(e,n){const i=[];var a=e.split("");a.push("");var d=0;e=[];let _=null;for(let z=0;z<a.length;z++){var R=a[z];if(0===d)"%"===R?((d=e.join(""))&&i.push(d),e.length=0,d=1):e.push(R);else if(1===d)"%"===R?(e.push(R),d=0):n&&"0"<=R&&"9">=R?(d=2,_=R,(R=e.join(""))&&i.push(R),e.length=0):"{"===R?d=3:(e.push("%",R),d=0);else if(2===d)if("0"<=R&&"9">=R)_+=R;else{var L=void 0;i.push(parseInt(null!=(L=_)?L:"",10)),z--,d=0}else 3===d&&(""===R?(e.splice(0,0,"%{"),z--,d=0):"}"!==R?e.push(R):(d=e.join(""),/[A-Z]\w*/i.test(d)&&(R=(R=d.toUpperCase()).startsWith("BKY_")?R.substring(4):null)&&R in De?"string"==typeof(d=De[R])?Array.prototype.push.apply(i,Io(d,n)):i.push(n?String(d):d):i.push("%{"+d+"}"),d=e.length=0))}for((n=e.join(""))&&i.push(n),L=[],e.length=0,a=0;a<i.length;a++)"string"==typeof i[a]?e.push(i[a]):((n=e.join(""))&&L.push(n),e.length=0,L.push(i[a]));return(n=e.join(""))&&L.push(n),e.length=0,L},ms=function(e){return Io(e,!0)},Lt=function(e){return"string"!=typeof e?e:(e=Io(e,!1)).length?String(e[0]):""},_t=function(e){let n=!0;const i=De,a=e.match(/%{BKY_[A-Z]\w*}/gi);if(a)for(let d=0;d<a.length;d++)void 0===i[a[d].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+a[d]+" in "+e),n=!1);return n},Gi=function(e){const n="string"==typeof e?Lt(e):e;var i=Number(n);if(!isNaN(i)&&0<=i&&360>=i)return{hue:i,hex:bn(i,Bi(),255*ze())};if(i=jo(n))return{hue:null,hex:i};throw i='Invalid colour: "'+n+'"',e!==n&&(i+=' (from "'+e+'")'),Error(i)},Ui=function(){return qr},ic=function(){qr||((qr=document.createElement("div")).className="blocklyWidgetDiv",(Mt()||document.body).appendChild(qr))},$s=function(e,n,i){Co(),bd=e,mp=i,(e=qr)&&(e.style.direction=n?"rtl":"ltr",e.style.display="block",n=sn(),Uc=n.getRenderer().getClassName(),Hc=n.getTheme().getClassName(),Uc&&Q(e,Uc),Hc&&Q(e,Hc))},Co=function(){if(Es()){bd=null;var e=qr;e&&(e.style.display="none",e.style.left="",e.style.top="",mp&&mp(),mp=null,e.textContent="",Uc&&(ce(e,Uc),Uc=""),Hc&&(ce(e,Hc),Hc=""),sn().markFocused())}},Es=function(){return!!bd},wn=function(e){bd===e&&Co()},Oh=function(e,n,i){qr.style.left=e+"px",qr.style.top=n+"px",qr.style.height=i+"px"},eo=function(e,n,i,a){const d=Hu(e,n,i);e=or(e,n,i,a),0>d?Oh(e,0,i.height+d):Oh(e,d,i.height)},or=function(e,n,i,a){return a?Math.min(Math.max(n.right-i.width,e.left),e.right-i.width):Math.max(Math.min(n.left,e.right-i.width),e.left)},Hu=function(e,n,i){return n.bottom+i.height>=e.bottom?n.top-i.height:n.bottom},to=function(e,n){Le(ee.FIELD,e,n)},yn=function(e){return s$.fromJsonInternal(e)},Xr=function(e,n){e.setAttribute(Pb,n)},xt=function(e,n,i){Array.isArray(i)&&(i=i.join(" ")),e.setAttribute(xb+n,`${i}`)},cm=function(e,n,i){return e.map(([a,d])=>[a.substring(n,a.length-i),d])},kh=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let n=!1;for(let i=0;i<e.length;i++){const a=e[i];Array.isArray(a)?"string"!=typeof a[1]?(n=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option id must be a string. Found "+a[1]+" in: ",a)):a[0]&&"string"!=typeof a[0]&&"string"!=typeof a[0].src&&(n=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option must have a string label or image description. Found"+a[0]+" in: ",a)):(n=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option must be an array. Found: ",a))}if(n)throw TypeError("Found invalid FieldDropdown options.")},ei=function(e,n){for(const i in n)e[i]=null!==n[i]&&"object"==typeof n[i]?ei(e[i]||Object.create(null),n[i]):n[i];return e},Ts=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=m(e),e=gm(e)),hm(e),e):null},hm=function(e){const n=e.kind;if(e=e.contents,n&&n!==Df&&n!==Ls)throw Error("Invalid toolbox kind "+n+". Please supply either "+Df+" or "+Ls);if(!e)throw Error("Toolbox must have a contents attribute.")},Vu=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:ac(e):[]},Mh=function(e){return u$.hasCategoriesInternal(e)},Nh=function(e){return!(!e||!e.contents||!e.contents.filter(function(n){return"CATEGORY"===n.kind.toUpperCase()}).length)},gm=function(e){const n={contents:ac(e)};return e instanceof Node&&ti(e,n),n},ac=function(e){const n=[];let i=e.childNodes;i||(i=e);for(let d,a=0;d=i[a];a++){if(!d.tagName)continue;e={};const _=d.tagName.toUpperCase();e.kind=_,"BLOCK"===_?e.blockxml=d:d.childNodes&&0<d.childNodes.length&&(e.contents=ac(d)),ti(d,e),n.push(e)}return n},ti=function(e,n){for(let i=0;i<e.attributes.length;i++){const a=e.attributes[i];-1<a.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[a.nodeName.replace("css-","")]=a.value):n[a.nodeName]=a.value}},m=function(e){let n=null;if(e)if("string"==typeof e){if(n=qn(e),"xml"!==n.nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(n=e);return n},T=function(e,n){if("string"!=typeof e||""===e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(Wc[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+e+'" must be a function');Wc[e]=n},ye=function(e){return!!Wc[e]},It=function(e,n,i){const a=Wc[e];if("function"!=typeof a)throw Error('Error: Extension "'+e+'" not found.');let d;if(i?Ro(e,n):d=kg(n),a.apply(n),i)Lh('Error after applying mutator "'+e+'": ',n);else if(!Ir(d,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Ro=function(e,n){if(kg(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},Ul=function(e,n){return Ag(e.compose,e.decompose,n+" compose/decompose")},Ag=function(e,n,i){if(e&&n){if("function"!=typeof e||"function"!=typeof n)throw Error(i+" must be a function");return!0}if(!e&&!n)return!1;throw Error(i+"Must have both or neither functions")},Lh=function(e,n){const i=function(e,n){return Ag(e.mutationToDom,e.domToMutation,n+" mutationToDom/domToMutation")}(n,e),a=function(e,n){return Ag(e.saveExtraState,e.loadExtraState,n+" saveExtraState/loadExtraState")}(n,e);if(!i&&!a)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");Ul(n,e)},kg=function(e){const n=[];return void 0!==e.domToMutation&&n.push(e.domToMutation),void 0!==e.mutationToDom&&n.push(e.mutationToDom),void 0!==e.saveExtraState&&n.push(e.saveExtraState),void 0!==e.loadExtraState&&n.push(e.loadExtraState),void 0!==e.compose&&n.push(e.compose),void 0!==e.decompose&&n.push(e.decompose),n},Ir=function(e,n){if((n=kg(n)).length!==e.length)return!1;for(let i=0;i<n.length;i++)if(e[i]!==n[i])return!1;return!0},cc=function(e){if("object"!=typeof document)throw Error("runAfterPageLoad() requires browser document.");if("complete"===document.readyState)e();else{const n=setInterval(function(){"complete"===document.readyState&&(clearInterval(n),e())},10)}},Mg=function(e,n,i){var a=e.getField(n);if(a instanceof Do&&!a.isOptionListDynamic()){a=a.getOptions();for(let d=0;d<a.length;d++){const _=a[d][1];null===i[_]&&console.warn("No tooltip mapping for value "+_+" of field "+n+" of block type "+e.type)}}},mt=function(e,n){return-1!==(n=e.indexOf(n))&&(e.splice(n,1),!0)},Ie=function(e,n){return" "+e+","+n+" "},Cr=function(e,n){return" "+e+n.join("")},kn=function(e,n){return" M "+e+","+n+" "},rt=function(e,n){return" m "+e+","+n+" "},oi=function(e,n){return" l "+e+","+n+" "},Hl=function(e){return" l"+e.join("")},ae=function(e,n){return" "+e+" "+n+" "},$t=function(e,n,i,a){return e+" "+i+" "+i+" "+n+a},Lg=function(e,n){Le(ee.SERIALIZER,e,n)},K=function(e,{addCoordinates:n=!1,addInputBlocks:i=!0,addNextBlocks:a=!0,doFullSerialization:d=!0}={}){if(e.isInsertionMarker())return null;const _={type:e.type,id:e.id};return n&&jT(e,_),pt(e,_),WT(e,_),Mn(e,_),$m(e,_,d),i&&Wu(e,_,d),a&&bs(e,_,d),_},pt=function(e,n){e.isCollapsed()&&(n.collapsed=!0),e.isEnabled()||(n.enabled=!1),void 0!==e.inputsInline&&e.inputsInline!==e.inputsInlineDefault&&(n.inline=e.inputsInline),e.data&&(n.data=e.data)},jT=function(e,n){const i=e.workspace;e=e.getRelativeToSurfaceXY(),n.x=Math.round(i.RTL?i.getWidth()-e.x:e.x),n.y=Math.round(e.y)},WT=function(e,n){e.saveExtraState?null!==(e=e.saveExtraState())&&(n.extraState=e):e.mutationToDom&&null!==(e=e.mutationToDom())&&(n.extraState=co(e).replace(' xmlns="https://developers.google.com/blockly/xml"',""))},Mn=function(e,n){e.getCommentText()&&(n.icons={comment:{text:e.getCommentText(),pinned:e.commentModel.pinned,height:Math.round(e.commentModel.size.height),width:Math.round(e.commentModel.size.width)}})},$m=function(e,n,i){const a=Object.create(null);for(let d=0;d<e.inputList.length;d++){const _=e.inputList[d];for(let R=0;R<_.fieldRow.length;R++){const L=_.fieldRow[R];L.isSerializable()&&(a[L.name]=L.saveState(i))}}Object.keys(a).length&&(n.fields=a)},Wu=function(e,n,i){const a=Object.create(null);for(let d=0;d<e.inputList.length;d++){const _=e.inputList[d];if(_.type===Ue.DUMMY)continue;const R=xh(_.connection,i);R&&(a[_.name]=R)}Object.keys(a).length&&(n.inputs=a)},bs=function(e,n,i){e.nextConnection&&(e=xh(e.nextConnection,i))&&(n.next=e)},xh=function(e,n){const i=e.getShadowState(!0);if(e=e.targetBlock(),!i&&!e)return null;const a=Object.create(null);return i&&(a.shadow=i),e&&!e.isShadow()&&(a.block=K(e,{doFullSerialization:n})),a},ri=function(e,n,{recordUndo:i=!1}={}){return Em(e,n,{recordUndo:i})},Em=function(e,n,{parentConnection:i,isShadow:a=!1,recordUndo:d=!1}={}){const _=un();Ct(d),(d=yt())||de(!0),Ft();const R=Tm(e,n,{parentConnection:i,isShadow:a});return Gt(),me(new(Te(On))(R)),de(d),Ct(_),n.rendered&&setTimeout(()=>{R.disposed||R.setConnectionTracking(!0)},1),R},Tm=function(e,n,{parentConnection:i,isShadow:a=!1}={}){if(!e.type)throw new ca(e);const d=n.newBlock(e.type,e.id);return d.setShadow(a),CC(d,e),bm(d,e),wo(d,e),si(i,d,e),ym(d,e),uc(d,e),ii(d,e),XT(d,e),zT(d,n.rendered),d},CC=function(e,n){let i=void 0===n.x?0:n.x;n=void 0===n.y?0:n.y;const a=e.workspace;i=a.RTL?a.getWidth()-i:i,e.moveBy(i,n)},bm=function(e,n){n.collapsed&&e.setCollapsed(!0),!1===n.enabled&&e.setEnabled(!1),void 0!==n.inline&&e.setInputsInline(n.inline),void 0!==n.data&&(e.data=n.data)},wo=function(e,n){n.extraState&&(e.loadExtraState?e.loadExtraState(n.extraState):e.domToMutation&&e.domToMutation(qn(n.extraState)))},si=function(e,n,i){if(e){if(e.getSourceBlock().isShadow()&&!n.isShadow())throw new Hb(i);if(e.type===Ue.VALUE){var a=n.outputConnection;if(!a)throw new Or("output",n,i)}else if(!(a=n.previousConnection))throw new Or("previous",n,i);if(!e.connect(a)){const d=n.workspace.connectionChecker;throw new g$(d.getErrorMessage(d.canConnectWithReason(a,e,!1),a,e),e.type===Ue.VALUE?"output connection":"previous connection",n,i)}}},ym=function(e,n){n.icons&&(n=n.icons.comment)&&(e.setCommentText(n.text),"pinned"in n&&(e.commentModel.pinned=n.pinned),"width"in n&&"height"in n&&(e.commentModel.size=new Nn(n.width,n.height)),n.pinned&&e.rendered&&!e.isInFlyout&&setTimeout(()=>e.getCommentIcon().setVisible(!0),1))},uc=function(e,n){if(n.fields){var i=Object.keys(n.fields);for(let a=0;a<i.length;a++){const d=i[a],_=n.fields[d],R=e.getField(d);R?R.loadState(_):console.warn(`Ignoring non-existant field ${d} in block ${e.type}`)}}},ii=function(e,n){if(n.inputs){var i=Object.keys(n.inputs);for(let a=0;a<i.length;a++){const d=i[a],_=e.getInput(d);if(!_||!_.connection)throw new Or(d,e,n);xg(_.connection,n.inputs[d])}}},XT=function(e,n){if(n.next){if(!e.nextConnection)throw new Or("next",e,n);xg(e.nextConnection,n.next)}},xg=function(e,n){n.shadow&&e.setShadowState(n.shadow),n.block&&Tm(n.block,e.getSourceBlock().workspace,{parentConnection:e})},zT=function(e,n){if(n)for(e.setConnectionTracking(!1),e.initSvg(),e.render(!1),e=e.getIcons(),n=0;n<e.length;n++)e[n].computeIconLocation();else e.initModel()},Pg=function(e,n){let i=null;const a=(n=n.outputConnection).getConnectionChecker();for(let _,d=0;_=e.inputList[d];d++){const R=_.connection;if(R&&a.canConnect(n,R,!1)){if(i)return null;i=R}}return i},Xu=function(e){let n=e.outputConnection;return(!n||e.previousConnection&&e.previousConnection.isConnected())&&(n=e.previousConnection),n},Ph=function(e){const n=e.workspace;var i=e.getSvgRoot();n.getAudioManager().play("delete");const a=n.getSvgXY(i);(i=i.cloneNode(!0)).setAttribute("transform","translate("+a.x+","+a.y+")"),n.getParentSvg().appendChild(i),vm(i,{x:a.x,y:a.y,width:e.width,height:e.height},n.RTL,new Date,n.scale)},vm=function(e,n,i,a,d){const _=((new Date).getTime()-a.getTime())/150;1<_?ie(e):(e.setAttribute("transform","translate("+(n.x+(i?-1:1)*n.width*d/2*_)+","+(n.y+n.height*d*_)+") scale("+(1-_)*d+")"),setTimeout(vm,10,e,n,i,a,d))},Fg=function(e){const n=e.workspace,i=n.scale;if(n.getAudioManager().play("click"),!(1>i)){var a=n.getSvgXY(e.getSvgRoot());e.outputConnection?(a.x+=(e.RTL?3:-3)*i,a.y+=13*i):e.previousConnection&&(a.x+=(e.RTL?-23:23)*i,a.y+=3*i),e=k(B.CIRCLE,{cx:a.x,cy:a.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),Bh(e,new Date,i)}},Bh=function(e,n,i){const a=((new Date).getTime()-n.getTime())/150;1<a?ie(e):(e.setAttribute("r",(25*a*i).toString()),e.style.opacity=(1-a).toString(),Dd=setTimeout(Bh,10,e,n,i))},Gg=function(e){if(dc(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),Rp=e.getSvgRoot(),Ug(Rp,n,new Date)}},Ug=function(e,n,i){const a=((new Date).getTime()-i.getTime())/200;let d="";1>=a&&(d=`skewX(${Math.round(Math.sin(a*Math.PI*3)*(1-a)*n)})`,Dd=setTimeout(Ug,10,e,n,i)),e.skew_=d,e.setAttribute("transform",e.translate_+e.skew_)},dc=function(){if(Rp){Dd&&clearTimeout(Dd);const e=Rp;e.skew_="",e.setAttribute("transform",e.translate_),Rp=null}},hc=function(e){Mf.copyInternal(e)},Vg=function(){if(!mi)return null;let e=mi.source;return e.isFlyout&&(e=e.targetWorkspace),mi.typeCounts&&e.isCapacityAvailable(mi.typeCounts)?e.paste(mi.saveInfo):null},Fh=function(e){return Mf.duplicateInternal(e)},li=function(){return Od},Kt=function(e){Od=e},Gh=function(e,n,i){if($s(wp,i,zu),n.length){var a=KT(n,i);Ad=a,JT(a,e,i),setTimeout(function(){a.focus()},1),Od=null}else Uh()},KT=function(e,n){const i=new Ep;i.setRole(mo.MENU);for(let a=0;a<e.length;a++){const d=e[a],_=new Cf(d.text);_.setRightToLeft(n),_.setRole(mo.MENUITEM),i.addChild(_),_.setEnabled(d.enabled),d.enabled&&_.onAction(function(){Uh(),d.callback(d.scope)},{})}return i},JT=function(e,n,i){const a=Ke();n=new on(n.clientY+a.top,n.clientY+a.top,n.clientX+a.left,n.clientX+a.left),qT(e);const d=e.getSize();i&&(n.left+=d.width,n.right+=d.width,a.left+=d.width,a.right+=d.width),eo(a,n,d,i),e.focus()},qT=function(e){var n=Ui();if(!n)throw Error("Attempting to create a context menu when widget div is null");n=e.render(n),Q(n,"blocklyContextMenu"),ue(n,"contextmenu",null,ZT),e.focus()},ZT=function(e){e.preventDefault(),e.stopPropagation()},Uh=function(){wn(wp),Od=null},zu=function(){Ad&&(Ad.dispose(),Ad=null)},Yu=function(e){return{text:De.REMOVE_COMMENT,enabled:!0,callback:function(){de(!0),e.dispose(),de(!1)}}},Vh=function(e){return{text:De.DUPLICATE_COMMENT,enabled:!0,callback:function(){Fh(e)}}},jg=function(e,n,i,a,d,_){const R=_.scrollbar&&_.scrollbar.canScrollVertically();return e.horizontal===ll.LEFT?(i=d.absoluteMetrics.left+i,R&&_.RTL&&(i+=Ht.scrollbarThickness)):(i=d.absoluteMetrics.left+d.viewMetrics.width-n.width-i,R&&!_.RTL&&(i-=Ht.scrollbarThickness)),e.vertical===xs.TOP?e=d.absoluteMetrics.top+a:(e=d.absoluteMetrics.top+d.viewMetrics.height-n.height-a,_.scrollbar&&_.scrollbar.canScrollHorizontally()&&(e-=Ht.scrollbarThickness)),new on(e,e+n.height,i,i+n.width)},ys=function(e,n){return{horizontal:n.toolboxMetrics.position===Pe.LEFT||e.horizontalLayout&&!e.RTL?ll.RIGHT:ll.LEFT,vertical:n.toolboxMetrics.position===Pe.BOTTOM?xs.TOP:xs.BOTTOM}},Vl=function(e,n,i,a){const d=e.left,_=e.right-e.left,R=e.bottom-e.top;for(let L=0;L<a.length;L++){const z=a[L];e.intersects(z)&&(e=new on(e=i===al.UP?z.top-R-n:z.bottom+n,e+R,d,d+_),L=-1)}return e},Cm=function(){Et.registry.register({name:Ps.ESCAPE,preconditionFn:e=>!e.options.readOnly,callback:e=>(e.hideChaff(),!0),keyCodes:[$e.ESC]})},Rm=function(){Et.registry.register({name:Ps.DELETE,preconditionFn(e){const n=Qe();return!e.options.readOnly&&null!=n&&n.isDeletable()},callback:(e,n)=>(n.preventDefault(),!ts.inProgress()&&(Qe().checkAndDelete(),!0)),keyCodes:[$e.DELETE,$e.BACKSPACE]})},pc=function(){const e=Et.registry.createSerializedKey($e.C,[$e.CTRL]),n=Et.registry.createSerializedKey($e.C,[$e.ALT]),i=Et.registry.createSerializedKey($e.C,[$e.META]);Et.registry.register({name:Ps.COPY,preconditionFn(a){const d=Qe();return!a.options.readOnly&&!ts.inProgress()&&null!=d&&d.isDeletable()&&d.isMovable()},callback:(a,d)=>(d.preventDefault(),a.hideChaff(),hc(Qe()),!0),keyCodes:[e,n,i]})},jh=function(){const e=Et.registry.createSerializedKey($e.X,[$e.CTRL]),n=Et.registry.createSerializedKey($e.X,[$e.ALT]),i=Et.registry.createSerializedKey($e.X,[$e.META]);Et.registry.register({name:Ps.CUT,preconditionFn(a){const d=Qe();return!a.options.readOnly&&!ts.inProgress()&&null!=d&&d instanceof ko&&d.isDeletable()&&d.isMovable()&&!d.workspace.isFlyout},callback(){const a=Qe();return!!a&&(hc(a),a.checkAndDelete(),!0)},keyCodes:[e,n,i]})},wm=function(){const e=Et.registry.createSerializedKey($e.V,[$e.CTRL]),n=Et.registry.createSerializedKey($e.V,[$e.ALT]),i=Et.registry.createSerializedKey($e.V,[$e.META]);Et.registry.register({name:Ps.PASTE,preconditionFn:a=>!a.options.readOnly&&!ts.inProgress(),callback:()=>!!Vg(),keyCodes:[e,n,i]})},Sm=function(){const e=Et.registry.createSerializedKey($e.Z,[$e.CTRL]),n=Et.registry.createSerializedKey($e.Z,[$e.ALT]),i=Et.registry.createSerializedKey($e.Z,[$e.META]);Et.registry.register({name:Ps.UNDO,preconditionFn:a=>!a.options.readOnly&&!ts.inProgress(),callback:a=>(a.hideChaff(),a.undo(!1),!0),keyCodes:[e,n,i]})},QT=function(){const e=Et.registry.createSerializedKey($e.Z,[$e.SHIFT,$e.CTRL]),n=Et.registry.createSerializedKey($e.Z,[$e.SHIFT,$e.ALT]),i=Et.registry.createSerializedKey($e.Z,[$e.SHIFT,$e.META]),a=Et.registry.createSerializedKey($e.Y,[$e.CTRL]);Et.registry.register({name:Ps.REDO,preconditionFn:d=>!ts.inProgress()&&!d.options.readOnly,callback:d=>(d.hideChaff(),d.undo(!0),!0),keyCodes:[e,n,i,a]})},eb=function(){Cm(),Rm(),pc(),jh(),wm(),Sm(),QT()},vs=function(e){return void 0!==e.startPublishing&&void 0!==e.stopPublishing},Wg=function(e){return void 0!==e.doProcedureUpdate},Is=function(e){for(const n of e.getAllBlocks(!1))Wg(n)&&n.doProcedureUpdate()},gc=function(e){const n=e.getBlocksByType("procedures_defnoreturn",!1).map(function(i){return i.getProcedureDef()});return e=e.getBlocksByType("procedures_defreturn",!1).map(function(i){return i.getProcedureDef()}),n.sort(Xg),e.sort(Xg),[n,e]},Xg=function(e,n){return e[0].localeCompare(n[0],void 0,{sensitivity:"base"})},zg=function(e,n){if(n.isInFlyout)return e;for(e=e||De.UNNAMED_KEY||"unnamed";!fc(e,n.workspace,n);){const i=e.match(/^(.*?)(\d+)$/);e=i?i[1]+(parseInt(i[2])+1):e+"2"}return e},fc=function(e,n,i){return!Dm(e,n,i)},Dm=function(e,n,i){n=n.getAllBlocks(!1);for(let d=0;d<n.length;d++)if(n[d]!==i){var a=n[d];if(a.getProcedureDef&&(a=a.getProcedureDef(),os.equals(a[0],e)))return!0}return!1},Ku=function(e){function n(_,R){for(let z=0;z<_.length;z++){var L=_[z][0];const se=_[z][1],nt=be("block");nt.setAttribute("type",R),nt.setAttribute("gap","16");const jt=be("mutation");for(jt.setAttribute("name",L),nt.appendChild(jt),L=0;L<se.length;L++){const Jo=be("arg");Jo.setAttribute("name",se[L]),jt.appendChild(Jo)}i.push(nt)}}const i=[];if(po.procedures_defnoreturn){var a=be("block");a.setAttribute("type","procedures_defnoreturn"),a.setAttribute("gap","16");var d=be("field");d.setAttribute("name","NAME"),d.appendChild(Jn(De.PROCEDURES_DEFNORETURN_PROCEDURE)),a.appendChild(d),i.push(a)}return po.procedures_defreturn&&((a=be("block")).setAttribute("type","procedures_defreturn"),a.setAttribute("gap","16"),(d=be("field")).setAttribute("name","NAME"),d.appendChild(Jn(De.PROCEDURES_DEFRETURN_PROCEDURE)),a.appendChild(d),i.push(a)),po.procedures_ifreturn&&((a=be("block")).setAttribute("type","procedures_ifreturn"),a.setAttribute("gap","16"),i.push(a)),i.length&&i[i.length-1].setAttribute("gap","24"),n((e=gc(e))[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),i},Ju=function(e){var n=[],i=e.getBlocksByType("procedures_mutatorarg",!1);for(let R,_=0;R=i[_];_++)n.push(R.getFieldValue("NAME"));i=be("xml");const a=be("block");a.setAttribute("type","procedures_mutatorarg");const d=be("field");d.setAttribute("name","NAME"),n=xu(Pd,n),n=Jn(n),d.appendChild(n),a.appendChild(d),i.appendChild(a),e.updateToolbox(i)},tb=function(e){if(e.type===wr&&"mutator"===e.bubbleType&&e.isOpen&&e.blockId){var n=(e=To(e.workspaceId).getBlockById(e.blockId)).type;("procedures_defnoreturn"===n||"procedures_defreturn"===n)&&(e=e.mutator.getWorkspace(),Ju(e),e.addChangeListener(Om))}},Om=function(e){(e.type===On||e.type===ir||e.type===gn)&&(e=To(e.workspaceId),Ju(e))},Yg=function(e,n){const i=[];n=n.getAllBlocks(!1);for(let d=0;d<n.length;d++){var a=n[d];a.getProcedureCall&&(a=a.getProcedureCall())&&os.equals(a,e)&&i.push(n[d])}return i},Kg=function(e){return e.isDynamic},ai=function(){return Hd},Wh=function(){Z("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Hd=!1},Vi=function(e,n){Le(ee.RENDERER,e,n)},qg=function(e,n,i){return(e=new(Un(ee.RENDERER,e))(e)).init(n,i),e},zh=function(e){Ml(e.getTargetWorkspace(),void 0,"String")},Yh=function(e){Ml(e.getTargetWorkspace(),void 0,"Number")},Kh=function(e){Ml(e.getTargetWorkspace(),void 0,"Colour")},Zg=function(e){let n=[],i=document.createElement("button");return i.setAttribute("text",De.NEW_STRING_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(i),i=document.createElement("button"),i.setAttribute("text",De.NEW_NUMBER_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(i),i=document.createElement("button"),i.setAttribute("text",De.NEW_COLOUR_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(i),e.registerButtonCallback("CREATE_VARIABLE_STRING",zh),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Yh),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Kh),e=qu(e),n.concat(e)},qu=function(e){const n=[];if(0<(e=e.getAllVariables()).length){if(po.variables_set_dynamic){var i=e[e.length-1];const a=be("block");a.setAttribute("type","variables_set_dynamic"),a.setAttribute("gap","24"),a.appendChild(Nl(i)),n.push(a)}if(po.variables_get_dynamic){e.sort(el.compareByName);for(let d,a=0;d=e[a];a++)(i=be("block")).setAttribute("type","variables_get_dynamic"),i.setAttribute("gap","8"),i.appendChild(Nl(d)),n.push(i)}}return n},mc=function(e){e.resizeContents()},Jh=function(e){const n={id:e.getId(),name:e.getName(),returnTypes:e.getReturnTypes()};return e.getParameters().length&&(n.parameters=e.getParameters().map(i=>ji(i))),n},ji=function(e){const n={id:e.getId(),name:e.getName()};return e.getTypes().length&&(n.types=e.getTypes()),n},Qg=function(e,n,i,a){if(e=new e(a,i.name,i.id).setReturnTypes(i.returnTypes),!i.parameters)return e;for(const[d,_]of i.parameters.entries())e.insertParameter(ef(n,_,a),d);return e},ef=function(e,n,i){return e=new e(i,n.name,n.id),n.types&&e.setTypes(n.types),e},jl=function(e,n,i){const a=i.getBoundingRectangle(),d=a.right-a.left,_=Br(n.top,a.top,n.top+n.height-(a.bottom-a.top))-a.top;let R=n.left;return n=n.left+n.width-d,e.RTL?R=Math.min(n,R):n=Math.max(R,n),!(!(e=Br(R,a.left,n)-a.left)&&!_||(i.moveBy(e,_),0))},km=function(e){return n=>{var a,i=e.getMetricsManager();if(i.hasFixedEdges()&&!e.isDragging())if(-1!==xc.indexOf(null!=(a=n.type)?a:"")){a=i.getScrollMetrics(!0);const d=Mm(e,n);d&&(i=yt(),de(n.group),jl(e,a,d)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==i&&de(i))}else n.type===ar&&n.scale&&n.oldScale&&n.scale>n.oldScale&&Wl(e)}},Mm=function(e,n){let i=null;switch(n.type){case On:case Hn:(i=e.getBlockById(n.blockId))&&(i=i.getRootBlock());break;case As:case Sr:i=e.getCommentById(n.commentId)}return i},Wl=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);var i=e.getTopBoundedElements();for(let d,a=0;d=i[a];a++)jl(e,n,d)}},$c=function(e,n){e.setAttribute("dir","LTR"),gt(n.hasCss,n.pathToMedia),e=k(B.SVG,{xmlns:Sc,"xmlns:html":ws,"xmlns:xlink":zo,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const i=k(B.DEFS,{},e),a=String(Math.random()).substring(2);return n.gridPattern=Yf.createDom(a,n.gridOptions,i),e},Ec=function(e,n,i,a){n.parentWorkspace=null,(n=new Ar(n,i,a)).scale=(i=n.options).zoomOptions.startScale,e.appendChild(n.createDom("blocklyMainBackground")),a=n.getInjectionDiv();var d=n.getRenderer().getClassName();return d&&Q(a,d),(d=n.getTheme().getClassName())&&Q(a,d),!i.hasCategories&&i.languageTree&&(a=n.addFlyout(B.SVG),Xe(a,e)),i.hasTrashcan&&n.addTrashcan(),i.zoomOptions&&i.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(km(n)),pe(n),ic(),Wa(),Tt(),n},Nm=function(e){const n=e.options;var i=e.getParentSvg();if(ue(i.parentNode,"contextmenu",null,function(a){St(a)||a.preventDefault()}),i=ue(window,"resize",null,function(){e.hideChaff(!0),pe(e),Wl(e)}),e.setResizeHandlerWrapper(i),Tc(),n.languageTree){i=e.getToolbox();const a=e.getFlyout(!0);i?i.init():a&&(a.init(e),a.show(n.languageTree),"function"==typeof a.scrollToStart&&a.scrollToStart())}n.hasTrashcan&&e.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new Yd(e,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&RC(n.pathToMedia,e)},tf=function(e){const n=sn();n&&!(St(e)||n.rendered&&!n.isVisible())&&Et.registry.onKeyDown(n,e)},Tc=function(){oE||(ue(document,"scroll",null,function(){const e=Tr();for(let i,n=0;i=e[n];n++)i instanceof Ar&&i.updateInverseScreenCTM()}),ue(document,"keydown",null,tf),ot(document,"touchend",null,g),ot(document,"touchcancel",null,g),zi&&ue(window,"orientationchange",document,function(){pe(sn())})),oE=!0},RC=function(e,n){function i(){for(;d.length;)ve(d.pop());a.preload()}const a=n.getAudioManager();a.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),a.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),a.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const d=[];d.push(ue(document,"pointermove",null,i,!0)),d.push(ue(document,"touchstart",null,i,!0))},Lm=function(e,n,i){if(!(e=e.getProcedureMap().get(n)))throw Error("Cannot rename the parameter of a procedure that does not exist in the procedure map");return e.getParameters().find(a=>a.getId()===i)},We=function(){dt.registry.register({displayText:()=>De.UNDO,preconditionFn:e=>0<e.workspace.getUndoStack().length?"enabled":"disabled",callback(e){e.workspace.undo(!1)},scopeType:dt.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},sb=function(){dt.registry.register({displayText:()=>De.REDO,preconditionFn:e=>0<e.workspace.getRedoStack().length?"enabled":"disabled",callback(e){e.workspace.undo(!0)},scopeType:dt.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},ib=function(){dt.registry.register({displayText:()=>De.CLEAN_UP,preconditionFn:e=>e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden",callback(e){e.workspace.cleanUp()},scopeType:dt.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},lb=function(e,n){function i(_){d--,_.setCollapsed(e),0===d&&de(!1)}let a=0,d=0;de(!0);for(let _=0;_<n.length;_++){let R=n[_];for(;R;)d++,setTimeout(i.bind(null,R),a),R=R.getNextBlock(),a+=10}},ab=function(){dt.registry.register({displayText:()=>De.COLLAPSE_ALL,preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let i=e[n];for(;i;){if(!i.isCollapsed())return"enabled";i=i.getNextBlock()}}return"disabled"}return"hidden"},callback(e){lb(!0,e.workspace.getTopBlocks(!0))},scopeType:dt.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},cb=function(){dt.registry.register({displayText:()=>De.EXPAND_ALL,preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let i=e[n];for(;i;){if(i.isCollapsed())return"enabled";i=i.getNextBlock()}}return"disabled"}return"hidden"},callback(e){lb(!1,e.workspace.getTopBlocks(!0))},scopeType:dt.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},ub=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(let i=0;i<e.length;i++)ub(e[i],n)}},xm=function(e){const n=[];e=e.getTopBlocks(!0);for(let i=0;i<e.length;i++)ub(e[i],n);return n},Wi=function(e,n){de(n);const i=e.shift();i&&(i.isDeadOrDying()?Wi(e,n):(i.dispose(!1,!0),setTimeout(Wi,10,e,n))),de(!1)},db=function(){dt.registry.register({displayText:e=>e.workspace?1===(e=xm(e.workspace).length)?De.DELETE_BLOCK:De.DELETE_X_BLOCKS.replace("%1",String(e)):"",preconditionFn:e=>e.workspace&&0<xm(e.workspace).length?"enabled":"disabled",callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=xm(e.workspace),i=lo();2>n.length?Wi(n,i):Qa(De.DELETE_ALL_BLOCKS.replace("%1",String(n.length)),function(a){a&&Wi(n,i)})}},scopeType:dt.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Sn=function(){dt.registry.register({displayText:()=>De.DUPLICATE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden",callback(e){e.block&&Fh(e.block)},scopeType:dt.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},qh=function(){dt.registry.register({displayText:e=>e.block.getCommentIcon()?De.REMOVE_COMMENT:De.ADD_COMMENT,preconditionFn:e=>!(e=e.block).isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden",callback(e){(e=e.block).getCommentIcon()?e.setCommentText(null):e.setCommentText("")},scopeType:dt.ScopeType.BLOCK,id:"blockComment",weight:2})},bc=function(){dt.registry.register({displayText:e=>e.block.getInputsInline()?De.EXTERNAL_INPUTS:De.INLINE_INPUTS,preconditionFn(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(let n=1;n<e.inputList.length;n++)if(e.inputList[n-1].type!==Ue.STATEMENT&&e.inputList[n].type!==Ue.STATEMENT)return"enabled";return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:dt.ScopeType.BLOCK,id:"blockInline",weight:3})},hb=function(){dt.registry.register({displayText:e=>e.block.isCollapsed()?De.EXPAND_BLOCK:De.COLLAPSE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden",callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:dt.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Pm=function(){dt.registry.register({displayText:e=>e.block.isEnabled()?De.DISABLE_BLOCK:De.ENABLE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden",callback(e){e=e.block;const n=yt();n||de(!0),e.setEnabled(!e.isEnabled()),n||de(!1)},scopeType:dt.ScopeType.BLOCK,id:"blockDisable",weight:5})},Wo=function(){dt.registry.register({displayText(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),1===e?De.DELETE_BLOCK:De.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:e=>!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden",callback(e){e.block&&e.block.checkAndDelete()},scopeType:dt.ScopeType.BLOCK,id:"blockDelete",weight:6})},Rs=function(){dt.registry.register({displayText:()=>De.HELP,preconditionFn:e=>("function"==typeof(e=e.block).helpUrl?e.helpUrl():e.helpUrl)?"enabled":"hidden",callback(e){e.block.showHelp()},scopeType:dt.ScopeType.BLOCK,id:"blockHelp",weight:7})},Zu=function(){We(),sb(),ib(),ab(),cb(),db(),Sn(),qh(),bc(),hb(),Pm(),Wo(),Rs()},Ce=Ce||{};Ce.scope={},Ce.ASSUME_ES5=!1,Ce.ASSUME_NO_NATIVE_MAP=!1,Ce.ASSUME_NO_NATIVE_SET=!1,Ce.SIMPLE_FROUND_POLYFILL=!1,Ce.ISOLATE_POLYFILLS=!1,Ce.FORCE_POLYFILL_PROMISE=!1,Ce.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Ce.defineProperty=Ce.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,n,i){return e==Array.prototype||e==Object.prototype||(e[n]=i.value),e},Ce.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var n=0;n<e.length;++n){var i=e[n];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")},Ce.global=Ce.getGlobal(this),Ce.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),Ce.TRUST_ES6_POLYFILLS=!Ce.ISOLATE_POLYFILLS||Ce.IS_SYMBOL_NATIVE,Ce.polyfills={},Ce.propertyToPolyfillSymbol={},Ce.POLYFILL_PREFIX="$jscp$",Ce.polyfill=function(e,n,i,a){n&&(Ce.ISOLATE_POLYFILLS?Ce.polyfillIsolated(e,n,i,a):Ce.polyfillUnisolated(e,n,i,a))},Ce.polyfillUnisolated=function(e,n,i,a){for(i=Ce.global,e=e.split("."),a=0;a<e.length-1;a++){var d=e[a];if(!(d in i))return;i=i[d]}(n=n(a=i[e=e[e.length-1]]))!=a&&null!=n&&Ce.defineProperty(i,e,{configurable:!0,writable:!0,value:n})},Ce.polyfillIsolated=function(e,n,i,a){var d=e.split(".");a=d[0],a=!(e=1===d.length)&&a in Ce.polyfills?Ce.polyfills:Ce.global;for(var _=0;_<d.length-1;_++){var R=d[_];if(!(R in a))return;a=a[R]}d=d[d.length-1],null!=(n=n(i=Ce.IS_SYMBOL_NATIVE&&"es6"===i?a[d]:null))&&(e?Ce.defineProperty(Ce.polyfills,d,{configurable:!0,writable:!0,value:n}):n!==i&&(void 0===Ce.propertyToPolyfillSymbol[d]&&(i=1e9*Math.random()>>>0,Ce.propertyToPolyfillSymbol[d]=Ce.IS_SYMBOL_NATIVE?Ce.global.Symbol(d):Ce.POLYFILL_PREFIX+i+"$"+d),Ce.defineProperty(a,Ce.propertyToPolyfillSymbol[d],{configurable:!0,writable:!0,value:n})))},Ce.polyfill("globalThis",function(e){return e||Ce.global},"es_2020","es3"),Ce.polyfill("Object.getOwnPropertyDescriptors",function(e){return e||function(n){for(var i={},a=Reflect.ownKeys(n),d=0;d<a.length;d++)i[a[d]]=Object.getOwnPropertyDescriptor(n,a[d]);return i}},"es8","es5"),Ce.arrayIteratorImpl=function(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}},Ce.arrayIterator=function(e){return{next:Ce.arrayIteratorImpl(e)}},Ce.initSymbol=function(){},Ce.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},Ce.iteratorFromArray=function(e,n){e instanceof String&&(e+="");var i=0,a=!1,d={next:function(){if(!a&&i<e.length){var _=i++;return{value:n(_,e[_]),done:!1}}return a=!0,{done:!0,value:void 0}}};return d[Symbol.iterator]=function(){return d},d},Ce.polyfill("Array.prototype.values",function(e){return e||function(){return Ce.iteratorFromArray(this,function(n,i){return i})}},"es8","es3"),Ce.owns=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},Ce.polyfill("Object.values",function(e){return e||function(n){var a,i=[];for(a in n)Ce.owns(n,a)&&i.push(n[a]);return i}},"es8","es3"),Ce.polyfill("Array.prototype.flat",function(e){return e||function(n){n=void 0===n?1:n;for(var i=[],a=0;a<this.length;a++){var d=this[a];Array.isArray(d)&&0<n?(d=Array.prototype.flat.call(d,n-1),i.push.apply(i,d)):i.push(d)}return i}},"es9","es5"),Ce.polyfill("Object.entries",function(e){return e||function(n){var a,i=[];for(a in n)Ce.owns(n,a)&&i.push([a,n[a]]);return i}},"es8","es3");var gb=globalThis,Hm={declareModuleId:function(e){window.goog&&window.goog.declareModuleId&&window.goog.declareModuleId.call(this,e)}};Hm.global=gb;var Xo=Xo||{};Xo.global=globalThis||root,Xo.define=function(e,n){return n},Xo.DEBUG=!1,Xo.DISALLOW_TEST_ONLY_CODE=!Xo.DEBUG,Xo.provide=function(e){},Xo.module=function(e){},Xo.module.get=function(e){},Xo.module.declareLegacyNamespace=function(){},Xo.setTestOnly=function(e){if(Xo.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},Xo.require=function(e){},Xo.requireType=function(e){};var hn={};hn.warn=Z;var rf,Vm,sf,vc,ui,Qh,Oe,lf,pn,ep,Zh=750,mb="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Xi=null,ci={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},zl=0,sr={};sr.TOUCH_ENABLED=mb,sr.TOUCH_MAP=ci,sr.checkTouchIdentifier=us,sr.clearTouchIdentifier=wt,sr.getTouchIdentifierFromEvent=zn,sr.isMouseOrTouchEvent=function(e){return Z("isMouseOrTouchEvent()","version 9","version 10"),e.type.startsWith("touch")||e.type.startsWith("mouse")||e.type.startsWith("pointer")},sr.isTouchEvent=function(e){return Z("isTouchEvent()","version 9","version 10"),e.type.startsWith("touch")||e.type.startsWith("pointer")},sr.longStart=S,sr.longStop=g,sr.setClientFromTouch=function(e){if(Z("setClientFromTouch()","version 9","version 10"),e.type.startsWith("touch")&&e.changedTouches){const n=e.changedTouches[0];e.clientX=n.clientX,e.clientY=n.clientY}},sr.shouldHandleEvent=so,sr.splitEventByTouches=function(e){Z("splitEventByTouches()","version 9","version 10");const n=[];if(e.changedTouches)for(let i=0;i<e.changedTouches.length;i++)n[i]={type:e.type,changedTouches:[e.changedTouches[i]],target:e.target,stopPropagation(){e.stopPropagation()},preventDefault(){e.preventDefault()}};else n.push(e);return n},function(e){function n(a){return-1!==i.indexOf(a.toUpperCase())}const i=(rf=e).toUpperCase();Vm=n("JavaFX"),sf=n("WebKit"),vc=n("Gecko")&&!sf,ui=n("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Qh=n("iPad")||n("Macintosh")&&0<e,Oe=n("iPhone")&&!Qh,lf=n("Macintosh"),pn=Qh||ui&&!n("Mobile")||n("Silk"),ep=!pn&&(Oe||ui)}(globalThis.navigator&&globalThis.navigator.userAgent||"");var ed=rf,jm=Vm,af=vc,tp=ui,zi=Qh,Ic=Oe,np=lf,Yl=ep,di={};di.ANDROID=tp,di.GECKO=af,di.IPAD=zi,di.IPHONE=Ic,di.JavaFx=jm,di.MAC=np,di.MOBILE=Yl,di.raw=ed;var cf=40,Cc=125,Rr={};Rr.bind=ot,Rr.conditionalBind=ue,Rr.getScrollDeltaPixels=Ws,Rr.isRightButton=Ve,Rr.isTargetInput=St,Rr.mouseToSvg=Qt,Rr.unbind=ve;var Rc,Kl,Jl,Wm,wc,op,po=Object.create(null);Rc=Object.create(null),Jl=null,wc=[],op={defineBlocksWithJsonArrayInternal:function(e){F(O(e))}},h.module$build$src$core$common={},h.module$build$src$core$common.TEST_ONLY=op,h.module$build$src$core$common.createBlockDefinitionsFromJsonArray=O,h.module$build$src$core$common.defineBlocks=F,h.module$build$src$core$common.defineBlocksWithJsonArray=$,h.module$build$src$core$common.draggingConnections=wc,h.module$build$src$core$common.getAllWorkspaces=Tr,h.module$build$src$core$common.getBlockTypeCounts=Dt,h.module$build$src$core$common.getMainWorkspace=sn,h.module$build$src$core$common.getParentContainer=Mt,h.module$build$src$core$common.getSelected=Qe,h.module$build$src$core$common.getWorkspaceById=To,h.module$build$src$core$common.registerWorkspace=io,h.module$build$src$core$common.setMainWorkspace=ln,h.module$build$src$core$common.setParentContainer=bo,h.module$build$src$core$common.setSelected=an,h.module$build$src$core$common.svgResize=pe,h.module$build$src$core$common.unregisterWorkpace=Qo;var Ss,e,Sc="http://www.w3.org/2000/svg",ws="http://www.w3.org/1999/xhtml",zo="http://www.w3.org/1999/xlink";(e=Ss||(Ss={}))[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY";var Yr=null,Dc=0,td=null,Dn={};Dn.HTML_NS=ws,Dn.NodeType=Ss,Dn.SVG_NS=Sc,Dn.XLINK_NS=zo,Dn.addClass=Q,Dn.containsNode=Cn,Dn.createSvgElement=k,Dn.getFastTextWidth=Bt,Dn.getFastTextWidthWithSizeString=ds,Dn.getTextWidth=function(e){const n=e.textContent+"\n"+e.className.baseVal;let i;if(Yr&&(i=Yr[n]))return i;try{i=e.getComputedTextLength()}catch{return 8*e.textContent.length}return Yr&&(Yr[n]=i),i},Dn.hasClass=function(e,n){return e.classList.contains(n)},Dn.insertAfter=Xe,Dn.measureFontMetrics=En,Dn.removeClass=ce,Dn.removeClasses=Ge,Dn.removeNode=ie,Dn.setCssTransform=br,Dn.startTextWidthCache=Pr,Dn.stopTextWidthCache=Je;var nd={};nd.clamp=Br,nd.toDegrees=Iu,nd.toRadians=Wt;var on=class{constructor(e,n,i,a){this.top=e,this.bottom=n,this.left=i,this.right=a}contains(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom}intersects(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)}},re=class{constructor(e,n){this.x=e,this.y=n}clone(){return new re(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,n){return this.x+=e,this.y+=n,this}static equals(e,n){return e===n||!(!e||!n)&&e.x===n.x&&e.y===n.y}static distance(e,n){const i=e.x-n.x;return e=e.y-n.y,Math.sqrt(i*i+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,n){return new re(e.x-n.x,e.y-n.y)}static sum(e,n){return new re(e.x+n.x,e.y+n.y)}},Nn=class{constructor(e,n){this.width=e,this.height=n}static equals(e,n){return e===n||!(!e||!n)&&e.width===n.width&&e.height===n.height}},Tb={getSizeInternal:function(e){if("none"!==Go(e,"display"))return Ru(e);const n=e.style,i=n.display,a=n.visibility,d=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";const _=e.offsetWidth;return e=e.offsetHeight,n.display=i,n.position=d,n.visibility=a,new Nn(_,e)}},hi={};hi.TEST_ONLY=Tb,hi.getBorderBox=ge,hi.getCascadedStyle=function(e,n){return Z("Blockly.utils.style.getCascadedStyle","version 9","version 10"),e.currentStyle?e.currentStyle[n]:""},hi.getComputedStyle=Go,hi.getContainerOffsetToScrollInto=wu,hi.getPageOffset=Xs,hi.getSize=Gn,hi.getViewportPageOffset=Th,hi.scrollIntoContainerView=Fr;var ct,ea,Ki,ql=16,zm=1,bb=12,Ym=16,df=.25,Km=null,Zl=null,Ql="",Yi="",go=null,Ji=null,Jm=null,rp={getBoundsInfo:function(){const e=Xs(go),n=Gn(go);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},getPositionMetrics:function(e,n,i,a){const d=rp.getBoundsInfo(),_=Gn(ct);return n+_.height<d.bottom?Gr(e,n,d,_):a-_.height>d.top?Dl(i,a,d,_):n+_.height<document.documentElement.clientHeight?Gr(e,n,d,_):a-_.height>document.documentElement.clientTop?Dl(i,a,d,_):function(e,n,i){return{initialX:(e=Uo(e,n.left,n.right,i.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}}(e,d,_)}},Vt={};Vt.ANIMATION_TIME=df,Vt.ARROW_HORIZONTAL_PADDING=bb,Vt.ARROW_SIZE=ql,Vt.BORDER_SIZE=zm,Vt.PADDING_Y=Ym,Vt.TEST_ONLY=rp,Vt.clearContent=Su,Vt.createDom=Wa,Vt.getContentDiv=Yn,Vt.getOwner=Xa,Vt.getPositionX=Uo,Vt.hide=Ol,Vt.hideIfOwner=Ur,Vt.hideWithoutAnimation=cn,Vt.isVisible=Ya,Vt.repositionForWindowResize=function(){if(Ji){var e=Ji.getSourceBlock();const n=(e=Jm?zs(Ji):Ou(e)).left+(e.right-e.left)/2;ku(n,e.bottom,n,e.top)}else Ol()},Vt.setBoundsElement=Rl,Vt.setColour=Du,Vt.show=Sl,Vt.showPositionedByBlock=function(e,n,i,a){return wl(Ou(n),e,i,a)},Vt.showPositionedByField=za;var qi=Object.create(null),vb={typeMap:qi},sp=Object.create(null),Ds="default",ee=class{constructor(e){this.name=e}toString(){return this.name}};ee.CONNECTION_CHECKER=new ee("connectionChecker"),ee.CURSOR=new ee("cursor"),ee.EVENT=new ee("event"),ee.FIELD=new ee("field"),ee.RENDERER=new ee("renderer"),ee.TOOLBOX=new ee("toolbox"),ee.THEME=new ee("theme"),ee.TOOLBOX_ITEM=new ee("toolboxItem"),ee.FLYOUTS_VERTICAL_TOOLBOX=new ee("flyoutsVerticalToolbox"),ee.FLYOUTS_HORIZONTAL_TOOLBOX=new ee("flyoutsHorizontalToolbox"),ee.METRICS_MANAGER=new ee("metricsManager"),ee.BLOCK_DRAGGER=new ee("blockDragger"),ee.SERIALIZER=new ee("serializer");var Kr={};Kr.DEFAULT=Ds,Kr.TEST_ONLY=vb,Kr.Type=ee,Kr.getAllItems=Ot,Kr.getClass=Un,Kr.getClassFromOptions=Xt,Kr.getObject=Ai,Kr.hasItem=Ja,Kr.register=Le,Kr.unregister=Ys;var fo="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",od={genUid:()=>{const e=fo.length,n=[];for(let i=0;20>i;i++)n[i]=fo.charAt(Math.random()*e);return n.join("")}},hf=0,Ln={};Ln.TEST_ONLY=od,Ln.genUid=lo,Ln.getNextUniqueId=Kn;var Oc="",Ac=!0,pf=0,On="create",ir="delete",gn="change",Hn="move",Os="var_create",pi="var_delete",kc="var_rename",ta="ui",na="drag",lr="selected",gi="click",Mc="marker_move",wr="bubble_open",Zi="trashcan_open",oa="toolbox_item_select",rd="theme_change",ar="viewport_change",As="comment_create",Qi="comment_delete",Nc="comment_change",Sr="comment_move",ra="finished_loading",ip="procedure_create",sd="procedure_delete",lp="procedure_rename",ap="procedure_enable",cp="procedure_change_return",id="procedure_parameter_create",Lc="procedure_parameter_delete",ld="procedure_parameter_rename",xc=[On,Hn,As,Sr],Pc=[],gf={FIRE_QUEUE:Pc,fireNow:Hr,fireInternal:function(e){zt()&&(Pc.length||setTimeout(Hr,0),Pc.push(e))},setGroupInternal:function(e){Oc="boolean"==typeof e?e?lo():"":e}},Se={};Se.BLOCK_CHANGE=gn,Se.BLOCK_CREATE=On,Se.BLOCK_DELETE=ir,Se.BLOCK_DRAG=na,Se.BLOCK_MOVE=Hn,Se.BUBBLE_OPEN=wr,Se.BUMP_EVENTS=xc,Se.CHANGE=gn,Se.CLICK=gi,Se.COMMENT_CHANGE=Nc,Se.COMMENT_CREATE=As,Se.COMMENT_DELETE=Qi,Se.COMMENT_MOVE=Sr,Se.CREATE=On,Se.DELETE=ir,Se.FINISHED_LOADING=ra,Se.MARKER_MOVE=Mc,Se.MOVE=Hn,Se.PROCEDURE_CHANGE_RETURN=cp,Se.PROCEDURE_CREATE=ip,Se.PROCEDURE_DELETE=sd,Se.PROCEDURE_ENABLE=ap,Se.PROCEDURE_PARAMETER_CREATE=id,Se.PROCEDURE_PARAMETER_DELETE=Lc,Se.PROCEDURE_PARAMETER_RENAME=ld,Se.PROCEDURE_RENAME=lp,Se.SELECTED=lr,Se.TEST_ONLY=gf,Se.THEME_CHANGE=rd,Se.TOOLBOX_ITEM_SELECT=oa,Se.TRASHCAN_OPEN=Zi,Se.UI=ta,Se.VAR_CREATE=Os,Se.VAR_DELETE=pi,Se.VAR_RENAME=kc,Se.VIEWPORT_CHANGE=ar,Se.clearPendingUndo=Js,Se.disable=Ft,Se.disableOrphans=Ho,Se.enable=Gt,Se.filter=Ks,Se.fire=me,Se.fromJson=qa,Se.get=Te,Se.getDescendantIds=ki,Se.getGroup=yt,Se.getRecordUndo=un,Se.isEnabled=zt,Se.setGroup=de,Se.setRecordUndo=Ct;var cr,ad,cd,ff,Ue=(()=>(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY"}(Ue||(Ue={})),Ue))();h.module$build$src$core$input_types={},h.module$build$src$core$input_types.inputTypes=Ue,({document:cr,DOMParser:ad,XMLSerializer:cd}=globalThis),ff="https://developers.google.com/blockly/xml",h.module$build$src$core$utils$xml={},h.module$build$src$core$utils$xml.NAME_SPACE=ff,h.module$build$src$core$utils$xml.createElement=be,h.module$build$src$core$utils$xml.createTextNode=Jn,h.module$build$src$core$utils$xml.domToText=Mi,h.module$build$src$core$utils$xml.getDocument=function(){return Z("Blockly.utils.xml.getDocument","version 9","version 10"),cr},h.module$build$src$core$utils$xml.injectDependencies=function(e){({document:cr=cr,DOMParser:ad=ad,XMLSerializer:cd=cd}=e)},h.module$build$src$core$utils$xml.setDocument=function(e){Z("Blockly.utils.xml.setDocument","version 9","version 10"),cr=e},h.module$build$src$core$utils$xml.textToDomDocument=Za;var De,dd,Sb=function(e,n){window.alert(e),n&&n()},ud=function(e,n){n(window.confirm(e))},qm=function(e,n,i){i(window.prompt(e,n))},_f={confirmInternal:function(e,n){ud(e,n)}},_o={};_o.TEST_ONLY=_f,_o.alert=we,_o.confirm=Qa,_o.prompt=M,_o.setAlert=function(e){Sb=e},_o.setConfirm=function(e){ud=e},_o.setPrompt=function(e){qm=e},De=Object.create(null),dd=function(e){Object.keys(e).forEach(function(n){De[n]=e[n]})},h.module$build$src$core$msg={},h.module$build$src$core$msg.Msg=De,h.module$build$src$core$msg.setLocale=dd;var ks=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=yt(),this.recordUndo=un()}toJson(){return{type:this.type,group:this.group}}fromJson(e){this.isBlank=!1,this.group=e.group||""}static fromJson(e,n,i){return Z("Blockly.Events.Abstract.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),i.isBlank=!1,i.group=e.group||"",i.workspaceId=n.id,i}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=To(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},fi=class extends ks{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}fromJson(e){Z("Blockly.Events.VarBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.varId=e.varId}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new fi)).varId=e.varId,n}},Bc=class extends fi{constructor(e){super(e),this.type=Os,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}fromJson(e){Z("Blockly.Events.VarCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.varType=e.varType,this.varName=e.varName}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new Bc)).varType=e.varType,n.varName=e.varName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)}};Le(ee.EVENT,Os,Bc);var pd,gd,$f,el=class{constructor(e,n,i,a){this.workspace=e,this.name=n,this.type=i||"",this.id_=a||lo()}getId(){return this.id_}static compareByName(e,n){return e.name.localeCompare(n.name,void 0,{sensitivity:"base"})}};pd="VARIABLE",gd="ijkmnopqrstuvwxyzabcdefgh",$f={generateUniqueNameInternal:function(e){return xu(gd.charAt(0),e.getAllVariableNames())}},h.module$build$src$core$variables={},h.module$build$src$core$variables.CATEGORY_NAME=pd,h.module$build$src$core$variables.TEST_ONLY=$f,h.module$build$src$core$variables.VAR_LETTER_OPTIONS=gd,h.module$build$src$core$variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let d,a=0;d=e[a];a++){var i=d.getDeveloperVariables;if(i){i=i();for(let _=0;_<i.length;_++)n.add(i[_])}}return Array.from(n.values())},h.module$build$src$core$variables.allUsedVarModels=j,h.module$build$src$core$variables.createVariableButtonHandler=Ml,h.module$build$src$core$variables.flyoutCategory=hs,h.module$build$src$core$variables.flyoutCategoryBlocks=kl,h.module$build$src$core$variables.generateUniqueName=ao,h.module$build$src$core$variables.generateUniqueNameFromOptions=xu,h.module$build$src$core$variables.generateVariableFieldDom=Nl,h.module$build$src$core$variables.getAddedVariables=vh,h.module$build$src$core$variables.getOrCreateVariablePackage=tc,h.module$build$src$core$variables.getVariable=Pu,h.module$build$src$core$variables.nameUsedWithAnyType=vg,h.module$build$src$core$variables.promptName=yh,h.module$build$src$core$variables.renameVariable=yr;var Jr=class{constructor(e,n,i,a,d){this.workspace=e,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=d&&!e.getCommentById(d)?d:lo(),e.addTopComment(this),this.xy_=new re(0,0),this.height_=i,this.width_=a,this.RTL=e.RTL,this.content_=n,Jr.fireCreateEvent(this)}dispose(){this.disposed_||(zt()&&me(new(Te(Qi))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(e){this.height_=e}getWidth(){return this.width_}setWidth(e){this.width_=e}getXY(){return new re(this.xy_.x,this.xy_.y)}moveBy(e,n){const i=new(Te(Sr))(this);this.xy_.translate(e,n),i.recordNew(),me(i)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(e){this.movable_=e}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(e){this.editable_=e}getContent(){return this.content_}setContent(e){this.content_!==e&&(me(new(Te(Nc))(this,this.content_,e)),this.content_=e)}toXmlWithXY(e){return(e=this.toXml(e)).setAttribute("x",`${Math.round(this.xy_.x)}`),e.setAttribute("y",`${Math.round(this.xy_.y)}`),e.setAttribute("h",`${this.height_}`),e.setAttribute("w",`${this.width_}`),e}toXml(e){const n=be("comment");return e||(n.id=this.id),n.textContent=this.getContent(),n}static fireCreateEvent(e){if(zt()){const n=yt();n||de(!0);try{me(new(Te(As))(e))}finally{n||de(!1)}}}static fromXml(e,n){var i=Jr.parseAttributes(e);return n=new Jr(n,i.content,i.h,i.w,i.id),i=e.getAttribute("x"),e=e.getAttribute("y"),i=i?parseInt(i,10):NaN,e=e?parseInt(e,10):NaN,isNaN(i)||isNaN(e)||n.moveBy(i,e),Jr.fireCreateEvent(n),n}static parseAttributes(e){const n=e.getAttribute("h"),i=e.getAttribute("w"),a=e.getAttribute("x"),d=e.getAttribute("y"),_=e.getAttribute("id");if(!_)throw Error("No ID present in XML comment definition.");let R;return{id:_,h:n?parseInt(n):100,w:i?parseInt(i):100,x:a?parseInt(a):NaN,y:d?parseInt(d):NaN,content:null!=(R=e.textContent)?R:""}}},Yo=class extends ks{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Fc=class extends Yo{constructor(e,n,i){super(i),this.type=lr,this.oldElementId=e??void 0,this.newElementId=n??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}fromJson(e){Z("Blockly.Events.Selected.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new Fc)).oldElementId=e.oldElementId,n.newElementId=e.newElementId,n}};Le(ee.EVENT,lr,Fc);var Ef=!1,Tf='\n.blocklySvg {\n  background-color: #fff;\n  outline: none;\n  overflow: hidden;  /* IE overflows by default. */\n  position: absolute;\n  display: block;\n}\n\n.blocklyWidgetDiv {\n  display: none;\n  position: absolute;\n  z-index: 99999;  /* big value for bootstrap3 compatibility */\n}\n\n.injectionDiv {\n  height: 100%;\n  position: relative;\n  overflow: hidden;  /* So blocks in drag surface disappear at edges */\n  touch-action: none;\n}\n\n.blocklyNonSelectable {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n}\n\n.blocklyWsDragSurface {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n/* Added as a separate rule with multiple classes to make it more specific\n   than a bootstrap rule that selects svg:root. See issue #1275 for context.\n*/\n.blocklyWsDragSurface.blocklyOverflowVisible {\n  overflow: visible;\n}\n\n.blocklyBlockDragSurface {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: visible !important;\n  z-index: 50;  /* Display below toolbox, but above everything else. */\n}\n\n.blocklyBlockCanvas.blocklyCanvasTransitioning,\n.blocklyBubbleCanvas.blocklyCanvasTransitioning {\n  transition: transform .5s;\n}\n\n.blocklyTooltipDiv {\n  background-color: #ffffc7;\n  border: 1px solid #ddc;\n  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);\n  color: #000;\n  display: none;\n  font: 9pt sans-serif;\n  opacity: .9;\n  padding: 2px;\n  position: absolute;\n  z-index: 100000;  /* big value for bootstrap3 compatibility */\n}\n\n.blocklyDropDownDiv {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: none;\n  border: 1px solid;\n  border-color: #dadce0;\n  background-color: #fff;\n  border-radius: 2px;\n  padding: 4px;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownContent {\n  max-height: 300px;  /* @todo: spec for maximum height. */\n  overflow: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n.blocklyDropDownArrow {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 16px;\n  height: 16px;\n  z-index: -1;\n  background-color: inherit;\n  border-color: inherit;\n}\n\n.blocklyDropDownButton {\n  display: inline-block;\n  float: left;\n  padding: 0;\n  margin: 4px;\n  border-radius: 4px;\n  outline: none;\n  border: 1px solid;\n  transition: box-shadow .1s;\n  cursor: pointer;\n}\n\n.blocklyArrowTop {\n  border-top: 1px solid;\n  border-left: 1px solid;\n  border-top-left-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyArrowBottom {\n  border-bottom: 1px solid;\n  border-right: 1px solid;\n  border-bottom-right-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyResizeSE {\n  cursor: se-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeSW {\n  cursor: sw-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeLine {\n  stroke: #515A5A;\n  stroke-width: 1;\n}\n\n.blocklyHighlightedConnectionPath {\n  fill: none;\n  stroke: #fc3;\n  stroke-width: 4px;\n}\n\n.blocklyPathLight {\n  fill: none;\n  stroke-linecap: round;\n  stroke-width: 1;\n}\n\n.blocklySelected>.blocklyPathLight {\n  display: none;\n}\n\n.blocklyDraggable {\n  /* backup for browsers (e.g. IE11) that don\'t support grab */\n  cursor: url("<<<PATH>>>/handopen.cur"), auto;\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n\n  /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n.blocklyDragging {\n  /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n  /* Changes cursor on mouse down. Not effective in Firefox because of\n     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n.blocklyDraggable:active {\n  /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Change the cursor on the whole drag surface in case the mouse gets\n   ahead of block during a drag. This way the cursor is still a closed hand.\n  */\n.blocklyBlockDragSurface .blocklyDraggable {\n  /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n.blocklyDragging.blocklyDraggingDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyDragging>.blocklyPath,\n.blocklyDragging>.blocklyPathLight {\n  fill-opacity: .8;\n  stroke-opacity: .8;\n}\n\n.blocklyDragging>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyDisabled>.blocklyPath {\n  fill-opacity: .5;\n  stroke-opacity: .5;\n}\n\n.blocklyDisabled>.blocklyPathLight,\n.blocklyDisabled>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyInsertionMarker>.blocklyPath,\n.blocklyInsertionMarker>.blocklyPathLight,\n.blocklyInsertionMarker>.blocklyPathDark {\n  fill-opacity: .2;\n  stroke: none;\n}\n\n.blocklyMultilineText {\n  font-family: monospace;\n}\n\n.blocklyNonEditableText>text {\n  pointer-events: none;\n}\n\n.blocklyFlyout {\n  position: absolute;\n  z-index: 20;\n}\n\n.blocklyText text {\n  cursor: default;\n}\n\n/*\n  Don\'t allow users to select text.  It gets annoying when trying to\n  drag a block and selected text moves instead.\n*/\n.blocklySvg text,\n.blocklyBlockDragSurface text {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n  cursor: inherit;\n}\n\n.blocklyHidden {\n  display: none;\n}\n\n.blocklyFieldDropdown:not(.blocklyHidden) {\n  display: block;\n}\n\n.blocklyIconGroup {\n  cursor: default;\n}\n\n.blocklyIconGroup:not(:hover),\n.blocklyIconGroupReadonly {\n  opacity: .6;\n}\n\n.blocklyIconShape {\n  fill: #00f;\n  stroke: #fff;\n  stroke-width: 1px;\n}\n\n.blocklyIconSymbol {\n  fill: #fff;\n}\n\n.blocklyMinimalBody {\n  margin: 0;\n  padding: 0;\n}\n\n.blocklyHtmlInput {\n  border: none;\n  border-radius: 4px;\n  height: 100%;\n  margin: 0;\n  outline: none;\n  padding: 0;\n  width: 100%;\n  text-align: center;\n  display: block;\n  box-sizing: border-box;\n}\n\n/* Edge and IE introduce a close icon when the input value is longer than a\n   certain length. This affects our sizing calculations of the text input.\n   Hiding the close icon to avoid that. */\n.blocklyHtmlInput::-ms-clear {\n  display: none;\n}\n\n.blocklyMainBackground {\n  stroke-width: 1;\n  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */\n}\n\n.blocklyMutatorBackground {\n  fill: #fff;\n  stroke: #ddd;\n  stroke-width: 1;\n}\n\n.blocklyFlyoutBackground {\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyMainWorkspaceScrollbar {\n  z-index: 20;\n}\n\n.blocklyFlyoutScrollbar {\n  z-index: 30;\n}\n\n.blocklyScrollbarHorizontal,\n.blocklyScrollbarVertical {\n  position: absolute;\n  outline: none;\n}\n\n.blocklyScrollbarBackground {\n  opacity: 0;\n}\n\n.blocklyScrollbarHandle {\n  fill: #ccc;\n}\n\n.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyScrollbarHandle:hover {\n  fill: #bbb;\n}\n\n/* Darken flyout scrollbars due to being on a grey background. */\n/* By contrast, workspace scrollbars are on a white background. */\n.blocklyFlyout .blocklyScrollbarHandle {\n  fill: #bbb;\n}\n\n.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyFlyout .blocklyScrollbarHandle:hover {\n  fill: #aaa;\n}\n\n.blocklyInvalidInput {\n  background: #faa;\n}\n\n.blocklyVerticalMarker {\n  stroke-width: 3px;\n  fill: rgba(255,255,255,.5);\n  pointer-events: none;\n}\n\n.blocklyComputeCanvas {\n  position: absolute;\n  width: 0;\n  height: 0;\n}\n\n.blocklyNoPointerEvents {\n  pointer-events: none;\n}\n\n.blocklyContextMenu {\n  border-radius: 4px;\n  max-height: 100%;\n}\n\n.blocklyDropdownMenu {\n  border-radius: 2px;\n  padding: 0 !important;\n}\n\n.blocklyDropdownMenu .blocklyMenuItem {\n  /* 28px on the left for icon or checkbox. */\n  padding-left: 28px;\n}\n\n/* BiDi override for the resting state. */\n.blocklyDropdownMenu .blocklyMenuItemRtl {\n  /* Flip left/right padding for BiDi. */\n  padding-left: 5px;\n  padding-right: 28px;\n}\n\n.blocklyWidgetDiv .blocklyMenu {\n  background: #fff;\n  border: 1px solid transparent;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n  font: normal 13px Arial, sans-serif;\n  margin: 0;\n  outline: none;\n  padding: 4px 0;\n  position: absolute;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100%;\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n.blocklyWidgetDiv .blocklyMenu.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv .blocklyMenu {\n  background: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  border: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;\n  outline: none;\n  position: relative;  /* Compatibility with gapi, reset from goog-menu */\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n/* State: resting. */\n.blocklyMenuItem {\n  border: none;\n  color: #000;\n  cursor: pointer;\n  list-style: none;\n  margin: 0;\n  /* 7em on the right for shortcut. */\n  min-width: 7em;\n  padding: 6px 15px;\n  white-space: nowrap;\n}\n\n/* State: disabled. */\n.blocklyMenuItemDisabled {\n  color: #ccc;\n  cursor: inherit;\n}\n\n/* State: hover. */\n.blocklyMenuItemHighlight {\n  background-color: rgba(0,0,0,.1);\n}\n\n/* State: selected/checked. */\n.blocklyMenuItemCheckbox {\n  height: 16px;\n  position: absolute;\n  width: 16px;\n}\n\n.blocklyMenuItemSelected .blocklyMenuItemCheckbox {\n  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;\n  float: left;\n  margin-left: -24px;\n  position: static;  /* Scroll with the menu. */\n}\n\n.blocklyMenuItemRtl .blocklyMenuItemCheckbox {\n  float: right;\n  margin-right: -24px;\n}\n',e$={};e$.inject=gt,e$.register=Ut;var B=class{constructor(e){this.tagName=e}toString(){return this.tagName}};B.ANIMATE=new B("animate"),B.CIRCLE=new B("circle"),B.CLIPPATH=new B("clipPath"),B.DEFS=new B("defs"),B.FECOMPOSITE=new B("feComposite"),B.FECOMPONENTTRANSFER=new B("feComponentTransfer"),B.FEFLOOD=new B("feFlood"),B.FEFUNCA=new B("feFuncA"),B.FEGAUSSIANBLUR=new B("feGaussianBlur"),B.FEPOINTLIGHT=new B("fePointLight"),B.FESPECULARLIGHTING=new B("feSpecularLighting"),B.FILTER=new B("filter"),B.FOREIGNOBJECT=new B("foreignObject"),B.G=new B("g"),B.IMAGE=new B("image"),B.LINE=new B("line"),B.PATH=new B("path"),B.PATTERN=new B("pattern"),B.POLYGON=new B("polygon"),B.RECT=new B("rect"),B.SVG=new B("svg"),B.TEXT=new B("text"),B.TSPAN=new B("tspan");var t$=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,yf=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Ms={};Ms.TEST_ONLY={XY_REGEX:t$,XY_STYLE_REGEX:yf},Ms.getDocumentScroll=Ni,Ms.getInjectionDivXY=Bu,Ms.getRelativeXY=yo,Ms.getViewportBBox=Ke,Ms.is3dSupported=Cg,Ms.screenToWsCoordinates=Vr;var jn=class extends Jr{constructor(e,n,i,a,d){super(e,n,i,a,d),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=k(B.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=e,this.svgRect_=k(B.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:3,ry:3}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!e.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(Qe()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),zt()&&me(new(Te(Qi))(this)),ie(this.svgGroup_),this.disposeInternal_(),Ft(),super.dispose(),Gt())}initSvg(e){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(ue(this.svgRectTarget_,"pointerdown",this,this.pathMouseDown_),ue(this.svgHandleTarget_,"pointerdown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!e&&this.textarea_&&this.textarea_.select()}pathMouseDown_(e){const n=this.workspace.getGesture(e);n&&n.handleBubbleStart(e,this)}showContextMenu(e){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(Qe()!==this){var e=null;if(Qe()){e=Qe().id,Ft();try{Qe().unselect()}finally{Gt()}}e=new(Te(lr))(e,this.id,this.workspace.id),me(e),an(this),this.addSelect()}}unselect(){if(Qe()===this){var e=new(Te(lr))(this.id,null,this.workspace.id);me(e),an(null),this.removeSelect(),this.blurFocus()}}addSelect(){Q(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){Q(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){Q(this.svgGroup_,"blocklyFocused")}removeFocus(){ce(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let e=0,n=0;const i=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let a=this.getSvgRoot();if(a)do{var d=yo(a);e+=d.x,n+=d.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===a&&(e+=(d=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=d.y),a=a.parentNode}while(a&&a!==this.workspace.getBubbleCanvas()&&a!==i);return this.xy_=new re(e,n)}moveBy(e,n){const i=new(Te(Sr))(this),a=this.getRelativeToSurfaceXY();this.translate(a.x+e,a.y+n),this.xy_=new re(a.x+e,a.y+n),i.recordNew(),me(i),this.workspace.resizeContents()}translate(e,n){this.xy_=new re(e,n),this.getSvgRoot().setAttribute("transform","translate("+e+","+n+")")}moveToDragSurface(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag(e,n){e?e.translateSurface(n.x,n.y):(this.svgGroup_.translate_="translate("+n.x+","+n.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo(e,n){this.translate(e,n)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var e=this.getRelativeToSurfaceXY();const n=this.getHeightWidth(),i=e.y,a=e.y+n.height;let d;return this.RTL?(d=e.x-n.width,e=e.x):(d=e.x,e=e.x+n.width),new on(i,a,d,e)}updateMovable(){this.isMovable()?Q(this.svgGroup_,"blocklyDraggable"):ce(this.svgGroup_,"blocklyDraggable")}setMovable(e){super.setMovable(e),this.updateMovable()}setEditable(e){super.setEditable(e),this.textarea_&&(this.textarea_.readOnly=!e)}setDragging(e){e?((e=this.getSvgRoot()).translate_="",e.skew_="",Q(this.svgGroup_,"blocklyDragging")):ce(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent(e){super.setContent(e),this.textarea_&&(this.textarea_.value=e)}setDeleteStyle(e){e?Q(this.svgGroup_,"blocklyDraggingDelete"):ce(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout(e){}toXmlWithXY(e){let n=0;this.workspace.RTL&&(n=this.workspace.getWidth()),e=this.toXml(e);const i=this.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(this.workspace.RTL?n-i.x:i.x)),e.setAttribute("y",Math.round(i.y)),e.setAttribute("h",this.getHeight()),e.setAttribute("w",this.getWidth()),e}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var e=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=k(B.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=k(B.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:3,ry:3}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(e.width,e.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&ue(this.resizeGroup_,"pointerdown",this,this.resizeMouseDown_),this.isDeletable()&&(ue(this.deleteGroup_,"pointerdown",this,this.deleteMouseDown_),ue(this.deleteGroup_,"pointerout",this,this.deleteMouseOut_),ue(this.deleteGroup_,"pointerup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=k(B.FOREIGNOBJECT,{x:0,y:jn.TOP_OFFSET,class:"blocklyCommentForeignObject"});const e=document.createElementNS(ws,"body");e.setAttribute("xmlns",ws),e.className="blocklyMinimalBody";const n=document.createElementNS(ws,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.RTL?"RTL":"LTR"),n.readOnly=!this.isEditable(),e.appendChild(n),this.textarea_=n,this.foreignObject_.appendChild(e),ue(n,"wheel",this,function(i){i.stopPropagation()}),ue(n,"change",this,function(i){this.setContent(n.value)}),this.foreignObject_}addResizeDom_(){this.resizeGroup_=k(B.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),k(B.POLYGON,{points:"0,x x,x x,0".replace(/x/g,8..toString())},this.resizeGroup_),k(B.LINE,{class:"blocklyResizeLine",x1:8/3,y1:7,x2:7,y2:8/3},this.resizeGroup_),k(B.LINE,{class:"blocklyResizeLine",x1:16/3,y1:7,x2:7,y2:16/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=k(B.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=k(B.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),k(B.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),k(B.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_(e){this.unbindDragEvents_(),Ve(e)||(this.workspace.startDrag(e,new re(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=ue(document,"pointerup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=ue(document,"pointermove",this,this.resizeMouseMove_),this.workspace.hideChaff()),e.stopPropagation()}deleteMouseDown_(e){this.deleteIconBorder_&&Q(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),e.stopPropagation()}deleteMouseOut_(e){this.deleteIconBorder_&&ce(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_(e){this.dispose(),e.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(ve(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(ve(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_(e){wt(),this.unbindDragEvents_()}resizeMouseMove_(e){this.autoLayout_=!1,e=this.workspace.moveDrag(e),this.setSize_(this.RTL?-e.x:e.x,e.y)}resizeComment_(){const e=this.getHeightWidth(),n=jn.TOP_OFFSET;this.foreignObject_.setAttribute("width",e.width),this.foreignObject_.setAttribute("height",(e.height-n).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-e.width).toString()),this.textarea_.style.width=e.width-4+"px",this.textarea_.style.height=e.height-4-n+"px"}setSize_(e,n){e=Math.max(e,45),n=Math.max(n,20+jn.TOP_OFFSET),this.width_=e,this.height_=n,this.svgRect_.setAttribute("width",e),this.svgRect_.setAttribute("height",n),this.svgRectTarget_.setAttribute("width",e),this.svgRectTarget_.setAttribute("height",n),this.svgHandleTarget_.setAttribute("width",e),this.svgHandleTarget_.setAttribute("height",jn.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(8-e)+","+(n-8)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(8-e)+","+"-8) scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(e-8)+","+(n-8)+")"),this.deleteGroup_.setAttribute("transform","translate("+(e-8)+","+"-8)"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout(()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&Q(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&Q(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused_=!1,setTimeout(()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&ce(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&ce(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(e,n,i){let a;Ft();try{const d=Jr.parseAttributes(e);if(a=new jn(n,d.content,d.h,d.w,d.id),n.rendered&&(a.initSvg(!0),a.render()),!isNaN(d.x)&&!isNaN(d.y))if(n.RTL){const _=i||n.getWidth();a.moveBy(_-d.x,d.y)}else a.moveBy(d.x,d.y)}finally{Gt()}return Jr.fireCreateEvent(a),a}};jn.DEFAULT_SIZE=100,jn.TOP_OFFSET=10,Ut("\n.blocklyCommentForeignObject {\n  position: relative;\n  z-index: 0;\n}\n\n.blocklyCommentRect {\n  fill: #E7DE8E;\n  stroke: #bcA903;\n  stroke-width: 1px;\n}\n\n.blocklyCommentTarget {\n  fill: transparent;\n  stroke: #bcA903;\n}\n\n.blocklyCommentTargetFocused {\n  fill: none;\n}\n\n.blocklyCommentHandleTarget {\n  fill: none;\n}\n\n.blocklyCommentHandleTargetFocused {\n  fill: transparent;\n}\n\n.blocklyFocused>.blocklyCommentRect {\n  fill: #B9B272;\n  stroke: #B9B272;\n}\n\n.blocklySelected>.blocklyCommentTarget {\n  stroke: #fc3;\n  stroke-width: 3px;\n}\n\n.blocklyCommentDeleteIcon {\n  cursor: pointer;\n  fill: #000;\n  display: none;\n}\n\n.blocklySelected > .blocklyCommentDeleteIcon {\n  display: block;\n}\n\n.blocklyDeleteIconShape {\n  fill: #000;\n  stroke: #000;\n  stroke-width: 1px;\n}\n\n.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {\n  stroke: #fc3;\n}\n"),h.module$build$src$core$xml={},h.module$build$src$core$xml.appendDomToWorkspace=function(e,n){if(!n.getBlocksBoundingBox)return Vo(e,n);var i=n.getBlocksBoundingBox();if(e=Vo(e,n),i&&i.top!==i.bottom){var a=i.bottom;i=n.RTL?i.right:i.left;var d=1/0;let _=-1/0,R=1/0;for(let L=0;L<e.length;L++){const z=n.getBlockById(e[L]).getRelativeToSurfaceXY();z.y<R&&(R=z.y),z.x<d&&(d=z.x),z.x>_&&(_=z.x)}for(a=a-R+10,i=n.RTL?i-_:i-d,d=0;d<e.length;d++)n.getBlockById(e[d]).moveBy(i,a)}return e},h.module$build$src$core$xml.blockToDom=ps,h.module$build$src$core$xml.blockToDomWithXY=Li,h.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=Vo(e,n),n.setResizesEnabled(!0),e},h.module$build$src$core$xml.deleteNext=function(e){for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if("next"===i.nodeName.toLowerCase()){e.removeChild(i);break}}},h.module$build$src$core$xml.domToBlock=An,h.module$build$src$core$xml.domToPrettyText=function(e){e=co(e).split("<");let n="";for(let i=1;i<e.length;i++){const a=e[i];"/"===a[0]&&(n=n.substring(2)),e[i]=n+"<"+a,"/"!==a[0]&&"/>"!==a.slice(-2)&&(n+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},h.module$build$src$core$xml.domToText=co,h.module$build$src$core$xml.domToVariables=Fu,h.module$build$src$core$xml.domToWorkspace=Vo,h.module$build$src$core$xml.textToDom=qn,h.module$build$src$core$xml.variablesToDom=Ih,h.module$build$src$core$xml.workspaceToDom=function(e,n){const i=be("xml");var a=Ih(j(e));a.hasChildNodes()&&i.appendChild(a),a=e.getTopComments(!0);for(let d=0;d<a.length;d++)i.appendChild(a[d].toXmlWithXY(n));for(e=e.getTopBlocks(!0),a=0;a<e.length;a++)i.appendChild(Li(e[a],n));return i};var ia=class extends ks{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}fromJson(e){Z("Blockly.Events.BlockBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.blockId=e.blockId}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new ia)).blockId=e.blockId,n}},tl=class extends ia{constructor(e,n,i,a,d){super(e),this.type=gn,e&&(this.element=n,this.name=i||void 0,this.oldValue=a,this.newValue=d)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}fromJson(e){Z("Blockly.Events.BlockChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new tl)).element=e.element,n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,n}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(!(n=n.getBlockById(this.blockId)))throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(n.mutator&&n.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":n.setEnabled(!e);break;case"inline":n.setInputsInline(!!e);break;case"mutation":const i=tl.getExtraBlockState_(n);n.loadExtraState?n.loadExtraState(JSON.parse(e||"{}")):n.domToMutation&&n.domToMutation(qn(e||"<mutation/>")),me(new tl(n,"mutation",null,i,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState())?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?co(e):""}};Le(ee.EVENT,gn,tl);var ur=class{constructor(e){this.workspace=e,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(e,n){this.markers.has(e)&&this.unregisterMarker(e),n.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers.set(e,n)}unregisterMarker(e){const n=this.markers.get(e);if(!n)throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.");n.dispose(),this.markers.delete(e)}getCursor(){return this.cursor_}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let i,n=0;i=e[n];n++)this.unregisterMarker(i);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};ur.LOCAL_MARKER="local_marker_1",h.module$build$src$core$utils$string={},h.module$build$src$core$utils$string.commonWordPrefix=Pl,h.module$build$src$core$utils$string.commonWordSuffix=fs,h.module$build$src$core$utils$string.isNumber=Uu,h.module$build$src$core$utils$string.shortestStringLength=gs,h.module$build$src$core$utils$string.startsWith=function(e,n){return Z("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),e.startsWith(n)},h.module$build$src$core$utils$string.wrap=vr;var pp=void 0,gp=!1,md=!1,kb=50,Mb=0,fp=0,_p=0,vf=0,Dr=null,$d=null,If=0,Ed=10,Ns=10,Gc=750,Td=5,fn=null,Jt={};Jt.HOVER_MS=Gc,Jt.LIMIT=kb,Jt.MARGINS=Td,Jt.OFFSET_X=If,Jt.OFFSET_Y=Ed,Jt.RADIUS_OK=Ns,Jt.bindMouseEvents=Rn,Jt.block=Nt,Jt.createDom=Tt,Jt.dispose=le,Jt.getCustomTooltip=function(){return pp},Jt.getDiv=function(){return fn},Jt.getTooltipOfObject=tn,Jt.hide=Me,Jt.isVisible=function(){return gp},Jt.setCustomTooltip=function(e){pp=e},Jt.unbindMouseEvents=Tn,Jt.unblock=ho;var o$=.45,r$=.65,Nb={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},xn={};xn.blend=nr,xn.getHsvSaturation=Bi,xn.getHsvValue=ze,xn.hexToRgb=Wr,xn.hsvToHex=bn,xn.hueToHex=_s,xn.names=Nb,xn.parse=jo,xn.rgbToHex=Fi,xn.setHsvSaturation=function(e){o$=e},xn.setHsvValue=function(e){r$=e};var la={};la.checkMessageReferences=_t,la.parseBlockColour=Gi,la.replaceMessageReferences=Lt,la.tokenizeInterpolation=ms;var qr,bd=null,mp=null,Uc="",Hc="",dr={};dr.createDom=ic,dr.getDiv=Ui,dr.hide=Co,dr.hideIfOwner=wn,dr.isVisible=Es,dr.positionWithAnchor=eo,dr.show=$s,dr.testOnly_setDiv=function(e){qr=e};var Ze=class{constructor(e,n,i){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Nn(0,0),e!==Ze.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){e.tooltip&&this.setTooltip(Lt(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=k(B.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=k(B.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=k(B.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");Rn(e),this.mouseDownWrapper_=ue(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return null!==(e=this.saveLegacyState(Ze))?e:this.getValue()}loadState(e){this.loadLegacyState(Ze,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?((e=be("field")).setAttribute("name",this.name||""),co(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,n){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml&&(this.fromXml(qn(n)),!0)}dispose(){Ur(this),wn(this),Tn(this.getClickTarget_()),this.mouseDownWrapper_&&ve(this.mouseDownWrapper_),ie(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,n=this.getSourceBlock();this.EDITABLE&&e&&n&&(this.enabled_&&n.isEditable()?(Q(e,"blocklyEditableText"),ce(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(Q(e,"blocklyNonEditableText"),ce(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Ze.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var n=this.fieldGroup_;n&&(n.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}updateSize_(e){const n=this.getConstants();let i=2*(e=void 0!==e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),a=n.FIELD_TEXT_HEIGHT,d=0;this.textElement_&&(d=Bt(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY),i+=d),this.borderRect_&&(a=Math.max(a,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=a,this.size_.width=i,this.positionTextElement_(e,d),this.positionBorderRect_()}positionTextElement_(e,n){if(this.textElement_){var d,i=this.getConstants(),a=this.size_.height/2;this.textElement_.setAttribute("x",`${null!=(d=this.getSourceBlock())&&d.RTL?this.size_.width-n-e:e}`),this.textElement_.setAttribute("y",`${i.FIELD_TEXT_BASELINE_CENTER?a:a-i.FIELD_TEXT_HEIGHT/2+i.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0===this.size_.width&&(this.render_(),0!==this.size_.width&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Nn(0,0)}getScaledBBox(){let e;var n=this.getSourceBlock();if(!n)throw new _n;if(this.borderRect_){var i=this.borderRect_.getBoundingClientRect();e=Xs(this.borderRect_),n=i.width,i=i.height}else{i=this.sourceBlock_.getHeightWidth();const a=n.workspace.scale;e=this.getAbsoluteXY_(),n=(i.width+1)*a,i=(i.height+1)*a,af?(e.x+=1.5*a,e.y+=1.5*a):(e.x-=.5*a,e.y-=.5*a)}return new on(e.y,e.y+i,e.x,e.x+n)}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"\u2026"),e=e.replace(/\s/g,Ze.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="\u200f"),e):Ze.NBSP}getText(){const e=this.getText_();return String(null!==e?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue(e){if(null!==e){var n=this.doClassValidation_(e);if(!((e=this.processValidation_(e,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,e),(e=this.processValidation_(e,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var i=this.getValue();i===e?this.doValueUpdate_(e):(this.doValueUpdate_(e),n&&zt()&&me(new(Te(gn))(n,"field",this.name||null,i,e)),this.isDirty_&&this.forceRerender())}}}}processValidation_(e,n){return null===n?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(e=n),e)}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||""===e||(e=this.sourceBlock_);const n=this.getClickTarget_();n?n.tooltip=e:this.tooltip_=e}getTooltip(){const e=this.getClickTarget_();return tn(e||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Xs(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const n=this.getSourceBlock();if(!n)throw new _n;const i=n.inputList;for(let a=0;a<n.inputList.length;a++){const d=i[a],_=d.fieldRow;for(let R=0;R<_.length;R++)if(_[R]===this){e=d;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg_=e}else this.cursorSvg_=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg_=e}else this.markerSvg_=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new _n;(e=e.workspace).keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(ur.LOCAL_MARKER).draw()}};Ze.NBSP="\xa0",Ze.SKIP_SETUP=new class{};var _n=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},$p={};$p.Field=Ze,$p.UnattachedFieldError=_n;var s$={fromJsonInternal:function(e){const n=Ai(ee.FIELD,e.type);if(n){if("function"!=typeof n.fromJson)throw new TypeError("returned Field was not a IRegistrableField");return n.fromJson(e)}return console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null}},qt={};qt.TEST_ONLY=s$,qt.fromJson=yn,qt.register=to,qt.unregister=function(e){Ys(ee.FIELD,e)};var mo,xb="aria-",Pb="role";!function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"}(mo||(mo={}));var kt=(()=>(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"}(kt||(kt={})),kt))(),yd={};yd.Role=mo,yd.State=kt,yd.setRole=Xr,yd.setState=xt;var $e=(()=>(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"}($e||($e={})),$e))(),Ep=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName&&Xr(n,this.roleName),this.element=n;for(let a,i=0;a=this.menuItems[i];i++)n.appendChild(a.createDom());return this.mouseOverHandler=ue(n,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=ue(n,"pointerdown",this,this.handleClick,!0),this.mouseEnterHandler=ue(n,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=ue(n,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=ue(n,"keydown",this,this.handleKeyEvent),e.appendChild(n),n}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),Q(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),ce(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(ve(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(ve(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(ve(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(ve(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(ve(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let n,e=0;n=this.menuItems[e];e++)n.dispose();this.element=null}getMenuItem(e){const n=this.getElement();for(;e&&e!==n;){if(e.classList.contains("blocklyMenuItem"))for(let a,i=0;a=this.menuItems[i];i++)if(a.getElement()===e)return a;e=e.parentElement}return null}setHighlighted(e){var n=this.highlightedItem;n&&(n.setHighlighted(!1),this.highlightedItem=null),e&&(e.setHighlighted(!0),this.highlightedItem=e,n=this.getElement(),Fr(e.getElement(),n),xt(n,kt.ACTIVEDESCENDANT,e.getId()))}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,n){let i;for(e+=n;i=this.menuItems[e];){if(i.isEnabled()){this.setHighlighted(i);break}e+=n}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof e.clientX){const i=new re(e.clientX,e.clientY);if(1>re.distance(n,i))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem;switch(e.keyCode){case $e.ENTER:case $e.SPACE:n&&n.performAction();break;case $e.UP:this.highlightPrevious();break;case $e.DOWN:this.highlightNext();break;case $e.PAGE_UP:case $e.HOME:this.highlightFirst();break;case $e.PAGE_DOWN:case $e.END:this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),n=Gn(e);return n.height=e.scrollHeight,n}},Cf=class{constructor(e,n){this.content=e,this.opt_value=n,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=Kn(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var i=document.createElement("div");i.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(i)}return i=this.content,"string"==typeof this.content&&(i=document.createTextNode(this.content)),n.appendChild(i),e.appendChild(n),this.roleName&&Xr(e,this.roleName),xt(e,kt.SELECTED,this.checkable&&this.checked||!1),xt(e,kt.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return null!=(e=this.opt_value)?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const n=this.getElement();n&&this.isEnabled()&&(e?(Q(n,"blocklyMenuItemHighlight"),Q(n,"goog-menuitem-highlight")):(ce(n,"blocklyMenuItemHighlight"),ce(n,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,n){this.actionHandler=e.bind(n)}},Do=class extends Ze{constructor(e,n,i){super(Ze.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions_=null,function(e){return e!==Ze.SKIP_SETUP}(e)&&(Array.isArray(e)?(kh(e),e=function(e){let n=!1;const i=e.map(([R,L])=>"string"==typeof R?[Lt(R),L]:(n=!0,[null!==R.alt?Object.assign({},R,{alt:Lt(R.alt)}):Object.assign({},R),L]));if(n||2>e.length)return{options:i};var a=i.map(([R])=>R),d=gs(a);e=Pl(a,d);const _=fs(a,d);return!e&&!_||d<=e+_?{options:i}:(d=e?a[0].substring(0,e-1):void 0,a=_?a[0].substr(1-_):void 0,{options:cm(i,e,_),prefix:d,suffix:a})}(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption_=this.getOptions(!1)[0],i&&this.configure_(i),this.setValue(this.selectedOption_[1]),n&&this.setValidator(n))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(Do,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=k(B.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Q(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!(null!=(e=this.getSourceBlock())&&e.isShadow())}createTextArrow_(){let e,n;this.arrow_=k(B.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(null!=(e=this.getSourceBlock())&&e.RTL?Do.ARROW_CHAR+" ":" "+Do.ARROW_CHAR)),null!=(n=this.getSourceBlock())&&n.RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=k(B.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(zo,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var n=this.getSourceBlock();if(!n)throw new _n;this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new re(e.clientX,e.clientY):null,Su(),e=this.menu_.render(Yn()),Q(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(e=n.isShadow()?n.getParent().getColour():n.getColour(),n=n.isShadow()?n.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,Du(e,n)),za(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const e=this.getSourceBlock();if(!e)throw new _n;const n=new Ep;n.setRole(mo.LISTBOX),this.menu_=n;const i=this.getOptions(!1);this.selectedMenuItem_=null;for(let d=0;d<i.length;d++){const[_,R]=i[d];if("object"==typeof _){var a=new Image(_.width,_.height);a.src=_.src,a.alt=_.alt||""}else a=_;(a=new Cf(a,R)).setRole(mo.OPTION),a.setRightToLeft(e.RTL),a.setCheckable(!0),n.addChild(a),a.setChecked(R===this.value_),R===this.value_&&(this.selectedMenuItem_=a),a.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_(e){Ur(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,n){this.setValue(n.getValue())}isOptionListDynamic(){return"function"==typeof this.menuGenerator_}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:(e&&this.generatedOptions_||(this.generatedOptions_=this.menuGenerator_(),kh(this.generatedOptions_)),this.generatedOptions_)}doClassValidation_(e){return this.getOptions(!0).some(n=>n[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let i,n=0;i=e[n];n++)i[1]===this.value_&&(this.selectedOption_=i)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?e.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?e.colourSecondary:e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const e=this.selectedOption_&&this.selectedOption_[0];e&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_(e){const n=this.getSourceBlock();if(!n)throw new _n;this.imageElement_.style.display="",this.imageElement_.setAttributeNS(zo,"xlink:href",e.src),this.imageElement_.setAttribute("height",`${e.height}`),this.imageElement_.setAttribute("width",`${e.width}`);const i=Number(e.height);e=Number(e.width);var a=!!this.borderRect_;const d=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,i+i$);let _;a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,_=this.svgArrow_?this.positionSVGArrow_(e+a,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Bt(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+_+2*a,this.size_.height=d;let R=0;n.RTL?this.imageElement_.setAttribute("x",(a+_).toString()):(R=e+_,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",a.toString())),this.imageElement_.setAttribute("y",(d/2-i/2).toString()),this.positionTextElement_(R+a,e+_)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();Q(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var n=!!this.borderRect_;e=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const i=Bt(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let a=0;this.svgArrow_&&(a=this.positionSVGArrow_(i+n,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=i+a+2*n,this.size_.height=e,this.positionTextElement_(n,i)}positionSVGArrow_(e,n){if(!this.svgArrow_)return 0;const i=this.getSourceBlock();if(!i)throw new _n;const a=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,_=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(i.RTL?a:e+d)+","+n+")"),_+d}getText_(){if(!this.selectedOption_)return null;const e=this.selectedOption_[0];return"object"==typeof e?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}};Do.CHECKMARK_OVERHANG=25,Do.MAX_MENU_HEIGHT_VH=.45,Do.ARROW_CHAR="\u25be";var i$=10;to("field_dropdown",Do),h.module$build$src$core$field_dropdown={},h.module$build$src$core$field_dropdown.FieldDropdown=Do;var Id,vd=class extends Yo{constructor(e,n,i){super(e?e.workspace.id:void 0),this.type=wr,e&&(this.blockId=e.id,this.isOpen=n,this.bubbleType=i)}toJson(){const e=super.toJson();if(void 0===this.isOpen)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}fromJson(e){Z("Blockly.Events.BubbleOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new vd)).isOpen=e.isOpen,n.bubbleType=e.bubbleType,n.blockId=e.blockId,n}};(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(Id||(Id={})),Le(ee.EVENT,wr,vd);var l$={};l$.BubbleOpen=vd,l$.BubbleType=Id;var Ht=class{constructor(e,n,i,a,d){this.workspace=e,this.horizontal=n,this.oldHostMetrics=null,this.ratio=1,this.origin=new re(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new re(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=i||!1,this.margin=void 0!==d?d:Ht.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),a&&(e+=" "+a),this.outerSvg=k(B.SVG,{class:e}),a=k(B.G,{},this.outerSvg),this.svgBackground=k(B.RECT,{class:"blocklyScrollbarBackground"},a),e=Math.floor((Ht.scrollbarThickness-5)/2),this.svgHandle=k(B.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},a),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Xe(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),n?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=ue(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=ue(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=Ht.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),ve(this.onMouseDownBarWrapper_),ve(this.onMouseDownHandleWrapper_),ie(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,n){this.position.x=e,this.position.y=n,br(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&!(e=this.workspace.getMetrics())||this.oldHostMetrics&&Ht.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var n=e.viewWidth-2*this.margin;this.pair&&(n-=Ht.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),n=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(n+=Ht.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-Ht.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewWidth/e.scrollWidth;n=this.constrainHandleLength(n),this.setHandleLength(n);var i=this.scrollbarLength-this.handleLength;e=this.constrainHandlePosition(e=(e.viewLeft-e.scrollLeft)/(n=e.scrollWidth-e.viewWidth)*i),this.setHandlePosition(e),this.ratio=i/n}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let n=e.viewHeight-2*this.margin;this.pair&&(n-=Ht.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-Ht.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewHeight/e.scrollHeight;n=this.constrainHandleLength(n),this.setHandleLength(n);var i=this.scrollbarLength-this.handleLength;e=this.constrainHandlePosition(e=(e.viewTop-e.scrollTop)/(n=e.scrollHeight-e.viewHeight)*i),this.setHandlePosition(e),this.ratio=i/n}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay_()}setVisible(e){const n=e!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=e,n&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),wt(),this.cleanUp(),Ve(e))e.stopPropagation();else{var n=Qt(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());n=this.horizontal?n.x:n.y;var i=Bu(this.svgHandle),a=this.handlePosition,d=.95*this.handleLength;n<=(i=this.horizontal?i.x:i.y)?a-=d:n>=i+this.handleLength&&(a+=d),this.setHandlePosition(this.constrainHandlePosition(a)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),Ve(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.workspace.setupDragSurface(),this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=ue(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=ue(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){this.workspace.resetDragSurface(),wt(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(ve(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(ve(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.workspace.setMetrics(this.horizontal?{x:e}:{y:e})}set(e,n){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(n||void 0===n)&&this.updateMetrics()}setOrigin(e,n){this.origin=new re(e,n)}static metricsAreEquivalent(e,n){return e.viewWidth===n.viewWidth&&e.viewHeight===n.viewHeight&&e.viewLeft===n.viewLeft&&e.viewTop===n.viewTop&&e.absoluteTop===n.absoluteTop&&e.absoluteLeft===n.absoluteLeft&&e.scrollWidth===n.scrollWidth&&e.scrollHeight===n.scrollHeight&&e.scrollLeft===n.scrollLeft&&e.scrollTop===n.scrollTop}};Ht.scrollbarThickness=mb?25:15,Ht.DEFAULT_SCROLLBAR_MARGIN=.5;var xe=class{constructor(e,n,i,a,d,_){this.resizeGroup=this.bubbleBack=this.bubbleArrow=this.bubbleGroup=null,this.height=this.width=this.relativeTop=this.relativeLeft=0,this.autoLayout=!0,this.onMouseDownResizeWrapper=this.onMouseDownBubbleWrapper=this.moveCallback=this.resizeCallback=null,this.rendered=this.disposed=!1,this.workspace_=e,this.content_=n,this.shape_=i,i=xe.ARROW_ANGLE,this.workspace_.RTL&&(i=-i),this.arrowRadians=Wt(i),e.getBubbleCanvas().appendChild(this.createDom(n,!(!d||!_))),this.setAnchorLocation(a),d&&_||(d=(e=this.content_.getBBox()).width+2*xe.BORDER_WIDTH,_=e.height+2*xe.BORDER_WIDTH),this.setBubbleSize(d,_),this.positionBubble(),this.renderArrow(),this.rendered=!0}createDom(e,n){this.bubbleGroup=k(B.G,{});var i={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return jm&&(i={}),i=k(B.G,i,this.bubbleGroup),this.bubbleArrow=k(B.PATH,{},i),this.bubbleBack=k(B.RECT,{class:"blocklyDraggable",x:0,y:0,rx:xe.BORDER_WIDTH,ry:xe.BORDER_WIDTH},i),n?(this.resizeGroup=k(B.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup),k(B.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*xe.BORDER_WIDTH).toString())},this.resizeGroup),k(B.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup),k(B.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup)):this.resizeGroup=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper=ue(this.bubbleBack,"pointerdown",this,this.bubbleMouseDown),this.resizeGroup&&(this.onMouseDownResizeWrapper=ue(this.resizeGroup,"pointerdown",this,this.resizeMouseDown))),this.bubbleGroup.appendChild(e),this.bubbleGroup}getSvgRoot(){return this.bubbleGroup}setSvgId(e){let n;null==(n=this.bubbleGroup)||n.setAttribute("data-block-id",e)}bubbleMouseDown(e){const n=this.workspace_.getGesture(e);n&&n.handleBubbleStart(e,this)}showContextMenu(e){}isDeletable(){return!1}setDeleteStyle(e){}resizeMouseDown(e){this.promote(),xe.unbindDragEvents(),Ve(e)||(this.workspace_.startDrag(e,new re(this.workspace_.RTL?-this.width:this.width,this.height)),xe.onMouseUpWrapper=ue(document,"pointerup",this,xe.bubbleMouseUp),xe.onMouseMoveWrapper=ue(document,"pointermove",this,this.resizeMouseMove),this.workspace_.hideChaff()),e.stopPropagation()}resizeMouseMove(e){this.autoLayout=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble()}registerResizeEvent(e){this.resizeCallback=e}registerMoveEvent(e){this.moveCallback=e}promote(){let e;const n=null==(e=this.bubbleGroup)?void 0:e.parentNode;return!(n?.lastChild===this.bubbleGroup||!this.bubbleGroup||(n?.appendChild(this.bubbleGroup),0))}setAnchorLocation(e){this.anchorXY=e,this.rendered&&this.positionBubble()}layoutBubble(){var e=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft(e),i=this.getOptimalRelativeTop(e),a=this.shape_.getBBox();const d={x:n,y:-this.height-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},_={x:-this.width-30,y:i};i={x:a.width,y:i};var R={x:n,y:a.height};n=a.width<a.height?i:R,a=a.width<a.height?R:i,i=this.getOverlap(d,e),R=this.getOverlap(_,e);const L=this.getOverlap(n,e);e=this.getOverlap(a,e),i===(e=Math.max(i,R,L,e))?(this.relativeLeft=d.x,this.relativeTop=d.y):R===e?(this.relativeLeft=_.x,this.relativeTop=_.y):L===e?(this.relativeLeft=n.x,this.relativeTop=n.y):(this.relativeLeft=a.x,this.relativeTop=a.y)}getOverlap(e,n){var i=this.workspace_.RTL?this.anchorXY.x-e.x-this.width:e.x+this.anchorXY.x;return e=e.y+this.anchorXY.y,Math.max(0,Math.min(1,(Math.min(i+this.width,n.left+n.width)-Math.max(i,n.left))*(Math.min(e+this.height,n.top+n.height)-Math.max(e,n.top))/(this.width*this.height)))}getOptimalRelativeLeft(e){let n=-this.width/4;if(this.width>e.width)return n;if(this.workspace_.RTL){var i=this.anchorXY.x-n,a=e.left+e.width;i-this.width<(e=e.left+Ht.scrollbarThickness/this.workspace_.scale)?n=-(e-this.anchorXY.x+this.width):i>a&&(n=-(a-this.anchorXY.x))}else{a=(i=n+this.anchorXY.x)+this.width;const d=e.left;e=e.left+e.width-Ht.scrollbarThickness/this.workspace_.scale,i<d?n=d-this.anchorXY.x:a>e&&(n=e-this.anchorXY.x-this.width)}return n}getOptimalRelativeTop(e){let n=-this.height/4;if(this.height>e.height)return n;const i=this.anchorXY.y+n,d=e.top;e=e.top+e.height-Ht.scrollbarThickness/this.workspace_.scale;const _=this.anchorXY.y;return i<d?n=d-_:i+this.height>e&&(n=e-_-this.height),n}positionBubble(){let e=this.anchorXY.x;e=this.workspace_.RTL?e-(this.relativeLeft+this.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchorXY.y)}moveTo(e,n){let i;null==(i=this.bubbleGroup)||i.setAttribute("transform","translate("+e+","+n+")")}setDragging(e){!e&&this.moveCallback&&this.moveCallback()}getBubbleSize(){return new Nn(this.width,this.height)}setBubbleSize(e,n){const i=2*xe.BORDER_WIDTH;let a,d;e=Math.max(e,i+45),n=Math.max(n,i+20),this.width=e,this.height=n,null==(a=this.bubbleBack)||a.setAttribute("width",e.toString()),null==(d=this.bubbleBack)||d.setAttribute("height",n.toString()),this.resizeGroup&&this.resizeGroup.setAttribute("transform",this.workspace_.RTL?"translate("+2*xe.BORDER_WIDTH+","+(n-i)+") scale(-1 1)":"translate("+(e-i)+","+(n-i)+")"),this.autoLayout&&this.layoutBubble(),this.positionBubble(),this.renderArrow(),this.resizeCallback&&this.resizeCallback()}renderArrow(){const e=[];var n=this.width/2,i=this.height/2,a=-this.relativeLeft,d=-this.relativeTop;if(n===a&&i===d)e.push("M "+n+","+i);else{d-=i,a-=n,this.workspace_.RTL&&(a*=-1);var _=Math.sqrt(d*d+a*a),R=Math.acos(a/_);0>d&&(R=2*Math.PI-R);var L=R+Math.PI/2;L>2*Math.PI&&(L-=2*Math.PI);var z=Math.sin(L);const jt=Math.cos(L);var se=this.getBubbleSize();L=(se.width+se.height)/xe.ARROW_THICKNESS,L=Math.min(L,se.width,se.height)/4,a=n+(se=1-xe.ANCHOR_RADIUS/_)*a,d=i+se*d,se=n+L*jt;const Jo=i+L*z;n-=L*jt,i-=L*z,(z=R+this.arrowRadians)>2*Math.PI&&(z-=2*Math.PI),R=Math.sin(z)*_/xe.ARROW_BEND,_=Math.cos(z)*_/xe.ARROW_BEND,e.push("M"+se+","+Jo),e.push("C"+(se+_)+","+(Jo+R)+" "+a+","+d+" "+a+","+d),e.push("C"+a+","+d+" "+(n+_)+","+(i+R)+" "+n+","+i)}let nt;e.push("z"),null==(nt=this.bubbleArrow)||nt.setAttribute("d",e.join(" "))}setColour(e){let n,i;null==(n=this.bubbleBack)||n.setAttribute("fill",e),null==(i=this.bubbleArrow)||i.setAttribute("fill",e)}dispose(){this.onMouseDownBubbleWrapper&&ve(this.onMouseDownBubbleWrapper),this.onMouseDownResizeWrapper&&ve(this.onMouseDownResizeWrapper),xe.unbindDragEvents(),ie(this.bubbleGroup),this.disposed=!0}moveDuringDrag(e,n){e?e.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft=this.workspace_.RTL?this.anchorXY.x-n.x-this.width:n.x-this.anchorXY.x,this.relativeTop=n.y-this.anchorXY.y,this.renderArrow()}getRelativeToSurfaceXY(){return new re(this.workspace_.RTL?-this.relativeLeft+this.anchorXY.x-this.width:this.anchorXY.x+this.relativeLeft,this.anchorXY.y+this.relativeTop)}setAutoLayout(e){this.autoLayout=e}static unbindDragEvents(){xe.onMouseUpWrapper&&(ve(xe.onMouseUpWrapper),xe.onMouseUpWrapper=null),xe.onMouseMoveWrapper&&(ve(xe.onMouseMoveWrapper),xe.onMouseMoveWrapper=null)}static bubbleMouseUp(e){wt(),xe.unbindDragEvents()}static textToDom(e){const n=k(B.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:xe.BORDER_WIDTH});e=e.split("\n");for(let i=0;i<e.length;i++){const a=k(B.TSPAN,{dy:"1em",x:xe.BORDER_WIDTH},n),d=document.createTextNode(e[i]);a.appendChild(d)}return n}static createNonEditableBubble(e,n,i){if((i=new xe(n.workspace,e,n.pathObject.svgPath,i,null,null)).setSvgId(n.id),n.RTL){n=e.getBBox().width;for(let d,a=0;d=e.childNodes[a];a++)d.setAttribute("text-anchor","end"),d.setAttribute("x",(n+xe.BORDER_WIDTH).toString())}return i}};xe.BORDER_WIDTH=6,xe.ARROW_THICKNESS=5,xe.ARROW_ANGLE=20,xe.ARROW_BEND=4,xe.ANCHOR_RADIUS=8,xe.onMouseUpWrapper=null,xe.onMouseMoveWrapper=null,h.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:28,connectingSnapRadius:28,currentConnectionPreference:8,bumpDelay:250};var Vc=class{constructor(e){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,e||Z("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=e}createIcon(){this.iconGroup_||(this.iconGroup_=k(B.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&Q(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),ue(this.iconGroup_,"pointerup",this,this.iconClick_),this.updateEditable())}dispose(){ie(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_(e){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||Ve(e)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation(e){this.iconXY_=e,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation(e)}computeIconLocation(){var e=this.getBlock().getRelativeToSurfaceXY();const n=yo(this.iconGroup_);e=new re(e.x+n.x+this.SIZE/2,e.y+n.y+this.SIZE/2),re.equals(this.getIconLocation(),e)||this.setIconLocation(e)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new Nn(this.SIZE,this.SIZE-2)}drawIcon_(e){}setVisible(e){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}},Zr={};Zr.deepMerge=ei,Zr.inherits=function(e,n){Z("Blockly.utils.object.inherits","version 9","version 10"),e.superClass_=n.prototype,Object.setPrototypeOf(e,n),e.prototype=Object.create(n.prototype),e.prototype.constructor=e},Zr.mixin=function(e,n){Z("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const i in n)e[i]=n[i]},Zr.values=function(e){return Z("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values(e)};var Pe,nl=class{constructor(e,n,i,a){this.name=e,this.startHats=!1,this.blockStyles=n||Object.create(null),this.categoryStyles=i||Object.create(null),this.componentStyles=a||Object.create(null),this.fontStyle=Object.create(null),Le(ee.THEME,e,this)}getClassName(){return this.name+"-theme"}setBlockStyle(e,n){this.blockStyles[e]=n}setCategoryStyle(e,n){this.categoryStyles[e]=n}getComponentStyle(e){return(e=this.componentStyles[e])&&"string"==typeof e&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null}setComponentStyle(e,n){this.componentStyles[e]=n}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,n){e=e.toLowerCase();const i=new nl(e);let a=n.base;if(a){if("string"==typeof a){let d;a=null!=(d=Ai(ee.THEME,a))?d:void 0}a instanceof nl&&(ei(i,a),i.name=e)}return ei(i.blockStyles,n.blockStyles),ei(i.categoryStyles,n.categoryStyles),ei(i.componentStyles,n.componentStyles),ei(i.fontStyle,n.fontStyle),null!==n.startHats&&(i.startHats=n.startHats),i}},aa=new nl("classic",{colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},{colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}}),Ls="categoryToolbox",Df="flyoutToolbox";!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(Pe||(Pe={}));var u$={hasCategoriesInternal:function(e){if(!e)return!1;const n=e.kind;return n?n===Ls:!!e.contents.filter(function(i){return"CATEGORY"===i.kind.toUpperCase()}).length}},ol={};ol.Position=Pe,ol.TEST_ONLY=u$,ol.convertFlyoutDefToJsonArray=Vu,ol.convertToolboxDefToJson=Ts,ol.hasCategories=Mh,ol.isCategoryCollapsible=Nh,ol.parseToolboxTree=m;var hr=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let n=null,i=!1;var a=!1,d=!1,_=!1,R=!1,L=!1;const z=!!e.readOnly;var se;z||(n=Ts(null!=(se=e.toolbox)?se:null),i=Mh(n),a=void 0===(a=e.trashcan)?i:a,d=void 0===(d=e.collapse)?i:d,_=void 0===(_=e.comments)?i:_,R=void 0===(R=e.disable)?i:R,L=void 0===(L=e.sounds)||L),se=e.maxTrashcanContents,a?void 0===se&&(se=32):se=0;const nt=!!e.rtl;let jt=e.horizontalLayout;void 0===jt&&(jt=!1);var Jo="end"!==e.toolboxPosition;Jo=jt?Jo?Pe.TOP:Pe.BOTTOM:Jo===nt?Pe.RIGHT:Pe.LEFT;let D_=e.css;void 0===D_&&(D_=!0);let O_="https://blockly-demo.appspot.com/static/media/";e.media?O_=e.media.endsWith("/")?e.media:e.media+"/":"path"in e&&(Z("path","Nov 2014","Jul 2023","media"),O_=e.path+"media/");const BE=e.oneBasedIndex,wv=e.renderer||"geras",Sv=e.plugins||{};let FE,GE,k_,A_=e.modalInputs;void 0===A_&&(A_=!0),this.RTL=nt,this.oneBasedIndex=void 0===BE||BE,this.collapse=d,this.comments=_,this.disable=R,this.readOnly=z,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=null!=(FE=e.maxInstances)?FE:null,this.modalInputs=A_,this.pathToMedia=O_,this.hasCategories=i,this.moveOptions=hr.parseMoveOptions_(e,i),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=a,this.maxTrashcanContents=se,this.hasSounds=L,this.hasCss=D_,this.horizontalLayout=jt,this.languageTree=n,this.gridOptions=hr.parseGridOptions_(e),this.zoomOptions=hr.parseZoomOptions_(e),this.toolboxPosition=Jo,this.theme=hr.parseThemeOptions_(e),this.renderer=wv,this.rendererOverrides=null!=(GE=e.rendererOverrides)?GE:null,this.parentWorkspace=null!=(k_=e.parentWorkspace)?k_:null,this.plugins=Sv}static parseMoveOptions_(e,n){const i=e.move||{},a={};return void 0===i.scrollbars&&void 0===e.scrollbars?a.scrollbars=n:"object"==typeof i.scrollbars?(a.scrollbars={horizontal:!!i.scrollbars.horizontal,vertical:!!i.scrollbars.vertical},a.scrollbars.horizontal&&a.scrollbars.vertical?a.scrollbars=!0:a.scrollbars.horizontal||a.scrollbars.vertical||(a.scrollbars=!1)):a.scrollbars=!!i.scrollbars||!!e.scrollbars,a.wheel=a.scrollbars&&void 0!==i.wheel?!!i.wheel:"object"==typeof a.scrollbars,a.drag=!(!a.scrollbars||void 0!==i.drag&&!i.drag),a}static parseZoomOptions_(e){const n={};return n.controls=void 0!==(e=e.zoom||{}).controls&&!!e.controls,n.wheel=void 0!==e.wheel&&!!e.wheel,n.startScale=void 0===e.startScale?1:Number(e.startScale),n.maxScale=void 0===e.maxScale?3:Number(e.maxScale),n.minScale=void 0===e.minScale?.3:Number(e.minScale),n.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),n.pinch=void 0===e.pinch?n.wheel||n.controls:!!e.pinch,n}static parseGridOptions_(e){e=e.grid||{};const n={};return n.spacing=Number(e.spacing)||0,n.colour=e.colour||"#888",n.length=void 0===e.length?1:Number(e.length),n.snap=0<n.spacing&&!!e.snap,n}static parseThemeOptions_(e){return"string"==typeof(e=e.theme||aa)?Ai(ee.THEME,e):e instanceof nl?e:nl.defineTheme(e.name||"builtin"+Kn(),e)}};h.Mutator$$module$build$src$core$mutator=class extends Vc{constructor(e,n){n||Z("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(n??null),this.workspace_=null,this.workspaceHeight=this.workspaceWidth=0,this.updateWorkspacePid=this.sourceListener=this.rootBlock=this.svgDialog=null,this.quarkNames=e}setBlock(e){this.block_=e}getWorkspace(){return this.workspace_}drawIcon_(e){k(B.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),k(B.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),k(B.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)}iconClick_(e){this.getBlock().isEditable()&&super.iconClick_(e)}createEditor(){if(this.svgDialog=k(B.SVG,{x:xe.BORDER_WIDTH,y:xe.BORDER_WIDTH}),this.quarkNames.length){var e=be("xml");for(let d,a=0;d=this.quarkNames[a];a++){var n=be("block");n.setAttribute("type",d),e.appendChild(n)}}else e=null;var i=this.getBlock();return(n=new hr({disable:!1,parentWorkspace:i.workspace,media:i.workspace.options.pathToMedia,rtl:i.RTL,horizontalLayout:!1,renderer:i.workspace.options.renderer,rendererOverrides:i.workspace.options.rendererOverrides})).toolboxPosition=i.RTL?Pe.RIGHT:Pe.LEFT,(i=!!e)&&(n.languageTree=Ts(e)),this.workspace_=this.newWorkspaceSvg(n),this.workspace_.internalIsMutator=!0,this.workspace_.addChangeListener(Ho),e=i?this.workspace_.addFlyout(B.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),e&&n.insertBefore(e,this.workspace_.svgBlockCanvas_),this.svgDialog.appendChild(n),this.svgDialog}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&ce(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&Q(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble(){if(this.workspace_){var e=2*xe.BORDER_WIDTH,n=this.workspace_.getCanvas(),i=n.getBBox(),a=i.width+i.x,d=i.height+3*e,_=this.workspace_.getFlyout();if(_){const R=_.getWorkspace().getMetricsManager().getScrollMetrics();d=Math.max(d,R.height+20),a+=_.getWidth()}(_=this.getBlock().RTL)&&(a=-i.x),a+=3*e,(Math.abs(this.workspaceWidth-a)>e||Math.abs(this.workspaceHeight-d)>e)&&(this.workspaceWidth=a,this.workspaceHeight=d,this.bubble_.setBubbleSize(a+e,d+e),this.svgDialog.setAttribute("width",`${a}`),this.svgDialog.setAttribute("height",`${d}`),this.workspace_.setCachedParentSvgSize(a,d)),_&&n.setAttribute("transform",`translate(${this.workspaceWidth}, 0)`),this.workspace_.resize()}}onBubbleMove(){this.workspace_&&this.workspace_.recordDragTargets()}setVisible(e){if(e!==this.isVisible()){var n=this.getBlock();if(me(new(Te(wr))(n,e,"mutator")),e){this.bubble_=new xe(n.workspace,this.createEditor(),n.pathObject.svgPath,this.iconXY_,null,null),e=this.workspace_,this.bubble_.setSvgId(n.id),this.bubble_.registerMoveEvent(this.onBubbleMove.bind(this));var i=e.options.languageTree,a=e.getFlyout();i&&(a.init(e),a.show(i)),this.rootBlock=n.decompose(e),i=this.rootBlock.getDescendants(!1);for(let _,d=0;_=i[d];d++)_.render();if(this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),a?(i=2*a.CORNER_RADIUS,a=this.rootBlock.RTL?a.getWidth()+i:i):a=i=16,n.RTL&&(a=-a),this.rootBlock.moveBy(a,i),n.saveConnections){const d=this.rootBlock;n.saveConnections(d),this.sourceListener=()=>{const _=this.getBlock();_.saveConnections&&_.saveConnections(d)},n.workspace.addChangeListener(this.sourceListener)}this.resizeBubble(),e.addChangeListener(this.workspaceChanged.bind(this)),this.updateWorkspace(),this.applyColour()}else this.svgDialog=null,this.workspace_.dispose(),this.rootBlock=this.workspace_=null,null==(a=this.bubble_)||a.dispose(),this.bubble_=null,this.workspaceHeight=this.workspaceWidth=0,this.sourceListener&&(n.workspace.removeChangeListener(this.sourceListener),this.sourceListener=null)}}workspaceChanged(e){this.shouldIgnoreMutatorEvent_(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.updateWorkspace()},0))}shouldIgnoreMutatorEvent_(e){return e.isUiEvent||e.type===On||e.type===gn&&"disabled"===e.element}updateWorkspace(){if(!this.workspace_.isDragging()){var e=this.workspace_.getTopBlocks(!1);for(let d,a=0;d=e[a];a++){var n=d.getRelativeToSurfaceXY();if(20>n.y&&d.moveBy(0,20-n.y),d.RTL){var i=-20;const _=this.workspace_.getFlyout();_&&(i-=_.getWidth()),n.x>i&&d.moveBy(i-n.x,0)}else 20>n.x&&d.moveBy(20-n.x,0)}}if(this.rootBlock&&this.rootBlock.workspace===this.workspace_){(e=yt())||de(!0);const a=this.getBlock();if(n=tl.getExtraBlockState_(a),i=a.rendered,a.rendered=!1,a.compose(this.rootBlock),a.rendered=i,a.initSvg(),a.rendered&&a.render(),n!==(i=tl.getExtraBlockState_(a))){me(new(Te(gn))(a,"mutation",null,n,i));const d=yt();setTimeout(function(){const _=yt();de(d),a.bumpNeighbours(),de(_)},h.config$$module$build$src$core$config.bumpDelay)}this.workspace_.isDragging()||setTimeout(()=>this.resizeBubble(),0),de(e)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var e=this.workspace_;if(e&&e.getAllBlocks(!1)){const n=e.getAllBlocks(!1);for(let a,i=0;a=n[i];i++)a.setStyle(a.getStyleName());if(e=e.getFlyout()){e=e.getWorkspace().getAllBlocks(!1);for(let a,i=0;a=e[i];i++)a.setStyle(a.getStyleName())}}}static reconnect(e,n,i){if(!e||!e.getSourceBlock().workspace)return!1;i=n.getInput(i).connection;const a=e.targetBlock();return!(a&&a!==n||!i||i.targetConnection===e||(i.isConnected()&&i.disconnect(),i.connect(e),0))}static findParentWs(e){let n=null;if(e&&e.options){const i=e.options.parentWorkspace;e.isFlyout?i&&i.options&&(n=i.options.parentWorkspace):i&&(n=i)}return n}};var Wc=Object.create(null),Ub={allExtensions:Wc};T("parent_tooltip_when_inline",function(){const e=this.tooltip;this.setTooltip(function(){const n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||e}.bind(this))}),h.module$build$src$core$extensions={},h.module$build$src$core$extensions.TEST_ONLY=Ub,h.module$build$src$core$extensions.apply=It,h.module$build$src$core$extensions.buildTooltipForDropdown=function(e,n){const i=[];return"object"==typeof document&&cc(function(){for(const a in n)_t(n[a])}),function(){this.type&&-1===i.indexOf(this.type)&&(Mg(this,e,n),i.push(this.type)),this.setTooltip(function(){var a=String(this.getFieldValue(e));let d=n[a];return null===d?-1===i.indexOf(this.type)&&(a="No tooltip mapping for value "+a+" of field "+e,null!==this.type&&(a+=" of block type "+this.type),console.warn(a+".")):d=Lt(d),d}.bind(this))}},h.module$build$src$core$extensions.buildTooltipWithFieldText=function(e,n){return"object"==typeof document&&cc(function(){_t(e)}),function(){this.setTooltip(function(){const i=this.getField(n);return Lt(e).replace("%1",i?i.getText():"")}.bind(this))}},h.module$build$src$core$extensions.isRegistered=ye,h.module$build$src$core$extensions.register=T,h.module$build$src$core$extensions.registerMixin=function(e,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+e+'" must be a object');T(e,function(){this.mixin(n)})},h.module$build$src$core$extensions.registerMutator=function(e,n,i,a){const d='Error when registering mutator "'+e+'": ';Lh(d,n);const _=Ul(n,d);if(i&&"function"!=typeof i)throw Error(d+'Extension "'+e+'" is not a function');T(e,function(){_&&this.setMutator(new h.Mutator$$module$build$src$core$mutator(a||[],this)),this.mixin(n),i&&i.apply(this)})},h.module$build$src$core$extensions.runAfterPageLoad=cc,h.module$build$src$core$extensions.unregister=function(e){ye(e)?delete Wc[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')};var h$={};h$.removeElem=mt;var Qr={};Qr.arc=$t,Qr.curve=Cr,Qr.line=Hl,Qr.lineOnAxis=ae,Qr.lineTo=oi,Qr.moveBy=rt,Qr.moveTo=kn,Qr.point=Ie;var tt={};tt.Coordinate=re,tt.KeyCodes=$e,tt.Rect=on,tt.Size=Nn,tt.Svg=B,tt.aria=yd,tt.array=h$,tt.arrayRemove=function(e,n){return Z("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),mt(e,n)},tt.browserEvents=Rr,tt.checkMessageReferences=function(e){return Z("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),_t(e)},tt.colour=xn,tt.deprecation=hn,tt.dom=Dn,tt.extensions=h.module$build$src$core$extensions,tt.getBlockTypeCounts=function(e,n){return Z("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),Dt(e,n)},tt.getDocumentScroll=function(){return Z("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),Ni()},tt.getInjectionDivXY_=function(e){return Z("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),Bu(e)},tt.getRelativeXY=function(e){return Z("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),yo(e)},tt.getViewportBBox=function(){return Z("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),Ke()},tt.idGenerator=Ln,tt.is3dSupported=function(){return Z("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),Cg()},tt.math=nd,tt.object=Zr,tt.parseBlockColour=function(e){return Z("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),Gi(e)},tt.parsing=la,tt.replaceMessageReferences=function(e){return Z("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),Lt(e)},tt.runAfterPageLoad=function(e){Z("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),cc(e)},tt.screenToWsCoordinates=function(e,n){return Z("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),Vr(e,n)},tt.string=h.module$build$src$core$utils$string,tt.style=hi,tt.svgMath=Ms,tt.svgPaths=Qr,tt.tokenizeInterpolation=function(e){return Z("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),ms(e)},tt.toolbox=ol,tt.userAgent=di,tt.xml=h.module$build$src$core$utils$xml;var vp=class extends Yo{constructor(e,n){super(n),this.type=Zi,this.isOpen=e}toJson(){const e=super.toJson();if(void 0===this.isOpen)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}fromJson(e){Z("Blockly.Events.TrashcanOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.isOpen=e.isOpen}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new vp)).isOpen=e.isOpen,n}};Le(ee.EVENT,Zi,vp);var rl=class{constructor(e){this.name_=e}toString(){return this.name_}};rl.POSITIONABLE=new rl("positionable"),rl.DRAG_TARGET=new rl("drag_target"),rl.DELETE_AREA=new rl("delete_area"),rl.AUTOHIDEABLE=new rl("autohideable");var Pn=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,n){const i=e.component.id;var a;if(!n&&this.componentData.has(i))throw Error('Plugin "'+i+'" with capabilities "'+(null==(a=this.componentData.get(i))?void 0:a.capabilities)+'" already added.');for(this.componentData.set(i,e),n=[],a=0;a<e.capabilities.length;a++){const d=String(e.capabilities[a]).toLowerCase();if(n.push(d),this.capabilityToComponentIds.has(d)){let _;null==(_=this.capabilityToComponentIds.get(d))||_.push(i)}else this.capabilityToComponentIds.set(d,[i])}this.componentData.get(i).capabilities=n}removeComponent(e){const n=this.componentData.get(e);if(n){for(let i=0;i<n.capabilities.length;i++){const a=String(n.capabilities[i]).toLowerCase();mt(this.capabilityToComponentIds.get(a),e)}this.componentData.delete(e)}}addCapability(e,n){if(!this.getComponent(e))throw Error('Cannot add capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');var i,a;this.hasCapability(e,n)?console.warn('Plugin "'+e+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),null==(i=this.componentData.get(e))||i.capabilities.push(n),null==(a=this.capabilityToComponentIds.get(n))||a.push(e))}removeCapability(e,n){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?(n=String(n).toLowerCase(),mt(this.componentData.get(e).capabilities,n),mt(this.capabilityToComponentIds.get(n),e)):console.warn('Plugin "'+e+"doesn't have capability \""+n+'" to remove')}hasCapability(e,n){return n=String(n).toLowerCase(),this.componentData.has(e)&&-1!==this.componentData.get(e).capabilities.indexOf(n)}getComponent(e){let n;return null==(n=this.componentData.get(e))?void 0:n.component}getComponents(e,n){if(e=String(e).toLowerCase(),!(e=this.capabilityToComponentIds.get(e)))return[];const i=[];if(n){const a=[];e.forEach(d=>{a.push(this.componentData.get(d))}),a.sort(function(d,_){return d.weight-_.weight}),a.forEach(function(d){i.push(d.component)})}else e.forEach(a=>{i.push(this.componentData.get(a).component)});return i}};Pn.Capability=rl;var Rd=class extends Error{},ca=class extends Rd{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Or=class extends Rd{constructor(e,n,i){super(`The block ${n.toDevString()} is missing a(n) ${e}\nconnection`),this.block=n,this.state=i}},g$=class extends Rd{constructor(e,n,i,a){super(`The block ${i.toDevString()} could not connect its\n${n} to its parent, because: ${e}`),this.childBlock=i,this.childState=a}},Hb=class extends Rd{constructor(e){super("Encountered a real block which is defined as a child of a shadow\nblock. It is an invariant of Blockly that shadow blocks only have shadow\nchildren"),this.state=e}},ua={};ua.BadConnectionCheck=g$,ua.DeserializationError=Rd,ua.MissingBlockType=ca,ua.MissingConnection=Or,ua.RealChildOfShadow=Hb;var da={BLOCKS:50,PROCEDURES:75,VARIABLES:100},Of={};Of.register=Lg,Of.unregister=function(e){Ys(ee.SERIALIZER,e)};var Ip=class{constructor(){this.priority=50}save(e){const n=[];for(const i of e.getTopBlocks(!1))(e=K(i,{addCoordinates:!0,doFullSerialization:!1}))&&n.push(e);return n.length?{languageVersion:0,blocks:n}:null}load(e,n){e=e.blocks;for(const i of e)ri(i,n,{recordUndo:un()})}clear(e){for(const n of e.getTopBlocks(!1))n.dispose(!1)}};Lg("blocks",new Ip);var Sd={};Sd.BlockSerializer=Ip,Sd.append=ri,Sd.appendInternal=Em,Sd.save=K;var Xc=class extends ia{constructor(e){super(e),this.type=On,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Li(e),this.ids=ki(e),this.json=K(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=co(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){Z("Blockly.Events.BlockCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.xml=qn(e.xml),this.ids=e.ids,this.json=e.json,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new Xc)).xml=qn(e.xml),n.ids=e.ids,n.json=e.json,void 0!==e.recordUndo&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(e)ri(this.json,n);else for(e=0;e<this.ids.length;e++){const i=this.ids[e],a=n.getBlockById(i);a?a.dispose(!1):i===this.blockId&&console.warn("Can't uncreate non-existent block: "+i)}}};Le(ee.EVENT,On,Xc);var Cp=class extends ia{constructor(e){if(super(e),this.type=ir,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Li(e),this.ids=ki(e),this.wasShadow=e.isShadow(),this.oldJson=K(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(void 0===this.wasShadow)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=co(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){Z("Blockly.Events.BlockDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldXml=qn(e.oldXml),this.ids=e.ids,this.wasShadow=e.wasShadow||"shadow"===this.oldXml.tagName.toLowerCase(),this.oldJson=e.oldJson,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new Cp)).oldXml=qn(e.oldXml),n.ids=e.ids,n.wasShadow=e.wasShadow||"shadow"===n.oldXml.tagName.toLowerCase(),n.oldJson=e.oldJson,void 0!==e.recordUndo&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const i=this.ids[e],a=n.getBlockById(i);a?a.dispose(!1):i===this.blockId&&console.warn("Can't delete non-existent block: "+i)}else ri(this.oldJson,n)}};Le(ee.EVENT,ir,Cp);var he=(()=>(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"}(he||(he={})),he))();h.module$build$src$core$connection_type={},h.module$build$src$core$connection_type.ConnectionType=he;var ut=class{constructor(e,n){this.type=n,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=e}connect_(e){const n=he.INPUT_VALUE,i=this.getSourceBlock();var a=e.getSourceBlock();let d,_;if(e.isConnected()&&e.disconnect(),this.isConnected()){const R=this.stashShadowState_(),L=this.targetBlock();L.isShadow()?L.dispose(!1):(this.disconnect(),d=L),this.applyShadowState_(R)}zt()&&(_=new(Te(Hn))(a)),function(e,n){if(!e||!n)throw Error("Cannot connect null connections.");e.targetConnection=n,n.targetConnection=e}(this,e),a.setParent(i),_&&(_.recordNew(),me(_)),d&&((a=ut.getConnectionForOrphanedConnection(a,e=this.type===n?d.outputConnection:d.previousConnection))?e.connect(a):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const e=this.targetBlock();e&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===he.INPUT_VALUE||this.type===he.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const n=yt();n||de(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n||de(!1)}return this.isConnected()}disconnect(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!==this)throw Error("Target connection not connected to source connection.");let n,i;this.isSuperior()?(n=this.sourceBlock_,i=e.getSourceBlock(),e=this):(n=e.getSourceBlock(),i=this.sourceBlock_);const a=yt();a||de(!0),this.disconnectInternal_(n,i),i.isShadow()||e.respawnShadow_(),a||de(!1)}disconnectInternal_(e,n){let i;zt()&&(i=new(Te(Hn))(n)),(e=this.targetConnection)&&(e.targetConnection=null),this.targetConnection=null,n.setParent(null),i&&(i.recordNew(),me(i))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let e,n;return null!=(n=null==(e=this.targetConnection)?void 0:e.getSourceBlock())?n:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom(e){this.setShadowStateInternal_({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?ps(this.targetBlock()):this.shadowDom_}setShadowState(e){this.setShadowStateInternal_({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?K(this.targetBlock()):this.shadowState_}neighbours(e){return[]}getParentInput(){let e=null;const n=this.sourceBlock_.inputList;for(let i=0;i<n.length;i++)if(n[i].connection===this){e=n[i];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var n="Output Connection of ";else if(e.previousConnection===this)n="Previous Connection of ";else if(e.nextConnection===this)n="Next Connection of ";else{n=null;for(let a,i=0;a=e.inputList[i];i++)if(a.connection===this){n=a;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+e.toDevString()}stashShadowState_(){const e=this.getShadowDom(!0),n=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:e,shadowState:n}}applyShadowState_({shadowDom:e,shadowState:n}){this.shadowDom_=e,this.shadowState_=n}setShadowStateInternal_({shadowDom:e=null,shadowState:n=null}={}){this.shadowDom_=e,this.shadowState_=n,(e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(e=this.createShadowBlock_(!1),this.serializeShadow_(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_(e){var n=this.getSourceBlock();const i=this.getShadowState(),a=this.getShadowDom();if(n.isDeadOrDying()||!i&&!a)return null;if(i)return Em(i,n.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(a){if(n=An(a,n.workspace),e)if(this.type===he.INPUT_VALUE){if(!n.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(n.outputConnection))throw Error("Could not connect shadow block to connection")}else{if(this.type!==he.NEXT_STATEMENT)throw Error("Cannot connect a shadow block to a previous/output connection");if(!n.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(n.previousConnection))throw Error("Could not connect shadow block to connection")}return n}return null}serializeShadow_(e){e&&(this.shadowDom_=ps(e),this.shadowState_=K(e))}static getConnectionForOrphanedConnection(e,n){if(n.type===he.OUTPUT_VALUE)return function(e,n){let i;for(;i=Pg(e,n);)if(!(e=i.targetBlock())||e.isShadow())return i;return null}(e,n.getSourceBlock());e=e.lastConnectionInStack(!0);const i=n.getConnectionChecker();return e&&i.canConnect(n,e,!1)?e:null}};ut.CAN_CONNECT=0,ut.REASON_SELF_CONNECTION=1,ut.REASON_WRONG_TYPE=2,ut.REASON_TARGET_NULL=3,ut.REASON_CHECKS_FAILED=4,ut.REASON_DIFFERENT_WORKSPACES=5,ut.REASON_SHADOW_PARENT=6,ut.REASON_DRAG_CHECKS_FAILED=7,ut.REASON_PREVIOUS_AND_OUTPUT=8;var Yc="_TEMP_COLLAPSED_INPUT",Kc="_TEMP_COLLAPSED_FIELD",sl={};sl.COLLAPSED_FIELD_NAME=Kc,sl.COLLAPSED_INPUT_NAME=Yc,h.FieldLabel$$module$build$src$core$field_label=class extends Ze{constructor(e,n,i){super(Ze.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,e!==Ze.SKIP_SETUP&&(i?this.configure_(i):this.class_=n||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class_=e.class)}initView(){this.createTextElement_(),this.class_&&Q(this.getTextElement(),this.class_)}doClassValidation_(e){return null==e?null:String(e)}setClass(e){this.textElement_&&(this.class_&&ce(this.textElement_,this.class_),e&&Q(this.textElement_,e)),this.class_=e}static fromJson(e){return new this(Lt(e.text),void 0,e)}},to("field_label",h.FieldLabel$$module$build$src$core$field_label),h.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="";var Af,Jc=class{constructor(e,n,i,a){if(this.type=e,this.name=n,this.connection=a,this.fieldRow=[],this.align=h.Align$$module$build$src$core$input.LEFT,this.visible=!0,e!==Ue.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock=i}getSourceBlock(){return this.sourceBlock}appendField(e,n){return this.insertFieldAt(this.fieldRow.length,e,n),this}insertFieldAt(e,n,i){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(n||""===n&&i)&&("string"==typeof n&&(n=yn({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(n.init(),n.applyColour()),n.name=i,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),e++,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours())),e}removeField(e,n){for(let a,i=0;a=this.fieldRow[i];i++)if(a.name===e)return a.dispose(),this.fieldRow.splice(i,1),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let n=[];if(this.visible===e)return n;this.visible=e;for(let d,a=0;d=this.fieldRow[a];a++)d.setVisible(e);if(this.connection){var i=this.connection;e?n=i.startTrackingAll():i.stopTrackingAll(),(i=i.targetBlock())&&(i.getSvgRoot().style.display=e?"block":"none")}return n}markDirty(){for(let n,e=0;n=this.fieldRow[e];e++)n.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.render(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()}dispose(){for(let n,e=0;n=this.fieldRow[e];e++)n.dispose();this.connection&&this.connection.dispose()}};(function(e){(e=e.Align||(e.Align={}))[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(Jc||(Jc={})),h.Align$$module$build$src$core$input=Jc.Align,(Af={}).Align=h.Align$$module$build$src$core$input,Af.Input=Jc;var Y=class{constructor(e,n,i){if(this.wsCoordinate_=null,!n)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=Y.isConnectionType_(e),this.location_=n,this.processParams_(i||null)}processParams_(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var e=this.location_.getParentInput();const n=e.getSourceBlock();for(e=n.inputList.indexOf(e),e+=1;e<n.inputList.length;e++){const i=n.inputList[e],a=i.fieldRow;for(let d=0;d<a.length;d++){const _=a[d];if(_.isClickable()||Y.NAVIGATE_ALL_FIELDS)return Y.createFieldNode(_)}if(i.connection)return Y.createInputNode(i)}return null}findNextForField_(){var e=this.location_,n=e.getParentInput();const i=e.getSourceBlock();if(!i)throw Error("The current AST location is not associated with a block");var a=i.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;a<i.inputList.length;a++){const d=(n=i.inputList[a]).fieldRow;for(;e<d.length;){if(d[e].isClickable()||Y.NAVIGATE_ALL_FIELDS)return Y.createFieldNode(d[e]);e++}if(e=0,n.connection)return Y.createInputNode(n)}return null}findPrevForInput_(){const e=this.location_.getParentInput(),n=e.getSourceBlock();for(var i=n.inputList.indexOf(e);0<=i;i--){var a=n.inputList[i];if(a.connection&&a!==e)return Y.createInputNode(a);for(let d=(a=a.fieldRow).length-1;0<=d;d--){const _=a[d];if(_.isClickable()||Y.NAVIGATE_ALL_FIELDS)return Y.createFieldNode(_)}}return null}findPrevForField_(){var e=this.location_;const n=e.getParentInput(),i=e.getSourceBlock();if(!i)throw Error("The current AST location is not associated with a block");var a=i.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)-1;0<=a;a--){var d=i.inputList[a];if(d.connection&&d!==n)return Y.createInputNode(d);for(d=d.fieldRow;-1<e;){if(d[e].isClickable()||Y.NAVIGATE_ALL_FIELDS)return Y.createFieldNode(d[e]);e--}0<=a-1&&(e=i.inputList[a-1].fieldRow.length-1)}return null}navigateBetweenStacks_(e){var n=this.getLocation();if(n.getSourceBlock){var i=n.getSourceBlock();i&&(n=i)}if(!n||n.isDeadOrDying())return null;i=n.getRootBlock(),n=i.workspace.getTopBlocks(!0);for(let a=0;a<n.length;a++)if(i.id===n[a].id)return-1===(e=a+(e?1:-1))||e===n.length?null:Y.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}findTopASTNodeForBlock_(e){const n=Xu(e);return n?Y.createConnectionNode(n):Y.createBlockNode(e)}getOutAstNodeForBlock_(e){if(!e)return null;e=e.getTopStackBlock();const n=Xu(e);return n&&n.targetConnection&&n.targetConnection.getParentInput()?Y.createInputNode(n.targetConnection.getParentInput()):Y.createStackNode(e)}findFirstFieldOrInput_(e){e=e.inputList;for(let n=0;n<e.length;n++){const i=e[n],a=i.fieldRow;for(let d=0;d<a.length;d++){const _=a[d];if(_.isClickable()||Y.NAVIGATE_ALL_FIELDS)return Y.createFieldNode(_)}if(i.connection)return Y.createInputNode(i)}return null}getSourceBlock(){return this.getType()===Y.types.BLOCK||this.getType()===Y.types.STACK?this.getLocation():this.getType()===Y.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case Y.types.STACK:return this.navigateBetweenStacks_(!0);case Y.types.OUTPUT:return Y.createBlockNode(this.location_.getSourceBlock());case Y.types.FIELD:return this.findNextForField_();case Y.types.INPUT:return this.findNextForInput_();case Y.types.BLOCK:return Y.createConnectionNode(this.location_.nextConnection);case Y.types.PREVIOUS:return Y.createBlockNode(this.location_.getSourceBlock());case Y.types.NEXT:return Y.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case Y.types.WORKSPACE:const e=this.location_.getTopBlocks(!0);if(0<e.length)return Y.createStackNode(e[0]);break;case Y.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case Y.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case Y.types.INPUT:return Y.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case Y.types.STACK:return this.navigateBetweenStacks_(!1);case Y.types.FIELD:return this.findPrevForField_();case Y.types.INPUT:return this.findPrevForInput_();case Y.types.BLOCK:var e=Xu(this.location_);return Y.createConnectionNode(e);case Y.types.PREVIOUS:if((e=this.location_.targetConnection)&&!e.getParentInput())return Y.createConnectionNode(e);break;case Y.types.NEXT:return Y.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case Y.types.STACK:var e=this.location_,n=e.getRelativeToSurfaceXY();return n=new re(n.x,n.y+Y.DEFAULT_OFFSET_Y),Y.createWorkspaceNode(e.workspace,n);case Y.types.OUTPUT:return(n=(e=this.location_).targetConnection)?Y.createConnectionNode(n):Y.createStackNode(e.getSourceBlock());case Y.types.FIELD:if(!(e=this.location_.getSourceBlock()))throw Error("The current AST location is not associated with a block");return Y.createBlockNode(e);case Y.types.INPUT:return Y.createBlockNode(this.location_.getSourceBlock());case Y.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case Y.types.PREVIOUS:case Y.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_(e){switch(e){case Y.types.PREVIOUS:case Y.types.NEXT:case Y.types.INPUT:case Y.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new Y(Y.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const n=e.type;return n===he.INPUT_VALUE||n===he.NEXT_STATEMENT&&e.getParentInput()?Y.createInputNode(e.getParentInput()):n===he.NEXT_STATEMENT?new Y(Y.types.NEXT,e):n===he.OUTPUT_VALUE?new Y(Y.types.OUTPUT,e):n===he.PREVIOUS_STATEMENT?new Y(Y.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new Y(Y.types.INPUT,e.connection):null}static createBlockNode(e){return e?new Y(Y.types.BLOCK,e):null}static createStackNode(e){return e?new Y(Y.types.STACK,e):null}static createWorkspaceNode(e,n){return n&&e?new Y(Y.types.WORKSPACE,e,{wsCoordinate:n}):null}static createTopNode(e){const n=Xu(e);return n?Y.createConnectionNode(n):Y.createBlockNode(e)}};Y.NAVIGATE_ALL_FIELDS=!1,Y.DEFAULT_OFFSET_Y=-20,function(e){(e=e.types||(e.types={})).FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace"}(Y||(Y={}));var il=class{constructor(e,n,i){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.destroy=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=e,this.id=i&&!e.getBlockById(i)?i:lo(),e.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new Nn(160,80)},this.xy_=new re(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,n){if(this.type=n,!(i=po[n])||"object"!=typeof i)throw TypeError("Invalid block definition for type: "+n);Object.assign(this,i)}e.addTopBlock(this),e.addTypedBlock(this),new.target===il&&this.doInit_()}doInit_(){const e=yt();e||de(!0);const n=un();try{"function"==typeof this.init&&(Ct(!1),this.init(),Ct(n)),zt()&&me(new(Te(On))(this))}finally{e||de(!1),Ct(n)}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)}dispose(e){if(!this.isDeadOrDying()){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),zt()&&me(new(Te(ir))(this)),Ft();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let i=this.childBlocks_.length-1;0<=i;i--)this.childBlocks_[i].dispose(!1);for(let a,i=0;a=this.inputList[i];i++)a.dispose();this.inputList.length=0;const n=this.getConnections_(!0);for(let a,i=0;a=n[i];i++)a.dispose()}finally{Gt(),"function"==typeof this.destroy&&this.destroy(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let n,e=0;n=this.inputList[e];e++)for(let a,i=0;a=n.fieldRow[i];i++)a.initModel&&a.initModel()}unplug(e){this.outputConnection&&this.unplugFromRow_(e),this.previousConnection&&this.unplugFromStack_(e)}unplugFromRow_(e){let n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&((e=e.targetConnection)?.disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):e?.onFailedConnect(n))}getOnlyValueConnection_(){let e=null;for(let n=0;n<this.inputList.length;n++){const i=this.inputList[n].connection;if(i&&i.type===he.INPUT_VALUE&&i.targetConnection){if(e)return null;e=i}}return e}unplugFromStack_(e){let n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());const i=this.getNextBlock();e&&i&&!i.isShadow()&&((e=this.nextConnection.targetConnection)?.disconnect(),n&&this.workspace.connectionChecker.canConnect(n,e,!1)&&n.connect(e))}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let i,n=0;i=this.inputList[n];n++)i.connection&&e.push(i.connection);return e}lastConnectionInStack(e){let n=this.nextConnection;for(;n;){const i=n.targetBlock();if(!i||e&&i.isShadow())return n;n=i.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let i,n=0;i=this.inputList[n];n++)if(i.connection&&i.connection.targetBlock()===e)return i;return null}getSurroundParent(){let n,e=this;do{if(n=e,e=e.getParent(),!e)return null}while(e.getNextBlock()===n);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let n,e=0;n=this.inputList[e];e++)if(n.connection&&n.connection.type===he.NEXT_STATEMENT)return n.connection;return null}getRootBlock(){let e,n=this;do{e=n,n=e.parentBlock_}while(n);return e}getTopStackBlock(){let n,e=this;do{n=e.getPreviousBlock()}while(n&&n.getNextBlock()===e&&(e=n));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let a,i=0;a=this.inputList[i];i++)if(a.connection){var n=a.connection.targetBlock();n&&e.push(n)}return(n=this.getNextBlock())&&e.push(n),e}setParent(e){if(e!==this.parentBlock_){var n=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),i=!!n;if(i&&e&&n!==e)throw Error("Block connected to superior one that is not new parent.");if(!i&&e)throw Error("Block not connected to new parent.");if(i&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?mt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const n=[this],i=this.getChildren(e);for(let a,d=0;a=i[d];d++)n.push(...a.getDescendants(e));return n}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable(e){this.movable_=e}isDuplicatable(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(Dt(this,!0))}isShadow(){return this.isShadow_}setShadow(e){this.isShadow_=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable(e){this.editable_=e;for(let i,n=0;i=this.inputList[n];n++)for(let d,a=0;d=i.fieldRow[a];a++)d.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(e,n){const i=this.getConnections_(!0);if(e=e.getConnections_(!0),i.length!==e.length)throw Error("Connection lists did not match in length.");for(let a=0;a<e.length;a++)if(e[a]===n)return i[a];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return tn(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(e){e=Gi(e),this.hue_=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=e,this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(e){if("string"!=typeof e)throw TypeError("Block.prototype.getField expects a string with the field name but received "+(void 0===e?"nothing":e+" of type "+typeof e)+" instead");for(let i,n=0;i=this.inputList[n];n++)for(let d,a=0;d=i.fieldRow[a];a++)if(d.name===e)return d;return null}getVars(){const e=[];for(let i,n=0;i=this.inputList[n];n++)for(let d,a=0;d=i.fieldRow[a];a++)d.referencesVariables()&&e.push(d.getValue());return e}getVarModels(){const e=[];for(let i,n=0;i=this.inputList[n];n++)for(let d,a=0;d=i.fieldRow[a];a++)if(d.referencesVariables()){const _=this.workspace.getVariableById(d.getValue());_&&e.push(_)}return e}updateVarName(e){for(let i,n=0;i=this.inputList[n];n++)for(let d,a=0;d=i.fieldRow[a];a++)d.referencesVariables()&&e.getId()===d.getValue()&&d.refreshVariableName()}renameVarById(e,n){for(let a,i=0;a=this.inputList[i];i++)for(let _,d=0;_=a.fieldRow[d];d++)_.referencesVariables()&&e===_.getValue()&&_.setValue(n)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,n){const i=this.getField(n);if(!i)throw Error('Field "'+n+'" not found.');i.setValue(e)}setPreviousStatement(e,n){if(e)void 0===n&&(n=null),this.previousConnection||(this.previousConnection=this.makeConnection_(he.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(n);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,n){if(e)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(he.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,n){if(e)void 0===n&&(n=null),this.outputConnection||(this.outputConnection=this.makeConnection_(he.OUTPUT_VALUE)),this.outputConnection.setCheck(n);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(me(new(Te(gn))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(void 0!==this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type===Ue.DUMMY&&this.inputList[e].type===Ue.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type===Ue.VALUE&&this.inputList[e].type===Ue.DUMMY)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(e){if(this.isEnabled()!==e){const n=this.disabled;this.disabled=!e,me(new(Te(gn))(this,"disabled",null,n,!e))}}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(me(new(Te(gn))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,n){function i(se){let nt=se.getCheck();return!nt&&se.targetConnection&&(nt=se.targetConnection.getCheck()),!!nt&&(-1!==nt.indexOf("Boolean")||-1!==nt.indexOf("Number"))}function a(){let se,nt;R&&R.getType()===(null==(se=L)?void 0:se.getType())&&R.getLocation()===(null==(nt=L)?void 0:nt.getLocation())&&(R=null)}var d=[];n=n||"?";const _=Y.NAVIGATE_ALL_FIELDS;Y.NAVIGATE_ALL_FIELDS=!0;let R=Y.createBlockNode(this);const L=R;for(;R;){switch(R.getType()){case Y.types.INPUT:var z=R.getLocation();R.in()?i(z)&&d.push("("):d.push(n);break;case Y.types.FIELD:(z=R.getLocation()).name!==Kc&&d.push(z.getText())}if(R=(z=R).in()||z.next(),!R){for(R=z.out(),a();R&&!R.next();)R=R.out(),a(),R&&R.getType()===Y.types.INPUT&&i(R.getLocation())&&d.push(")");R&&(R=R.next())}}for(Y.NAVIGATE_ALL_FIELDS=_,n=2;n<d.length;n++)"("===d[n-2]&&")"===d[n]&&(d[n-2]=d[n-1],d.splice(n-1,2));return d=(d=d.reduce(function(se,nt){return se+("("===se.substr(-1)||")"===nt?"":" ")+nt},"")).trim()||"???",e&&d.length>e&&(d=d.substring(0,e-3)+"..."),d}appendValueInput(e){return this.appendInput_(Ue.VALUE,e)}appendStatementInput(e){return this.appendInput_(Ue.STATEMENT,e)}appendDummyInput(e){return this.appendInput_(Ue.DUMMY,e||"")}jsonInit(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,n):this.jsonInitColour_(e,n);for(var i=0;void 0!==e["message"+i];)this.interpolate_(e["message"+i],e["args"+i]||[],e["lastDummyAlign"+i],n),i++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(i=Lt(e.tooltip),this.setTooltip(i)),void 0!==e.enableContextMenu&&(this.contextMenu=!!e.enableContextMenu),void 0!==e.suppressPrefixSuffix&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),void 0!==e.helpUrl&&(i=Lt(e.helpUrl),this.setHelpUrl(i)),"string"==typeof e.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&It(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(n=0;n<e.length;n++)It(e[n],this,!1)}jsonInitColour_(e,n){if("colour"in e)if(void 0===e.colour)console.warn(n+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(n+"Illegal colour value: ",e)}}}jsonInitStyle_(e,n){e=e.style;try{this.setStyle(e)}catch{console.warn(n+"Style does not exist: ",e)}}mixin(e,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){n=[];for(const i in e)void 0!==this[i]&&n.push(i);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}Object.assign(this,e)}interpolate_(e,n,i,a){e=ms(e),this.validateTokens_(e,n.length),n=this.interpolateArguments_(e,n,i),i=[];for(let _,d=0;_=n[d];d++)if(this.isInputKeyword_(_.type)){if(e=this.inputFromJson_(_,a)){for(let L,R=0;L=i[R];R++)e.appendField(L[0],L[1]);i.length=0}}else(e=this.fieldFromJson_(_))&&i.push([e,_.name])}validateTokens_(e,n){const i=[];let a=0;for(let d=0;d<e.length;d++){const _=e[d];if("number"==typeof _){if(1>_||_>n)throw Error('Block "'+this.type+'": Message index %'+_+" out of range.");if(i[_])throw Error('Block "'+this.type+'": Message index %'+_+" duplicated.");i[_]=!0,a++}}if(a!==n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")}interpolateArguments_(e,n,i){const a=[];for(let d=0;d<e.length;d++){let _=e[d];"number"==typeof _&&(_=n[_-1]),("string"!=typeof _||(_=this.stringToFieldJson_(_),_))&&a.push(_)}return(e=a.length)&&!this.isInputKeyword_(a[e-1].type)&&(e={type:"input_dummy"},i&&(e.align=i),a.push(e)),a}fieldFromJson_(e){const n=yn(e);return!n&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):n}inputFromJson_(e,n){var i={LEFT:h.Align$$module$build$src$core$input.LEFT,RIGHT:h.Align$$module$build$src$core$input.RIGHT,CENTRE:h.Align$$module$build$src$core$input.CENTRE,CENTER:h.Align$$module$build$src$core$input.CENTRE};let a=null;switch(e.type){case"input_value":a=this.appendValueInput(e.name);break;case"input_statement":a=this.appendStatementInput(e.name);break;case"input_dummy":a=this.appendDummyInput(e.name)}return a?(e.check&&a.setCheck(e.check),e.align&&(void 0===(i=i[e.align.toUpperCase()])?console.warn(n+"Illegal align value: ",e.align):a.setAlign(i)),a):null}isInputKeyword_(e){return"input_value"===e||"input_statement"===e||"input_dummy"===e}stringToFieldJson_(e){return(e=e.trim())?{type:"field_label",text:e}:null}appendInput_(e,n){let i=null;return(e===Ue.VALUE||e===Ue.STATEMENT)&&(i=this.makeConnection_(e)),e===Ue.STATEMENT&&this.statementInputCount++,e=new Jc(e,n,this,i),this.inputList.push(e),e}moveInputBefore(e,n){if(e!==n){var i=-1,a=n?-1:this.inputList.length;for(let _,d=0;_=this.inputList[d];d++)if(_.name===e){if(i=d,-1!==a)break}else if(n&&_.name===n&&(a=d,-1!==i))break;if(-1===i)throw Error('Named input "'+e+'" not found.');if(-1===a)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(i,a)}}moveNumberedInputBefore(e,n){if(e===n)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");const i=this.inputList[e];this.inputList.splice(e,1),e<n&&n--,this.inputList.splice(n,0,i)}removeInput(e,n){for(let a,i=0;a=this.inputList[i];i++)if(a.name===e)return a.type===Ue.STATEMENT&&this.statementInputCount--,a.dispose(),this.inputList.splice(i,1),!0;if(n)return!1;throw Error("Input not found: "+e)}getInput(e){for(let i,n=0;i=this.inputList[n];n++)if(i.name===e)return i;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText(e){this.commentModel.text!==e&&(me(new(Te(gn))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)}setWarningText(e,n){}setMutator(e){}getRelativeToSurfaceXY(){return this.xy_}moveBy(e,n){if(this.parentBlock_)throw Error("Block has parent.");const i=new(Te(Hn))(this);this.xy_.translate(e,n),i.recordNew(),me(i)}makeConnection_(e){return new ut(this,e)}allInputsFilled(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(let a,i=0;a=this.inputList[i];i++)if(a.connection){var n=a.connection.targetBlock();if(!n||!n.allInputsFilled(e))return!1}return!(n=this.getNextBlock())||n.allInputsFilled(e)}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};il.COLLAPSED_INPUT_NAME=Yc,il.COLLAPSED_FIELD_NAME=Kc;var Dd=null,Rp=null,qc={};qc.connectionUiEffect=Fg,qc.disconnectUiEffect=Gg,qc.disconnectUiStop=dc,qc.disposeUiEffect=Ph;var kf=class extends Vc{constructor(e){let n;super(e),this.cachedText="",this.paragraphElement_=this.textarea_=this.foreignObject=this.onInputWrapper=this.onChangeWrapper=this.onWheelWrapper=this.onMouseUpWrapper=null,this.model=e.commentModel,this.model.text=null!=(n=this.model.text)?n:"",this.createIcon()}drawIcon_(e){k(B.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),k(B.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),k(B.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)}createEditor(){this.foreignObject=k(B.FOREIGNOBJECT,{x:xe.BORDER_WIDTH,y:xe.BORDER_WIDTH});const e=document.createElementNS(ws,"body");e.setAttribute("xmlns",ws),e.className="blocklyMinimalBody";const n=this.textarea_=document.createElementNS(ws,"textarea");let i;return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR"),n.value=null!=(i=this.model.text)?i:"",this.resizeTextarea(),e.appendChild(n),this.foreignObject.appendChild(e),this.onMouseUpWrapper=ue(n,"focus",this,this.startEdit,!0),this.onWheelWrapper=ue(n,"wheel",this,function(a){a.stopPropagation()}),this.onChangeWrapper=ue(n,"change",this,function(a){this.cachedText!==this.model.text&&me(new(Te(gn))(this.getBlock(),"comment",null,this.cachedText,this.model.text))}),this.onInputWrapper=ue(n,"input",this,function(a){this.model.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble(),this.createBubble())}onBubbleResize(){this.isVisible()&&this.bubble_&&(this.model.size=this.bubble_.getBubbleSize(),this.resizeTextarea())}resizeTextarea(){if(this.textarea_&&this.foreignObject){var e=this.model.size,n=2*xe.BORDER_WIDTH,i=e.width-n;e=e.height-n,this.foreignObject.setAttribute("width",`${i}`),this.foreignObject.setAttribute("height",`${e}`),this.textarea_.style.width=i-4+"px",this.textarea_.style.height=e-4+"px"}}setVisible(e){e!==this.isVisible()&&(me(new(Te(wr))(this.getBlock(),e,"comment")),(this.model.pinned=e)?this.createBubble():this.disposeBubble())}createBubble(){this.getBlock().isEditable()?this.createEditableBubble():this.createNonEditableBubble()}createEditableBubble(){const e=this.getBlock();this.bubble_=new xe(e.workspace,this.createEditor(),e.pathObject.svgPath,this.iconXY_,this.model.size.width,this.model.size.height),this.bubble_.setSvgId(e.id),this.bubble_.registerResizeEvent(this.onBubbleResize.bind(this)),this.applyColour()}createNonEditableBubble(){let e;this.paragraphElement_=xe.textToDom(null!=(e=this.model.text)?e:""),this.bubble_=xe.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.onMouseUpWrapper&&(ve(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onWheelWrapper&&(ve(this.onWheelWrapper),this.onWheelWrapper=null),this.onChangeWrapper&&(ve(this.onChangeWrapper),this.onChangeWrapper=null),this.onInputWrapper&&(ve(this.onInputWrapper),this.onInputWrapper=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject=this.textarea_=null}startEdit(e){let n;null!=(n=this.bubble_)&&n.promote()&&this.textarea_.focus(),this.cachedText=this.model.text}getBubbleSize(){return this.model.size}setBubbleSize(e,n){this.bubble_?this.bubble_.setBubbleSize(e,n):(this.model.size.width=e,this.model.size.height=n)}updateText(){if(this.textarea_){let e;this.textarea_.value=null!=(e=this.model.text)?e:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model.text)}dispose(){this.getBlock().comment=null,super.dispose()}};Ut("\n.blocklyCommentTextarea {\n  background-color: #fef49c;\n  border: 0;\n  display: block;\n  margin: 0;\n  outline: 0;\n  padding: 3px;\n  resize: none;\n  text-overflow: hidden;\n}\n");var Od,wp,Ad,mi=null,Mf={duplicateInternal:function(e){const n=mi;let i,a,d;return hc(e),e=null!=(d=null==(i=e.toCopyData())||null==(a=i.source)?void 0:a.paste(mi.saveInfo))?d:null,mi=n,e},copyInternal:function(e){mi=e.toCopyData()}},Oo={};Oo.TEST_ONLY=Mf,Oo.copy=hc,Oo.duplicate=Fh,Oo.paste=Vg,Od=null,wp={},Ad=null,h.module$build$src$core$contextmenu={},h.module$build$src$core$contextmenu.callbackFactory=function(e,n){return()=>{let i;Ft();try{i=An(n,e.workspace);const a=e.getRelativeToSurfaceXY();a.x=e.RTL?a.x-h.config$$module$build$src$core$config.snapRadius:a.x+h.config$$module$build$src$core$config.snapRadius,a.y+=2*h.config$$module$build$src$core$config.snapRadius,i.moveBy(a.x,a.y)}finally{Gt()}zt()&&!i.isShadow()&&me(new(Te(On))(i)),i.select()}},h.module$build$src$core$contextmenu.commentDeleteOption=Yu,h.module$build$src$core$contextmenu.commentDuplicateOption=Vh,h.module$build$src$core$contextmenu.dispose=zu,h.module$build$src$core$contextmenu.getCurrentBlock=li,h.module$build$src$core$contextmenu.hide=Uh,h.module$build$src$core$contextmenu.setCurrentBlock=Kt,h.module$build$src$core$contextmenu.show=Gh,h.module$build$src$core$contextmenu.workspaceCommentOption=function(e,n){const i={enabled:!0};return i.text=De.ADD_COMMENT,i.callback=function(){const a=new jn(e,De.WORKSPACE_COMMENT_DEFAULT_TEXT,jn.DEFAULT_SIZE,jn.DEFAULT_SIZE);var d=e.getInjectionDiv().getBoundingClientRect();d=new re(n.clientX-d.left,n.clientY-d.top);const _=e.getOriginOffsetInPixels();(d=re.difference(d,_)).scale(1/e.scale),a.moveBy(d.x,d.y),e.rendered&&(a.initSvg(),a.render(),a.select())},i};var dt=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(e){if(this.registry_.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_.set(e.id,e)}unregister(e){if(!this.registry_.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registry_.delete(e)}getItem(e){let n;return null!=(n=this.registry_.get(e))?n:null}getContextMenuOptions(e,n){const i=[];for(const d of this.registry_.values())if(e===d.scopeType){var a=d.preconditionFn(n);"hidden"!==a&&(a={text:"function"==typeof d.displayText?d.displayText(n):d.displayText,enabled:"enabled"===a,callback:d.callback,scope:n,weight:d.weight},i.push(a))}return i.sort(function(d,_){return d.weight-_.weight}),i}};!function(e){var n=e.ScopeType||(e.ScopeType={});n.BLOCK="block",n.WORKSPACE="workspace",e.registry=new e}(dt||(dt={}));var Wb=dt.ScopeType,E$={};E$.ContextMenuRegistry=dt,E$.ScopeType=Wb;var $i=[];$i[he.INPUT_VALUE]=he.OUTPUT_VALUE,$i[he.OUTPUT_VALUE]=he.INPUT_VALUE,$i[he.NEXT_STATEMENT]=he.PREVIOUS_STATEMENT,$i[he.PREVIOUS_STATEMENT]=he.NEXT_STATEMENT;var Md="RENAME_VARIABLE_ID",He="DELETE_VARIABLE_ID",Nd={COLLAPSE_CHARS:30};Nd.DELETE_VARIABLE_ID=He,Nd.DRAG_STACK=true,Nd.OPPOSITE_TYPE=$i,Nd.RENAME_VARIABLE_ID=Md;var Dp=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer(e){this.drawer_=e}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode(e){const n=this.curNode_;this.curNode_=e,this.drawer_&&this.drawer_.draw(n,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},Op=class extends Dp{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===Y.types.NEXT||e.getType()===Y.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;let n,i;return(e.getType()===Y.types.PREVIOUS||e.getType()===Y.types.OUTPUT)&&(e=e.next()),(e=null!=(i=null==(n=e)?void 0:n.in())?i:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===Y.types.NEXT||e.getType()===Y.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===Y.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};Le(ee.CURSOR,Ds,Op);var ha=class extends Op{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,n){if(!e)return null;const i=e.in()||e.next();return n(i)?i:i?this.getNextNode_(i,n):n(e=this.findSiblingOrParent_(e.out()))?e:e?this.getNextNode_(e,n):null}getPreviousNode_(e,n){if(!e)return null;let i=e.prev();return i=i?this.getRightMostChild_(i):e.out(),n(i)?i:i?this.getPreviousNode_(i,n):null}validNode_(e){let n=!1;return((e=e&&e.getType())===Y.types.OUTPUT||e===Y.types.INPUT||e===Y.types.FIELD||e===Y.types.NEXT||e===Y.types.PREVIOUS||e===Y.types.WORKSPACE)&&(n=!0),n}findSiblingOrParent_(e){return e?e.next()||this.findSiblingOrParent_(e.out()):null}getRightMostChild_(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild_(e)}};ha.registrationName="basicCursor",Le(ee.CURSOR,ha.registrationName,ha);var Ap=class extends ha{validNode_(e){let n=!1;const i=e&&e.getType();return e&&(e=e.getLocation(),i===Y.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n}},Ao=class extends ut{constructor(e,n){super(e,n),this.targetConnection=this.highlightPath=null,this.db_=e.workspace.connectionDBList[n],this.dbOpposite_=e.workspace.connectionDBList[$i[n]],this.offsetInBlock_=new re(0,0),this.trackedState_=Ao.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===Ao.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const n=this.x-e.x;return e=this.y-e.y,Math.sqrt(n*n+e*e)}bumpAwayFrom(e){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var i=!1;if(!n.isMovable()){if(!(n=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,i=!0}var a=Qe()==n;a||n.addSelect();var d=e.x+h.config$$module$build$src$core$config.snapRadius+Math.floor(10*Math.random())-this.x,_=e.y+h.config$$module$build$src$core$config.snapRadius+Math.floor(10*Math.random())-this.y;i&&(_=-_),n.RTL&&(d=e.x-h.config$$module$build$src$core$config.snapRadius-Math.floor(10*Math.random())-this.x),n.moveBy(d,_),a||n.removeSelect()}}}moveTo(e,n){this.trackedState_===Ao.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=Ao.TrackedState.TRACKED):this.trackedState_===Ao.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=e,this.y=n}moveBy(e,n){this.moveTo(this.x+e,this.y+n)}moveToOffset(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)}setOffsetInBlock(e,n){this.offsetInBlock_.x=e,this.offsetInBlock_.y=n}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const e=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!==e||0!==n){const a=this.targetBlock();var i=a.getSvgRoot();if(!i)throw Error("block is not rendered.");i=yo(i),a.getSvgRoot().setAttribute("transform","translate("+(i.x-e)+","+(i.y-n)+")"),a.moveConnections(-e,-n)}}closest(e,n){return this.dbOpposite_.searchForClosest(this,e,n)}highlight(){if(!this.highlightPath){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),n=e.shapeFor(this);n=this.type===he.INPUT_VALUE||this.type===he.OUTPUT_VALUE?rt(0,-(e=e.TAB_OFFSET_FROM_TOP))+ae("v",e)+n.pathDown+ae("v",e):rt(-(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS),0)+ae("h",e)+n.pathLeft+ae("h",e),e=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=k(B.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(ie(this.highlightPath),this.highlightPath=null)}setTracking(e){e&&this.trackedState_===Ao.TrackedState.TRACKED||!e&&this.trackedState_===Ao.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=Ao.TrackedState.TRACKED):(this.trackedState_===Ao.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=Ao.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const i=this.targetBlock().getDescendants(!1);for(let a=0;a<i.length;a++){var e=i[a],n=e.getConnections_(!0);for(let d=0;d<n.length;d++)n[d].setTracking(!1);for(e=e.getIcons(),n=0;n<e.length;n++)e[n].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==he.INPUT_VALUE&&this.type!==he.NEXT_STATEMENT)return e;const n=this.targetBlock();if(n){let i;n.isCollapsed()?(i=[],n.outputConnection&&i.push(n.outputConnection),n.nextConnection&&i.push(n.nextConnection),n.previousConnection&&i.push(n.previousConnection)):i=n.getConnections_(!0);for(let a=0;a<i.length;a++)e.push(...i[a].startTrackingAll());e.length||(e=[n])}return e}onFailedConnect(e){const n=this.getSourceBlock();if(un()){const i=yt();setTimeout(function(){n.isDisposed()||n.getParent()||(de(i),this.bumpAwayFrom(e),de(!1))}.bind(this),h.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_(e,n){super.disconnectInternal_(e,n),e.rendered&&e.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())}neighbours(e){return this.dbOpposite_.getNeighbours(this,e)}connect_(e){super.connect_(e);var n=this.getSourceBlock();e=e.getSourceBlock();const i=n.rendered,a=e.rendered;i&&n.updateDisabled(),a&&e.updateDisabled(),i&&a&&(this.type===he.NEXT_STATEMENT||this.type===he.PREVIOUS_STATEMENT?e.render():n.render()),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};!function(e){(e=e.TrackedState||(e.TrackedState={}))[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"}(Ao||(Ao={}));var b$=Ao.TrackedState,Lf={};Lf.RenderedConnection=Ao,Lf.TrackedState=b$;var pr=class extends Vc{constructor(e){super(e),this.paragraphElement=null,this.collapseHidden=!1,this.createIcon(),this.text=Object.create(null)}drawIcon_(e){k(B.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),k(B.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),k(B.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)}setVisible(e){e!==this.isVisible()&&(me(new(Te(wr))(this.getBlock(),e,"warning")),e?this.createBubble():this.disposeBubble())}createBubble(){this.paragraphElement=xe.textToDom(this.getText()),this.bubble_=xe.createNonEditableBubble(this.paragraphElement,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement=null}setText(e,n){this.text[n]!==e&&(e?this.text[n]=e:delete this.text[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const e=[];for(const n in this.text)e.push(this.text[n]);return e.join("\n")}dispose(){this.getBlock().warning=null,super.dispose()}},ko=class extends il{constructor(e,n,i){super(e,n,i),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=k(B.G,{}),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!e.getBlockDragSurface(),(e=this.pathObject.svgPath).tooltip=this,Rn(e),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let i,n=0;i=this.inputList[n];n++)i.init();var e=this.getIcons();for(let n=0;n<e.length;n++)e[n].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||ue(e,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(Qe()!==this){var e=null;if(Qe()){e=Qe().id,Ft();try{Qe().unselect()}finally{Gt()}}e=new(Te(lr))(e,this.id,this.workspace.id),me(e),an(this),this.addSelect()}}unselect(){if(Qe()===this){var e=new(Te(lr))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,me(e),an(null),this.removeSelect()}}getIcons(){const e=[];return this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e}setParent(e){const n=this.parentBlock_;if(e!==n){Pr(),super.setParent(e),Je();var i=this.getSvgRoot();if(!this.workspace.isClearing&&i){var a=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(i),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-a.x,e.y-a.y)):n&&(this.workspace.getCanvas().appendChild(i),this.translate(a.x,a.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let e=0,n=0;const i=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let a=this.getSvgRoot();if(a)do{var d=yo(a);e+=d.x,n+=d.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===a&&(e+=(d=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=d.y),a=a.parentNode}while(a&&a!==this.workspace.getCanvas()&&a!==i);return new re(e,n)}moveBy(e,n){if(this.parentBlock_)throw Error("Block has parent.");const i=zt();let a=null;i&&(a=new(Te(Hn))(this));const d=this.getRelativeToSurfaceXY();this.translate(d.x+e,d.y+n),this.moveConnections(e,n),i&&a&&(a.recordNew(),me(a)),this.workspace.resizeContents()}translate(e,n){this.getSvgRoot().setAttribute("transform","translate("+e+","+n+")")}moveToDragSurface(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),(e=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(e)}}moveTo(e){const n=this.getRelativeToSurfaceXY();this.moveBy(e.x-n.x,e.y-n.y)}moveOffDragSurface(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag(e){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var n=e.getSpacing(),i=n/2,a=this.getRelativeToSurfaceXY();e=Math.round(Math.round((a.x-i)/n)*n+i-a.x),n=Math.round(Math.round((a.y-i)/n)*n+i-a.y),(e||n)&&this.moveBy(e,n)}}}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();let i,a;return this.RTL?(i=e.x-n.width,a=e.x):(i=e.x,a=e.x+n.width),new on(e.y,e.y+n.height,i,a)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let n,e=0;n=this.inputList[e];e++)n.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),e?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var e=this.isCollapsed();const n=Yc,i=Kc;for(let _,d=0;_=this.inputList[d];d++)_.name!==n&&_.setVisible(!e);if(e){e=this.getIcons();for(let _,d=0;_=e[d];d++)_.setVisible(!1);e=this.toString(30);var a=this.getField(i);a?a.setValue(e):(this.getInput(n)||this.appendDummyInput(n)).appendField(new h.FieldLabel$$module$build$src$core$field_label(e),i)}else this.updateDisabled(),this.removeInput(n)}tab(e,n){const i=new Ap;i.setCurNode(Y.createFieldNode(e)),e=i.getCurNode(),n?i.next():i.prev(),(n=i.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))}onMouseDown_(e){const n=this.workspace.getGesture(e);n&&n.handleBlockStart(e,this)}showHelp(){const e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=dt.registry.getContextMenuOptions(dt.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const n=this.generateContextMenu();n&&n.length&&(Gh(e,n,this.RTL),Kt(this))}moveConnections(e,n){if(this.rendered){for(var i=this.getConnections_(!1),a=0;a<i.length;a++)i[a].moveBy(e,n);for(i=this.getIcons(),a=0;a<i.length;a++)i[a].computeIconLocation();for(i=0;i<this.childBlocks_.length;i++)this.childBlocks_[i].moveConnections(e,n)}}setDragging(e){if(e){var n=this.getSvgRoot();n.translate_="",n.skew_="",wc.push(...this.getConnections_(!0)),Q(this.svgGroup_,"blocklyDragging")}else wc.length=0,ce(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let n=0;n<e.length;n++)e[n].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(e,n){if(!this.isDeadOrDying()){le(),Tn(this.pathObject.svgPath),Pr();var i=this.workspace;for(var a of(Qe()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),li()===this&&Uh(),n&&this.rendered&&(this.unplug(e),Ph(this)),this.rendered=!1,this.warningTextDb.values()))clearTimeout(a);for(this.warningTextDb.clear(),n=this.getIcons(),a=0;a<n.length;a++)n[a].dispose();Qe()===this&&an(null),super.dispose(!!e),ie(this.svgGroup_),i.resizeContents(),this.svgGroup_=null,Je()}}checkAndDelete(){this.workspace.isFlyout||(de(!0),this.workspace.hideChaff(),this.dispose(!this.outputConnection,!0),de(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:K(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:Dt(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let n=0;n<e.length;n++)e[n].applyColour();for(let i,n=0;i=this.inputList[n];n++)for(let d,a=0;d=i.fieldRow[a];a++)d.applyColour()}updateDisabled(){const e=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let i,n=0;i=e[n];n++)i.rendered&&i.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText(e){this.commentModel.text!==e&&(super.setCommentText(e),!!this.commentIcon_==(e=null!==e)?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new kf(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText(e,n){const i=n||"";if(i)this.warningTextDb.has(i)&&(clearTimeout(this.warningTextDb.get(i)),this.warningTextDb.delete(i));else{for(var a of this.warningTextDb.values())clearTimeout(a);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(i,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(i),this.setWarningText(e,i))},100));else{if(this.isInFlyout&&(e=null),n=!1,"string"==typeof e){a=this.getSurroundParent();let d=null;for(;a;)a.isCollapsed()&&(d=a),a=a.getSurroundParent();d&&d.setWarningText(De.COLLAPSED_WARNINGS_WARNING,ko.COLLAPSED_WARNING_ID),this.warning||(this.warning=new pr(this),n=!0),this.warning.setText(e,i)}else this.warning&&!i?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",i),(a=this.warning.getText())||this.warning.dispose(),n=n!==a);n&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.setBlock(this),this.mutator=e,e.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled(e){this.isEnabled()!==e&&(super.setEnabled(e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(e){this.rendered&&this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const n=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,!n)throw Error("Invalid style name: "+e);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()}bringToFront(){let e=this;do{const n=e.getSvgRoot(),i=n.parentNode,a=i.childNodes;a[a.length-1]!==n&&i.appendChild(n),e=e.getParent()}while(e)}setPreviousStatement(e,n){super.setPreviousStatement(e,n),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement(e,n){super.setNextStatement(e,n),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput(e,n){super.setOutput(e,n),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline(e){super.setInputsInline(e),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput(e,n){return e=super.removeInput(e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e}moveNumberedInputBefore(e,n){super.moveNumberedInputBefore(e,n),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_(e,n){return e=super.appendInput_(e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(e)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var i=this.inputList[n].connection;i&&(i.setTracking(e),(i=i.targetBlock())&&i.setConnectionTracking(e))}}getConnections_(e){const n=[];if((e||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_))for(let a,i=0;a=this.inputList[i];i++)a.connection&&n.push(a.connection);return n}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,n){return super.getMatchingConnection(e,n)}makeConnection_(e){return new Ao(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){this.getRootBlock().bumpNeighboursInternal()}bumpNeighboursInternal(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const n of this.getConnections_(!1)){if(n.isSuperior()){let i;null==(i=n.targetBlock())||i.bumpNeighboursInternal()}for(const i of n.neighbours(h.config$$module$build$src$core$config.snapRadius))i.getSourceBlock().getRootBlock()!==e&&(n.isConnected()&&i.isConnected()||(n.isSuperior()?i.bumpAwayFrom(n):n.bumpAwayFrom(i)))}}scheduleSnapAndBump(){const e=yt();setTimeout(()=>{de(e),this.snapToGrid(),de(!1)},h.config$$module$build$src$core$config.bumpDelay/2),setTimeout(()=>{de(e),this.bumpNeighbours(),de(!1)},h.config$$module$build$src$core$config.bumpDelay)}positionNearConnection(e,n){e.type!==he.NEXT_STATEMENT&&e.type!==he.INPUT_VALUE||this.moveBy(n.x-e.x,n.y-e.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(e){return super.getChildren(e)}render(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,Pr(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){const n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}Je(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(ur.LOCAL_MARKER).draw()}updateConnectionLocations_(){const e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(let n=0;n<this.inputList.length;n++){const i=this.inputList[n].connection;i&&(i.moveToOffset(e),i.isConnected()&&i.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,n=this.width;var i=this.getNextBlock();if(i){i=i.getHeightWidth();const a=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=i.height-a,n=Math.max(n,i.width)}return{height:e,width:n}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,n){this.pathObject.updateShapeForInputHighlight(e,n)}};ko.INLINE=-1,ko.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Pf=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},kp=class extends Pf{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e,n){return e instanceof ko?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!n)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},xs=(()=>(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"}(xs||(xs={})),xs))(),ll=(()=>(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(ll||(ll={})),ll))(),al=(()=>(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(al||(al={})),al))(),pa={};pa.bumpDirection=al,pa.bumpPositionRect=Vl,pa.getCornerOppositeToolbox=ys,pa.getStartPositionRect=jg,pa.horizontalPosition=ll,pa.verticalPosition=xs;var vn_width=96,vn_height=124,vn_url="sprites.png",Mp=class extends kp{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||(e=new hr({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===Pe.TOP?Pe.BOTTOM:Pe.TOP,this.flyout=new(Xt(ee.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===Pe.RIGHT?Pe.LEFT:Pe.RIGHT,this.flyout=new(Xt(ee.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){let e;this.svgGroup_=k(B.G,{class:"blocklyTrash"});const n=String(Math.random()).substring(2);e=k(B.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup_),k(B.RECT,{width:Ei,height:Np,y:ga},e);const i=k(B.IMAGE,{width:vn_width,x:-Bf,height:vn_height,y:-Ff,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup_);return i.setAttributeNS(zo,"xlink:href",this.workspace.options.pathToMedia+vn_url),e=k(B.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup_),k(B.RECT,{width:Ei,height:ga},e),this.svgLid_=k(B.IMAGE,{width:vn_width,x:-Bf,height:vn_height,y:-Ff,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup_),this.svgLid_.setAttributeNS(zo,"xlink:href",this.workspace.options.pathToMedia+vn_url),ot(this.svgGroup_,"pointerdown",this,this.blockMouseDownWhenOpenable_),ot(this.svgGroup_,"pointerup",this,this.click),ot(i,"pointerover",this,this.mouseOver_),ot(i,"pointerout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(Xe(this.flyout.createDom(B.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Pn.Capability.AUTOHIDEABLE,Pn.Capability.DELETE_AREA,Pn.Capability.DRAG_TARGET,Pn.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(ie(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents_.map(function(i){return JSON.parse(i)}),n=this.workspace.getParentSvg().style;n.cursor="wait",setTimeout(()=>{let i;null==(i=this.flyout)||i.show(e),n.cursor=""},10),this.fireUiEvent_(!0)}}closeFlyout(){var e;this.contentsIsOpen()&&(null==(e=this.flyout)||e.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position(e,n){if(this.initialized_){var a,i=ys(this.workspace,e);e=jg(i,new Nn(Ei,Np+ga),qb,y$,e,this.workspace),n=Vl(e,y$,i.vertical===xs.TOP?al.DOWN:al.UP,n),this.top_=n.top,this.left_=n.left,null==(a=this.svgGroup_)||a.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new on(this.top_,this.top_+Np+ga,this.left_,this.left_+Ei)}getClientRect(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect();const n=e.top+Ff-Lp;return new on(n,n+ga+Np+2*Lp,e=e.left+Bf-Lp,e+Ei+2*Lp)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=e,this.animateLid_())}animateLid_(){const e=I$;var n=1/(e+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*Qb),n=Gf+this.lidOpen_*(Uf-Gf),this.svgGroup_&&(this.svgGroup_.style.opacity=n.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),Zb/e))}setLidAngle_(e){const n=this.workspace.toolboxPosition===Pe.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let i;null==(i=this.svgLid_)||i.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:Ei-4)+","+(ga-2)+")")}setMinOpenness_(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*Qb)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_(e){e=new(Te(Zi))(e,this.workspace.id),me(e)}blockMouseDownWhenOpenable_(e){!this.contentsIsOpen()&&this.hasContents_()&&e.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_(e){if(!(0>=this.workspace.options.maxTrashcanContents||e.type!==ir||e.type!==ir||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson_(e.oldJson)),-1===this.contents_.indexOf(e)){for(this.contents_.unshift(e);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(v$)}}}cleanBlockJson_(e){return function n(i){if(i){if(delete i.id,delete i.x,delete i.y,delete i.enabled,i.icons&&i.icons.comment){var a=i.icons.comment;delete a.height,delete a.width,delete a.pinned}for(var d in a=i.inputs){var _=a[d];const R=_.block;_=_.shadow,R&&n(R),_&&n(_)}i.next&&(i=(d=i.next).block,d=d.shadow,i&&n(i),d&&n(d))}}(e=JSON.parse(JSON.stringify(e))),Object.assign({},{kind:"BLOCK"},e)}},Ei=47,Np=44,ga=16,y$=20,qb=20,Lp=10,Bf=0,Ff=32,v$=.1,Zb=80,I$=4,Gf=.4,Uf=.8,Qb=45,xp=class extends Yo{constructor(e,n,i){super(i),this.type=oa,this.oldItem=e??void 0,this.newItem=n??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}fromJson(e){Z("Blockly.Events.ToolboxItemSelect.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldItem=e.oldItem,this.newItem=e.newItem}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new xp)).oldItem=e.oldItem,n.newItem=e.newItem,n}};Le(ee.EVENT,oa,xp);var Re=class{constructor(e,n,i){this.id_=e.toolboxitemid||Kn(),this.level_=(this.parent_=i||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},gr=class extends Re{constructor(e,n,i){super(e,n,i),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),"true"===this.toolboxItemDef_.hidden&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(i)}}parseCategoryDef_(e){this.name_="name"in e?Lt(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Xr(this.htmlDiv_,mo.TREEITEM),xt(this.htmlDiv_,kt.SELECTED,!1),xt(this.htmlDiv_,kt.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Xr(this.iconDom_,mo.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&xt(this.htmlDiv_,kt.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),n=this.cssConfig_.container;return n&&Q(e,n),e}createRowContainer_(){const e=document.createElement("div");var n=this.cssConfig_.row;return n&&Q(e,n),n=gr.nestedPadding*this.getLevel()+"px",this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e}createRowContentsContainer_(){const e=document.createElement("div"),n=this.cssConfig_.rowcontentcontainer;return n&&Q(e,n),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&Q(e,n)}return e.style.display="inline-block",e}createLabelDom_(e){const n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,(e=this.cssConfig_.label)&&Q(n,e),n}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=gr.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const n=e.categorystyle||e.categoryStyle;if((e=e.colour)&&n)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(n)return this.getColourfromStyle_(n);if(e)return this.parseColour_(e)}return""}getColourfromStyle_(e){var n=this.workspace_.getTheme();if(e&&n){if((n=n.categoryStyles[e])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(e){if(null==(e=Lt(e))||""===e)return"";var n=Number(e);return isNaN(n)?(n=jo(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):_s(n)}openIcon_(e){if(e){var n=this.cssConfig_.closedicon;n&&Ge(e,n),(n=this.cssConfig_.openicon)&&Q(e,n)}}closeIcon_(e){if(e){var n=this.cssConfig_.openicon;n&&Ge(e,n),(n=this.cssConfig_.closedicon)&&Q(e,n)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var n=this.cssConfig_.selected;if(e){const i=this.parseColour_(gr.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||i,n&&Q(this.rowDiv_,n)}else this.rowDiv_.style.backgroundColor="",n&&ce(this.rowDiv_,n);xt(this.htmlDiv_,kt.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_="string"==typeof e?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Vu(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){ie(this.htmlDiv_)}};gr.registrationName="category",gr.nestedPadding=19,gr.borderWidth=8,gr.defaultBackgroundColour="#57e",Ut('\n.blocklyTreeRow:not(.blocklyTreeSelected):hover {\n  background-color: rgba(255, 255, 255, .2);\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {\n  margin: 1px 5px 1px 0;\n}\n\n.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {\n  margin: 1px 0 1px 5px;\n}\n\n.blocklyTreeRow {\n  height: 22px;\n  line-height: 22px;\n  margin-bottom: 3px;\n  padding-right: 8px;\n  white-space: nowrap;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {\n  margin-left: 8px;\n  padding-right: 0;\n}\n\n.blocklyTreeIcon {\n  background-image: url(<<<PATH>>>/sprites.png);\n  height: 16px;\n  vertical-align: middle;\n  visibility: hidden;\n  width: 16px;\n}\n\n.blocklyTreeIconClosed {\n  background-position: -32px -1px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {\n  background-position: 0 -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: -32px -17px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: 0 -17px;\n}\n\n.blocklyTreeIconOpen {\n  background-position: -16px -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconOpen {\n  background-position: -16px -17px;\n}\n\n.blocklyTreeLabel {\n  cursor: default;\n  font: 16px sans-serif;\n  padding: 0 3px;\n  vertical-align: middle;\n}\n\n.blocklyToolboxDelete .blocklyTreeLabel {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyTreeSelected .blocklyTreeLabel {\n  color: #fff;\n}\n'),Le(ee.TOOLBOX_ITEM,gr.registrationName,gr);var $o=class extends Re{constructor(e,n){super(e,n),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),n=this.cssConfig_.container;return n&&Q(e,n),this.htmlDiv_=e}getDiv(){return this.htmlDiv_}dispose(){ie(this.htmlDiv_)}};$o.registrationName="sep",Ut('\n.blocklyTreeSeparator {\n  border-bottom: solid #e5e5e5 1px;\n  height: 0;\n  margin: 5px 0;\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {\n  border-right: solid #e5e5e5 1px;\n  border-bottom: none;\n  height: auto;\n  margin: 0 5px 0 5px;\n  padding: 5px 0;\n  width: 0;\n}\n'),Le(ee.TOOLBOX_ITEM,$o.registrationName,$o);var fa=class extends gr{constructor(e,n,i){super(e,n,i),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){const n=e.contents;let i=!0;if(e.custom)this.flyoutItems_=e.custom;else if(n)for(e=0;e<n.length;e++){const a=n[e];!Ja(ee.TOOLBOX_ITEM,a.kind)||a.kind.toLowerCase()===$o.registrationName&&i?(this.flyoutItems_.push(a),i=!0):(this.createToolboxItem_(a),i=!1)}}createToolboxItem_(e){let n=e.kind;"CATEGORY"===n.toUpperCase()&&Nh(e)&&(n=fa.registrationName),e=new(Un(ee.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded("true"===this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Xr(this.subcategoriesDiv_,mo.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&Q(e,n),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const n=document.createElement("div");var i=this.cssConfig_.contents;for(i&&Q(n,i),i=0;i<e.length;i++){const a=e[i];a.init();const d=a.getDiv();if(n.appendChild(d),a.getClickTarget){let _;null==(_=a.getClickTarget())||_.setAttribute("id",a.getId())}}return n}setExpanded(e){this.expanded_!==e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),xt(this.htmlDiv_,kt.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const n=this.getChildToolboxItems();for(let i=0;i<n.length;i++)n[i].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};fa.registrationName="collapsibleCategory",Le(ee.TOOLBOX_ITEM,fa.registrationName,fa);var es=class extends kp{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const n=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Xe(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Pn.Capability.AUTOHIDEABLE,Pn.Capability.DELETE_AREA,Pn.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Xr(this.contentsDiv_,mo.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),Q(e,"blocklyToolboxDiv"),Q(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return Q(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,n){e=ue(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),n=ue(n,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(n)}onClick_(e){if(Ve(e)||e.target===this.HtmlDiv)sn().hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(e)),sn().hideChaff(!0)}wt()}onKeyDown_(e){let n=!1;switch(e.keyCode){case $e.DOWN:n=this.selectNext_();break;case $e.UP:n=this.selectPrevious_();break;case $e.LEFT:n=this.selectParent_();break;case $e.RIGHT:n=this.selectChild_();break;case $e.ENTER:case $e.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}if(!n&&this.selectedItem_){const i=this.selectedItem_;i.onKeyDown&&(n=i.onKeyDown(e))}n&&e.preventDefault()}createFlyout_(){const e=this.workspace_,n=new hr({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=e.options.toolboxPosition,new(Xt(e.horizontalLayout?ee.FLYOUTS_HORIZONTAL_TOOLBOX:ee.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)}render(e){this.toolboxDef_=e;for(let n=0;n<this.contents_.length;n++){const i=this.contents_[n];i&&i.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const n=document.createDocumentFragment();for(let i=0;i<e.length;i++)this.createToolboxItem_(e[i],n);this.contentsDiv_.appendChild(n)}createToolboxItem_(e,n){var i=e.kind;"CATEGORY"===i.toUpperCase()&&Nh(e)&&(i=fa.registrationName),(i=Un(ee.TOOLBOX_ITEM,i.toLowerCase()))&&((e=new i(e,this)).init(),this.addToolboxItem_(e),(i=e.getDiv())&&n.appendChild(i),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let n=0;n<e.length;n++)this.addToolboxItem_(e[n])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&Q(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&ce(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const n=e.top,i=n+e.height,a=e.left;return e=a+e.width,this.toolboxPosition===Pe.TOP?new on(-1e7,i,-1e7,1e7):this.toolboxPosition===Pe.BOTTOM?new on(n,1e7,-1e7,1e7):this.toolboxPosition===Pe.LEFT?new on(-1e7,1e7,-1e7,e):new on(-1e7,1e7,a,1e7)}wouldDelete(e,n){return this.updateWouldDelete_(e instanceof ko?!e.getParent()&&e.isDeletable():e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(n):this.removeStyle(n)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===Pe.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition===Pe.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===Pe.LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition===Pe.TOP?e.scrollY+n.height:e.scrollY),pe(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const n=this.contents_[e];n.refreshTheme&&n.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(e){const n=this.selectedItem_;!e&&!n||e&&!e.isSelectable()||(this.shouldDeselectItem_(n,e)&&null!==n&&this.deselectItem_(n),this.shouldSelectItem_(n,e)&&null!==e&&this.selectItem_(n,e),this.updateFlyout_(n,e),this.fireSelectEvent_(n,e))}shouldDeselectItem_(e,n){return null!==e&&(!e.isCollapsible()||e!==n)}shouldSelectItem_(e,n){return null!==n&&n!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),xt(this.contentsDiv_,kt.ACTIVEDESCENDANT,"")}selectItem_(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),xt(this.contentsDiv_,kt.ACTIVEDESCENDANT,n.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e]).isSelectable()&&this.setSelectedItem(e)}updateFlyout_(e,n){n&&(e!==n||n.isCollapsible())&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(e,n){const i=e&&e.getName();let a=n&&n.getName();e===n&&(a=null),e=new(Te(oa))(i,a,this.workspace_.id),me(e)}selectParent_(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let n=this.contents_[e];for(;n&&!n.isSelectable();)n=this.contents_[++e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let n=this.contents_[e];for(;n&&!n.isSelectable();)n=this.contents_[--e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)ve(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),ie(this.HtmlDiv)}};Ut('\n.blocklyToolboxDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyToolboxGrab {\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Category tree in Toolbox. */\n.blocklyToolboxDiv {\n  background-color: #ddd;\n  overflow-x: visible;\n  overflow-y: auto;\n  padding: 4px 0 4px 0;\n  position: absolute;\n  z-index: 70;  /* so blocks go under toolbox when dragging */\n  -webkit-tap-highlight-color: transparent;  /* issue #1345 */\n}\n\n.blocklyToolboxContents {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n}\n\n.blocklyToolboxContents:focus {\n  outline: none;\n}\n'),Le(ee.TOOLBOX,Ds,es);var ey=new nl("zelos",{colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},{colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}}),S$={};S$.Classic=aa,S$.Zelos=ey;var ma,_a=class extends Yo{constructor(e,n,i){null===(n=e?e.workspace.id:n)&&(n=void 0),super(n),this.type=gi,this.blockId=e?e.id:void 0,this.targetType=i}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}fromJson(e){Z("Blockly.Events.Click.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.targetType=e.targetType,this.blockId=e.blockId}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new _a)).targetType=e.targetType,n.blockId=e.blockId,n}};(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(ma||(ma={})),Le(ee.EVENT,gi,_a);var Bp={};Bp.Click=_a,Bp.ClickTarget=ma;var Ld=class{constructor(e,n){this.bubble=e,this.workspace=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=n.getBlockDragSurface()}startBubbleDrag(){yt()||de(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(e,n){n=this.pixelsToWorkspaceUnits_(n),n=re.sum(this.startXY_,n),this.bubble.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(e){return!(!e||!this.workspace.getComponentManager().hasCapability(e.id,Pn.Capability.DELETE_AREA))&&e.wouldDelete(this.bubble,!1)}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(e,n){this.dragBubble(e,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(n),e=re.sum(this.startXY_,e)),this.bubble.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),de(!1)}fireMoveEvent_(){if(this.bubble instanceof jn){const e=new(Te(Sr))(this.bubble);e.setOldCoordinate(this.startXY_),e.recordNew(),me(e)}}pixelsToWorkspaceUnits_(e){return e=new re(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}},D$=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new re(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){Qe()&&Qe().unselect(),this.workspace.setupDragSurface()}endDrag(e){this.drag(e),this.workspace.resetDragSurface()}drag(e){if(e=re.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(e.x,this.workspace.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace.scroll(this.workspace.scrollX,e.y)}}},ts=class{constructor(e,n){this.creatorWorkspace=n,this.mouseDownXY_=new re(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isMultiTouch_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.currentDropdownOwner=this.isPinchZoomEnabled_=this.onStartWrapper_=null,this.mostRecentEvent_=e,this.currentDragDeltaXY_=new re(0,0),this.healStack_=!1}dispose(){wt(),ho(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&ve(this.onMoveWrapper_),this.onUpWrapper_&&ve(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.onStartWrapper_&&ve(this.onStartWrapper_)}updateFromEvent_(e){const n=new re(e.clientX,e.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),g()),this.mostRecentEvent_=e}updateDragDelta_(e){return this.currentDragDeltaXY_=re.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=re.magnitude(this.currentDragDeltaXY_)>(this.flyout_?h.config$$module$build$src$core$config.flyoutDragRadius:h.config$$module$build$src$core$config.dragRadius))}updateIsDraggingFromFlyout_(){let e;if(!this.targetBlock_||null==(e=this.flyout_)||!e.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error("Cannot update dragging from the flyout because the ' +\n          'flyout's target workspace is undefined");return!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),yt()||de(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))}updateIsDraggingBubble_(){return!!this.startBubble_&&(this.startDraggingBubble_(),!0)}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new D$(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(Xt(ee.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new Ld(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,St(e)?this.cancel():(this.hasStarted_=!0,dc(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=Xa(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,Nt(),this.targetBlock_&&this.targetBlock_.select(),Ve(e)?this.handleRightClick(e):("pointerdown"===e.type.toLowerCase()&&"mouse"!==e.pointerType&&S(e,this),this.mouseDownXY_=new re(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.onStartWrapper_=ue(document,"pointerdown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=ue(document,"pointermove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=ue(document,"pointerup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&g())}handleMove(e){this.isDragging()&&so(e)||!this.isMultiTouch()?(this.updateFromEvent_(e),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),g())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!so(e))return;if(this.updateFromEvent_(e),g(),this.isEnding_)return void console.log("Trying to end a gesture recursively.");this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(e,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e)}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var n=zn(e);this.cachedPoints.set(n,this.getTouchPoint(e));var i=Array.from(this.cachedPoints.keys());2===i.length&&(n=this.cachedPoints.get(i[0]),i=this.cachedPoints.get(i[1]),this.startDistance_=re.distance(n,i),this.isMultiTouch_=!0,e.preventDefault())}handleTouchMove(e){const n=zn(e);this.cachedPoints.set(n,this.getTouchPoint(e)),this.isPinchZoomEnabled_&&2===this.cachedPoints.size?this.handlePinch_(e):this.handleMove(e)}handlePinch_(e){var n=Array.from(this.cachedPoints.keys()),i=this.cachedPoints.get(n[0]);if(n=this.cachedPoints.get(n[1]),i=re.distance(i,n)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(n=0<(n=i-this.previousScale_)?5*n:6*n,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const a=this.startWorkspace_,d=Qt(e,a.getParentSvg(),a.getInverseScreenCTM());a.zoom(d.x,d.y,n)}this.previousScale_=i,e.preventDefault()}handleTouchEnd(e){e=zn(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint(e){return this.startWorkspace_?new re(e.pageX,e.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(g(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick(e){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=e,this.doStart(e)}fireWorkspaceClick_(e){me(new(Te(gi))(null,e.id,"workspace"))}handleFlyoutStart(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(e,n.getWorkspace())}handleBlockStart(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=e}handleBubbleStart(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=e}doBubbleClick_(){this.startBubble_ instanceof jn&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField_&&this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(yt()||de(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const e=new(Te(gi))(this.startBlock_,this.startWorkspace_.id,"block");me(e)}this.bringBlockToFront_(),de(!1)}doWorkspaceClick_(e){e=this.creatorWorkspace,Qe()&&Qe().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)}setStartBubble(e){this.startBubble_||(this.startBubble_=e)}setStartBlock(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))}setTargetBlock_(e){e.isShadow()?this.setTargetBlock_(e.getParent()):this.targetBlock_=e}setStartWorkspace_(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout_(e){this.flyout_||(this.flyout_=e)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let e,n;return null!=(n=null!=(e=this.blockDragger_)?e:this.workspaceDragger_)?n:this.bubbleDragger_}static inProgress(){const e=Tr();for(let i,n=0;i=e[n];n++)if(i.currentGesture_)return!0;return!1}},Et=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,n){if(this.shortcuts.get(e.name)&&!n)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),(n=e.keyCodes)&&0<n.length)for(let i=0;i<n.length;i++)this.addKeyMapping(n[i],e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,n,i){e=String(e);const a=this.keyMap.get(e);if(a&&!i)throw Error(`Shortcut named "${n}" collides with shortcuts "${a}"`);a&&i?a.unshift(n):this.keyMap.set(e,[n])}removeKeyMapping(e,n,i){const a=this.keyMap.get(e);if(!a)return i||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1;const d=a.indexOf(n);return-1<d?(a.splice(d,1),0===a.length&&this.keyMap.delete(e),!0):(i||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const n of this.keyMap.keys())this.removeKeyMapping(n,e,!0)}setKeyMap(e){this.keyMap.clear();for(const n in e)this.keyMap.set(n,e[n])}getKeyMap(){const e=Object.create(null);for(const[n,i]of this.keyMap)e[n]=i;return e}getRegistry(){const e=Object.create(null);for(const[n,i]of this.shortcuts)e[n]=i;return ei(Object.create(null),e)}onKeyDown(e,n){var i=this.serializeKeyEvent_(n);if(!(i=this.getShortcutNamesByKeyCode(i)))return!1;for(let d,a=0;d=i[a];a++){const _=this.shortcuts.get(d);let R,L;if(null==(R=_)||!R.preconditionFn||null!=(L=_)&&L.preconditionFn(e)){let z,se;if(null!=(z=_)&&z.callback&&null!=(se=_)&&se.callback(e,n,_))return!0}}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const n=[];for(const[i,a]of this.keyMap)-1<a.indexOf(e)&&n.push(i);return n}serializeKeyEvent_(e){let n="";for(const i in Et.modifierKeys)e.getModifierState(i)&&(""!==n&&(n+="+"),n+=i);return""!==n&&e.keyCode?n=n+"+"+e.keyCode:e.keyCode&&(n=e.keyCode.toString()),n}checkModifiers_(e){for(let i,n=0;i=e[n];n++)if(!(i in Et.modifierKeys))throw Error(i+" is not a valid modifier key.")}createSerializedKey(e,n){let i="";if(n){this.checkModifiers_(n);for(const a in Et.modifierKeys)-1<n.indexOf(Et.modifierKeys[a])&&(""!==i&&(i+="+"),i+=a)}return""!==i&&e?i=i+"+"+e:e&&(i=e.toString()),i}};Et.registry=new Et,function(e){(e=e.modifierKeys||(e.modifierKeys={}))[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(Et||(Et={}));var Ps=(()=>(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"}(Ps||(Ps={})),Ps))();eb();var ns={};ns.names=Ps,ns.registerCopy=pc,ns.registerCut=jh,ns.registerDefaultShortcuts=eb,ns.registerDelete=Rm,ns.registerEscape=Cm,ns.registerPaste=wm,ns.registerRedo=QT,ns.registerUndo=Sm;var xd=class extends Yo{constructor(e,n){super(n),this.type=rd,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}fromJson(e){Z("Blockly.Events.ThemeChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.themeName=e.themeName}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new xd)).themeName=e.themeName,n}};Le(ee.EVENT,rd,xd);var Zc=class extends Yo{constructor(e,n,i,a,d){super(a),this.type=ar,this.viewTop=e,this.viewLeft=n,this.scale=i,this.oldScale=d}toJson(){const e=super.toJson();if(void 0===this.viewTop)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.viewLeft)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.scale)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.oldScale)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}fromJson(e){Z("Blockly.Events.Viewport.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new Zc)).viewTop=e.viewTop,n.viewLeft=e.viewLeft,n.scale=e.scale,n.oldScale=e.oldScale,n}};Le(ee.EVENT,ar,Zc);var Qc=class{constructor(e){this.connectionChecker=e,this.connections_=[]}addConnection(e,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,e)}findIndexOfConnection_(e,n){if(!this.connections_.length)return-1;const i=this.calculateIndexForYPos_(n);if(i>=this.connections_.length)return-1;n=e.y;let a=i;for(;0<=a&&this.connections_[a].y===n;){if(this.connections_[a]===e)return a;a--}for(a=i;a<this.connections_.length&&this.connections_[a].y===n;){if(this.connections_[a]===e)return a;a++}return-1}calculateIndexForYPos_(e){if(!this.connections_.length)return 0;let n=0,i=this.connections_.length;for(;n<i;){const a=Math.floor((n+i)/2);if(this.connections_[a].y<e)n=a+1;else{if(!(this.connections_[a].y>e)){n=a;break}i=a}}return n}removeConnection(e,n){if(-1===(e=this.findIndexOfConnection_(e,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(e,1)}getNeighbours(e,n){function i(se){const nt=d-a[se].x,jt=_-a[se].y;return Math.sqrt(nt*nt+jt*jt)<=n&&z.push(a[se]),jt<n}const a=this.connections_,d=e.x,_=e.y;e=0;let R=a.length-2,L=R;for(;e<L;)a[L].y<_?e=L:R=L,L=Math.floor((e+R)/2);const z=[];if(R=e=L,a.length){for(;0<=e&&i(e);)e--;do{R++}while(R<a.length&&i(R))}return z}isInYRange_(e,n,i){return Math.abs(this.connections_[e].y-n)<=i}searchForClosest(e,n,i){if(!this.connections_.length)return{connection:null,radius:n};const a=e.y,d=e.x;e.x=d+i.x,e.y=a+i.y;var _=this.calculateIndexForYPos_(e.y);i=null;let L,R=n,z=_-1;for(;0<=z&&this.isInYRange_(z,e.y,n);)L=this.connections_[z],this.connectionChecker.canConnect(e,L,!0,R)&&(i=L,R=L.distanceFrom(e)),z--;for(;_<this.connections_.length&&this.isInYRange_(_,e.y,n);)L=this.connections_[_],this.connectionChecker.canConnect(e,L,!0,R)&&(i=L,R=L.distanceFrom(e)),_++;return e.x=d,e.y=a,{connection:i,radius:R}}static init(e){const n=[];return n[he.INPUT_VALUE]=new Qc(e),n[he.OUTPUT_VALUE]=new Qc(e),n[he.NEXT_STATEMENT]=new Qc(e),n[he.PREVIOUS_STATEMENT]=new Qc(e),n}},Yf=class{constructor(e,n){let i,a,d;this.pattern=e,this.spacing=null!=(i=n.spacing)?i:0,this.length=null!=(a=n.length)?a:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling,this.snapToGrid=null!=(d=n.snap)&&d}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(e){var n=this.spacing*e||100;this.pattern.setAttribute("width",n.toString()),this.pattern.setAttribute("height",n.toString());let i=(n=Math.floor(this.spacing/2)+.5)-this.length/2,a=n+this.length/2;i*=e,a*=e,this.setLineAttributes(this.line1,e,i,a,n*=e,n),this.setLineAttributes(this.line2,e,n,n,i,a)}setLineAttributes(e,n,i,a,d,_){e&&(e.setAttribute("stroke-width",n.toString()),e.setAttribute("x1",i.toString()),e.setAttribute("y1",d.toString()),e.setAttribute("x2",a.toString()),e.setAttribute("y2",_.toString()))}moveTo(e,n){this.pattern.setAttribute("x",e.toString()),this.pattern.setAttribute("y",n.toString())}static createDom(e,n,i){let a,d;if(e=k(B.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},i),0<(null!=(a=n.length)?a:1)&&0<(null!=(d=n.spacing)?d:0)){let _;k(B.LINE,{stroke:n.colour},e),null!=(_=n.length)&&_&&k(B.LINE,{stroke:n.colour},e)}else k(B.LINE,{},e);return e}},os=class{constructor(e,n){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=n||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap(e){this.variableMap_=e}getNameForUserVariable_(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.warn("Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)}populateVariables(e){e=j(e);for(let n=0;n<e.length;n++)this.getName(e[n].getId(),h.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,n){let i=e;n===h.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable_(e))&&(i=e),e=i.toLowerCase();const a=n===h.NameType$$module$build$src$core$names.VARIABLE||n===h.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(n)||this.db.set(n,new Map);const d=this.db.get(n);return d.has(e)?a+d.get(e):(n=this.getDistinctName(i,n),d.set(e,n.substr(a.length)),n)}getUserNames(e){let n;return(e=null==(n=this.db.get(e))?void 0:n.keys())?Array.from(e):[]}getDistinctName(e,n){e=this.safeName_(e);let i="";for(;this.dbReverse.has(e+i)||this.reservedWords.has(e+i);)i=i?i+1:2;return this.dbReverse.add(e+=i),(n===h.NameType$$module$build$src$core$names.VARIABLE||n===h.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+e}safeName_(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!=="0123456789".indexOf(e[0])&&(e="my_"+e)):e=De.UNNAMED_KEY||"unnamed",e}static equals(e,n){return e.toLowerCase()===n.toLowerCase()}};(function(e){(e=e.NameType||(e.NameType={})).DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"})(os||(os={})),h.NameType$$module$build$src$core$names=os.NameType,os.DEVELOPER_VARIABLE_TYPE=h.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,h.module$build$src$core$names={},h.module$build$src$core$names.NameType=h.NameType$$module$build$src$core$names,h.module$build$src$core$names.Names=os;var eu,Pd,A$=class extends Map{constructor(e){super(),this.workspace=e}set(e,n){return this.get(e)===n||(super.set(e,n),me(new(Te(ip))(this.workspace,n)),vs(n)&&n.startPublishing()),this}delete(e){const n=this.get(e);return(e=super.delete(e))&&(Is(this.workspace),me(new(Te(sd))(this.workspace,n)),vs(n)&&n.stopPublishing(),e)}clear(){if(this.size){for(const e of this.keys()){const n=this.get(e);super.delete(e),me(new(Te(sd))(this.workspace,n))}Is(this.workspace)}}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},ul=class{constructor(e,n,i){this.workspace=e,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.shouldFireEvents=!1,this.id=i??lo(),this.name=n}setName(e){if(e===this.name)return this;const n=this.name;return this.name=e,Is(this.workspace),this.shouldFireEvents&&me(new(Te(lp))(this.workspace,this,n)),this}insertParameter(e,n){return this.parameters[n]&&this.parameters[n].getId()===e.getId()||(this.parameters.splice(n,0,e),e.setProcedureModel(this),vs(e)&&(this.shouldFireEvents?e.startPublishing():e.stopPublishing()),Is(this.workspace),this.shouldFireEvents&&me(new(Te(id))(this.workspace,this,e,n))),this}deleteParameter(e){if(!this.parameters[e])return this;const n=this.parameters[e];return this.parameters.splice(e,1),Is(this.workspace),vs(n)&&n.stopPublishing(),this.shouldFireEvents&&me(new(Te(Lc))(this.workspace,this,n,e)),this}setReturnTypes(e){if(e&&e.length)throw Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");if(!!e==!!this.returnTypes)return this;const n=this.returnTypes;return this.returnTypes=e,Is(this.workspace),this.shouldFireEvents&&me(new(Te(cp))(this.workspace,this,n)),this}setEnabled(e){return e===this.enabled||(this.enabled=e,Is(this.workspace),this.shouldFireEvents&&me(new(Te(ap))(this.workspace,this))),this}getId(){return this.id}getName(){return this.name}getParameter(e){return this.parameters[e]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}startPublishing(){this.shouldFireEvents=!0;for(const e of this.parameters)vs(e)&&e.startPublishing()}stopPublishing(){this.shouldFireEvents=!1;for(const e of this.parameters)vs(e)&&e.stopPublishing()}},dl=class{constructor(e,n,i){let a;this.workspace=e,this.shouldFireEvents=!1,this.procedureModel=null,this.id=i??lo(),this.variable=null!=(a=this.workspace.getVariable(n))?a:e.createVariable(n)}setName(e){if(e===this.variable.name)return this;const n=this.variable.name;let i;return this.variable=null!=(i=this.workspace.getVariable(e))?i:this.workspace.createVariable(e),Is(this.workspace),this.shouldFireEvents&&me(new(Te(ld))(this.workspace,this.procedureModel,this,n)),this}setTypes(e){throw Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}startPublishing(){this.shouldFireEvents=!0}stopPublishing(){this.shouldFireEvents=!1}setProcedureModel(e){return this.procedureModel=e,this}};eu="PROCEDURE",Pd="x",h.module$build$src$core$procedures={},h.module$build$src$core$procedures.CATEGORY_NAME=eu,h.module$build$src$core$procedures.DEFAULT_ARG=Pd,h.module$build$src$core$procedures.ObservableParameterModel=dl,h.module$build$src$core$procedures.ObservableProcedureMap=A$,h.module$build$src$core$procedures.ObservableProcedureModel=ul,h.module$build$src$core$procedures.allProcedures=gc,h.module$build$src$core$procedures.findLegalName=zg,h.module$build$src$core$procedures.flyoutCategory=Ku,h.module$build$src$core$procedures.getCallers=Yg,h.module$build$src$core$procedures.getDefinition=function(e,n){n=n.getAllBlocks(!1);for(let a=0;a<n.length;a++){var i=n[a];if(i.getProcedureDef&&(i=i.getProcedureDef())&&os.equals(i[0],e))return n[a]}return null},h.module$build$src$core$procedures.isNameUsed=Dm,h.module$build$src$core$procedures.mutateCallers=function(e){const n=un();var i=e.getProcedureDef()[0];const a=e.mutationToDom(!0);e=Yg(i,e.workspace);for(let R,_=0;R=e[_];_++){i=(i=R.mutationToDom())&&co(i),R.domToMutation&&R.domToMutation(a);var d=R.mutationToDom();i!==(d=d&&co(d))&&(Ct(!1),me(new(Te(gn))(R,"mutation",null,i,d)),Ct(n))}},h.module$build$src$core$procedures.mutatorOpenListener=tb,h.module$build$src$core$procedures.rename=function(e){var n=this.getSourceBlock();if(!n)throw new _n;e=e.trim();const i=zg(e,n),a=this.getValue();if(a!==e&&a!==i)for(e=n.workspace.getAllBlocks(!1),n=0;n<e.length;n++){const d=e[n];d.renameProcedure&&d.renameProcedure(a,i)}return i};var P=new class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},rs=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=P.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},$a=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=P.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const n=this.elements[e];if(P.isInput(n))return n}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const n=this.elements[e];if(P.isSpacer(n))return n}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const n=this.elements[e];if(P.isSpacer(n))return n}return null}},Fp=class extends $a{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=P.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,i=0;for(let a=0;a<this.elements.length;a++){const d=this.elements[a];n+=d.width,P.isSpacer(d)||(P.isNextConnection(d)?i=Math.max(i,d.height):e=Math.max(e,d.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+i,this.descenderHeight=i,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},fr=class extends rs{constructor(e,n){super(e),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=P.CONNECTION}},Mo=class extends fr{constructor(e,n){super(e,n.connection),this.input=n,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=P.INPUT,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},hl=class extends Mo{constructor(e,n){super(e,n),this.height=0,this.type|=P.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Ti=class extends rs{constructor(e,n,i){super(e),this.field=n,this.parentInput=i,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=P.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},tu=class extends rs{constructor(e){super(e),this.type|=P.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Bd=class extends rs{constructor(e,n){super(e),this.icon=n,this.flipRtl=!1,this.isVisible=n.isVisible(),this.type|=P.ICON,e=n.getCorrectedSize(),this.height=e.height,this.width=e.width}},_r=class extends rs{constructor(e,n){super(e),this.type=this.type|P.SPACER|P.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Fd=class extends Mo{constructor(e,n){super(e,n),this.type|=P.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Ea=class extends Mo{constructor(e,n){super(e,n),this.type|=P.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Up=class extends $a{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=P.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let n=0;n<this.elements.length;n++){const i=this.elements[n];this.width+=i.width,P.isInput(i)&&i instanceof Mo&&(P.isStatementInput(i)&&i instanceof Ea?e+=i.connectedBlockWidth:P.isExternalInput(i)&&i instanceof hl&&0!==i.connectedBlockWidth&&(e+=i.connectedBlockWidth-i.connectionWidth)),P.isSpacer(i)||(this.height=Math.max(this.height,i.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Hp=class extends rs{constructor(e){super(e),this.type|=P.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},x$=class extends fr{constructor(e,n){super(e,n),this.type|=P.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Gd=class extends fr{constructor(e,n){super(e,n),this.connectionOffsetX=0,this.type|=P.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Qf=class extends fr{constructor(e,n){super(e,n),this.type|=P.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},nu=class extends rs{constructor(e,n){super(e),this.type=(n&&"left"!==n?P.RIGHT_ROUND_CORNER:P.LEFT_ROUND_CORNER)|P.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Vp=class extends $a{constructor(e,n,i){super(e),this.height=n,this.width=i,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|P.SPACER|P.BETWEEN_ROW_SPACER,this.elements=[new _r(this.constants_,i)]}measure(){}},ou=class extends rs{constructor(e,n){super(e),this.type=(n&&"left"!==n?P.RIGHT_SQUARE_CORNER:P.LEFT_SQUARE_CORNER)|P.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Ud=class extends $a{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=P.TOP_ROW}hasLeftSquareCorner(e){const n=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,i=e.getPreviousBlock();return!!e.outputConnection||n||!!i&&i.getNextBlock()===e}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,i=0;for(let a=0;a<this.elements.length;a++){const d=this.elements[a];n+=d.width,P.isSpacer(d)||(P.isHat(d)&&d instanceof tu?i=Math.max(i,d.ascenderHeight):e=Math.max(e,d.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+i,this.capline=this.ascenderHeight=i,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},ru=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=rt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const n=e.blockStyles;for(const i in n)this.blockStyles[i]=this.validatedBlockStyle_(n[i]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=void 0!==e.startHats?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=En("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const n="auto_"+e;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(e)),{style:this.blockStyles[n],name:n}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&0===e.indexOf("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const n={};return e&&Object.assign(n,e),e=Gi(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?Gi(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?Gi(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n}generateSecondaryColour_(e){return nr("#fff",e,.6)||e}generateTertiaryColour_(e){return nr("#fff",e,.3)||e}dispose(){this.embossFilter_&&ie(this.embossFilter_),this.disabledPattern_&&ie(this.disabledPattern_),this.debugFilter_&&ie(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:e,width:n,path:Hl([Ie(n,e/4),Ie(2*-n,e/2),Ie(n,e/4)])}}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:Cr("c",[Ie(30,-e),Ie(70,-e),Ie(n,0)])}}makePuzzleTab(){function e(_){const R=-(_=_?-1:1);var L=i/2;const z=L+2.5,se=L+.5,nt=Ie(-n,_*L);return L=Ie(n,_*L),Cr("c",[Ie(0,_*z),Ie(-n,R*se),nt])+Cr("s",[Ie(n,2.5*R),L])}const n=this.TAB_WIDTH,i=this.TAB_HEIGHT,a=e(!0),d=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:i,pathDown:d,pathUp:a}}makeNotch(){function e(R){return Hl([Ie(R*a,i),Ie(3*R,0),Ie(R*a,-i)])}const n=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,a=(n-3)/2,d=e(1),_=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:i,pathLeft:d,pathRight:_}}makeInsideCorners(){const e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:$t("a","0 0,0",e,Ie(-e,e)),pathBottom:$t("a","0 0,0",e,Ie(e,e))}}makeOutsideCorners(){const e=this.CORNER_RADIUS,n=rt(0,e)+$t("a","0 0,1",e,Ie(e,-e)),i=$t("a","0 0,1",e,Ie(e,e)),a=$t("a","0 0,1",e,Ie(-e,-e));return{topLeft:n,topRight:i,bottomRight:$t("a","0 0,1",e,Ie(-e,e)),bottomLeft:a,rightHeight:e}}shapeFor(e){switch(e.type){case he.INPUT_VALUE:case he.OUTPUT_VALUE:return this.PUZZLE_TAB;case he.PREVIOUS_STATEMENT:case he.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,n,i){this.injectCSS_(n,i),this.defs_=k(B.DEFS,{},e),e=k(B.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),k(B.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),n=k(B.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),k(B.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},n),k(B.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),k(B.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter_=e,e=k(B.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),k(B.RECT,{width:10,height:10,fill:"#aaa"},e),k(B.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern_=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const e=k(B.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),n=k(B.FECOMPONENTTRANSFER,{result:"outBlur"},e);k(B.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),k(B.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),k(B.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e}}injectCSS_(e,n){n=this.getCSS_(n),e="blockly-renderer-style-"+e,this.cssNode_=document.getElementById(e);const i=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=i:((n=document.createElement("style")).id=e,e=document.createTextNode(i),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},ss={};ss.ConstantProvider=ru,ss.isDynamicShape=Kg;var Hd=!1,e_={};e_.isDebuggerEnabled=ai,e_.startDebugger=function(){Z("Blockly.blockRendering.debug.startDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Hd=!0},e_.stopDebugger=Wh;var Ko=class{constructor(e){this.constants=e,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let e=0;e<this.debugElements_.length;e++)ie(this.debugElements_[e]);this.debugElements_=[]}drawSpacerRow(e,n,i){if(Ko.config.rowSpacers){var a=Math.abs(e.height),d=0>e.height;d&&(n-=a),this.debugElements_.push(k(B.RECT,{class:"rowSpacerRect blockRenderDebug",x:i?-(e.xPos+e.width):e.xPos,y:n,width:e.width,height:a,stroke:d?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem(e,n,i){if(Ko.config.elemSpacers){n=Math.abs(e.width);var a=0>e.width,d=a?e.xPos-n:e.xPos;i&&(d=-(d+n)),this.debugElements_.push(k(B.RECT,{class:"elemSpacerRect blockRenderDebug",x:d,y:e.centerline-e.height/2,width:n,height:e.height,stroke:"pink",fill:a?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem(e,n){if(Ko.config.elems){let i=e.xPos;n&&(i=-(i+e.width)),this.debugElements_.push(k(B.RECT,{class:"rowRenderingRect blockRenderDebug",x:i,y:n=e.centerline-e.height/2,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),P.isField(e)&&e instanceof Ti&&e.field instanceof h.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(k(B.RECT,{class:"rowRenderingRect blockRenderDebug",x:i,y:n+this.constants.FIELD_TEXT_BASELINE,width:e.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}P.isInput(e)&&e instanceof Mo&&Ko.config.connections&&this.drawConnection(e.connectionModel)}drawConnection(e){if(Ko.config.connections){var n="",i=0,a="";e.type===he.INPUT_VALUE?(i=4,n="magenta",a="none"):e.type===he.OUTPUT_VALUE?(i=2,a=n="magenta"):e.type===he.NEXT_STATEMENT?(i=4,n="goldenrod",a="none"):e.type===he.PREVIOUS_STATEMENT&&(i=2,a=n="goldenrod"),this.debugElements_.push(k(B.CIRCLE,{class:"blockRenderDebug",cx:e.getOffsetInBlock().x,cy:e.getOffsetInBlock().y,r:i,fill:a,stroke:n},this.svgRoot_))}}drawRenderedRow(e,n,i){Ko.config.rows&&(this.debugElements_.push(k(B.RECT,{class:"elemRenderingRect blockRenderDebug",x:i?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),P.isTopOrBottomRow(e)||Ko.config.connectedBlockBounds&&this.debugElements_.push(k(B.RECT,{class:"connectedBlockWidth blockRenderDebug",x:i?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements(e,n,i){for(let a=0;a<e.elements.length;a++){const d=e.elements[a];d?P.isSpacer(d)?this.drawSpacerElem(d,e.height,i):this.drawRenderedElem(d,i):console.warn("A row has an undefined or null element.",e,d)}this.drawRenderedRow(e,n,i)}drawBoundingBox(e){if(Ko.config.blockBounds){var n=e.RTL?-e.width:0;this.debugElements_.push(k(B.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),Ko.config.connectedBlockBounds&&this.debugElements_.push(k(B.RECT,{class:"blockRenderDebug",x:n=e.RTL?-e.widthWithChildren:0,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}}drawDebug(e,n){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let i=0;for(let a=0;a<n.rows.length;a++){const d=n.rows[a];P.isBetweenRowSpacer(d)?this.drawSpacerRow(d,i,n.RTL):this.drawRowWithElements(d,i,n.RTL),i+=d.height}e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(e.pathObject.svgPath)}drawRender(e){Ko.config.render&&(e.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout(function(){e.setAttribute("filter","")},100))}};Ko.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var Ta=class{constructor(e,n){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=n,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=n.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),ai()){let e;null==(e=this.block_.renderingDebugger)||e.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let n,e=0;n=this.info_.hiddenIcons[e];e++){let i;null==(i=n.icon.iconGroup_)||i.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const n=this.info_.rows[e];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=rt(e.xPos,this.info_.startY);for(let a,i=0;a=n[i];i++)P.isLeftRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:P.isRightRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:P.isPreviousConnection(a)&&a instanceof fr?this.outlinePath_+=a.shape.pathLeft:P.isHat(a)?this.outlinePath_+=this.constants_.START_HAT.path:P.isSpacer(a)&&(this.outlinePath_+=ae("h",a.width));this.outlinePath_+=ae("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+ae("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const n=e.getLastInput();this.positionExternalValueConnection_(e);const i=Kg(n.shape)?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=ae("H",n.xPos+n.width)+i+ae("v",e.height-n.connectionHeight)}drawStatementInput_(e){var n=e.getLastInput();if(n){var i=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+ae("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var a=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=ae("H",i)+n+ae("v",a)+this.constants_.INSIDE_CORNERS.pathBottom+ae("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=ae("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();let i=0,a="";for(let _,d=n.length-1;_=n[d];d--)P.isNextConnection(_)&&_ instanceof fr?a+=_.shape.pathRight:P.isLeftSquareCorner(_)?a+=ae("H",e.xPos):P.isLeftRoundedCorner(_)?a+=this.constants_.OUTSIDE_CORNERS.bottomLeft:P.isRightRoundedCorner(_)?(a+=this.constants_.OUTSIDE_CORNERS.bottomRight,i=this.constants_.OUTSIDE_CORNERS.rightHeight):P.isSpacer(_)&&(a+=ae("h",-1*_.width));this.outlinePath_+=ae("V",e.baseline-i),this.outlinePath_+=a}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const n=e.connectionOffsetY+e.height;e=Kg(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=ae("V",n)+e}this.outlinePath_+="z"}drawInternals_(){for(let n,e=0;n=this.info_.rows[e];e++)for(let a,i=0;a=n.elements[i];i++)P.isInlineInput(a)?this.drawInlineInput_(a):(P.isIcon(a)||P.isField(a))&&this.layoutField_(a)}layoutField_(e){const n=P.isField(e)?e.field.getSvgRoot():e.icon.iconGroup_,i=e.centerline-e.height/2;let a=e.xPos,d="";this.info_.RTL&&(a=-(a+e.width),e.flipRtl&&(a+=e.width,d="scale(-1 1)")),P.isIcon(e)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+a+","+i+")"),e.icon.computeIconLocation()):n.setAttribute("transform","translate("+a+","+i+")"+d),this.info_.isInsertionMarker&&n.setAttribute("display","none")}drawInlineInput_(e){const n=e.width,i=e.height,a=e.connectionOffsetY,d=e.connectionHeight+a;this.inlinePath_+=kn(e.xPos+e.connectionWidth,e.centerline-i/2)+ae("v",a)+e.shape.pathDown+ae("v",i-d)+ae("h",n-e.connectionWidth)+ae("v",-i)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){if(e.connectionModel){let i=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,e.centerline-e.height/2+e.connectionOffsetY)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(null!=n&&n.connectionModel){let i=e.xPos+e.statementEdge+n.notchOffset;this.info_.RTL&&(i*=-1),n.connectionModel.setOffsetInBlock(i,e.yPos)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let i=e.xPos+e.width;this.info_.RTL&&(i*=-1),n.connectionModel.setOffsetInBlock(i,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const n=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,i=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-i:i,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}},ba=class{constructor(e,n){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=e,this.block_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new Gd(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.topRow=new Ud(this.constants_),this.bottomRow=new Fp(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new Up(this.constants_);this.inputRows.push(e);var n=this.block_.getIcons();for(let a,i=0;a=n[i];i++){const d=new Bd(this.constants_,a);this.isCollapsed&&a.collapseHidden?this.hiddenIcons.push(d):e.elements.push(d)}n=void 0;for(let a,i=0;a=this.block_.inputList[i];i++)if(a.isVisible()){this.shouldStartNewRow_(a,n)&&(this.rows.push(e),e=new Up(this.constants_),this.inputRows.push(e));for(let _,d=0;_=a.fieldRow[d];d++)e.elements.push(new Ti(this.constants_,_,a));this.addInput_(a,e),n=a}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new Hp(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let i=this.topRow.hasLeftSquareCorner(this.block_)?ou:nu;this.topRow.elements.push(new i(this.constants_)),n?(e=new tu(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Qf(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type===Ue.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,i=this.topRow.hasRightSquareCorner(this.block_)?ou:nu,this.topRow.elements.push(new i(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===Ue.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new ou(this.constants_)):this.bottomRow.elements.push(new nu(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new x$(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new ou(this.constants_,"right")):this.bottomRow.elements.push(new nu(this.constants_,"right"))}addInput_(e,n){this.isInline&&e.type===Ue.VALUE?(n.elements.push(new Fd(this.constants_,e)),n.hasInlineInput=!0):e.type===Ue.STATEMENT?(n.elements.push(new Ea(this.constants_,e)),n.hasStatement=!0):e.type===Ue.VALUE?(n.elements.push(new hl(this.constants_,e)),n.hasExternalInput=!0):e.type===Ue.DUMMY&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null===n.align&&(n.align=e.align)}shouldStartNewRow_(e,n){return!(!n||e.type!==Ue.STATEMENT&&n.type!==Ue.STATEMENT&&(e.type!==Ue.VALUE&&e.type!==Ue.DUMMY||this.isInline))}addElemSpacing_(){for(let n,e=0;n=this.rows[e];e++){const i=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new _r(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(let a=0;a<i.length-1;a++){n.elements.push(i[a]);const d=this.getInRowSpacing_(i[a],i[a+1]);n.elements.push(new _r(this.constants_,d))}n.elements.push(i[i.length-1]),n.endsWithElemSpacer()&&n.elements.push(new _r(this.constants_,this.getInRowSpacing_(i[i.length-1],null)))}}}getInRowSpacing_(e,n){if(!e&&n&&P.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&P.isInput(e)&&!n){if(P.isExternalInput(e))return this.constants_.NO_PADDING;if(P.isInlineInput(e))return this.constants_.LARGE_PADDING;if(P.isStatementInput(e))return this.constants_.NO_PADDING}return e&&P.isLeftSquareCorner(e)&&n&&(P.isPreviousConnection(n)||P.isNextConnection(n))?n.notchOffset:e&&P.isLeftRoundedCorner(e)&&n&&(P.isPreviousConnection(n)||P.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,n=0,i=0;for(let _,d=0;_=this.rows[d];d++){if(_.measure(),n=Math.max(n,_.width),_.hasStatement){var a=_.getLastInput();let R,L;a=_.width-(null!=(L=null==(R=a)?void 0:R.width)?L:0),e=Math.max(e,a)}i=Math.max(i,_.widthWithConnectedBlocks)}this.statementEdge=e,this.width=n;for(let _,d=0;_=this.rows[d];d++)_.hasStatement&&(_.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,i),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let i,n=0;i=this.rows[n];n++)if(i.hasStatement)this.alignStatementRow_(i);else{var e=i.width;0<(e=this.getDesiredRowWidth_(i)-e)&&this.addAlignmentPadding_(i,e),P.isTopOrBottomRow(i)&&(i.widthWithConnectedBlocks=i.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,n){const i=e.getFirstSpacer(),a=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align===h.Align$$module$build$src$core$input.LEFT&&a)a.width+=n;else if(e.align===h.Align$$module$build$src$core$input.CENTRE&&i&&a)i.width+=n/2,a.width+=n/2;else if(e.align===h.Align$$module$build$src$core$input.RIGHT&&i)i.width+=n;else{if(!a)return;a.width+=n}e.width+=n}alignStatementRow_(e){const n=e.getLastInput();if(n){var i=e.width-n.width,a=this.statementEdge;0<(i=a-i)&&this.addAlignmentPadding_(e,i),i=e.width,a=this.getDesiredRowWidth_(e),n.width+=a-i,n.height=Math.max(n.height,e.height),e.width+=a-i,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let n=0;n<e.length;n++)this.rows.push(e[n]),n!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[n],e[n+1]))}makeSpacerRow_(e,n){var i=this.getSpacerRowHeight_(e,n);const a=this.getSpacerRowWidth_(e,n);return i=new Vp(this.constants_,i,a),e.hasStatement&&(i.followsStatement=!0),n.hasStatement&&(i.precedesStatement=!0),i}getSpacerRowWidth_(e,n){return this.width-this.startX}getSpacerRowHeight_(e,n){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){return P.isSpacer(n)?e.yPos+n.height/2:P.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,P.isNextConnection(n)?e+n.height/2:e-n.height/2):P.isTopRow(e)?P.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2}recordElemPositions_(e){let n=e.xPos;for(let a,i=0;a=e.elements[i];i++)P.isSpacer(a)&&(a.height=e.height),a.xPos=n,a.centerline=this.getElemCenterline_(e,a),n+=a.width}finalize_(){let e=0,n=0;for(let a,i=0;a=this.rows[i];i++)a.yPos=n,a.xPos=this.startX,n+=a.height,e=Math.max(e,a.widthWithConnectedBlocks),this.recordElemPositions_(a);if(this.outputConnection&&this.block_.nextConnection){const i=this.block_.nextConnection.targetBlock();i&&(e=Math.max(e,i.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight}},su=class extends Yo{constructor(e,n,i,a){let d=e?e.workspace.id:void 0;a&&a.getType()===Y.types.WORKSPACE&&(d=a.getLocation().id),super(d),this.type=Mc,this.blockId=e?.id,this.oldNode=i||void 0,this.newNode=a,this.isCursor=n}toJson(){const e=super.toJson();if(void 0===this.isCursor)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}fromJson(e){Z("Blockly.Events.MarkerMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new su)).isCursor=e.isCursor,n.blockId=e.blockId,n.oldNode=e.oldNode,n.newNode=e.newNode,n}};Le(ee.EVENT,Mc,su);var ya=class{constructor(e,n,i){this.workspace=e,this.marker=i,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=n,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=i.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return"cursor"===this.marker.type}createDom(){const e=this.isCursor()?"blocklyCursor":"blocklyMarker";return this.svgGroup_=k(B.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent_=e}draw(e,n){if(n){this.constants_=this.workspace.getRenderer().getConstants();var i=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||i,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(e,n),void 0!==(e=this.currentMarkerSvg.childNodes[0])&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const n=e.getLocation().type;e.getType()===Y.types.BLOCK?this.showWithBlock_(e):e.getType()===Y.types.OUTPUT?this.showWithOutput_(e):n===he.INPUT_VALUE?this.showWithInput_(e):n===he.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===Y.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===Y.types.FIELD?this.showWithField_(e):e.getType()===Y.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===Y.types.STACK&&this.showWithStack_(e)}showWithBlockPrevOutput_(e){const n=(e=e.getSourceBlock()).width;var i=e.height,a=.75*i;const d=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(i=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(n,d,a,i)):e.outputConnection?(a=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,i,a)):this.positionBlock_(n,d,a),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput_(e)}showWithPrevious_(e){this.showWithBlockPrevOutput_(e)}showWithOutput_(e){this.showWithBlockPrevOutput_(e)}showWithCoordinates_(e){var n=e.getWsCoordinate();e=n.x,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){const n=(e=e.getLocation()).getSize().width,i=e.getSize().height;this.positionRect_(0,0,n,i),this.setParent_(e),this.showCurrent_()}showWithInput_(e){const n=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(n),this.showCurrent_()}showWithNext_(e){var n=e.getLocation();e=n.getSourceBlock();let i=0;n=n.getOffsetInBlock().y;const a=e.getHeightWidth().width;this.workspace.RTL&&(i=-a),this.positionLine_(i,n,a),this.setParent_(e),this.showCurrent_()}showWithStack_(e){var n=(e=e.getLocation()).getHeightWidth();const i=n.width+this.constants_.CURSOR_STACK_PADDING,a=-this.constants_.CURSOR_STACK_PADDING/2;let _=a;this.workspace.RTL&&(_=-(i+a)),this.positionRect_(_,-this.constants_.CURSOR_STACK_PADDING/2,i,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,n,i){if(e=rt(-n,i)+ae("V",-n)+ae("H",e+2*n)+ae("V",i),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const n=e.getOffsetInBlock().x,i=e.getOffsetInBlock().y;e=kn(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+i+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,n,i){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${n}`),this.markerSvgLine_.setAttribute("width",`${i}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,n,i){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=rt(e,0)+ae("h",-(e-i.width))+ae("v",this.constants_.TAB_OFFSET_FROM_TOP)+i.pathDown+ae("V",n)+ae("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,n,i,a){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=rt(-n,i)+ae("V",-n)+ae("H",this.constants_.NOTCH_OFFSET_LEFT)+a.pathLeft+ae("H",e+2*n)+ae("V",i),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,n,i,a){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${n}`),this.markerSvgRect_.setAttribute("width",`${i}`),this.markerSvgRect_.setAttribute("height",`${a}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_(e,n){const i=n.getSourceBlock();e=new(Te(Mc))(i,this.isCursor(),e,n),me(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=k(B.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=k(B.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=k(B.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=k(B.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=k(B.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const e=this.getBlinkProperties_();k(B.ANIMATE,e,this.markerSvgLine_),k(B.ANIMATE,e,this.markerInput_),k(B.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstElementChild.setAttribute("values",e=this.colour_+";transparent;transparent;"),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&ie(this.svgGroup_)}},va=class{constructor(e,n,i){this.markerSvg=this.cursorSvg=null,this.constants=i,this.style=n,this.svgRoot=e,this.svgPath=k(B.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,n){e&&(n?Q(this.svgRoot,e):ce(this.svgRoot,e))}updateHighlighted(e){this.svgPath.setAttribute("filter",e?"url(#"+this.constants.embossFilterId+")":"none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,n){}},n_="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",No=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,an(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections()}dispose(){this.availableConnections.length=0,Ft();try{this.firstMarker&&this.firstMarker.dispose(),this.lastMarker&&this.lastMarker.dispose()}finally{Gt()}}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){Ft(),this.hidePreview(),Gt();var{local:e,closest:n}=this.activeCandidate;if(e.connect(n),this.topBlock.rendered){const i=e.isSuperior()?n:e;Fg(i.getSourceBlock()),this.topBlock.getRootBlock().bringToFront()}}}update(e,n){const i=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!i,n))||this.shouldUpdatePreviews(i,e))&&(Ft(),this.maybeHidePreview(i),this.maybeShowPreview(i),Gt())}createMarkerBlock(e){var n=e.type;let i;Ft();try{if(i=this.workspace.newBlock(n),i.setInsertionMarker(!0),e.saveExtraState){var a=e.saveExtraState();a&&i.loadExtraState&&i.loadExtraState(a)}else if(e.mutationToDom){const d=e.mutationToDom();d&&i.domToMutation&&i.domToMutation(d)}for(n=0;n<e.inputList.length;n++){const d=e.inputList[n];if(d.name===Yc)continue;const _=i.inputList[n];if(!_)throw Error(n_.replace("%1","an input"));for(a=0;a<d.fieldRow.length;a++){const R=d.fieldRow[a],L=_.fieldRow[a];if(!L)throw Error(n_.replace("%1","a field"));L.setValue(R.getValue())}}i.setCollapsed(e.isCollapsed()),i.setInputsInline(e.getInputsInline()),i.initSvg(),i.getSvgRoot().setAttribute("visibility","hidden")}finally{Gt()}return i}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),n=this.topBlock.lastConnectionInStack(!0);if(n&&n!==this.topBlock.nextConnection){if(e.push(n),this.lastOnStack=n,this.lastMarker){Ft();try{this.lastMarker.dispose()}finally{Gt()}}this.lastMarker=this.createMarkerBlock(n.getSourceBlock())}return e}shouldUpdatePreviews(e,n){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:i,closest:a}=this.activeCandidate;if(a===e.closest&&i===e.local)return!1;const d=i.x+n.x-a.x;return n=i.y+n.y-a.y,e.radius<Math.sqrt(d*d+n*n)-h.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let n=this.getStartRadius(),i=null;for(let a=0;a<this.availableConnections.length;a++){const d=this.availableConnections[a],_=d.closest(n,e);_.connection&&(i={closest:_.connection,local:d,radius:_.radius},n=_.radius)}return i}getStartRadius(){return this.activeCandidate?h.config$$module$build$src$core$config.connectingSnapRadius:h.config$$module$build$src$core$config.snapRadius}shouldDelete(e,n){return!(!n||!this.workspace.getComponentManager().hasCapability(n.id,Pn.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock,e)}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var i,n=e.closest;n===(null==(i=this.activeCandidate)?void 0:i.closest)||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const n=this.workspace.getRenderer();switch(n.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case No.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case No.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case No.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}n.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(e){if(this.activeCandidate){const n=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||n||this.wouldDeleteBlock)&&this.hidePreview()}}else this.hidePreview();this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const n=null==(e=this.activeCandidate)?void 0:e.closest;n&&n.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(n)&&n.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:n,closest:i}=e;let d,a=(e=this.lastOnStack&&n===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!a)throw Error("Cannot show the insertion marker because there is no insertion marker block");try{d=a.getMatchingConnection(n.getSourceBlock(),n)}catch{if(this.firstMarker=this.createMarkerBlock(this.topBlock),a=e?this.lastMarker:this.firstMarker,!a)throw Error("Cannot show the insertion marker because there is no insertion marker block");d=a.getMatchingConnection(n.getSourceBlock(),n)}if(!d)throw Error("Cannot show the insertion marker because there is no associated connection");if(d===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");a.render(),a.rendered=!0,a.getSvgRoot().setAttribute("visibility","visible"),d&&i&&a.positionNearConnection(d,i),i&&d.connect(i),this.markerConnection=d}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,n=e.getSourceBlock(),i=n.previousConnection,a=n.outputConnection,d=e===n.nextConnection;if(a=e.type===he.INPUT_VALUE&&!(a&&a.targetConnection),d&&(!i||!i.targetConnection)||a?e.targetBlock().unplug(!1):e.type!==he.NEXT_STATEMENT||d?n.unplug(!0):((d=e.targetConnection)&&d.getSourceBlock().unplug(!1),i=i?i.targetConnection:null,n.unplug(!0),i&&d&&i.connect(d)),e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=n.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){this.highlightedBlock=(e=e.closest).getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}};!function(e){(e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}))[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"}(No||(No={}));var U$=No.PREVIEW_TYPE,o_={};o_.InsertionMarkerManager=No,o_.PreviewType=U$;var pl=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,Object.assign(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,n){this.constants_.createDom(e,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())}refreshDom(e,n){const i=this.getConstants();i.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=i.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new ru}makeRenderInfo_(e){return new ba(this,e)}makeDrawer_(e,n){return new Ta(e,n)}makeDebugger_(){return new Ko(this.getConstants())}makeMarkerDrawer(e,n){return new ya(e,this.getConstants(),n)}makePathObject(e,n){return new va(e,n,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,n,i){return!!ut.getConnectionForOrphanedConnection(e,i===he.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}getConnectionPreviewMethod(e,n,i){return n.type===he.OUTPUT_VALUE||n.type===he.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(i,e.targetBlock(),n.type)?No.PREVIEW_TYPE.INSERTION_MARKER:No.PREVIEW_TYPE.REPLACEMENT_FADE:No.PREVIEW_TYPE.INSERTION_MARKER}render(e){ai()&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());const n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()}},st={};st.BottomRow=Fp,st.Connection=fr,st.ConstantProvider=ru,st.Debug=Ko,st.Drawer=Ta,st.ExternalValueInput=hl,st.Field=Ti,st.Hat=tu,st.Icon=Bd,st.InRowSpacer=_r,st.InlineInput=Fd,st.InputConnection=Mo,st.InputRow=Up,st.JaggedEdge=Hp,st.MarkerSvg=ya,st.Measurable=rs,st.NextConnection=x$,st.OutputConnection=Gd,st.PathObject=va,st.PreviousConnection=Qf,st.RenderInfo=ba,st.Renderer=pl,st.RoundCorner=nu,st.Row=$a,st.SpacerRow=Vp,st.SquareCorner=ou,st.StatementInput=Ea,st.TopRow=Ud,st.Types=P,st.init=qg,st.register=Vi,st.stopDebugger=function(){Z("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Wh()},st.unregister=function(e){Ys(ee.RENDERER,e)};var iu=class{constructor(e,n){this.workspace=e,this.theme=n,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var n=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(n&&(n=n.getClassName())&&ce(e,n),(n=this.theme.getClassName())&&Q(e,n));for(let a,i=0;a=this.subscribedWorkspaces_[i];i++)a.refreshTheme();for(const[i,a]of this.componentDB)for(const d of a){e=d.element,n=d.propertyName;const _=this.theme&&this.theme.getComponentStyle(i);e.style[n]=_||""}for(const i of this.subscribedWorkspaces_)i.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces_.push(e)}unsubscribeWorkspace(e){if(!mt(this.subscribedWorkspaces_,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,n,i){this.componentDB.has(n)||this.componentDB.set(n,[]),this.componentDB.get(n).push({element:e,propertyName:i}),n=this.theme&&this.theme.getComponentStyle(n),e.style[i]=n||""}unsubscribe(e){if(e)for(const[n,i]of this.componentDB){for(let a=i.length-1;0<=a;a--)i[a].element===e&&i.splice(a,1);i.length||this.componentDB.delete(n)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},Wp="VARIABLE_DYNAMIC",gl={};gl.CATEGORY_NAME=Wp,gl.flyoutCategory=Zg,gl.flyoutCategoryBlocks=qu,gl.onCreateVariableButtonClick_Colour=Kh,gl.onCreateVariableButtonClick_Number=Yh,gl.onCreateVariableButtonClick_String=zh;var Ia=class{canConnect(e,n,i,a){return this.canConnectWithReason(e,n,i,a)===ut.CAN_CONNECT}canConnectWithReason(e,n,i,a){const d=this.doSafetyChecks(e,n);return d!==ut.CAN_CONNECT?d:this.doTypeChecks(e,n)?i&&!this.doDragChecks(e,n,a||0)?ut.REASON_DRAG_CHECKS_FAILED:ut.CAN_CONNECT:ut.REASON_CHECKS_FAILED}getErrorMessage(e,n,i){switch(e){case ut.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case ut.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case ut.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case ut.REASON_TARGET_NULL:return"Target connection is null.";case ut.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+i.getCheck();case ut.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case ut.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case ut.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,n){if(!e||!n)return ut.REASON_TARGET_NULL;let i,a,d;return e.isSuperior()?(i=e.getSourceBlock(),a=n.getSourceBlock(),d=n):(a=e.getSourceBlock(),i=n.getSourceBlock(),d=e,e=n),i===a?ut.REASON_SELF_CONNECTION:d.type!==$i[e.type]?ut.REASON_WRONG_TYPE:i.workspace!==a.workspace?ut.REASON_DIFFERENT_WORKSPACES:i.isShadow()&&!a.isShadow()?ut.REASON_SHADOW_PARENT:d.type===he.OUTPUT_VALUE&&a.previousConnection&&a.previousConnection.isConnected()||d.type===he.PREVIOUS_STATEMENT&&a.outputConnection&&a.outputConnection.isConnected()?ut.REASON_PREVIOUS_AND_OUTPUT:ut.CAN_CONNECT}doTypeChecks(e,n){if(e=e.getCheck(),n=n.getCheck(),!e||!n)return!0;for(let i=0;i<e.length;i++)if(-1!==n.indexOf(e[i]))return!0;return!1}doDragChecks(e,n,i){if(e.distanceFrom(n)>i||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case he.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case he.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case he.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case he.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1===wc.indexOf(n)}canConnectToPrevious_(e,n){return!(e.targetConnection||-1!==wc.indexOf(n)||n.targetConnection&&(!(e=n.targetBlock()).isInsertionMarker()||e.getPreviousBlock()))}};Le(ee.CONNECTION_CHECKER,Ds,Ia);var r_=class extends fi{constructor(e){super(e),this.type=pi,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}fromJson(e){Z("Blockly.Events.VarDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.varType=e.varType,this.varName=e.varName}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new r_)).varType=e.varType,n.varName=e.varName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)}};Le(ee.EVENT,pi,r_);var s_=class extends fi{constructor(e,n){super(e),this.type=kc,e&&(this.oldName=e.name,this.newName=typeof n>"u"?"":n)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}fromJson(e){Z("Blockly.Events.VarRename.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldName=e.oldName,this.newName=e.newName}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new s_)).oldName=e.oldName,n.newName=e.newName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");n.renameVariableById(this.varId,e?this.newName:this.oldName)}};Le(ee.EVENT,kc,s_);var Xp=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable(e,n){if(e.name!==n){var i=this.getVariable(n,e.type),a=this.workspace.getAllBlocks(!1);de(!0);try{i&&i.getId()!==e.getId()?this.renameVariableWithConflict_(e,n,i,a):this.renameVariableAndUses_(e,n,a)}finally{de(!1)}}}renameVariableById(e,n){const i=this.getVariableById(e);if(!i)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(i,n)}renameVariableAndUses_(e,n,i){for(me(new(Te(kc))(e,n)),e.name=n,n=0;n<i.length;n++)i[n].updateVarName(e)}renameVariableWithConflict_(e,n,i,a){const d=e.type;for(n!==i.name&&this.renameVariableAndUses_(i,n,a),n=0;n<a.length;n++)a[n].renameVarById(e.getId(),i.getId());me(new(Te(pi))(e)),mt(this.variableMap.get(d),e)}createVariable(e,n,i){var a=this.getVariable(e,n);if(a){if(i&&a.getId()!==i)throw Error('Variable "'+e+'" is already in use and its id is "'+a.getId()+'" which conflicts with the passed in id, "'+i+'".');return a}if(i&&this.getVariableById(i))throw Error('Variable id, "'+i+'", is already in use.');return a=i||lo(),a=new el(this.workspace,e,n=n||"",a),(e=this.variableMap.get(n)||[]).push(a),this.variableMap.delete(n),this.variableMap.set(n,e),me(new(Te(Os))(a)),a}deleteVariable(e){const n=e.getId(),i=this.variableMap.get(e.type);if(i)for(let a=0;a<i.length;a++)if(i[a].getId()===n){i.splice(a,1),me(new(Te(pi))(e));break}}deleteVariableById(e){const n=this.getVariableById(e);if(n){var i=n.name;const a=this.getVariableUsesById(e);for(let _,d=0;_=a[d];d++)if("procedures_defnoreturn"===_.type||"procedures_defreturn"===_.type)return e=String(_.getFieldValue("NAME")),i=De.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",i).replace("%2",e),void we(i);1<a.length?(i=De.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(a.length)).replace("%2",i),Qa(i,d=>{d&&n&&this.deleteVariableInternal(n,a)})):this.deleteVariableInternal(n,a)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,n){const i=yt();i||de(!0);try{for(let a=0;a<n.length;a++)n[a].dispose(!0);this.deleteVariable(e)}finally{i||de(!1)}}getVariable(e,n){if(n=this.variableMap.get(n||""))for(let a,i=0;a=n[i];i++)if(os.equals(a.name,e))return a;return null}getVariableById(e){for(const[,n]of this.variableMap)for(const i of n)if(i.getId()===e)return i;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const n=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const i of e.getPotentialVariableMap().variableMap.keys())n.add(i);return n.has("")||n.add(""),Array.from(n.values())}getAllVariables(){let e=[];for(const n of this.variableMap.values())e=e.concat(n);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const n=[],i=this.workspace.getAllBlocks(!1);for(let a=0;a<i.length;a++){const d=i[a].getVarModels();if(d)for(let _=0;_<d.length;_++)d[_].getId()===e&&n.push(i[a])}return n}},is=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new A$(this),this.potentialVariableMap=null,this.id=lo(),io(this),this.options=e||new hr({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(Xt(ee.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new Xp(this)}dispose(){this.listeners.length=0,this.clear(),Qo(this)}sortObjects_(e,n){return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+is.prototype.sortObjects_.offset*e.x-(n.y+is.prototype.sortObjects_.offset*n.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!mt(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e){const n=[].concat(this.topBlocks);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(Wt(is.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){mt(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,n){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),n&&e&&1<e.length&&(this.sortObjects_.offset=Math.sin(Wt(is.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e.filter(function(i){return!i.isInsertionMarker()})):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!mt(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e){const n=[].concat(this.topComments);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(Wt(is.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n}getAllBlocks(e){if(e){var n=this.getTopBlocks(!0);e=[];for(let i=0;i<n.length;i++)e.push(...n[i].getDescendants(!0))}else for(e=this.getTopBlocks(!1),n=0;n<e.length;n++)e.push(...e[n].getChildren(!1));return e.filter(function(i){return!i.isInsertionMarker()})}clear(){this.isClearing=!0;try{const e=yt();for(e||de(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();e||de(!1),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,n){this.variableMap.renameVariableById(e,n)}createVariable(e,n,i){return this.variableMap.createVariable(e,n,i)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,n){return this.variableMap.getVariable(e,n)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(void 0!==this.options.maxInstances[e]?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let n=0;for(const i in e){if(e[i]>this.remainingCapacityOfType(i))return!1;n+=e[i]}return!(n>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var n=e?this.redoStack_:this.undoStack_,i=e?this.undoStack_:this.redoStack_;const a=n.pop();if(a){for(var d=[a];n.length&&a.group&&a.group===n[n.length-1].group;)d.push(n.pop());for(n=0;n<d.length;n++)i.push(d[n]);d=Ks(d,e),Ct(!1);try{for(i=0;i<d.length;i++)d[i].run(e)}finally{Ct(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Js()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){mt(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let n=0;n<this.listeners.length;n++)(0,this.listeners[n])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,n){this.blockDB.set(e,n)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let n;return null!=(n=this.commentDB.get(e))?n:null}allInputsFilled(e){const n=this.getTopBlocks(!1);for(let i=0;i<n.length;i++)if(!n[i].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Xp(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}static getById(e){return To(e)}static getAll(){return Tr()}};is.SCAN_ANGLE=3;var jd=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(e,n){if(e.length){try{var i=new globalThis.Audio}catch{return}for(let d=0;d<e.length;d++){const _=e[d],R=_.match(/\.(\w+)$/);if(R&&i.canPlayType("audio/"+R[1])){var a=new globalThis.Audio(_);break}}a&&this.sounds.set(n,a)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const n=e.play();if(void 0!==n?n.then(e.pause).catch(function(){}):e.pause(),zi||Ic)break}}play(e,n){var i=this.sounds.get(e);i?(e=new Date,null!==this.lastSound_&&e.getTime()-this.lastSound_.getTime()<100||(this.lastSound_=e,(i=zi||tp?i:i.cloneNode()).volume=void 0===n?1:n,i.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,n)}},i_=class{constructor(e){this.workspace=e,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper=this.onZoomInWrapper=this.onZoomResetWrapper=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=k(B.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Pn.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&ie(this.svgGroup),this.onZoomResetWrapper&&ve(this.onZoomResetWrapper),this.onZoomInWrapper&&ve(this.onZoomInWrapper),this.onZoomOutWrapper&&ve(this.onZoomOutWrapper)}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new on(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,n){if(this.initialized){var R,i=ys(this.workspace,e),a=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(a+=this.LARGE_SPACING+this.HEIGHT),e=jg(i,new Nn(this.WIDTH,a),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),n=Vl(e,this.MARGIN_VERTICAL,(i=i.vertical)===xs.TOP?al.DOWN:al.UP,n),i===xs.TOP){var _,d=this.SMALL_SPACING+this.HEIGHT;null==(_=this.zoomInGroup)||_.setAttribute("transform","translate(0, "+d+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(d+this.LARGE_SPACING+this.HEIGHT)+")")}else{let L;_=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0,null==(L=this.zoomInGroup)||L.setAttribute("transform","translate(0, "+_+")"),_=_+this.SMALL_SPACING+this.HEIGHT,null==(d=this.zoomOutGroup)||d.setAttribute("transform","translate(0, "+_+")")}this.top=n.top,this.left=n.left,null==(R=this.svgGroup)||R.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=k(B.G,{class:"blocklyZoom"},this.svgGroup);const n=k(B.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);k(B.RECT,{width:32,height:32},n),k(B.IMAGE,{width:vn_width,height:vn_height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(zo,"xlink:href",this.workspace.options.pathToMedia+vn_url),this.onZoomOutWrapper=ue(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1))}createZoomInSvg(e){this.zoomInGroup=k(B.G,{class:"blocklyZoom"},this.svgGroup);const n=k(B.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);k(B.RECT,{width:32,height:32},n),k(B.IMAGE,{width:vn_width,height:vn_height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(zo,"xlink:href",this.workspace.options.pathToMedia+vn_url),this.onZoomInWrapper=ue(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1))}zoom(e,n){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),wt(),n.stopPropagation(),n.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=k(B.G,{class:"blocklyZoom"},this.svgGroup);const n=k(B.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);k(B.RECT,{width:32,height:32},n),k(B.IMAGE,{width:vn_width,height:vn_height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(zo,"xlink:href",this.workspace.options.pathToMedia+vn_url),this.onZoomResetWrapper=ue(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this))}resetZoom(e){this.workspace.markFocused();const n=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(n),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),wt(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(Te(gi))(null,this.workspace.id,"zoom_controls");me(e)}};Ut("\n.blocklyZoom>image, .blocklyZoom>svg>image {\n  opacity: .4;\n}\n\n.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {\n  opacity: .6;\n}\n\n.blocklyZoom>image:active, .blocklyZoom>svg>image:active {\n  opacity: .8;\n}\n");var Ar=class extends is{constructor(e,n,i){let a;super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.workspaceDragSurface=this.blockDragSurface=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive=!1,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(Xt(ee.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||Ar.setTopLevelWorkspaceMetrics_,this.componentManager=new Pn,this.connectionDBList=Qc.init(this.connectionChecker),n&&(this.blockDragSurface=n),i&&(this.workspaceDragSurface=i),this.useWorkspaceDragSurface=!!this.workspaceDragSurface,this.audioManager=new jd(e.parentWorkspace),this.grid=this.options.gridPattern?new Yf(this.options.gridPattern,e.gridOptions):null,this.markerManager=new ur(this),h.module$build$src$core$variables&&hs&&this.registerToolboxCategoryCallback(pd,hs),gl&&Zg&&this.registerToolboxCategoryCallback(Wp,Zg),h.module$build$src$core$procedures&&Ku&&(this.registerToolboxCategoryCallback(eu,Ku),this.addChangeListener(tb)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new iu(this,this.options.theme||aa),this.themeManager_.subscribeWorkspace(this),this.renderer=qg(this.options.renderer||"geras",this.getTheme(),null!=(a=this.options.rendererOverrides)?a:void 0),this.cachedParentSvgSize=new Nn(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=aa),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(Te(rd))(this.getTheme().name,this.id);me(e)}updateBlockStyles_(e){for(let i,n=0;i=e[n];n++){const a=i.getStyleName();if(a){const d=i;d.setStyle(a),d.mutator&&d.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(e){let n=0,i=0,a=1;(Cn(this.getCanvas(),e)||Cn(this.getBubbleCanvas(),e))&&(a=this.scale);do{const d=yo(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(a=1),n+=d.x*a,i+=d.y*a,e=e.parentNode}while(e&&e!==this.getParentSvg());return new re(n,i)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Nn(e.width,e.height)}getOriginOffsetInPixels(){return Bu(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if(-1!==(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e){return this.svgGroup_=k(B.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=k(B.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"===e&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=k(B.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=k(B.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(ue(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),document.body.addEventListener("wheel",function(){}),ue(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(Xt(ee.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=Xt(ee.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&ie(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&ie(e.parentNode)}this.resizeHandlerWrapper&&(ve(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=Ar.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new i_(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const n=new hr({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(Xt(ee.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(Xt(ee.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(Pn.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),i=[];for(let d,a=0;d=e[a];a++){d.position(n,i);const _=d.getBoundingRectangle();_&&i.push(_)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const e=Ni();re.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(e,n){const i=this.getParentSvg();null!=e&&(this.cachedParentSvgSize.width=e,i.setAttribute("data-cached-width",e.toString())),null!=n&&(this.cachedParentSvgSize.height=n,i.setAttribute("data-cached-height",n.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if("svg"===e.tagName){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(zt()){var e=this.scale,n=-this.scrollY,i=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(n-this.oldTop)&&1>Math.abs(i-this.oldLeft))){var a=new(Te(ar))(n,i,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=n,this.oldLeft=i,me(a)}}}translate(e,n){var i;this.useWorkspaceDragSurface&&this.isDragSurfaceActive?null==(i=this.workspaceDragSurface)||i.translateSurface(e,n):(this.svgBlockCanvas_.setAttribute("transform",i="translate("+e+","+n+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",i)),this.blockDragSurface&&this.blockDragSurface.translateAndScaleGroup(e,n,this.scale),this.grid&&this.grid.moveTo(e,n),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface){this.isDragSurfaceActive=!1;var e=this.workspaceDragSurface.getSurfaceTranslation();this.workspaceDragSurface.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",e="translate("+e.x+","+e.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",e)}}setupDragSurface(){if(this.useWorkspaceDragSurface&&!this.isDragSurfaceActive){this.isDragSurfaceActive=!0;var n,a,e=this.svgBlockCanvas_.previousSibling,i=parseInt(null!=(n=this.getParentSvg().getAttribute("width"))?n:"0");n=parseInt(null!=(a=this.getParentSvg().getAttribute("height"))?a:"0"),a=yo(this.getCanvas()),this.workspaceDragSurface.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,i,n,this.scale),this.workspaceDragSurface.translateSurface(a.x,a.y)}}getBlockDragSurface(){return this.blockDragSurface}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(let n=(e=this.getAllBlocks(!1)).length-1;0<=n;n--)e[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var e=this.getAllBlocks(!1),n=e.length-1;0<=n;n--)e[n].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),n=0;n<e.length;n++)e[n].render(!1);this.markerManager.updateMarkers()}highlightBlock(e,n){if(void 0===n){for(let a,i=0;a=this.highlightedBlocks[i];i++)a.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((n=void 0===n||n)?-1===this.highlightedBlocks.indexOf(e)&&this.highlightedBlocks.push(e):mt(this.highlightedBlocks,e),e.setHighlighted(n))}paste(e){if(!this.rendered||!e.type&&!e.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const n=yt();return n||de(!0),e=e.type?this.pasteBlock_(null,e):"comment"===e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e,null),de(n),e}pasteBlock_(e,n){let i;Ft();try{let a=0,d=0;if(e){let _,R;i=An(e,this),a=parseInt(null!=(_=e.getAttribute("x"))?_:"0"),this.RTL&&(a=-a),d=parseInt(null!=(R=e.getAttribute("y"))?R:"0")}else n&&(i=ri(n,this),a=n.x||10,this.RTL&&(a=this.getWidth()-a),d=n.y||10);if(!isNaN(a)&&!isNaN(d)){let _;do{_=!1;const R=this.getAllBlocks(!1);for(let z,L=0;z=R[L];L++){const se=z.getRelativeToSurfaceXY();if(1>=Math.abs(a-se.x)&&1>=Math.abs(d-se.y)){_=!0;break}}if(!_){const L=i.getConnections_(!1);for(let se,z=0;se=L[z];z++)if(se.closest(h.config$$module$build$src$core$config.snapRadius,new re(a,d)).connection){_=!0;break}}_&&(a=this.RTL?a-h.config$$module$build$src$core$config.snapRadius:a+h.config$$module$build$src$core$config.snapRadius,d+=2*h.config$$module$build$src$core$config.snapRadius)}while(_);i.moveTo(new re(a,d))}}finally{Gt()}return zt()&&!i.isShadow()&&me(new(Te(On))(i)),i.select(),i}pasteWorkspaceComment_(e){let n;Ft();try{n=jn.fromXmlRendered(e,this);let i,d,a=parseInt(null!=(i=e.getAttribute("x"))?i:"0"),_=parseInt(null!=(d=e.getAttribute("y"))?d:"0");isNaN(a)||isNaN(_)||(this.RTL&&(a=-a),n.moveBy(a+50,_+50))}finally{Gt()}return zt()&&Jr.fireCreateEvent(n),n.select(),n}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()}renameVariableById(e,n){super.renameVariableById(e,n),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,n,i){return e=super.createVariable(e,n,i),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(Pn.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let i,n=0;i=e[n];n++){const a=i.getClientRect();a&&this.dragTargetAreas.push({component:i,clientRect:a})}}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let i,n=0;i=this.dragTargetAreas[n];n++)if(i.clientRect.contains(e.clientX,e.clientY))return i.component;return null}onMouseDown_(e){const n=this.getGesture(e);n&&n.handleWsStart(e,this)}startDrag(e,n){(e=Qt(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY=re.difference(n,e)}moveDrag(e){return(e=Qt(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,re.sum(this.dragDeltaXY,e)}isDragging(){return null!==this.currentGesture_&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel_(e){if(ts.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,i=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||i){var a=Ws(e);if(np)var d=e.metaKey;n&&(e.ctrlKey||d||!i)?(a=-a.y/50,n=Qt(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,a)):(n=this.scrollX-a.x,i=this.scrollY-a.y,e.shiftKey&&!a.x&&(n=this.scrollX-a.y,i=this.scrollY),this.scroll(n,i)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new on(0,0,0,0);const n=e[0].getBoundingRectangle();for(let a=1;a<e.length;a++){var i=e[a];i.isInsertionMarker&&i.isInsertionMarker()||((i=i.getBoundingRectangle()).top<n.top&&(n.top=i.top),i.bottom>n.bottom&&(n.bottom=i.bottom),i.left<n.left&&(n.left=i.left),i.right>n.right&&(n.right=i.right))}return n}cleanUp(){this.setResizesEnabled(!1),de(!0);const e=this.getTopBlocks(!0);let n=0;for(let a,i=0;a=e[i];i++){if(!a.isMovable())continue;const d=a.getRelativeToSurfaceXY();a.moveBy(-d.x,n-d.y),a.snapToGrid(),n=a.getRelativeToSurfaceXY().y+a.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}de(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var n=dt.registry.getContextMenuOptions(dt.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),Gh(e,n,this.RTL)}}updateToolbox(e){if(e=Ts(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Mh(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(ln(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentElement.setActive()}catch{this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom(e,n,i){i=Math.pow(this.options.zoomOptions.scaleSpeed,i);const a=this.scale*i;if(this.scale!==a){a>this.options.zoomOptions.maxScale?i=this.options.zoomOptions.maxScale/this.scale:a<this.options.zoomOptions.minScale&&(i=this.options.zoomOptions.minScale/this.scale);var d=this.getCanvas().getCTM(),_=this.getParentSvg().createSVGPoint();_.x=e,_.y=n,_=_.matrixTransform(d.inverse()),d=d.translate((e=_.x)*(1-i),(n=_.y)*(1-i)).scale(i),this.scrollX=d.e,this.scrollY=d.f,this.setScale(a)}}zoomCenter(e){var n=this.getMetrics();let i;this.flyout?(i=n.svgWidth?n.svgWidth/2:0,n=n.svgHeight?n.svgHeight/2:0):(i=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop),this.zoom(i,n,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var i=this.getBlocksBoundingBox(),d=i.right-i.left+40;if(i=i.bottom-i.top+40,d){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),i+=this.flyout.getHeight()/this.scale):(n+=this.flyout.getWidth(),d+=this.flyout.getWidth()/this.scale)),n/=d,e/=i,Ft();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{Gt()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Q(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Q(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){ce(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),ce(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),n=(e.scrollWidth-e.viewWidth)/2,i=(e.scrollHeight-e.viewHeight)/2;this.scroll(n=-n-e.scrollLeft,i=-i-e.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e){if(this.isMovable()){if(e=e?this.getBlockById(e):null){var n=e.getRelativeToSurfaceXY(),i=e.getHeightWidth(),a=this.scale;e=(n.x+(this.RTL?-1:1)*i.width/2)*a,n=(n.y+i.height/2)*a,i=this.getMetrics(),this.scroll(-(e-i.viewWidth/2),-(n-i.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,n){this.hideChaff(!0);const i=this.getMetrics();e=Math.min(e,-i.scrollLeft),n=Math.min(n,-i.scrollTop);const a=i.scrollTop+Math.max(0,i.scrollHeight-i.viewHeight);e=Math.max(e,-(i.scrollLeft+Math.max(0,i.scrollWidth-i.viewWidth))),n=Math.max(n,-a),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+i.scrollLeft),-(n+i.scrollTop),!1),this.translate(e+=i.absoluteLeft,n+=i.absoluteTop)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e){return super.getAllBlocks(e)}getTopBlocks(e){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){mt(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const n=!this.resizesEnabled&&e;this.resizesEnabled=e,n&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,n)}getButtonCallback(e){let n;return null!=(n=this.flyoutButtonCallbacks.get(e))?n:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,n)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const n="pointerdown"===e.type,i=this.currentGesture_;return i?n&&i.hasStarted()?(console.warn("Tried to start the same gesture twice."),i.cancel(),null):i:n?this.currentGesture_=new ts(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e){Me(),Co(),cn();const n=!!e;this.getComponentManager().getComponents(Pn.Capability.AUTOHIDEABLE,!0).forEach(i=>i.autoHide(n))}static setTopLevelWorkspaceMetrics_(e){const n=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*e.x)),"number"==typeof e.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*e.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)}},j$={};j$.WorkspaceSvg=Ar,j$.resizeSvgContents=mc;var lu={load:function(e,n,{recordUndo:i=!1}={}){var a=Ot(ee.SERIALIZER,!0);if(a){a=Object.entries(a).sort((_,R)=>R[1].priority-_[1].priority);var d=un();Ct(i),(i=yt())||de(!0),Pr(),n instanceof Ar&&n.setResizesEnabled(!1);for(const[,_]of a.reverse()){let R;null==(R=_)||R.clear(n)}for(let[_,R]of a.reverse())if(e[_]){let L;null==(L=R)||L.load(e[_],n)}n instanceof Ar&&n.setResizesEnabled(!0),Je(),me(new(Te(ra))(n)),de(i),Ct(d)}},save:function(e){const n=Object.create(null),i=Ot(ee.SERIALIZER,!0);for(const a in i){let d;const _=null==(d=i[a])?void 0:d.save(e);_&&(n[a]=_)}return n}},fl=class{constructor(){this.priority=100}save(e){const n=[];for(const i of e.getAllVariables())e={name:i.name,id:i.getId()},i.type&&(e.type=i.type),n.push(e);return n.length?n:null}load(e,n){for(const i of e)n.createVariable(i.name,i.type,i.id)}clear(e){e.getVariableMap().clear()}};Lg("variables",new fl);var Oy={};Oy.VariableSerializer=fl;var au=class{constructor(e,n){this.procedureModelClass=e,this.parameterModelClass=n,this.priority=75}save(e){return e.getProcedureMap().getProcedures().map(n=>Jh(n))}load(e,n){const i=n.getProcedureMap();for(const a of e)i.add(Qg(this.procedureModelClass,this.parameterModelClass,a,n))}clear(e){e.getProcedureMap().clear()}},Ay=new au(ul,dl),Ca={};Ca.ProcedureSerializer=au,Ca.loadParameter=ef,Ca.loadProcedure=Qg,Ca.observableProcedureSerializer=Ay,Ca.saveParameter=ji,Ca.saveProcedure=Jh;var l_={blocks:Sd,exceptions:ua,priorities:da,procedures:Ca,registry:Of,variables:Oy,workspaces:lu},a_=class extends ru{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&ie(this.selectedGlowFilter_),this.replacementGlowFilter_&&ie(this.replacementGlowFilter_)}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:Cr("c",[Ie(25,-e),Ie(71,-e),Ie(n,0)])}}makeHexagonal(){function e(i,a,d){var _=i/2;return oi(-(d=d?-1:1)*(_=_>n?n:_),i=(a?-1:1)*i/2)+oi(d*_,i)}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:i=>(i/=2)>n?n:i,height:i=>i,connectionOffsetY:i=>i/2,connectionOffsetX:i=>-i,pathDown:i=>e(i,!1,!1),pathUp:i=>e(i,!0,!1),pathRightDown:i=>e(i,!1,!0),pathRightUp:i=>e(i,!1,!0)}}makeRounded(){function e(a,d,_){const R=a>i?a-i:0;return $t("a","0 0,1",a=(a>i?i:a)/2,Ie((d?-1:1)*a,(d?-1:1)*a))+ae("v",(_?1:-1)*R)+$t("a","0 0,1",a,Ie((d?1:-1)*a,(d?-1:1)*a))}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,i=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:a=>(a/=2)>n?n:a,height:a=>a,connectionOffsetY:a=>a/2,connectionOffsetX:a=>-a,pathDown:a=>e(a,!1,!1),pathUp:a=>e(a,!0,!1),pathRightDown:a=>e(a,!1,!0),pathRightUp:a=>e(a,!1,!0)}}makeSquared(){function e(i,a,d){return i-=2*n,$t("a","0 0,1",n,Ie((a?-1:1)*n,(a?-1:1)*n))+ae("v",(d?1:-1)*i)+$t("a","0 0,1",n,Ie((a?1:-1)*n,(a?-1:1)*n))}const n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:i=>n,height:i=>i,connectionOffsetY:i=>i/2,connectionOffsetX:i=>-i,pathDown:i=>e(i,!1,!1),pathUp:i=>e(i,!0,!1),pathRightDown:i=>e(i,!1,!0),pathRightUp:i=>e(i,!1,!0)}}shapeFor(e){let n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case he.INPUT_VALUE:case he.OUTPUT_VALUE:if(null!==(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!==n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!==n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case he.PREVIOUS_STATEMENT:case he.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(se){return Cr("c",[Ie(se*d/2,0),Ie(se*d*3/4,R/2),Ie(se*d,R)])+Hl([Ie(se*d,_)])+Cr("c",[Ie(se*d/4,R/2),Ie(se*d/2,R),Ie(se*d,R)])+ae("h",se*a)+Cr("c",[Ie(se*d/2,0),Ie(se*d*3/4,-R/2),Ie(se*d,-R)])+Hl([Ie(se*d,-_)])+Cr("c",[Ie(se*d/4,-R/2),Ie(se*d/2,-R),Ie(se*d,-R)])}const n=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,a=n/3,d=a/3,_=i/2,R=_/2,L=e(1),z=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:i,pathLeft:L,pathRight:z}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=$t("a","0 0,0",e,Ie(-e,e)),i=$t("a","0 0,1",e,Ie(-e,e));return{width:e,height:e,pathTop:n,pathBottom:$t("a","0 0,0",e,Ie(e,e)),rightWidth:e,rightHeight:e,pathTopRight:i,pathBottomRight:$t("a","0 0,1",e,Ie(e,e))}}generateSecondaryColour_(e){return nr("#000",e,.15)||e}generateTertiaryColour_(e){return nr("#000",e,.25)||e}createDom(e,n,i){super.createDom(e,n,i),e=k(B.DEFS,{},e),n=k(B.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),k(B.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),i=k(B.FECOMPONENTTRANSFER,{result:"outBlur"},n),k(B.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},i),k(B.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),k(B.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,e=k(B.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),k(B.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=k(B.FECOMPONENTTRANSFER,{result:"outBlur"},e),k(B.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),k(B.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),k(B.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),k(B.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Ra=class extends Ta{constructor(e,n){super(e,n)}draw(){const e=this.block_.pathObject;if(e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),ai()){let n,i;null==(n=this.block_)||null==(i=n.renderingDebugger)||i.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height))if(P.isSpacer(e)&&(e.precedesStatement||e.followsStatement)){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=e.height-(e.precedesStatement?n:0))?ae("V",e.yPos+n):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=ae("V",e.yPos+e.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=rt(e.xPos,this.info_.startY),this.outlinePath_+=ae("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=ae("V",e.baseline),this.outlinePath_+=ae("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const n=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var i=e.width-2*e.connectionWidth;e=kn(e.xPos+e.connectionWidth,e.centerline-e.height/2)+ae("h",i)+e.shape.pathRightDown(e.height)+ae("h",-i)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(n,e)}}drawStatementInput_(e){var n=e.getLastInput();const i=n.xPos+n.notchOffset+n.shape.width,a=n.shape.pathRight+ae("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,d=e.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+ae("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=ae("H",i)+a+ae("v",d)+n+ae("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}};h.FieldImage$$module$build$src$core$field_image=class extends Ze{constructor(e,n,i,a,d,_,R){if(super(Ze.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",i=Number(Lt(i)),n=Number(Lt(n)),isNaN(i)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=i||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Nn(n,i+h.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=i,"function"==typeof d&&(this.clickHandler_=d),e!==Ze.SKIP_SETUP&&(R?this.configure_(R):(this.flipRtl_=!!_,this.altText_=Lt(a)||""),this.setValue(Lt(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl_=e.flipRtl),e.alt&&(this.altText_=Lt(e.alt))}initView(){this.imageElement_=k(B.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(zo,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return"string"!=typeof e?null:e}doValueUpdate_(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(zo,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt(e){e!==this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler(e){this.clickHandler_=e}getText_(){return this.altText_}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}},h.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,to("field_image",h.FieldImage$$module$build$src$core$field_image),h.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="";var yi=class extends Ze{constructor(e,n,i){super(Ze.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==Ze.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),void 0!==e.spellcheck&&(this.spellcheck_=e.spellcheck)}initView(){const e=this.getSourceBlock();if(!e)throw new _n;if(this.getConstants().FULL_BLOCK_FIELDS){let n=0,i=0;for(let d,a=0;d=e.inputList[a];a++){for(let _=0;d.fieldRow[_];_++)n++;d.connection&&i++}this.fullBlockClickTarget_=1>=n&&e.outputConnection&&!i}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_(e){return null==e?null:String(e)}doValueInvalid_(e){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&zt()&&me(new(Te(gn))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var e=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",e.style.colourTertiary):e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const e=this.htmlInput_;this.isTextValid_?(ce(e,"blocklyInvalidInput"),xt(e,kt.INVALID,!1)):(Q(e,"blocklyInvalidInput"),xt(e,kt.INVALID,!0))}}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,n){this.workspace_=this.sourceBlock_.workspace,!(e=n||!1)&&this.workspace_.options.modalInputs&&(Yl||tp||zi)?this.showPromptEditor_():this.showInlineEditor_(e)}showPromptEditor_(){M(De.CHANGE_VALUE_TITLE,this.getText(),e=>{null!==e&&this.setValue(this.getValueFromEditorText_(e))})}showInlineEditor_(e){const n=this.getSourceBlock();if(!n)throw new _n;$s(this,n.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new _n;de(!0);const n=Ui();var i=this.getClickTarget_();if(!i)throw Error("A click target has not been set.");Q(i,"editing"),(i=document.createElement("input")).className="blocklyHtmlInput",i.setAttribute("spellcheck",this.spellcheck_);const a=this.workspace_.getScale();var d=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";return n.style.fontSize=d,i.style.fontSize=d,d=yi.BORDERRADIUS*a+"px",this.fullBlockClickTarget_&&(d=((d=this.getScaledBBox()).bottom-d.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,i.style.border=1*a+"px solid "+e,n.style.borderRadius=d,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*a+"px")),i.style.borderRadius=d,n.appendChild(i),i.value=i.defaultValue=this.getEditorText_(this.value_),i.setAttribute("data-untyped-default-value",this.value_),this.resizeEditor_(),this.bindInputEvents_(i),i}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),de(!1),this.unbindInputEvents_();var e=Ui().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,!(e=this.getClickTarget_()))throw Error("A click target has not been set.");ce(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper_=ue(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=ue(e,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(ve(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(ve(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(e){e.keyCode===$e.ENTER?(Co(),cn()):e.keyCode===$e.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),Co(),cn()):e.keyCode===$e.TAB&&(Co(),cn(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange_(e){this.setValue(this.getValueFromEditorText_(this.htmlInput_.value))}setEditorValue_(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)}resizeEditor_(){var e=this.getSourceBlock();if(!e)throw new _n;const n=Ui(),i=this.getScaledBBox();n.style.width=i.right-i.left+"px",n.style.height=i.bottom-i.top+"px",e=new re(e.RTL?i.right-n.offsetWidth:i.left,i.top),n.style.left=e.x+"px",n.style.top=e.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return String(e)}getValueFromEditorText_(e){return e}};yi.BORDERRADIUS=4,h.FieldTextInput$$module$build$src$core$field_textinput=class extends yi{constructor(e,n,i){super(e,n,i)}static fromJson(e){return new this(Lt(e.text),void 0,e)}},to("field_input",h.FieldTextInput$$module$build$src$core$field_textinput),h.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="";var _l=class extends Fp{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},ml=class extends Ea{constructor(e,n){if(super(e,n),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;n=e.getNextBlock();)e=n;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},$l=class extends rs{constructor(e){super(e),this.width=this.height=0,this.type|=P.getType("RIGHT_CONNECTION")}},El=class extends Ud{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection||(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Tl=class extends ba{constructor(e,n){super(e,n),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new El(this.constants_),this.bottomRow=new _l(this.constants_),this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new $l(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,n){return!!n&&(e.type===Ue.STATEMENT||n.type===Ue.STATEMENT||(e.type===Ue.VALUE||e.type===Ue.DUMMY)&&(!this.isInline||this.isMultiRow))}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&P.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&P.isLeftRoundedCorner(e)&&n&&(P.isPreviousConnection(n)||P.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&P.isLeftSquareCorner(e)&&n&&P.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,n){if(P.isTopRow(e)&&P.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const i=P.isInputRow(e)&&e.hasStatement,a=P.isInputRow(n)&&n.hasStatement;return a||i?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),a&&i?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):P.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):P.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,n){const i=this.width-this.startX;return P.isInputRow(e)&&e.hasStatement||P.isInputRow(n)&&n.hasStatement?Math.max(i,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):i}getElemCenterline_(e,n){if(e.hasStatement&&!P.isSpacer(n)&&!P.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(P.isInlineInput(n)&&n instanceof Mo){const i=n.connectedBlock;if(i&&i.outputConnection&&i.nextConnection)return e.yPos+i.height/2}return super.getElemCenterline_(e,n)}addInput_(e,n){if(e.type===Ue.DUMMY&&n.hasDummyInput&&n.align===h.Align$$module$build$src$core$input.LEFT&&e.align===h.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(n,e);else if(e.type===Ue.STATEMENT)return n.elements.push(new ml(this.constants_,e)),n.hasStatement=!0,void(null===n.align&&(n.align=e.align));super.addInput_(e,n)}addAlignmentPadding_(e,n){if(this.rightAlignedDummyInputs_.get(e)){let i;for(let a=0;a<e.elements.length;a++){const d=e.elements[a];if(P.isSpacer(d)&&(i=d),P.isField(d)&&d instanceof Ti&&d.parentInput===this.rightAlignedDummyInputs_.get(e))break}if(i)return i.width+=n,void(e.width+=n)}super.addAlignmentPadding_(e,n)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let n=e;for(let d=2;d<this.rows.length-1;d+=2){var i=this.rows[d-1];const _=this.rows[d];var a=this.rows[d+1];if(i=2===d?!!this.topRow.hasPreviousConnection:!!i.followsStatement,a=d+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!a.precedesStatement,P.isInputRow(_)&&_.hasStatement){let R,L;_.measure(),n=_.width-(null!=(L=null==(R=_.getLastInput())?void 0:R.width)?L:0)+e}else if(i&&(2===d||a)&&P.isInputRow(_)&&!_.hasStatement){a=_.xPos,i=null;for(let R=0;R<_.elements.length;R++){const L=_.elements[R];P.isSpacer(L)&&(i=L),i&&(P.isField(L)||P.isInput(L))&&a<n&&!(P.isField(L)&&L instanceof Ti&&(L.field instanceof h.FieldLabel$$module$build$src$core$field_label||L.field instanceof h.FieldImage$$module$build$src$core$field_image))&&(i.width+=n-a),a+=L.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var n=0,i=0;i<this.rows.length;i++){const a=this.rows[i];a.yPos=n,n+=a.height}this.height=n,n=e.height(i=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),i=e.width(i),this.outputConnection.height=n,this.outputConnection.width=i,this.outputConnection.startX=i,this.outputConnection.connectionOffsetY=e.connectionOffsetY(n),this.outputConnection.connectionOffsetX=e.connectionOffsetX(i),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=i,this.rightSide.height=n,this.rightSide.width=e,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+e),this.startX=i,this.width+=i+e,this.widthWithChildren+=i+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,n=0;n<this.rows.length;n++){var i=this.rows[n];if(!P.isInputRow(i))continue;e=i.elements[i.elements.length-2];let a=this.getNegativeSpacing_(i.elements[1]),d=this.getNegativeSpacing_(e);const _=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(e=a+d)<_&&(a=(e=this.width-_)/2,d=e/2),i.elements.unshift(new _r(this.constants_,-a)),i.elements.push(new _r(this.constants_,-d))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;n<this.rows.length;n++)P.isTopOrBottomRow(i=this.rows[n])&&(i.elements[1].width-=e),i.width-=e,i.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const n=this.outputConnection.width;var i=this.outputConnection.shape.type;const a=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return i===a.SHAPES.ROUND?n-(i=this.height/2>(i=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?i:this.height/2)*(1-Math.sin(Math.acos((i-this.constants_.SMALL_PADDING)/i))):0;if(P.isInlineInput(e)&&e instanceof Mo){const d=e.connectedBlock;return null==(e=d?d.pathObject.outputShapeType:e.shape.type)||d&&d.outputConnection&&(d.statementInputCount||d.nextConnection)||i===a.SHAPES.HEXAGONAL&&i!==e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[i][e]}return P.isField(e)&&e instanceof Ti?i===a.SHAPES.ROUND&&e.field instanceof h.FieldTextInput$$module$build$src$core$field_textinput?n-2.75*a.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[i][0]:P.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let a=2;a<this.rows.length-1;a+=2){const d=this.rows[a-1],_=this.rows[a],R=this.rows[a+1];var e=2===a,n=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!R.precedesStatement;if(e?this.topRow.hasPreviousConnection:d.followsStatement){var i=_.elements[1];if(i=3===_.elements.length&&i instanceof Ti&&(i.field instanceof h.FieldLabel$$module$build$src$core$field_label||i.field instanceof h.FieldImage$$module$build$src$core$field_image),!e&&i)d.height-=this.constants_.SMALL_PADDING,R.height-=this.constants_.SMALL_PADDING,_.height-=this.constants_.MEDIUM_PADDING;else if(e||n){if(n){for(e=!1,n=0;n<_.elements.length;n++)if((i=_.elements[n])instanceof Mo&&P.isInlineInput(i)&&i.connectedBlock&&!i.connectedBlock.isShadow()&&40<=i.connectedBlock.getHeightWidth().height){e=!0;break}e&&(d.height-=this.constants_.SMALL_PADDING,R.height-=this.constants_.SMALL_PADDING)}}else d.height+=this.constants_.SMALL_PADDING}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},zp=class extends ya{constructor(e,n,i){super(e,n,i),this.markerCircle_=null}showWithInputOutput_(e){const n=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle_(e.x,e.y),this.setParent_(n),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput_(e)}showWithInput_(e){this.showWithInputOutput_(e)}showWithBlock_(e){const n=(e=e.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(e),this.showCurrent_()}positionCircle_(e,n){let i,a;null==(i=this.markerCircle_)||i.setAttribute("cx",e.toString()),null==(a=this.markerCircle_)||a.setAttribute("cy",n.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=k(B.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const e=this.getBlinkProperties_();k(B.ANIMATE,e,this.markerCircle_)}return this.markerSvg_}applyColour_(e){let n,i;if(super.applyColour_(e),null==(n=this.markerCircle_)||n.setAttribute("fill",this.colour_),null==(i=this.markerCircle_)||i.setAttribute("stroke",this.colour_),this.isCursor()){let a;e=this.colour_+";transparent;transparent;",null==(a=this.markerCircle_)||a.firstElementChild.setAttribute("values",e)}}},Yp=class extends va{constructor(e,n,i){super(e,n,i),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=i}setPath(e){super.setPath(e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)}applyColour(e){super.applyColour(e);const n=e.getParent();e.isShadow()&&n&&this.svgPath.setAttribute("stroke",n.style.colourTertiary);for(const i of this.outlines.values())i.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,n){e=e.getParentInput().name,(e=this.getOutlinePath_(e))&&(n?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath_(e);this.remainingOutlines.clear()}setOutlinePath(e,n){(e=this.getOutlinePath_(e)).setAttribute("d",n),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_(e){return this.outlines.has(e)||this.outlines.set(e,k(B.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath_(e){let n,i;null==(n=this.outlines.get(e))||null==(i=n.parentNode)||i.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Kp=class extends pl{constructor(e){super(e)}makeConstants_(){return new a_}makeRenderInfo_(e){return new Tl(this,e)}makeDrawer_(e,n){return new Ra(e,n)}makeMarkerDrawer(e,n){return new zp(e,this.getConstants(),n)}makePathObject(e,n){return new Yp(e,n,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(e){return e.type!==he.INPUT_VALUE&&e.type!==he.OUTPUT_VALUE}getConnectionPreviewMethod(e,n,i){return n.type===he.OUTPUT_VALUE?e.isConnected()?No.PREVIEW_TYPE.REPLACEMENT_FADE:No.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,n,i)}};Vi("zelos",Kp);var Mr={};Mr.BottomRow=_l,Mr.ConstantProvider=a_,Mr.Drawer=Ra,Mr.MarkerSvg=zp,Mr.PathObject=Yp,Mr.RenderInfo=Tl,Mr.Renderer=Kp,Mr.RightConnectionShape=$l,Mr.StatementInput=ml,Mr.TopRow=El;var Jp=class extends ba{constructor(e,n){super(e,n)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var n=0;n<this.rows.length;n++)if(this.rows[n].hasExternalInput){e=!0;break}for(n=0;n<this.rows.length;n++){const a=this.rows[n];var i=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new _r(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(let d=0;d<i.length-1;d++){a.elements.push(i[d]);const _=this.getInRowSpacing_(i[d],i[d+1]);a.elements.push(new _r(this.constants_,_))}a.elements.push(i[i.length-1]),a.endsWithElemSpacer()&&(i=this.getInRowSpacing_(i[i.length-1],null),e&&a.hasDummyInput&&(i+=this.constants_.TAB_WIDTH),a.elements.push(new _r(this.constants_,i)))}}}getInRowSpacing_(e,n){if(!e)return n&&P.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&P.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&P.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!P.isInput(e)&&!n)return P.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:P.isIcon(e)?2*this.constants_.LARGE_PADDING+1:P.isHat(e)?this.constants_.NO_PADDING:P.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:P.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:P.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(P.isInput(e)&&!n){if(P.isExternalInput(e))return this.constants_.NO_PADDING;if(P.isInlineInput(e))return this.constants_.LARGE_PADDING;if(P.isStatementInput(e))return this.constants_.NO_PADDING}if(!P.isInput(e)&&n&&P.isInput(n)){if(P.isField(e)&&e.isEditable){if(P.isInlineInput(n)||P.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(P.isInlineInput(n)||P.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(P.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(P.isIcon(e)&&n&&!P.isInput(n))return this.constants_.LARGE_PADDING;if(P.isInlineInput(e)&&n&&P.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(P.isLeftSquareCorner(e)&&n){if(P.isHat(n))return this.constants_.NO_PADDING;if(P.isPreviousConnection(n)||P.isNextConnection(n))return n.notchOffset}return P.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:P.isField(e)&&n&&P.isField(n)&&e.isEditable===n.isEditable||n&&P.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return P.isTopRow(e)&&P.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:P.isTopRow(e)||P.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(P.isSpacer(n))return e.yPos+n.height/2;if(P.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,P.isNextConnection(n)?e+n.height/2:e-n.height/2;if(P.isTopRow(e))return P.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let i=e.yPos;return P.isField(n)&&e.hasStatement?i+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):i+e.height/2}finalize_(){let e=0,n=0;for(var i=0;i<this.rows.length;i++){const d=this.rows[i];d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var a=n-this.topRow.ascenderHeight;d===this.bottomRow&&a<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=a=this.constants_.MIN_BLOCK_HEIGHT-a,n+=a),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(i=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,i.getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline}},u_=class extends pl{constructor(e){super(e)}makeRenderInfo_(e){return new Jp(this,e)}};Vi("thrasos",u_);var d_={};d_.RenderInfo=Jp,d_.Renderer=u_;var h_=class extends ru{constructor(){super()}},Wd=class extends Ta{constructor(e,n){super(e,n)}},bl=class extends ba{constructor(e,n){super(e,n)}getRenderer(){return this.renderer_}},Da=class extends pl{constructor(e){super(e)}makeConstants_(){return new h_}makeRenderInfo_(e){return new bl(this,e)}makeDrawer_(e,n){return new Wd(e,n)}};Vi("minimalist",Da);var Oa={};Oa.ConstantProvider=h_,Oa.Drawer=Wd,Oa.RenderInfo=bl,Oa.Renderer=Da;var Xd=class extends ru{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},p_=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+"\n"+this.inlineSteps_}drawTopCorner(e){this.steps_+=rt(e.xPos,this.info_.startY);for(let i,n=0;i=e.elements[n];n++)P.isLeftSquareCorner(i)?this.steps_+=this.highlightConstants_.START_POINT:P.isLeftRoundedCorner(i)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):P.isPreviousConnection(i)?this.steps_+=this.notchPaths_.pathLeft:P.isHat(i)?this.steps_+=this.startPaths_.path(this.RTL_):P.isSpacer(i)&&0!==i.width&&(this.steps_+=ae("H",i.xPos+i.width-this.highlightOffset_));this.steps_+=ae("H",e.xPos+e.width-this.highlightOffset_)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+ae("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput(e){const n=e.getLastInput();if(this.RTL_){const i=e.height-n.connectionHeight;this.steps_+=kn(n.xPos+n.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+ae("v",i)}else this.steps_+=kn(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const n=e.getLastInput();if(n)if(this.RTL_){const i=e.height-2*this.insideCornerPaths_.height;this.steps_+=kn(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+ae("v",i)+this.insideCornerPaths_.pathBottom(this.RTL_)+oi(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=kn(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+oi(e.width-n.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const n=e.xPos+e.width-this.highlightOffset_;e instanceof Vp&&e.followsStatement&&(this.steps_+=ae("H",n)),this.RTL_&&(this.steps_+=ae("H",n),e.height>this.highlightOffset_&&(this.steps_+=ae("V",e.yPos+e.height-this.highlightOffset_)))}drawBottomRow(e){if(this.RTL_)this.steps_+=ae("V",e.baseline-this.highlightOffset_);else{const n=this.info_.bottomRow.elements[0];P.isLeftSquareCorner(n)?this.steps_+=kn(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):P.isLeftRoundedCorner(n)&&(this.steps_+=kn(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=kn(this.info_.startX,e):(this.steps_+=kn(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=ae("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(P.isLeftRoundedCorner((e=this.info_.topRow).elements[0])?this.steps_+=ae("V",this.outsideCornerPaths_.height):this.steps_+=ae("V",e.capline+this.highlightOffset_))}drawInlineInput(e){const n=this.highlightOffset_,i=e.xPos+e.connectionWidth;var a=e.centerline-e.height/2;const d=e.width-e.connectionWidth,_=a+n;this.RTL_?(a=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=kn(i-n,_)+ae("v",a)+this.puzzleTabPaths_.pathDown(this.RTL_)+ae("v",e)+ae("h",d)):this.inlineSteps_+=kn(e.xPos+e.width+n,_)+ae("v",e.height)+ae("h",-d)+kn(i,a+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},Zp=class extends Ta{constructor(e,n){super(e,n),this.highlighter_=new p_(n)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const e=this.block_.pathObject;if(e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),ai()){let n,i;null==(n=this.block_)||null==(i=n.renderingDebugger)||i.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=ae("H",e.xPos+e.width)+ae("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){if(e.connectionModel){let i=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,e.centerline-e.height/2+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(null!=n&&n.connectionModel){let i=e.xPos+e.statementEdge+n.notchOffset;i=this.info_.RTL?-1*i:i+this.constants_.DARK_PATH_OFFSET,n.connectionModel.setOffsetInBlock(i,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let i=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),n.connectionModel.setOffsetInBlock(i,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,i=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-i:i)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},Aa=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=rt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,i=(1-Math.SQRT1_2)*(e+n)-n,a=rt(i,i)+$t("a","0 0,0",e,Ie(-i-n,e-i)),d=$t("a","0 0,0",e+n,Ie(e+n,e+n)),_=rt(i,-i)+$t("a","0 0,0",e+n,Ie(e-i,i+n));return{width:e+n,height:e,pathTop:R=>R?a:"",pathBottom:R=>R?d:_}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,i=(1-Math.SQRT1_2)*(e-n)+n,a=rt(i,i)+$t("a","0 0,1",e-n,Ie(e-i,-i+n)),d=rt(n,e)+$t("a","0 0,1",e-n,Ie(e,-e+n)),_=-i,R=rt(i,_)+$t("a","0 0,1",e-n,Ie(-i+n,-_-e));return{height:e,topLeft:L=>L?a:d,bottomLeft:()=>R}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,i=rt(-2,3.4-n)+oi(-.45*e,-2.1),a=ae("v",2.5)+rt(.97*-e,2.5)+Cr("q",[Ie(.05*-e,10),Ie(.3*e,9.5)])+rt(.67*e,-1.9)+ae("v",2.5),d=ae("v",-1.5)+rt(-.92*e,-.5)+Cr("q",[Ie(-.19*e,-5.5),Ie(0,-11)])+rt(.92*e,1),_=rt(-5,n-.7)+oi(.46*e,-2.1);return{width:e,height:n,pathUp:R=>R?i:d,pathDown:R=>R?a:_}}makeNotch(){return{pathLeft:ae("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:oi(5.1,2.6)+rt(-10.2,6.8)+oi(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,n=rt(25,-8.7)+Cr("c",[Ie(29.7,-6.2),Ie(57.2,-.5),Ie(75,8.7)]),i=Cr("c",[Ie(17.8,-9.2),Ie(45.3,-14.9),Ie(75,-8.7)])+kn(100.5,e+.5);return{path:a=>a?n:i}}},g_=class extends Fd{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},Qp=class extends Ea{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},f_=class extends ba{constructor(e,n){super(e,n),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===Ue.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,n){this.isInline&&e.type===Ue.VALUE?(n.elements.push(new g_(this.constants_,e)),n.hasInlineInput=!0):e.type===Ue.STATEMENT?(n.elements.push(new Qp(this.constants_,e)),n.hasStatement=!0):e.type===Ue.VALUE?(n.elements.push(new hl(this.constants_,e)),n.hasExternalInput=!0):e.type===Ue.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!==n.align||(n.align=e.align)}addElemSpacing_(){let e=!1;for(let a,i=0;a=this.rows[i];i++)a.hasExternalInput&&(e=!0);for(let a,i=0;a=this.rows[i];i++){var n=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new _r(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let d=0;d<n.length-1;d++){a.elements.push(n[d]);const _=this.getInRowSpacing_(n[d],n[d+1]);a.elements.push(new _r(this.constants_,_))}a.elements.push(n[n.length-1]),a.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&a.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),a.elements.push(new _r(this.constants_,n)))}}}getInRowSpacing_(e,n){if(!e)return n&&P.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&P.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&P.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!P.isInput(e)&&(!n||P.isStatementInput(n)))return P.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:P.isIcon(e)?2*this.constants_.LARGE_PADDING+1:P.isHat(e)?this.constants_.NO_PADDING:P.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:P.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:P.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(P.isInput(e)&&!n){if(P.isExternalInput(e))return this.constants_.NO_PADDING;if(P.isInlineInput(e))return this.constants_.LARGE_PADDING;if(P.isStatementInput(e))return this.constants_.NO_PADDING}if(!P.isInput(e)&&n&&P.isInput(n)){if(P.isField(e)&&e.isEditable){if(P.isInlineInput(n)||P.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(P.isInlineInput(n)||P.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(P.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(P.isIcon(e)&&n&&!P.isInput(n))return this.constants_.LARGE_PADDING;if(P.isInlineInput(e)&&n&&P.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(P.isLeftSquareCorner(e)&&n){if(P.isHat(n))return this.constants_.NO_PADDING;if(P.isPreviousConnection(n))return n.notchOffset;if(P.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(P.isLeftRoundedCorner(e)&&n){if(P.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(P.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return P.isField(e)&&n&&P.isField(n)&&e.isEditable===n.isEditable||n&&P.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return P.isTopRow(e)&&P.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:P.isTopRow(e)||P.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(P.isSpacer(n))return e.yPos+n.height/2;if(P.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,P.isNextConnection(n)?e+n.height/2:e-n.height/2;if(P.isTopRow(e))return P.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let i=e.yPos;return P.isField(n)||P.isIcon(n)?(i+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(i+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):i=P.isInlineInput(n)?i+n.height/2:i+e.height/2,i}alignRowElements_(){if(this.isInline){var e=0,n=new WeakMap,i=null;for(let d,a=this.rows.length-1;d=this.rows[a];a--)n.set(d,e),P.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),i&&i.hasStatement&&d.width<i.width?n.set(d,i.width):e=d.width,i=d);e=0;for(let d,a=0;d=this.rows[a];a++)d.hasStatement?e=this.getDesiredRowWidth_(d):P.isSpacer(d)?d.width=Math.max(e,n.get(d)):(i=d.width,0<(e=Math.max(e,n.get(d))-i)&&this.addAlignmentPadding_(d,e),e=d.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,n=0;for(let d,a=0;d=this.rows[a];a++){d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var i=n-this.topRow.ascenderHeight;d===this.bottomRow&&i<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=i=this.constants_.MIN_BLOCK_HEIGHT-i,n+=i),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(i=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,i.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},__=class extends va{constructor(e,n,i){super(e,n,i),this.constants=i,this.colourDark="#000000",this.svgPathDark=k(B.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=k(B.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=nr("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},eg=class extends pl{constructor(e){super(e),this.highlightConstants_=null}init(e,n){super.init(e,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom(e,n){super.refreshDom(e,n),this.getHighlightConstants().init()}makeConstants_(){return new Xd}makeRenderInfo_(e){return new f_(this,e)}makeDrawer_(e,n){return new Zp(e,n)}makePathObject(e,n){return new __(e,n,this.getConstants())}makeHighlightConstants_(){return new Aa(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};Vi("geras",eg);var ls={};ls.ConstantProvider=Xd,ls.Drawer=Zp,ls.HighlightConstantProvider=Aa,ls.Highlighter=p_,ls.InlineInput=g_,ls.PathObject=__,ls.RenderInfo=f_,ls.Renderer=eg,ls.StatementInput=Qp;var tg=class{constructor(e){this.container=e,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=k(B.SVG,{xmlns:Sc,"xmlns:html":ws,"xmlns:xlink":zo,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface(e,n){e=Math.round(e),n=Math.round(n),this.SVG.style.display="block",br(this.SVG,"translate3d("+e+"px, "+n+"px, 0)")}getSurfaceTranslation(){return yo(this.SVG)}clearAndHide(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const n=this.SVG.childNodes[0],i=this.SVG.childNodes[1];if(!n||!i||!n.classList.contains("blocklyBlockCanvas")&&i.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!==this.previousSibling?Xe(n,this.previousSibling):e.insertBefore(n,e.firstChild),Xe(i,n),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");br(this.SVG,""),this.previousSibling=null}setContentsAndShow(e,n,i,a,d,_){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=i,e.setAttribute("transform","translate(0, 0) scale("+_+")"),n.setAttribute("transform","translate(0, 0) scale("+_+")"),this.SVG.setAttribute("width",String(a)),this.SVG.setAttribute("height",String(d)),this.SVG.appendChild(e),this.SVG.appendChild(n),this.SVG.style.display="block"}},ng=class{constructor(e){this.container=e,this.scale=1,this.surfaceXY=new re(0,0),this.childSurfaceXY=new re(0,0),this.svg=k(B.SVG,{xmlns:Sc,"xmlns:html":ws,"xmlns:xlink":zo,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup=k(B.G,{},this.svg)}createDom(){Z("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow(e){if(this.dragGroup.childNodes.length)throw Error("Already dragging a block.");this.dragGroup.appendChild(e),this.svg.style.display="block",this.surfaceXY=new re(0,0)}translateAndScaleGroup(e,n,i){this.scale=i,e=Math.round(e),n=Math.round(n),this.childSurfaceXY.x=e,this.childSurfaceXY.y=n,this.dragGroup.setAttribute("transform","translate("+e+","+n+") scale("+i+")")}translateSurfaceInternal_(){const e=Math.round(this.surfaceXY.x),n=Math.round(this.surfaceXY.y);this.svg.style.display="block",br(this.svg,"translate3d("+e+"px, "+n+"px, 0)")}translateBy(e,n){this.surfaceXY=new re(this.surfaceXY.x+e,this.surfaceXY.y+n),this.translateSurfaceInternal_()}translateSurface(e,n){this.surfaceXY=new re(e*this.scale,n*this.scale),this.translateSurfaceInternal_()}getSurfaceTranslation(){const e=yo(this.svg);return new re(e.x/this.scale,e.y/this.scale)}getGroup(){return this.dragGroup}getSvgRoot(){return this.svg}getCurrentBlock(){return this.dragGroup.firstChild}getWsTranslation(){return this.childSurfaceXY.clone()}clearAndHide(e){const n=this.getCurrentBlock();if(n&&(e?e.appendChild(n):this.dragGroup.removeChild(n)),this.svg.style.display="none",this.dragGroup.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY=new re(0,0)}},zd={};zd.bumpIntoBounds=jl,zd.bumpIntoBoundsHandler=km,zd.bumpTopObjectsIntoBounds=Wl;var Yd=class{constructor(e,n,i,a,d){this.workspace=e,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,i=void 0===i||i;const _=(n=void 0===n||n)&&i;n&&(this.hScroll=new Ht(e,!0,_,a,d)),i&&(this.vScroll=new Ht(e,!1,_,a,d)),_&&(this.corner_=k(B.RECT,{height:Ht.scrollbarThickness,width:Ht.scrollbarThickness,class:"blocklyScrollbarBackground"}),Xe(this.corner_,e.getBubbleCanvas()))}dispose(){ie(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var n=!1,i=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===e.viewWidth&&this.oldHostMetrics_.viewHeight===e.viewHeight&&this.oldHostMetrics_.absoluteTop===e.absoluteTop&&this.oldHostMetrics_.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===e.scrollWidth&&this.oldHostMetrics_.viewLeft===e.viewLeft&&this.oldHostMetrics_.scrollLeft===e.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===e.scrollHeight&&this.oldHostMetrics_.viewTop===e.viewTop&&this.oldHostMetrics_.scrollTop===e.scrollTop||(i=!0)):i=n=!0,n||i){try{Ft(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&i&&this.vScroll.resize(e)}finally{Gt()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft){let a;null==(a=this.corner_)||a.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteTop!==e.absoluteTop){let a;null==(a=this.corner_)||a.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,n){this.hScroll&&this.hScroll.setOrigin(e,n),this.vScroll&&this.vScroll.setOrigin(e,n)}set(e,n,i){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(n,!1),(i||void 0===i)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},oE=!1;h.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=sn());var n=[];this.init(e),e=e.getTopBlocks(!0);for(let a,i=0;a=e[i];i++){let d=this.blockToCode(a);Array.isArray(d)&&(d=d[0]),d&&(a.outputConnection&&(d=this.scrubNakedValue(d),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(d=this.injectId(this.STATEMENT_PREFIX,a)+d),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(d+=this.injectId(this.STATEMENT_SUFFIX,a))),n.push(d))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")}prefixLines(e,n){return n+e.replace(/(?!\n$)\n/g,"\n"+n)}allNestedComments(e){const n=[];e=e.getDescendants(!0);for(let i=0;i<e.length;i++){const a=e[i].getCommentText();a&&n.push(a)}return n.length&&n.push(""),n.join("\n")}blockToCode(e,n){if(!1===this.isInitialized&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return n?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return n?"":this.blockToCode(e.getChildren(!1)[0]);var i=this[e.type];if("function"!=typeof i)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+e.type+'".');if(i=i.call(e,e),Array.isArray(i)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,i[0],n),i[1]]}if("string"==typeof i)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(i=this.injectId(this.STATEMENT_PREFIX,e)+i),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(i+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,i,n);if(null===i)return"";throw SyntaxError("Invalid code generated: "+i)}valueToCode(e,n,i){if(isNaN(i))throw TypeError("Expecting valid order from block: "+e.type);var a=e.getInputTargetBlock(n);if(!a||""===(n=this.blockToCode(a)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+a.type);if(e=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+a.type);if(!e)return"";a=!1;var d=Math.floor(i);const _=Math.floor(n);if(d<=_&&(d!==_||0!==d&&99!==d))for(a=!0,d=0;d<this.ORDER_OVERRIDES.length;d++)if(this.ORDER_OVERRIDES[d][0]===i&&this.ORDER_OVERRIDES[d][1]===n){a=!1;break}return a&&(e="("+e+")"),e}statementToCode(e,n){if(e=e.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return n&&(n=this.prefixLines(n,this.INDENT)),n}addLoopTrap(e,n){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),e}injectId(e,n){return n=n.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+n+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,n){if(!this.definitions_[e]){const i=this.nameDB_.getDistinctName(e,h.NameType$$module$build$src$core$names.PROCEDURE);let a;for(this.functionNames_[e]=i,Array.isArray(n)&&(n=n.join("\n")),n=n.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,i);a!==n;)a=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,n,i){return n}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},Object.defineProperties(h.CodeGenerator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return Z("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set(e){Z("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=e}}});var ka=class{constructor(e,n,i,a){this.workspace=e,this.targetWorkspace=n,this.isLabel_=a,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=i.text,this.position_=new re(0,0),this.callbackKey_=i.callbackKey||i.callbackkey,this.cssClass_=i["web-class"]||null,this.info=i}createDom(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";let n;this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=k(B.G,{class:e},this.workspace.getCanvas()),this.isLabel_||(n=k(B.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),e=k(B.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const i=k(B.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var a=Lt(this.text_);this.workspace.RTL&&(a+="\u200f"),i.textContent=a,this.isLabel_&&(this.svgText_=i,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const d=Go(i,"fontSize"),_=Go(i,"fontWeight"),R=Go(i,"fontFamily");if(this.width=ds(i,d,_,R),a=En(a,d,_,R),this.height=a.height,!this.isLabel_){let L,z;this.width+=2*ka.TEXT_MARGIN_X,this.height+=2*ka.TEXT_MARGIN_Y,null==(L=n)||L.setAttribute("width",this.width.toString()),null==(z=n)||z.setAttribute("height",this.height.toString())}return e.setAttribute("width",this.width.toString()),e.setAttribute("height",this.height.toString()),i.setAttribute("x",(this.width/2).toString()),i.setAttribute("y",(this.height/2-a.height/2+a.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=ue(this.svgGroup_,"pointerup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo(e,n){this.position_.x=e,this.position_.y=n,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&ve(this.onMouseUpWrapper_),this.svgGroup_&&ie(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||(e=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};ka.TEXT_MARGIN_X=5,ka.TEXT_MARGIN_Y=2,Ut("\n.blocklyFlyoutButton {\n  fill: #888;\n  cursor: default;\n}\n\n.blocklyFlyoutButtonShadow {\n  fill: #666;\n}\n\n.blocklyFlyoutButton:hover {\n  fill: #aaa;\n}\n\n.blocklyFlyoutLabel {\n  cursor: default;\n}\n\n.blocklyFlyoutLabelBackground {\n  opacity: 0;\n}\n");var Kd=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let n=0,i=0;return e&&(n=e.getWidth(),i=e.getHeight()),new Nn(n,i)}getFlyoutMetrics(e){return{width:(e=this.getDimensionsPx_(this.workspace_.getFlyout(e))).width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0;const n=this.getToolboxMetrics(),i=this.getFlyoutMetrics(!0),a=!!this.workspace_.getToolbox(),d=!!this.workspace_.getFlyout(!0);var _=a?n.position:i.position,R=_===Pe.LEFT;return _=_===Pe.TOP,a&&R?e=n.width:d&&R&&(e=i.width),R=0,a&&_?R=n.height:d&&_&&(R=i.height),{top:R,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const n=this.getSvgMetrics(),i=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),d=this.workspace_.getToolbox()?i.position:a.position;return this.workspace_.getToolbox()?d===Pe.TOP||d===Pe.BOTTOM?n.height-=i.height:(d===Pe.LEFT||d===Pe.RIGHT)&&(n.width-=i.width):this.workspace_.getFlyout(!0)&&(d===Pe.TOP||d===Pe.BOTTOM?n.height-=a.height:(d===Pe.LEFT||d===Pe.RIGHT)&&(n.width-=a.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*e,width:(n.right-n.left)*e,top:n.top*e,left:n.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const n=this.workspace_.isMovableHorizontally(),i=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const a={};return i||(a.top=e.top,a.bottom=e.top+e.height),n||(a.left=e.left,a.right=e.left+e.width),a}getPaddedContent_(e,n){const i=n.top+n.height,a=n.left+n.width,d=e.width,_=d/2,R=(e=e.height)/2;return{top:Math.min(n.top-R,i-e),bottom:Math.max(i+R,n.top+e),left:Math.min(n.left-_,a-d),right:Math.max(a+_,n.left+d)}}getScrollMetrics(e,n,i){e=e?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var a=i||this.getContentMetrics();i=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,a);const d=void 0!==i.left?i.left:n.left;return{top:(a=void 0!==i.top?i.top:n.top)/e,left:d/e,width:((void 0!==i.right?i.right:n.right)-d)/e,height:((void 0!==i.bottom?i.bottom:n.bottom)-a)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),i=this.getSvgMetrics(),a=this.getAbsoluteMetrics(),d=this.getViewMetrics(),_=this.getContentMetrics(),R=this.getScrollMetrics(!1,d,_);return{contentHeight:_.height,contentWidth:_.width,contentTop:_.top,contentLeft:_.left,scrollHeight:R.height,scrollWidth:R.width,scrollTop:R.top,scrollLeft:R.left,viewHeight:d.height,viewWidth:d.width,viewTop:d.top,viewLeft:d.left,absoluteTop:a.top,absoluteLeft:a.left,svgHeight:i.height,svgWidth:i.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:n.width,flyoutHeight:n.height}}};Le(ee.METRICS_MANAGER,Ds,Kd);var $_=class extends Kd{constructor(e,n){super(e),this.flyout_=n}getBoundingBox_(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const n=this.getBoundingBox_();return{height:n.height*(e=e?1:this.workspace_.scale),width:n.width*e,top:n.y*e,left:n.x*e}}getScrollMetrics(e,n,i){return{height:((n=i||this.getContentMetrics()).height+2*(i=this.flyout_.MARGIN*this.workspace_.scale))/(e=e?this.workspace_.scale:1),width:(n.width+n.left+i)/e,top:0,left:0}}},Ma=(()=>(function(e){e.BLOCK="block",e.BUTTON="button"}(Ma||(Ma={})),Ma))(),pu=class extends kp{constructor(e){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Ar(e),this.workspace_.setMetricsManager(new $_(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=lo(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=k(e,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=k(B.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Yd(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,ue(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,ue(this.svgBackground_,"pointerdown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[Pn.Capability.DELETE_AREA,Pn.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),ve(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(ie(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(e){const n=e!==this.isVisible();this.isVisible_=e,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible(e){const n=e!==this.containerVisible_;this.containerVisible_=e,n&&this.updateDisplay_()}updateDisplay_(){let e,n;e=!!this.containerVisible_&&this.isVisible(),this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none"),null==(n=this.workspace_.scrollbar)||n.setContainerVisible(e)}positionAt_(e,n,i,a){let d,_,R;if(null==(d=this.svgGroup_)||d.setAttribute("width",e.toString()),null==(_=this.svgGroup_)||_.setAttribute("height",n.toString()),this.workspace_.setCachedParentSvgSize(e,n),"svg"===(null==(R=this.svgGroup_)?void 0:R.tagName))br(this.svgGroup_,"translate("+i+"px,"+a+"px)");else{let L;null==(L=this.svgGroup_)||L.setAttribute("transform","translate("+i+","+a+")")}(e=this.workspace_.scrollbar)&&(e.setOrigin(i,a),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let n,e=0;n=this.listeners_[e];e++)ve(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=Vu(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(ue(this.svgBackground_,"pointerover",this,function(){const n=this.workspace_.getTopBlocks(!1);for(let a,i=0;a=n[i];i++)a.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_(e){const n=[],i=[];this.permanentlyDisabled_.length=0;const a=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let R,_=0;R=e[_];_++){if("custom"in R){var d=this.getDynamicCategoryContents_(R.custom);d=Vu(d),e.splice.apply(e,[_,1,...d]),R=e[_]}switch(R.kind.toUpperCase()){case"BLOCK":const L=this.createFlyoutBlock_(d=R);n.push({type:Ma.BLOCK,block:L}),this.addBlockGap_(d,i,a);break;case"SEP":this.addSeparatorGap_(R,i,a);break;case"LABEL":d=this.createButton_(R,!0),n.push({type:Ma.BUTTON,button:d}),i.push(a);break;case"BUTTON":d=this.createButton_(R,!1),n.push({type:Ma.BUTTON,button:d}),i.push(a)}}return{contents:n,gaps:i}}getDynamicCategoryContents_(e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton_(e,n){return new ka(this.workspace_,this.targetWorkspace,e,n)}createFlyoutBlock_(e){let n;return e.blockxml?(e="string"==typeof e.blockxml?qn(e.blockxml):e.blockxml,(n=this.getRecycledBlock_(e.getAttribute("type")))||(n=An(e,this.workspace_))):(n=this.getRecycledBlock_(e.type),n||(void 0===e.enabled&&(e.enabled="true"!==e.disabled&&!0!==e.disabled),n=ri(e,this.workspace_))),n.isEnabled()||this.permanentlyDisabled_.push(n),n}getRecycledBlock_(e){let n=-1;for(let i=0;i<this.recycledBlocks_.length;i++)if(this.recycledBlocks_[i].type===e){n=i;break}return-1===n?void 0:this.recycledBlocks_.splice(n,1)[0]}addBlockGap_(e,n,i){let a;e.gap?a=parseInt(e.gap.toString()):e.blockxml&&(e="string"==typeof e.blockxml?qn(e.blockxml):e.blockxml,a=parseInt(e.getAttribute("gap"))),n.push(!a||isNaN(a)?i:a)}addSeparatorGap_(e,n,i){e=parseInt(e.gap.toString()),!isNaN(e)&&0<n.length?n[n.length-1]=e:n.push(i)}clearOldBlocks_(){var e=this.workspace_.getTopBlocks(!1);for(let a,i=0;a=e[i];i++)this.blockIsRecyclable_(a)?this.recycleBlock_(a):a.dispose(!1,!1);for(e=0;e<this.mats_.length;e++){const i=this.mats_[e];i&&(Tn(i),ie(i))}this.mats_.length=0;for(let a,i=0;a=this.buttons_[i];i++)a.dispose();let n;this.buttons_.length=0,null==(n=this.workspace_.getPotentialVariableMap())||n.clear()}emptyRecycledBlocks_(){for(let e=0;e<this.recycledBlocks_.length;e++)this.recycledBlocks_[e].dispose();this.recycledBlocks_=[]}blockIsRecyclable_(e){return!1}recycleBlock_(e){const n=e.getRelativeToSurfaceXY();e.moveBy(-n.x,-n.y),this.recycledBlocks_.push(e)}addBlockListeners_(e,n,i){this.listeners_.push(ue(e,"pointerdown",null,this.blockMouseDown_(n))),this.listeners_.push(ue(i,"pointerdown",null,this.blockMouseDown_(n))),this.listeners_.push(ot(e,"pointerenter",n,n.addSelect)),this.listeners_.push(ot(e,"pointerleave",n,n.removeSelect)),this.listeners_.push(ot(i,"pointerenter",n,n.addSelect)),this.listeners_.push(ot(i,"pointerleave",n,n.removeSelect))}blockMouseDown_(e){return n=>{const i=this.targetWorkspace.getGesture(n);i&&(i.setStartBlock(e),i.handleFlyoutStart(n,this))}}onMouseDown_(e){const n=this.targetWorkspace.getGesture(e);n&&n.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let n=null;Ft();var i=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(e)}finally{Gt()}if(this.targetWorkspace.hideChaff(),e=vh(this.targetWorkspace,i),zt()){for(de(!0),i=0;i<e.length;i++){const a=e[i];me(new(Te(Os))(a))}me(new(Te(On))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n}initFlyoutButton_(e,n,i){const a=e.createDom();e.moveTo(n,i),e.show(),this.listeners_.push(ue(a,"pointerdown",this,this.onMouseDown_)),this.buttons_.push(e)}createRect_(e,n,i,a,d){return(n=k(B.RECT,{"fill-opacity":0,x:n,y:i,height:a.height,width:a.width})).tooltip=e,Rn(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),this.rectMap_.set(e,n),this.mats_[d]=n}moveRectToBlock_(e,n){const i=n.getHeightWidth();e.setAttribute("width",i.width.toString()),e.setAttribute("height",i.height.toString()),n=n.getRelativeToSurfaceXY(),e.setAttribute("y",n.y.toString()),e.setAttribute("x",(this.RTL?n.x-i.width:n.x).toString())}filterForCapacity_(){const e=this.workspace_.getTopBlocks(!1);for(let i,n=0;i=e[n];n++)if(-1===this.permanentlyDisabled_.indexOf(i)){const a=this.targetWorkspace.isCapacityAvailable(Dt(i));for(;i;)i.setEnabled(a),i=i.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()}placeNewBlock_(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");const i=K(e);return n.setResizesEnabled(!1),n=ri(i,n),this.positionNewBlock_(e,n),n}positionNewBlock_(e,n){const i=this.targetWorkspace;var a=i.getOriginOffsetInPixels(),d=this.workspace_.getOriginOffsetInPixels();(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),d=re.sum(d,e),(a=re.difference(d,a)).scale(1/i.scale),n.moveTo(new re(a.x,a.y))}};pu.FlyoutItemType=Ma;var vi=class extends pu{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),i=n.getScrollMetrics(),a=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof e.y&&(this.workspace_.scrollY=-(i.top+(i.height-a.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),i=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Pe.LEFT?e.width:i.width-this.width_:this.toolboxPosition_===Pe.LEFT?0:i.width:this.toolboxPosition_===Pe.LEFT?0:i.width+n.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}}setBackgroundPath_(e,n){const i=this.toolboxPosition_===Pe.RIGHT;var a=e+this.CORNER_RADIUS;(a=["M "+(i?a:0)+",0"]).push("h",i?-e:e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",Math.max(0,n)),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",i?e:-e),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;null==(e=this.workspace_.scrollbar)||e.setY(0)}wheel_(e){var n=Ws(e);if(n.y){const i=this.workspace_.getMetricsManager(),a=i.getScrollMetrics();let d;n=i.getViewMetrics().top-a.top+n.y,null==(d=this.workspace_.scrollbar)||d.setY(n),Co(),cn()}e.preventDefault(),e.stopPropagation()}layout_(e,n){this.workspace_.scale=this.targetWorkspace.scale;var i=this.MARGIN;const a=this.RTL?i:i+this.tabWidth_;for(let z,L=0;z=e[L];L++)if("block"===z.type){var d=z.block,_=d.getDescendants(!1);for(let jt,nt=0;jt=_[nt];nt++)jt.isInFlyout=!0;d.render(),_=d.getSvgRoot();const se=d.getHeightWidth();var R=d.outputConnection?a-this.tabWidth_:a;d.moveBy(R,i),R=this.createRect_(d,this.RTL?R-se.width:R,i,se,L),this.addBlockListeners_(_,d,R),i+=se.height+n[L]}else"button"===z.type&&(this.initFlyoutButton_(d=z.button,a,i),i+=d.height+n[L])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<n&&e>-n||e<-180+n||e>180-n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_===Pe.LEFT?new on(-1e9,1e9,-1e9,n+e.width):new on(-1e9,1e9,n,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var n=this.workspace_.getTopBlocks(!1);for(let d,a=0;d=n[a];a++){var i=d.getHeightWidth().width;d.outputConnection&&(i-=this.tabWidth_),e=Math.max(e,i)}for(let d,a=0;d=this.buttons_[a];a++)e=Math.max(e,d.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=Ht.scrollbarThickness,this.width_!==e){for(let d,a=0;d=n[a];a++){if(this.RTL){i=d.getRelativeToSurfaceXY().x;let _=e/this.workspace_.scale-this.MARGIN;d.outputConnection||(_-=this.tabWidth_),d.moveBy(_-i,0)}this.rectMap_.has(d)&&this.moveRectToBlock_(this.rectMap_.get(d),d)}if(this.RTL)for(let d,a=0;d=this.buttons_[a];a++)n=d.getPosition().y,d.moveTo(e/this.workspace_.scale-d.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Pe.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.recordDragTargets()}}};vi.registryName="verticalFlyout",Le(ee.FLYOUTS_VERTICAL_TOOLBOX,Ds,vi);var E_=class extends pu{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),i=n.getScrollMetrics(),a=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof e.x&&(this.workspace_.scrollX=-(i.left+(i.width-a.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),i=e.getViewMetrics();e=e.getToolboxMetrics();const a=this.toolboxPosition_===Pe.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?a?e.height:i.height-this.height_:a?0:i.height:a?0:i.height+n.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath_(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}}setBackgroundPath_(e,n){const i=this.toolboxPosition_===Pe.TOP,a=["M 0,"+(i?0:this.CORNER_RADIUS)];i?(a.push("h",e+2*this.CORNER_RADIUS),a.push("v",n),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",-e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),a.push("h",e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",n),a.push("h",-e-2*this.CORNER_RADIUS)),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;null==(e=this.workspace_.scrollbar)||e.setX(this.RTL?1/0:0)}wheel_(e){var n=Ws(e);if(n=n.x||n.y){const i=this.workspace_.getMetricsManager(),a=i.getScrollMetrics();let d;n=i.getViewMetrics().left-a.left+n,null==(d=this.workspace_.scrollbar)||d.setX(n),Co(),cn()}e.preventDefault(),e.stopPropagation()}layout_(e,n){this.workspace_.scale=this.targetWorkspace.scale;const i=this.MARGIN;let a=i+this.tabWidth_;this.RTL&&(e=e.reverse());for(let z,L=0;z=e[L];L++)if("block"===z.type){var d=z.block,_=d.getDescendants(!1);for(let jt,nt=0;jt=_[nt];nt++)jt.isInFlyout=!0;d.render(),_=d.getSvgRoot();const se=d.getHeightWidth();var R=d.outputConnection?this.tabWidth_:0;d.moveBy(R=this.RTL?a+se.width:a-R,i),R=this.createRect_(d,R,i,se,L),a+=se.width+n[L],this.addBlockListeners_(_,d,R)}else"button"===z.type&&(this.initFlyoutButton_(d=z.button,a,i),a+=d.width+n[L])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<90+n&&e>90-n||e>-90-n&&e<-90+n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_===Pe.TOP?new on(-1e9,n+e.height,-1e9,1e9):new on(n,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const n=this.workspace_.getTopBlocks(!1);for(let d,a=0;d=n[a];a++)e=Math.max(e,d.getHeightWidth().height);const i=this.buttons_;for(let d,a=0;d=i[a];a++)e=Math.max(e,d.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=Ht.scrollbarThickness,this.height_!==e){for(let d,a=0;d=n[a];a++)this.rectMap_.has(d)&&this.moveRectToBlock_(this.rectMap_.get(d),d);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Pe.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.recordDragTargets()}}};Le(ee.FLYOUTS_HORIZONTAL_TOOLBOX,Ds,E_);var gu=class extends Do{constructor(e,n,i,a,d){super(Ze.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=gu.dropdownCreate,this.defaultVariableName="string"==typeof e?e:"",this.size_=new Nn(0,0),e!==Ze.SKIP_SETUP&&(d?this.configure_(d):this.setTypes_(i,a),n&&this.setValidator(n))}configure_(e){super.configure_(e),this.setTypes_(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new _n;this.variable_||(e=tc(e.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new _n;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!==e.type)}fromXml(e){var n=this.getSourceBlock();if(!n)throw new _n;const i=e.getAttribute("id"),a=e.textContent,d=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=tc(n.workspace,i,a,d),null!==d&&d!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+co(e)+".");this.setValue(n.getId())}toXml(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e}saveState(e){var n=this.saveLegacyState(gu);return null!==n||(this.initModel(),n={id:this.variable_.getId()},e&&(n.name=this.variable_.name,n.type=this.variable_.type)),n}loadState(e){const n=this.getSourceBlock();if(!n)throw new _n;this.loadLegacyState(gu,e)||(e=tc(n.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_(e){if(null===e)return null;var n=this.getSourceBlock();if(!n)throw new _n;return(n=Pu(n.workspace,e))?this.typeIsAllowed_(n=n.type)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const n=this.getSourceBlock();if(!n)throw new _n;this.variable_=Pu(n.workspace,e),super.doValueUpdate_(e)}typeIsAllowed_(e){const n=this.getVariableTypes_();if(!n)return!0;for(let i=0;i<n.length;i++)if(e===n[i])return!0;return!1}getVariableTypes_(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(0===(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes_(e,n){if(n=n||"",null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");{let i=!1;for(let a=0;a<e.length;a++)e[a]===n&&(i=!0);if(!i)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}}this.defaultType_=n,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,n){if(e=n.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===Md)return void yr(this.sourceBlock_.workspace,this.variable_);if(e===He)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Lt(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let n=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var i=this.getVariableTypes_(),a=0;a<i.length;a++){const d=this.sourceBlock_.workspace.getVariablesOfType(i[a]);n=n.concat(d)}for(n.sort(el.compareByName),i=[],a=0;a<n.length;a++)i[a]=[n[a].name,n[a].getId()];return i.push([De.RENAME_VARIABLE,Md]),De.DELETE_VARIABLE&&i.push([De.DELETE_VARIABLE.replace("%1",e),He]),i}};to("field_variable",gu);var T_=class extends yi{constructor(e,n,i,a,d,_){super(Ze.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,this.spellcheck_=!1,e!==Ze.SKIP_SETUP&&(_?this.configure_(_):this.setConstraints(n,i,a),this.setValue(e),d&&this.setValidator(d))}configure_(e){super.configure_(e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)}setConstraints(e,n,i){this.setMinInternal_(e),this.setMaxInternal_(n),this.setPrecisionInternal_(i),this.setValue(this.getValue())}setMin(e){this.setMinInternal_(e),this.setValue(this.getValue())}setMinInternal_(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal_(e),this.setValue(this.getValue())}setMaxInternal_(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())}setPrecisionInternal_(e){this.precision_=Number(e)||0;let n=String(this.precision_);-1!==n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const i=n.indexOf(".");this.decimalPlaces_=-1===i?e?0:null:n.length-i-1}getPrecision(){return this.precision_}doClassValidation_(e){return null===e||(e=(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),null!==this.decimalPlaces_&&(e=Number(e.toFixed(this.decimalPlaces_))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&xt(e,kt.VALUEMIN,this.min_),1/0>this.max_&&xt(e,kt.VALUEMAX,this.max_),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};to("field_number",T_),T_.prototype.DEFAULT_VALUE=0;var Jd=class extends h.FieldTextInput$$module$build$src$core$field_textinput{constructor(e,n,i){super(Ze.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,e!==Ze.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.maxLines&&this.setMaxLines(e.maxLines)}toXml(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e}fromXml(e){this.setValue(e.textContent.replace(/&#10;/g,"\n"))}saveState(){const e=this.saveLegacyState(Jd);return null!==e?e:this.getValue()}loadState(e){this.loadLegacyState(Ze,e)||this.setValue(e)}initView(){this.createBorderRect_(),this.textGroup_=k(B.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const e=this.getSourceBlock();if(!e)throw new _n;let n=this.getText();if(!n)return Ze.NBSP;const i=n.split("\n");n="";const a=this.isOverflowedY_?this.maxLines_:i.length;for(let d=0;d<a;d++){let _=i[d];_.length>this.maxDisplayLength?_=_.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&d===a-1&&(_=_.substring(0,_.length-3)+"..."),_=_.replace(/\s/g,Ze.NBSP),n+=_,d!==a-1&&(n+="\n")}return e.RTL&&(n+="\u200f"),n}doValueUpdate_(e){super.doValueUpdate_(e),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_}render_(){var n,e=this.getSourceBlock();if(!e)throw new _n;for(;n=this.textGroup_.firstChild;)this.textGroup_.removeChild(n);n=this.getDisplayText_().split("\n");let i=0;for(let a=0;a<n.length;a++){const d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;k(B.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:i+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(n[a])),i+=d}this.isBeingEdited_&&(n=this.htmlInput_,this.isOverflowedY_?Q(n,"blocklyHtmlTextAreaInputOverflowedY"):ce(n,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(e.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(ce(e,"blocklyInvalidInput"),xt(e,kt.INVALID,!1)):(Q(e,"blocklyInvalidInput"),xt(e,kt.INVALID,!0)))}updateSize_(){var e=this.textGroup_.childNodes;const n=this.getConstants().FIELD_TEXT_FONTSIZE,i=this.getConstants().FIELD_TEXT_FONTWEIGHT,a=this.getConstants().FIELD_TEXT_FONTFAMILY;let d=0,_=0;for(var R=0;R<e.length;R++){var L=Bt(e[R],n,i,a);L>d&&(d=L),_+=this.getConstants().FIELD_TEXT_HEIGHT+(0<R?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(e=this.value_.split("\n"),R=k(B.TEXT,{class:"blocklyText blocklyMultilineText"}),L=0;L<e.length;L++){e[L].length>this.maxDisplayLength&&(e[L]=e[L].substring(0,this.maxDisplayLength)),R.textContent=e[L];const z=Bt(R,n,i,a);z>d&&(d=z)}d+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(_+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,d+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",d),this.borderRect_.setAttribute("height",_)),this.size_.width=d,this.size_.height=_,this.positionBorderRect_()}showEditor_(e,n){super.showEditor_(e,n),this.forceRerender()}widgetCreate_(){const e=Ui(),n=this.workspace_.getScale(),i=document.createElement("textarea");i.className="blocklyHtmlInput blocklyHtmlTextAreaInput",i.setAttribute("spellcheck",this.spellcheck_);var a=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";e.style.fontSize=a,i.style.fontSize=a,i.style.borderRadius=h.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*n+"px",a=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;const d=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return i.style.padding=d+"px "+a+"px "+d+"px "+a+"px",a=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,i.style.lineHeight=a*n+"px",e.appendChild(i),i.value=i.defaultValue=this.getEditorText_(this.value_),i.setAttribute("data-untyped-default-value",this.value_),i.setAttribute("data-old-value",""),af?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(i),i}setMaxLines(e){"number"==typeof e&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(e){e.keyCode!==$e.ENTER&&super.onHtmlInputKeyDown_(e)}static fromJson(e){return new this(Lt(e.text),void 0,e)}};Ut("\n.blocklyHtmlTextAreaInput {\n  font-family: monospace;\n  resize: none;\n  overflow: hidden;\n  height: 100%;\n  text-align: left;\n}\n\n.blocklyHtmlTextAreaInputOverflowedY {\n  overflow-y: scroll;\n}\n"),to("field_multilinetext",Jd);var b_=class extends h.FieldLabel$$module$build$src$core$field_label{constructor(e,n,i){super(String(e??""),n,i),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Lt(e.text),void 0,e)}};to("field_label_serializable",b_);var rn=class extends Ze{constructor(e,n,i){super(Ze.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,e!==Ze.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.colourOptions&&(this.colours_=e.colourOptions),e.colourTitles&&(this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)}initView(){this.size_=new Nn(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof ko&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof ko&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(e){return"string"!=typeof e?null:jo(e)}doValueUpdate_(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof ko&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e}setColours(e,n){return this.colours_=e,n&&(this.titles_=n),this}setColumns(e){return this.columns_=e,this}showEditor_(){this.dropdownCreate_(),Yn().appendChild(this.picker_),za(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_(e){null!==(e=(e=e.target)&&e.getAttribute("data-colour"))&&(this.setValue(e),Ur(this))}onKeyDown_(e){var n=!1;e.keyCode===$e.UP?(this.moveHighlightBy_(0,-1),n=!0):e.keyCode===$e.DOWN?(this.moveHighlightBy_(0,1),n=!0):e.keyCode===$e.LEFT?(this.moveHighlightBy_(-1,0),n=!0):e.keyCode===$e.RIGHT?(this.moveHighlightBy_(1,0),n=!0):e.keyCode===$e.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.getAttribute("data-colour"))&&this.setValue(n),cn(),n=!0),n&&e.stopPropagation()}moveHighlightBy_(e,n){if(this.highlightedIndex_){var i=this.colours_||rn.COLOURS,a=this.columns_||rn.COLUMNS,d=this.highlightedIndex_%a,_=Math.floor(this.highlightedIndex_/a);d+=e,_+=n,0>e?0>d&&0<_?(d=a-1,_--):0>d&&(d=0):0<e?d>a-1&&_<Math.floor(i.length/a)-1?(d=0,_++):d>a-1&&d--:0>n?0>_&&(_=0):0<n&&_>Math.floor(i.length/a)-1&&(_=Math.floor(i.length/a)-1),this.setHighlightedCell_(this.picker_.childNodes[_].childNodes[d],_*a+d)}}onMouseMove_(e){const n=(e=e.target)&&Number(e.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(e,n)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const e=this.getHighlighted_();e&&ce(e,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const e=this.columns_||rn.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return n?n.childNodes[this.highlightedIndex_%e]:null}setHighlightedCell_(e,n){const i=this.getHighlighted_();i&&ce(i,"blocklyColourHighlighted"),Q(e,"blocklyColourHighlighted"),this.highlightedIndex_=n,xt(this.picker_,kt.ACTIVEDESCENDANT,e.getAttribute("id"))}dropdownCreate_(){const e=this.columns_||rn.COLUMNS,n=this.colours_||rn.COLOURS,i=this.titles_||rn.TITLES,a=this.getValue(),d=document.createElement("table");let _;d.className="blocklyColourTable",d.tabIndex=0,d.dir="ltr",Xr(d,mo.GRID),xt(d,kt.EXPANDED,!0),xt(d,kt.ROWCOUNT,Math.floor(n.length/e)),xt(d,kt.COLCOUNT,e);for(let R=0;R<n.length;R++){R%e==0&&(_=document.createElement("tr"),Xr(_,mo.ROW),d.appendChild(_));const L=document.createElement("td");_.appendChild(L),L.setAttribute("data-colour",n[R]),L.title=i[R]||n[R],L.id=Kn(),L.setAttribute("data-index",R),Xr(L,mo.GRIDCELL),xt(L,kt.LABEL,n[R]),xt(L,kt.SELECTED,n[R]===a),L.style.backgroundColor=n[R],n[R]===a&&(L.className="blocklyColourSelected",this.highlightedIndex_=R)}this.onClickWrapper_=ue(d,"pointerdown",this,this.onClick_,!0),this.onMouseMoveWrapper_=ue(d,"pointermove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=ue(d,"pointerenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=ue(d,"pointerleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=ue(d,"keydown",this,this.onKeyDown_),this.picker_=d}dropdownDispose_(){this.onClickWrapper_&&(ve(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(ve(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(ve(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(ve(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(ve(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson(e){return new this(e.colour,void 0,e)}};rn.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),rn.TITLES=[],rn.COLUMNS=7,rn.prototype.DEFAULT_VALUE=rn.COLOURS[0],Ut("\n.blocklyColourTable {\n  border-collapse: collapse;\n  display: block;\n  outline: none;\n  padding: 1px;\n}\n\n.blocklyColourTable>tr>td {\n  border: .5px solid #888;\n  box-sizing: border-box;\n  cursor: pointer;\n  display: inline-block;\n  height: 20px;\n  padding: 0;\n  width: 20px;\n}\n\n.blocklyColourTable>tr>td.blocklyColourHighlighted {\n  border-color: #eee;\n  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);\n  position: relative;\n}\n\n.blocklyColourSelected, .blocklyColourSelected:hover {\n  border-color: #eee !important;\n  outline: 1px solid #333;\n  position: relative;\n}\n"),to("field_colour",rn),h.FieldCheckbox$$module$build$src$core$field_checkbox=class extends Ze{constructor(e,n,i){super(Ze.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=h.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,e!==Ze.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)}saveState(){const e=this.saveLegacyState(h.FieldCheckbox$$module$build$src$core$field_checkbox);return null!==e?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();Q(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter(e){this.checkChar_=e||h.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(e){return"string"==typeof e?"TRUE"===e:!!e}static fromJson(e){return new this(e.checked,void 0,e)}},h.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="\u2713",to("field_checkbox",h.FieldCheckbox$$module$build$src$core$field_checkbox),h.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1;var qe=class extends yi{constructor(e,n,i){super(Ze.SKIP_SETUP),this.clockwise_=qe.CLOCKWISE,this.offset_=qe.OFFSET,this.wrap_=qe.WRAP,this.round_=qe.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,e!==Ze.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){switch(super.configure_(e),e.mode){case Na.COMPASS:this.clockwise_=!0,this.offset_=90;break;case Na.PROTRACTOR:this.clockwise_=!1,this.offset_=0}e.clockwise&&(this.clockwise_=e.clockwise),e.offset&&(this.offset_=e.offset),e.wrap&&(this.wrap_=e.wrap),e.round&&(this.round_=e.round)}initView(){super.initView(),this.symbol_=k(B.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("\xb0")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_(e){super.showEditor_(e,Yl||tp||zi),this.dropdownCreate_(),Yn().appendChild(this.editor_),this.sourceBlock_ instanceof ko&&Du(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),za(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const e=k(B.SVG,{xmlns:Sc,"xmlns:html":ws,"xmlns:xlink":zo,version:"1.1",height:2*qe.HALF+"px",width:2*qe.HALF+"px",style:"touch-action: none"}),n=k(B.CIRCLE,{cx:qe.HALF,cy:qe.HALF,r:qe.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=k(B.PATH,{class:"blocklyAngleGauge"},e),this.line_=k(B.LINE,{x1:qe.HALF,y1:qe.HALF,class:"blocklyAngleLine"},e);for(let i=0;360>i;i+=15)k(B.LINE,{x1:qe.HALF+qe.RADIUS,y1:qe.HALF,x2:qe.HALF+qe.RADIUS-(i%45==0?10:5),y2:qe.HALF,class:"blocklyAngleMarks",transform:"rotate("+i+","+qe.HALF+","+qe.HALF+")"},e);this.clickWrapper_=ue(e,"click",this,this.hide_),this.clickSurfaceWrapper_=ue(n,"pointerdown",this,this.onMouseMove_,!0),this.moveSurfaceWrapper_=ue(n,"pointermove",this,this.onMouseMove_,!0),this.editor_=e}dropdownDispose_(){this.clickWrapper_&&(ve(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(ve(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(ve(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){Ur(this),Co()}onMouseMove_(e){var n=this.gauge_.ownerSVGElement.getBoundingClientRect();const i=e.clientX-n.left-qe.HALF;e=e.clientY-n.top-qe.HALF,n=Math.atan(-e/i),isNaN(n)||(n=Iu(n),0>i?n+=180:0<e&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))}displayMouseOrKeyboardValue_(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),(e=this.wrapValue_(e))!==this.value_&&this.setEditorValue_(e)}updateGraph_(){if(this.gauge_){var e=Number(this.getText())+this.offset_,n=Wt(e%360);e=["M ",qe.HALF,",",qe.HALF];var i=qe.HALF,a=qe.HALF;if(!isNaN(n)){const d=Number(this.clockwise_),_=Wt(this.offset_),R=Math.cos(_)*qe.RADIUS,L=Math.sin(_)*-qe.RADIUS;d&&(n=2*_-n),i+=Math.cos(n)*qe.RADIUS,a-=Math.sin(n)*qe.RADIUS,n=Math.abs(Math.floor((n-_)/Math.PI)%2),d&&(n=1-n),e.push(" l ",R,",",L," A ",qe.RADIUS,",",qe.RADIUS," 0 ",n," ",d," ",i,",",a," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",i),this.line_.setAttribute("y2",a)}}onHtmlInputKeyDown_(e){super.onHtmlInputKeyDown_(e);var n=this.getSourceBlock();if(!n)throw new _n;let i;e.keyCode===$e.LEFT?i=n.RTL?1:-1:e.keyCode===$e.RIGHT?i=n.RTL?-1:1:e.keyCode===$e.DOWN?i=-1:e.keyCode===$e.UP&&(i=1),i&&(n=this.getValue(),this.displayMouseOrKeyboardValue_(n+i*this.round_),e.preventDefault(),e.stopPropagation())}doClassValidation_(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)}wrapValue_(e){return 0>(e%=360)&&(e+=360),e>this.wrap_&&(e-=360),e}static fromJson(e){return new this(e.angle,void 0,e)}};qe.ROUND=15,qe.HALF=50,qe.CLOCKWISE=!1,qe.OFFSET=0,qe.WRAP=360,qe.RADIUS=qe.HALF-1,Ut("\n.blocklyAngleCircle {\n  stroke: #444;\n  stroke-width: 1;\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyAngleMarks {\n  stroke: #444;\n  stroke-width: 1;\n}\n\n.blocklyAngleGauge {\n  fill: #f88;\n  fill-opacity: .8;\n  pointer-events: none;\n}\n\n.blocklyAngleLine {\n  stroke: #f00;\n  stroke-width: 2;\n  stroke-linecap: round;\n  pointer-events: none;\n}\n"),to("field_angle",qe),qe.prototype.DEFAULT_VALUE=0;var Na=(()=>(function(e){e.COMPASS="compass",e.PROTRACTOR="protractor"}(Na||(Na={})),Na))(),uE={};uE.FieldAngle=qe,uE.Mode=Na;var og=class extends ia{constructor(e){super(e),this.type=Hn,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){if(Z("Blockly.Events.BlockMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldParentId=e.oldParentId,this.oldInputName=e.oldInputName,e.oldCoordinate){var n=e.oldCoordinate.split(",");this.oldCoordinate=new re(Number(n[0]),Number(n[1]))}this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate&&(n=e.newCoordinate.split(","),this.newCoordinate=new re(Number(n[0]),Number(n[1]))),void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new og)).oldParentId=e.oldParentId,n.oldInputName=e.oldInputName,e.oldCoordinate&&(i=e.oldCoordinate.split(","),n.oldCoordinate=new re(Number(i[0]),Number(i[1]))),n.newParentId=e.newParentId,n.newInputName=e.newInputName,e.newCoordinate&&(i=e.newCoordinate.split(","),n.newCoordinate=new re(Number(i[0]),Number(i[1]))),void 0!==e.recordUndo&&(n.recordUndo=e.recordUndo),n}recordNew(){const e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}currentLocation_(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=e.getBlockById(this.blockId);if(!n)throw Error("The block associated with the block move event could not be found");e={};const i=n.getParent();return i?(e.parentId=i.id,(n=i.getInputWithBlock(n))&&(e.inputName=n.name)):e.coordinate=n.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&re.equals(this.oldCoordinate,this.newCoordinate)}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var i=n.getBlockById(this.blockId);if(i){var a=e?this.newParentId:this.oldParentId,d=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,a){var _=n.getBlockById(a);if(!_)return void console.warn("Can't connect to non-existent block: "+a)}if(i.getParent()&&i.unplug(),e)d=i.getRelativeToSurfaceXY(),i.moveBy(e.x-d.x,e.y-d.y);else{let R;(!(n=i.outputConnection)||i.previousConnection&&i.previousConnection.isConnected())&&(n=i.previousConnection),i=n.type,d?(i=_.getInput(d))&&(R=i.connection):i===he.PREVIOUS_STATEMENT&&(R=_.nextConnection),R?n.connect(R):console.warn("Can't connect to non-existent input: "+d)}}else console.warn("Can't move non-existent block: "+this.blockId)}};Le(ee.EVENT,Hn,og);var Ii=class extends ks{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=yt(),this.recordUndo=un())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}fromJson(e){Z("Blockly.Events.CommentBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.commentId=e.commentId}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new Ii)).commentId=e.commentId,n}static CommentCreateDeleteHelper(e,n){var i=e.getEventWorkspace_();if(n){if(n=be("xml"),!e.xml)throw Error("Ecountered a comment event without proper xml");n.appendChild(e.xml),Vo(n,i)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(i=i.getCommentById(e.commentId))?i.dispose():console.warn("Can't uncreate non-existent comment: "+e.commentId)}}},yl=class extends Ii{constructor(e,n,i){super(e),this.type=Nc,e&&(this.oldContents_=typeof n>"u"?"":n,this.newContents_=typeof i>"u"?"":i)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}fromJson(e){Z("Blockly.Events.CommentChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldContents_=e.oldContents,this.newContents_=e.newContents}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new yl)).oldContents_=e.oldContents,n.newContents_=e.newContents,n}isNull(){return this.oldContents_===this.newContents_}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){var i=e?this.newContents_:this.oldContents_;if(!i)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");n.setContent(i)}else console.warn("Can't change non-existent comment: "+this.commentId)}};Le(ee.EVENT,Nc,yl);var qd=class extends Ii{constructor(e){super(e),this.type=As,e&&(this.xml=e.toXmlWithXY())}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=co(this.xml),e}fromJson(e){Z("Blockly.Events.CommentCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.xml=qn(e.xml)}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new qd)).xml=qn(e.xml),n}run(e){Ii.CommentCreateDeleteHelper(this,e)}};Le(ee.EVENT,As,qd);var Zd=class extends Ii{constructor(e){super(e),this.type=Qi,e&&(this.xml=e.toXmlWithXY())}run(e){Ii.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=co(this.xml),e}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new Zd)).xml=qn(e.xml),n}};Le(ee.EVENT,Qi,Zd);var La=class extends Ii{constructor(e){super(e),this.type=Sr,e&&(this.comment_=e,this.oldCoordinate_=e.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}fromJson(e){Z("Blockly.Events.CommentMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e);let n=e.oldCoordinate.split(",");this.oldCoordinate_=new re(Number(n[0]),Number(n[1])),n=e.newCoordinate.split(","),this.newCoordinate_=new re(Number(n[0]),Number(n[1]))}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new La),i=e.oldCoordinate.split(","),n.oldCoordinate_=new re(Number(i[0]),Number(i[1])),i=e.newCoordinate.split(","),n.newCoordinate_=new re(Number(i[0]),Number(i[1])),n}isNull(){return re.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(!(e=e?this.newCoordinate_:this.oldCoordinate_))throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var i=n.getXY();n.moveBy(e.x-i.x,e.y-i.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};Le(ee.EVENT,Sr,La);var Ci=class extends ks{constructor(e,n){super(),this.model=n,this.isBlank=!1,this.workspaceId=e.id}toJson(){const e=super.toJson();return e.procedureId=this.model.getId(),e}},Qd=class extends Ci{constructor(e,n,i){super(e,n),this.oldTypes=i,this.type=cp,this.newTypes=n.getReturnTypes()}run(e){const n=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!n)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");n.setReturnTypes(e?this.newTypes:this.oldTypes)}toJson(){const e=super.toJson();return e.oldTypes=this.oldTypes,e}static fromJson(e,n){const i=n.getProcedureMap().get(e.procedureId);if(!i)throw Error("Cannot deserialize procedure change return event because the target procedure does not exist");return new Qd(n,i,e.oldTypes)}};Le(ee.EVENT,cp,Qd);var eh=class extends Ci{constructor(e,n){super(e,n),this.type=ip}run(e){const n=this.getEventWorkspace_(),i=n.getProcedureMap(),a=i.get(this.model.getId());e?a||i.add(new ul(n,this.model.getName(),this.model.getId())):a&&i.delete(this.model.getId())}toJson(){const e=super.toJson();return e.model=Jh(this.model),e}static fromJson(e,n){return new eh(n,Qg(ul,dl,e.model,n))}};Le(ee.EVENT,ip,eh);var th=class extends Ci{constructor(e,n){super(e,n),this.type=sd}run(e){const n=this.getEventWorkspace_(),i=n.getProcedureMap(),a=i.get(this.model.getId());e?a&&i.delete(this.model.getId()):a||i.add(new ul(n,this.model.getName(),this.model.getId()))}toJson(){return super.toJson()}static fromJson(e,n){if(!(e=n.getProcedureMap().get(e.procedureId)))throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");return new th(n,e)}};Le(ee.EVENT,sd,th);var nh=class extends Ci{constructor(e,n){super(e,n),this.type=ap,this.oldState=!n.getEnabled(),this.newState=n.getEnabled()}run(e){const n=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!n)throw Error("Cannot change the enabled state of a procedure that does not exist in the procedure map");n.setEnabled(e?this.newState:this.oldState)}toJson(){return super.toJson()}static fromJson(e,n){if(!(e=n.getProcedureMap().get(e.procedureId)))throw Error("Cannot deserialize procedure enable event because the target procedure does not exist");return new nh(n,e)}};Le(ee.EVENT,ap,nh);var oh=class extends Ci{constructor(e,n,i){super(e,n),this.oldName=i,this.type=lp,this.newName=n.getName()}run(e){const n=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!n)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");n.setName(e?this.newName:this.oldName)}toJson(){const e=super.toJson();return e.oldName=this.oldName,e}static fromJson(e,n){const i=n.getProcedureMap().get(e.procedureId);if(!i)throw Error("Cannot deserialize procedure rename event because the target procedure does not exist");return new oh(n,i,e.oldName)}};Le(ee.EVENT,lp,oh);var rh=class extends Ci{constructor(e,n,i){super(e,n),this.parameter=i}toJson(){const e=super.toJson();return e.parameterId=this.model.getId(),e}},rg=class extends rh{constructor(e,n,i,a){super(e,n,i),this.index=a,this.type=id}run(e){const n=this.getEventWorkspace_(),i=n.getProcedureMap().get(this.model.getId());if(!i)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const a=i.getParameter(this.index);e?this.parameterMatches(a)||i.insertParameter(new dl(n,this.parameter.getName(),this.parameter.getId()),this.index):this.parameterMatches(a)&&i.deleteParameter(this.index)}parameterMatches(e){return e&&e.getId()===this.parameter.getId()}toJson(){const e=super.toJson();return e.parameter=ji(this.parameter),e.index=this.index,e}static fromJson(e,n){const i=n.getProcedureMap().get(e.procedureId);if(!i)throw Error("Cannot deserialize parameter create event because the target procedure does not exist");return new rg(n,i,ef(dl,e.parameter,n),e.index)}};Le(ee.EVENT,id,rg);var sg=class extends rh{constructor(e,n,i,a){super(e,n,i),this.index=a,this.type=Lc}run(e){const n=this.getEventWorkspace_(),i=n.getProcedureMap().get(this.model.getId());if(!i)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const a=i.getParameter(this.index);e?this.parameterMatches(a)&&i.deleteParameter(this.index):this.parameterMatches(a)||i.insertParameter(new dl(n,this.parameter.getName(),this.parameter.getId()),this.index)}parameterMatches(e){return e&&e.getId()===this.parameter.getId()}toJson(){const e=super.toJson();return e.index=this.index,e}static fromJson(e,n){const i=n.getProcedureMap().get(e.procedureId);if(!i)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const a=i.getParameter(e.index);return new sg(n,i,a,e.index)}};Le(ee.EVENT,Lc,sg);var ig=class extends rh{constructor(e,n,i,a){super(e,n,i),this.oldName=a,this.type=ld,this.newName=i.getName()}run(e){const n=Lm(this.getEventWorkspace_(),this.model.getId(),this.parameter.getId());if(!n)throw Error("Cannot rename a parameter that does not exist in the procedure map");n.setName(e?this.newName:this.oldName)}toJson(){const e=super.toJson();return e.oldName=this.oldName,e}static fromJson(e,n){const i=n.getProcedureMap().get(e.procedureId);if(!i)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const a=Lm(n,e.procedureId,e.parameterId);if(!a)throw Error("Cannot deserialize parameter rename event because the target parameter does not exist");return new ig(n,i,a,e.oldName)}};Le(ee.EVENT,ld,ig);var lg=class extends Yo{constructor(e,n,i){super(e?e.workspace.id:void 0),this.type=na,e&&(this.blockId=e.id,this.isStart=n,this.blocks=i)}toJson(){const e=super.toJson();if(void 0===this.isStart)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(void 0===this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}fromJson(e){Z("Blockly.Events.BlockDrag.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks}static fromJson(e,n,i){return(n=super.fromJson(e,n,i??new lg)).isStart=e.isStart,n.blockId=e.blockId,n.blocks=e.blocks,n}};Le(ee.EVENT,na,lg);var C_=class extends Yo{constructor(e,n,i,a){super(e?e.workspace.id:void 0),this.type=ta,this.blockId=e?e.id:null,this.element=typeof n>"u"?"":n,this.oldValue=typeof i>"u"?"":i,this.newValue=typeof a>"u"?"":a}toJson(){const e=super.toJson();return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e}fromJson(e){super.fromJson(e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId}};Le(ee.EVENT,ta,C_);var R_=class extends ks{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=ra,this.isBlank=!!e,e&&(this.workspaceId=e.id)}toJson(){const e=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return e.workspaceId=this.workspaceId,e}fromJson(e){super.fromJson(e),this.workspaceId=e.workspaceId}};Le(ee.EVENT,ra,R_),h.module$build$src$core$events$events={},h.module$build$src$core$events$events.Abstract=ks,h.module$build$src$core$events$events.BLOCK_CHANGE=gn,h.module$build$src$core$events$events.BLOCK_CREATE=On,h.module$build$src$core$events$events.BLOCK_DELETE=ir,h.module$build$src$core$events$events.BLOCK_DRAG=na,h.module$build$src$core$events$events.BLOCK_MOVE=Hn,h.module$build$src$core$events$events.BUBBLE_OPEN=wr,h.module$build$src$core$events$events.BUMP_EVENTS=xc,h.module$build$src$core$events$events.BlockBase=ia,h.module$build$src$core$events$events.BlockChange=tl,h.module$build$src$core$events$events.BlockCreate=Xc,h.module$build$src$core$events$events.BlockDelete=Cp,h.module$build$src$core$events$events.BlockDrag=lg,h.module$build$src$core$events$events.BlockMove=og,h.module$build$src$core$events$events.BubbleOpen=vd,h.module$build$src$core$events$events.BubbleType=Id,h.module$build$src$core$events$events.CHANGE=gn,h.module$build$src$core$events$events.CLICK=gi,h.module$build$src$core$events$events.COMMENT_CHANGE=Nc,h.module$build$src$core$events$events.COMMENT_CREATE=As,h.module$build$src$core$events$events.COMMENT_DELETE=Qi,h.module$build$src$core$events$events.COMMENT_MOVE=Sr,h.module$build$src$core$events$events.CREATE=On,h.module$build$src$core$events$events.Click=_a,h.module$build$src$core$events$events.ClickTarget=ma,h.module$build$src$core$events$events.CommentBase=Ii,h.module$build$src$core$events$events.CommentChange=yl,h.module$build$src$core$events$events.CommentCreate=qd,h.module$build$src$core$events$events.CommentDelete=Zd,h.module$build$src$core$events$events.CommentMove=La,h.module$build$src$core$events$events.DELETE=ir,h.module$build$src$core$events$events.FINISHED_LOADING=ra,h.module$build$src$core$events$events.FinishedLoading=R_,h.module$build$src$core$events$events.MARKER_MOVE=Mc,h.module$build$src$core$events$events.MOVE=Hn,h.module$build$src$core$events$events.MarkerMove=su,h.module$build$src$core$events$events.ProcedureBase=Ci,h.module$build$src$core$events$events.ProcedureChangeReturn=Qd,h.module$build$src$core$events$events.ProcedureCreate=eh,h.module$build$src$core$events$events.ProcedureDelete=th,h.module$build$src$core$events$events.ProcedureEnable=nh,h.module$build$src$core$events$events.ProcedureParameterBase=rh,h.module$build$src$core$events$events.ProcedureParameterCreate=rg,h.module$build$src$core$events$events.ProcedureParameterDelete=sg,h.module$build$src$core$events$events.ProcedureParameterRename=ig,h.module$build$src$core$events$events.ProcedureRename=oh,h.module$build$src$core$events$events.SELECTED=lr,h.module$build$src$core$events$events.Selected=Fc,h.module$build$src$core$events$events.THEME_CHANGE=rd,h.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=oa,h.module$build$src$core$events$events.TRASHCAN_OPEN=Zi,h.module$build$src$core$events$events.ThemeChange=xd,h.module$build$src$core$events$events.ToolboxItemSelect=xp,h.module$build$src$core$events$events.TrashcanOpen=vp,h.module$build$src$core$events$events.UI=ta,h.module$build$src$core$events$events.Ui=C_,h.module$build$src$core$events$events.UiBase=Yo,h.module$build$src$core$events$events.VAR_CREATE=Os,h.module$build$src$core$events$events.VAR_DELETE=pi,h.module$build$src$core$events$events.VAR_RENAME=kc,h.module$build$src$core$events$events.VIEWPORT_CHANGE=ar,h.module$build$src$core$events$events.VarBase=fi,h.module$build$src$core$events$events.VarCreate=Bc,h.module$build$src$core$events$events.VarDelete=r_,h.module$build$src$core$events$events.VarRename=s_,h.module$build$src$core$events$events.ViewportChange=Zc,h.module$build$src$core$events$events.clearPendingUndo=Js,h.module$build$src$core$events$events.disable=Ft,h.module$build$src$core$events$events.disableOrphans=Ho,h.module$build$src$core$events$events.enable=Gt,h.module$build$src$core$events$events.filter=Ks,h.module$build$src$core$events$events.fire=me,h.module$build$src$core$events$events.fromJson=qa,h.module$build$src$core$events$events.get=Te,h.module$build$src$core$events$events.getDescendantIds=ki,h.module$build$src$core$events$events.getGroup=yt,h.module$build$src$core$events$events.getRecordUndo=un,h.module$build$src$core$events$events.isEnabled=zt,h.module$build$src$core$events$events.setGroup=de,h.module$build$src$core$events$events.setRecordUndo=Ct,Zu();var xo={};xo.registerCleanup=ib,xo.registerCollapse=ab,xo.registerCollapseExpandBlock=hb,xo.registerComment=qh,xo.registerDefaultOptions=Zu,xo.registerDelete=Wo,xo.registerDeleteAll=db,xo.registerDisable=Pm,xo.registerDuplicate=Sn,xo.registerExpand=cb,xo.registerHelp=Rs,xo.registerInline=bc,xo.registerRedo=sb,xo.registerUndo=We;var w_=class{constructor(e,n){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=e,this.draggedConnectionManager_=new No(this.draggingBlock_),this.workspace_=n,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=function(e){const n=[];e=e.getDescendants(!1);for(let a,i=0;a=e[i];i++){const d=a.getIcons();for(let _=0;_<d.length;_++){const R={location:d[_].getIconLocation(),icon:d[_]};n.push(R)}}return n}(e)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(e,n){yt()||de(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),Pr(),this.workspace_.setResizesEnabled(!1),dc(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,e),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(e,n){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(n),e=re.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),Gg(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const e=new(Te(na))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));me(e)}drag(e,n){n=this.pixelsToWorkspaceUnits_(n);var i=re.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(i),this.dragIcons_(n),i=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),this.draggedConnectionManager_.update(n,this.dragTarget_),e=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock,e!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==i&&(i&&i.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(e,n){this.drag(e,n),this.dragIconData_=[],this.fireDragEndEvent_(),Je(),dc(),e=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?n=this.startXY_:(e=(n=this.getNewLocationAfterDrag_(n)).delta,n=n.newLocation),this.draggingBlock_.moveOffDragSurface(n),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),e?this.updateBlockAfterMove_(e):jl(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),de(!1)}getNewLocationAfterDrag_(e){return{delta:e=this.pixelsToWorkspaceUnits_(e),newLocation:re.sum(this.startXY_,e)}}maybeDeleteBlock_(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),wc.length=0,!0)}updateBlockAfterMove_(e){this.draggingBlock_.moveConnections(e.x,e.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const e=new(Te(na))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));me(e)}updateToolboxStyle_(e){const n=this.workspace_.getToolbox();if(n){const i=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&"function"==typeof n.removeStyle?n.removeStyle(i):e||"function"!=typeof n.addStyle||n.addStyle(i)}}fireMoveEvent_(){const e=new(Te(Hn))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),me(e)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(e){return e=new re(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e}dragIcons_(e){for(let n=0;n<this.dragIconData_.length;n++){const i=this.dragIconData_[n];i.icon.setIconLocation(re.sum(i.location,e))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};Le(ee.BLOCK_DRAGGER,Ds,w_);var hv=h.Align$$module$build$src$core$input.LEFT,pv=h.Align$$module$build$src$core$input.CENTRE,gv=h.Align$$module$build$src$core$input.RIGHT,ug=he.INPUT_VALUE,LE=he.OUTPUT_VALUE,xE=he.NEXT_STATEMENT,PE=he.PREVIOUS_STATEMENT,fv=Ue.DUMMY,ih=Pe.TOP,lh=Pe.BOTTOM,_v=Pe.LEFT,mv=Pe.RIGHT;is.prototype.newBlock=function(e,n){return new il(this,e,n)},Ar.prototype.newBlock=function(e,n){return new ko(this,e,n)},Ar.newTrashcan=function(e){return new Mp(e)},jn.prototype.showContextMenu=function(e){if(!this.workspace.options.readOnly){var n=[];this.isDeletable()&&this.isMovable()&&(n.push(Vh(this)),n.push(Yu(this))),Gh(e,n,this.RTL)}},h.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function(e){return new Ar(e)},os.prototype.populateProcedures=function(e){e=(e=gc(e))[0].concat(e[1]);for(let n=0;n<e.length;n++)this.getName(e[n][0],os.NameType.PROCEDURE)};var ah=he,V={};return V.ALIGN_CENTRE=pv,V.ALIGN_LEFT=hv,V.ALIGN_RIGHT=gv,V.ASTNode=Y,V.BasicCursor=ha,V.Block=il,V.BlockDragSurfaceSvg=ng,V.BlockDragger=w_,V.BlockSvg=ko,V.Blocks=po,V.Bubble=xe,V.BubbleDragger=Ld,V.COLLAPSED_FIELD_NAME=Kc,V.COLLAPSED_INPUT_NAME=Yc,V.COLLAPSE_CHARS=30,V.CodeGenerator=h.CodeGenerator$$module$build$src$core$generator,V.CollapsibleToolboxCategory=fa,V.Comment=kf,V.ComponentManager=Pn,V.Connection=ut,V.ConnectionChecker=Ia,V.ConnectionDB=Qc,V.ConnectionType=he,V.ContextMenu=h.module$build$src$core$contextmenu,V.ContextMenuItems=xo,V.ContextMenuRegistry=dt,V.Css=e$,V.Cursor=Op,V.DELETE_VARIABLE_ID=He,V.DRAG_STACK=true,V.DUMMY_INPUT=fv,V.DeleteArea=kp,V.DragTarget=Pf,V.DropDownDiv=Vt,V.Events=h.module$build$src$core$events$events,V.Extensions=h.module$build$src$core$extensions,V.Field=Ze,V.FieldAngle=qe,V.FieldCheckbox=h.FieldCheckbox$$module$build$src$core$field_checkbox,V.FieldColour=rn,V.FieldDropdown=Do,V.FieldImage=h.FieldImage$$module$build$src$core$field_image,V.FieldLabel=h.FieldLabel$$module$build$src$core$field_label,V.FieldLabelSerializable=b_,V.FieldMultilineInput=Jd,V.FieldNumber=T_,V.FieldTextInput=h.FieldTextInput$$module$build$src$core$field_textinput,V.FieldVariable=gu,V.Flyout=pu,V.FlyoutButton=ka,V.FlyoutMetricsManager=$_,V.Generator=h.CodeGenerator$$module$build$src$core$generator,V.Gesture=ts,V.Grid=Yf,V.HorizontalFlyout=E_,V.INPUT_VALUE=ug,V.Icon=Vc,V.Input=Jc,V.InsertionMarkerManager=No,V.Marker=Dp,V.MarkerManager=ur,V.Menu=Ep,V.MenuItem=Cf,V.MetricsManager=Kd,V.Msg=De,V.Mutator=h.Mutator$$module$build$src$core$mutator,V.NEXT_STATEMENT=xE,V.Names=os,V.OPPOSITE_TYPE=$i,V.OUTPUT_VALUE=LE,V.Options=hr,V.PREVIOUS_STATEMENT=PE,V.PROCEDURE_CATEGORY_NAME=eu,V.Procedures=h.module$build$src$core$procedures,V.RENAME_VARIABLE_ID=Md,V.RenderedConnection=Ao,V.Scrollbar=Ht,V.ScrollbarPair=Yd,V.ShortcutItems=ns,V.ShortcutRegistry=Et,V.TOOLBOX_AT_BOTTOM=lh,V.TOOLBOX_AT_LEFT=_v,V.TOOLBOX_AT_RIGHT=mv,V.TOOLBOX_AT_TOP=ih,V.TabNavigateCursor=Ap,V.Theme=nl,V.ThemeManager=iu,V.Themes=S$,V.Toolbox=es,V.ToolboxCategory=gr,V.ToolboxItem=Re,V.ToolboxSeparator=$o,V.Tooltip=Jt,V.Touch=sr,V.TouchGesture=ts,V.Trashcan=Mp,V.VARIABLE_CATEGORY_NAME=pd,V.VARIABLE_DYNAMIC_CATEGORY_NAME=Wp,V.VERSION="9.2.1",V.VariableMap=Xp,V.VariableModel=el,V.Variables=h.module$build$src$core$variables,V.VariablesDynamic=gl,V.VerticalFlyout=vi,V.Warning=pr,V.WidgetDiv=dr,V.Workspace=is,V.WorkspaceAudio=jd,V.WorkspaceComment=Jr,V.WorkspaceCommentSvg=jn,V.WorkspaceDragSurfaceSvg=tg,V.WorkspaceDragger=D$,V.WorkspaceSvg=Ar,V.Xml=h.module$build$src$core$xml,V.ZoomControls=i_,V.bindEventWithChecks_=function(e,n,i,a,d,_){return Z("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),ue(e,n,i,a,d)},V.bindEvent_=function(e,n,i,a){return Z("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),ot(e,n,i,a)},V.blockAnimations=qc,V.blockRendering=st,V.browserEvents=Rr,V.bumpObjects=zd,V.clipboard=Oo,V.common=h.module$build$src$core$common,V.config=h.config$$module$build$src$core$config,V.connectionTypes=ah,V.constants=sl,V.copy=function(e){Z("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),hc(e)},V.defineBlocksWithJsonArray=$,V.dialog=_o,V.duplicate=function(e){Z("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),Fh(e)},V.fieldRegistry=qt,V.geras=ls,V.getMainWorkspace=sn,V.getSelected=Qe,V.hideChaff=function(e){sn().hideChaff(e)},V.hueToHex=function(e){return Z("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),_s(e)},V.inject=function(e,n){if("string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!Cn(document,e))throw Error("Error: container is not in current document.");n=new hr(n||{});const i=document.createElement("div");i.className="injectionDiv",i.tabIndex=0,xt(i,kt.LABEL,De.WORKSPACE_ARIA_LABEL),e.appendChild(i),e=$c(i,n);const a=new ng(i),d=new tg(i),_=Ec(e,n,a,d);return Nm(_),ln(_),pe(_),i.addEventListener("focusin",function(){ln(_)}),_},V.inputTypes=Ue,V.isNumber=function(e){return Z("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),Uu(e)},V.minimalist=Oa,V.paste=function(){return Z("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!Vg()},V.procedures=h.module$build$src$core$procedures,V.registry=Kr,V.resizeSvgContents=function(e){Z("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),mc(e)},V.serialization=l_,V.setLocale=dd,V.setParentContainer=bo,V.svgResize=pe,V.thrasos=d_,V.uiPosition=pa,V.unbindEvent_=function(e){return Z("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),ve(e)},V.utils=tt,V.zelos=Mr,Object.defineProperties(V,{alert:{set:function(e){hn.warn("Blockly.alert","December 2021","December 2022"),_o.setAlert(e)},get:function(){return hn.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),_o.alert}},confirm:{set:function(e){hn.warn("Blockly.confirm","December 2021","December 2022"),_o.setConfirm(e)},get:function(){return hn.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),_o.confirm}},mainWorkspace:{set:function(e){hn.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),h.module$build$src$core$common.setMainWorkspace(e)},get:function(){return hn.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),h.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function(e){hn.warn("Blockly.prompt","December 2021","December 2022"),_o.setPrompt(e)},get:function(){return hn.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),_o.prompt}},selected:{get:function(){return hn.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),h.module$build$src$core$common.getSelected()},set:function(e){hn.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),h.module$build$src$core$common.setSelected(e)}},HSV_SATURATION:{get:function(){return xn.getHsvSaturation()},set:function(e){xn.setHsvSaturation(e)}},HSV_VALUE:{get:function(){return xn.getHsvValue()},set:function(e){xn.setHsvValue(e)}}}),Object.defineProperties(h.module$build$src$core$contextmenu,{currentBlock:{get:function(){return hn.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),h.module$build$src$core$contextmenu.getCurrentBlock()},set:function(e){hn.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),h.module$build$src$core$contextmenu.setCurrentBlock(e)}}}),Object.defineProperties(h.module$build$src$core$events$events,{recordUndo:{get:function(){return hn.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),Se.getRecordUndo()},set:function(e){hn.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),Se.setRecordUndo(e)}}}),Object.defineProperties(Jt,{visible:{get:function(){return hn.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),Jt.isVisible()}},DIV:{get:function(){return hn.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),Jt.getDiv()}}}),Object.defineProperties(dr,{DIV:{get:function(){return hn.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),dr.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:h.module$build$src$core$msg}),V.__namespace__=h,V}.apply(Ee,[]))&&(Rt.exports=G)},783:function(Rt,Ee,Ae){var G,h;G=[Ae(484)],void 0!==(h=function(Z){return Z}.apply(Ee,G))&&(Rt.exports=h)},484:function(Rt,Ee,Ae){var G,h;G=[Ae(69)],void 0!==(h=function(Z){var S=Z.__namespace__,g={},Fo=S.module$build$src$core$msg.Msg,xr=S.module$build$src$core$common.defineBlocks;g.blocks=(0,S.module$build$src$core$common.createBlockDefinitionsFromJsonArray)([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var ue={customContextMenu:function(b){if(this.isInFlyout)("variables_get_dynamic"===this.type||"variables_get_reporter_dynamic"===this.type)&&(D={text:Fo.RENAME_VARIABLE,enabled:!0,callback:ot(this)},j=this.getField("VAR").getText(),j={text:Fo.DELETE_VARIABLE.replace("%1",j),enabled:!0,callback:ve(this)},b.unshift(D),b.unshift(j));else{var D=this.getFieldValue("VAR"),M=this.workspace.getVariableById(D).type;if("variables_get_dynamic"===this.type){D="variables_set_dynamic";var U=Fo.VARIABLES_GET_CREATE_SET}else D="variables_get_dynamic",U=Fo.VARIABLES_SET_CREATE_GET;var j={enabled:0<this.workspace.remainingCapacity()};const at=this.getField("VAR").getText();j.text=U.replace("%1",at),(U=S.module$build$src$core$utils$xml.createElement("field")).setAttribute("name","VAR"),U.setAttribute("variabletype",M),U.appendChild(S.module$build$src$core$utils$xml.createTextNode(at)),(M=S.module$build$src$core$utils$xml.createElement("block")).setAttribute("type",D),M.appendChild(U),j.callback=S.module$build$src$core$contextmenu.callbackFactory(this,M),b.push(j)}},onchange:function(b){b=this.getFieldValue("VAR"),b=S.module$build$src$core$variables.getVariable(this.workspace,b),"variables_get_dynamic"===this.type?this.outputConnection.setCheck(b.type):this.getInput("VALUE").connection.setCheck(b.type)}},ot=function(b){return function(){const D=b.workspace,M=b.getField("VAR").getVariable();S.module$build$src$core$variables.renameVariable(D,M)}},ve=function(b){return function(){const D=b.workspace,M=b.getField("VAR").getVariable();D.deleteVariableById(M.getId()),D.refreshToolboxSelection()}};S.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",ue),xr(g.blocks);var St={},io=S.module$build$src$core$msg.Msg,sn=S.module$build$src$core$common.defineBlocks;St.blocks=(0,S.module$build$src$core$common.createBlockDefinitionsFromJsonArray)([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var ln={customContextMenu:function(b){if(this.isInFlyout)("variables_get"===this.type||"variables_get_reporter"===this.type)&&(D={text:io.RENAME_VARIABLE,enabled:!0,callback:Qe(this)},U=this.getField("VAR").getText(),U={text:io.DELETE_VARIABLE.replace("%1",U),enabled:!0,callback:an(this)},b.unshift(D),b.unshift(U));else{if("variables_get"===this.type)var D="variables_set",M=io.VARIABLES_GET_CREATE_SET;else D="variables_get",M=io.VARIABLES_SET_CREATE_GET;var U={enabled:0<this.workspace.remainingCapacity()},j=this.getField("VAR").getText();U.text=M.replace("%1",j),(M=S.module$build$src$core$utils$xml.createElement("field")).setAttribute("name","VAR"),M.appendChild(S.module$build$src$core$utils$xml.createTextNode(j)),(j=S.module$build$src$core$utils$xml.createElement("block")).setAttribute("type",D),j.appendChild(M),U.callback=S.module$build$src$core$contextmenu.callbackFactory(this,j),b.push(U)}}},Qe=function(b){return function(){const D=b.workspace,M=b.getField("VAR").getVariable();S.module$build$src$core$variables.renameVariable(D,M)}},an=function(b){return function(){const D=b.workspace,M=b.getField("VAR").getVariable();D.deleteVariableById(M.getId()),D.refreshToolboxSelection()}};S.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",ln),sn(St.blocks);var Mt={},pe=S.module$build$src$core$msg.Msg,O=S.module$build$src$core$field_dropdown.FieldDropdown,ce=S.module$build$src$core$common.defineBlocks;Mt.blocks=(0,S.module$build$src$core$common.createBlockDefinitionsFromJsonArray)([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),Mt.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[pe.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[pe.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[pe.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[pe.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[pe.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[pe.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(pe.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(pe.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),pe.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(pe.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(pe.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");var D=this.getInput("AT1").type===S.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return b.setAttribute("at1",D),D=this.getInput("AT2").type===S.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,b.setAttribute("at2",D),b},domToMutation:function(b){const D="true"===b.getAttribute("at1");b="true"===b.getAttribute("at2"),this.updateAt_(1,D),this.updateAt_(2,b)},updateAt_:function(b,D){this.removeInput("AT"+b),this.removeInput("ORDINAL"+b,!0),D?(this.appendValueInput("AT"+b).setCheck("Number"),pe.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+b).appendField(pe.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+b),2===b&&pe.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(pe.TEXT_GET_SUBSTRING_TAIL));const M=new O(this["WHERE_OPTIONS_"+b],function(U){const j="FROM_START"===U||"FROM_END"===U;if(j!==D){const at=this.getSourceBlock();return at.updateAt_(b,j),at.setFieldValue(U,"WHERE"+b),null}});this.getInput("AT"+b).appendField(M,"WHERE"+b),1===b&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},Mt.blocks.text_changeCase={init:function(){const b=[[pe.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[pe.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[pe.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(pe.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new O(b),"CASE"),this.setOutput(!0,"String"),this.setTooltip(pe.TEXT_CHANGECASE_TOOLTIP)}},Mt.blocks.text_trim={init:function(){const b=[[pe.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[pe.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[pe.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(pe.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new O(b),"MODE"),this.setOutput(!0,"String"),this.setTooltip(pe.TEXT_TRIM_TOOLTIP)}},Mt.blocks.text_print={init:function(){this.jsonInit({message0:pe.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:pe.TEXT_PRINT_TOOLTIP,helpUrl:pe.TEXT_PRINT_HELPURL})}};var Pt={updateType_:function(b){this.outputConnection.setCheck("NUMBER"===b?"Number":"String")},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");return b.setAttribute("type",this.getFieldValue("TYPE")),b},domToMutation:function(b){this.updateType_(b.getAttribute("type"))}};Mt.blocks.text_prompt_ext=Object.assign({},Pt,{init:function(){var b=[[pe.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[pe.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(pe.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const D=this;b=new O(b,function(M){D.updateType_(M)}),this.appendValueInput("TEXT").appendField(b,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"===D.getFieldValue("TYPE")?pe.TEXT_PROMPT_TOOLTIP_TEXT:pe.TEXT_PROMPT_TOOLTIP_NUMBER})}}),Mt.blocks.text_prompt=Object.assign({},Pt,{init:function(){this.mixin(ie);var b=[[pe.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[pe.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const D=this;this.setHelpUrl(pe.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),b=new O(b,function(M){D.updateType_(M)}),this.appendDummyInput().appendField(b,"TYPE").appendField(this.newQuote_(!0)).appendField(new S.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"===D.getFieldValue("TYPE")?pe.TEXT_PROMPT_TOOLTIP_TEXT:pe.TEXT_PROMPT_TOOLTIP_NUMBER})}}),Mt.blocks.text_count={init:function(){this.jsonInit({message0:pe.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:pe.TEXT_COUNT_TOOLTIP,helpUrl:pe.TEXT_COUNT_HELPURL})}},Mt.blocks.text_replace={init:function(){this.jsonInit({message0:pe.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:pe.TEXT_REPLACE_TOOLTIP,helpUrl:pe.TEXT_REPLACE_HELPURL})}},Mt.blocks.text_reverse={init:function(){this.jsonInit({message0:pe.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:pe.TEXT_REVERSE_TOOLTIP,helpUrl:pe.TEXT_REVERSE_HELPURL})}};var ie={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(b){for(let M,D=0;M=this.inputList[D];D++)for(let j,U=0;j=M.fieldRow[U];U++)if(b===j.name)return M.insertFieldAt(U,this.newQuote_(!0)),void M.insertFieldAt(U+2,this.newQuote_(!1));console.warn('field named "'+b+'" not found in '+this.toDevString())},newQuote_:function(b){return new S.FieldImage$$module$build$src$core$field_image((b=this.RTL?!b:b)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,b?"\u201c":"\u201d")}},Cn={mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");return b.setAttribute("items",this.itemCount_),b},domToMutation:function(b){this.itemCount_=parseInt(b.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(b){this.itemCount_=b.itemCount,this.updateShape_()},decompose:function(b){const D=b.newBlock("text_create_join_container");D.initSvg();let M=D.getInput("STACK").connection;for(let U=0;U<this.itemCount_;U++){const j=b.newBlock("text_create_join_item");j.initSvg(),M.connect(j.previousConnection),M=j.nextConnection}return D},compose:function(b){var D=b.getInputTargetBlock("STACK");for(b=[];D;)D.isInsertionMarker()||b.push(D.valueConnection_),D=D.getNextBlock();for(D=0;D<this.itemCount_;D++){const M=this.getInput("ADD"+D).connection.targetConnection;M&&-1===b.indexOf(M)&&M.disconnect()}for(this.itemCount_=b.length,this.updateShape_(),D=0;D<this.itemCount_;D++)S.Mutator$$module$build$src$core$mutator.reconnect(b[D],this,"ADD"+D)},saveConnections:function(b){b=b.getInputTargetBlock("STACK");let D=0;for(;b;){if(b.isInsertionMarker()){b=b.getNextBlock();continue}const M=this.getInput("ADD"+D);b.valueConnection_=M&&M.connection.targetConnection,b=b.getNextBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var b=0;b<this.itemCount_;b++)if(!this.getInput("ADD"+b)){const D=this.appendValueInput("ADD"+b).setAlign(S.Align$$module$build$src$core$input.RIGHT);0===b&&D.appendField(pe.TEXT_JOIN_TITLE_CREATEWITH)}for(b=this.itemCount_;this.getInput("ADD"+b);b++)this.removeInput("ADD"+b)}};S.module$build$src$core$extensions.register("text_append_tooltip",S.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var Je={mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");return b.setAttribute("at",!!this.isAt_),b},domToMutation:function(b){b="false"!==b.getAttribute("at"),this.updateAt_(b)},updateAt_:function(b){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),b&&(this.appendValueInput("AT").setCheck("Number"),pe.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(pe.ORDINAL_NUMBER_SUFFIX)),pe.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(pe.TEXT_CHARAT_TAIL)),this.isAt_=b}};S.module$build$src$core$extensions.register("text_indexOf_tooltip",function(){const b=this;this.setTooltip(function(){return pe.TEXT_INDEXOF_TOOLTIP.replace("%1",b.workspace.options.oneBasedIndex?"0":"-1")})}),S.module$build$src$core$extensions.register("text_quotes",function(){this.mixin(ie),this.quoteField_("TEXT")}),S.module$build$src$core$extensions.registerMutator("text_join_mutator",Cn,function(){this.mixin(ie),this.itemCount_=2,this.updateShape_(),this.setMutator(new S.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))}),S.module$build$src$core$extensions.registerMutator("text_charAt_mutator",Je,function(){this.getField("WHERE").setValidator(function(D){(D="FROM_START"===D||"FROM_END"===D)!==this.isAt_&&this.getSourceBlock().updateAt_(D)}),this.updateAt_(!0);const b=this;this.setTooltip(function(){var D=b.getFieldValue("WHERE");let M=pe.TEXT_CHARAT_TOOLTIP;return("FROM_START"===D||"FROM_END"===D)&&(D="FROM_START"===D?pe.LISTS_INDEX_FROM_START_TOOLTIP:pe.LISTS_INDEX_FROM_END_TOOLTIP)&&(M+="  "+D.replace("%1",b.workspace.options.oneBasedIndex?"#1":"#0")),M})}),ce(Mt.blocks);var Bt={},ge=S.module$build$src$core$msg.Msg,Wa=S.module$build$src$core$common.defineBlocks;Bt.blocks={};var Rl={setStatements_:function(b){this.hasStatements_!==b&&(b?(this.appendStatementInput("STACK").appendField(ge.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=b)},updateParams_:function(){let b="";this.arguments_.length&&(b=ge.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),S.module$build$src$core$events$events.disable();try{this.setFieldValue(b,"PARAMS")}finally{S.module$build$src$core$events$events.enable()}},mutationToDom:function(b){const D=S.module$build$src$core$utils$xml.createElement("mutation");b&&D.setAttribute("name",this.getFieldValue("NAME"));for(let M=0;M<this.argumentVarModels_.length;M++){const U=S.module$build$src$core$utils$xml.createElement("arg"),j=this.argumentVarModels_[M];U.setAttribute("name",j.name),U.setAttribute("varid",j.getId()),b&&this.paramIds_&&U.setAttribute("paramId",this.paramIds_[M]),D.appendChild(U)}return this.hasStatements_||D.setAttribute("statements","false"),D},domToMutation:function(b){this.arguments_=[],this.argumentVarModels_=[];for(let U,M=0;U=b.childNodes[M];M++)if("arg"===U.nodeName.toLowerCase()){const j=U.getAttribute("name");var D=U.getAttribute("varid")||U.getAttribute("varId");this.arguments_.push(j),null!==(D=S.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,D,j,""))?this.argumentVarModels_.push(D):console.log(`Failed to create a variable named "${j}", ignoring.`)}this.updateParams_(),S.module$build$src$core$procedures.mutateCallers(this),this.setStatements_("false"!==b.getAttribute("statements"))},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const b=Object.create(null);if(this.argumentVarModels_.length){b.params=[];for(let D=0;D<this.argumentVarModels_.length;D++)b.params.push({name:this.argumentVarModels_[D].name,id:this.argumentVarModels_[D].getId()})}return this.hasStatements_||(b.hasStatements=!1),b},loadExtraState:function(b){if(this.arguments_=[],this.argumentVarModels_=[],b.params)for(let M=0;M<b.params.length;M++){var D=b.params[M];D=S.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,D.id,D.name,""),this.arguments_.push(D.name),this.argumentVarModels_.push(D)}this.updateParams_(),S.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(!1!==b.hasStatements)},decompose:function(b){const D=S.module$build$src$core$utils$xml.createElement("block");D.setAttribute("type","procedures_mutatorcontainer");var M=S.module$build$src$core$utils$xml.createElement("statement");M.setAttribute("name","STACK"),D.appendChild(M);for(let j=0;j<this.arguments_.length;j++){const at=S.module$build$src$core$utils$xml.createElement("block");at.setAttribute("type","procedures_mutatorarg");var U=S.module$build$src$core$utils$xml.createElement("field");U.setAttribute("name","NAME");const hs=S.module$build$src$core$utils$xml.createTextNode(this.arguments_[j]);U.appendChild(hs),at.appendChild(U),U=S.module$build$src$core$utils$xml.createElement("next"),at.appendChild(U),M.appendChild(at),M=U}return b=S.module$build$src$core$xml.domToBlock(D,b),"procedures_defreturn"===this.type?b.setFieldValue(this.hasStatements_,"STATEMENTS"):b.removeInput("STATEMENT_INPUT"),S.module$build$src$core$procedures.mutateCallers(this),b},compose:function(b){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let D=b.getInputTargetBlock("STACK");for(;D&&!D.isInsertionMarker();){var M=D.getFieldValue("NAME");this.arguments_.push(M),M=this.workspace.getVariable(M,""),this.argumentVarModels_.push(M),this.paramIds_.push(D.id),D=D.nextConnection&&D.nextConnection.targetBlock()}this.updateParams_(),S.module$build$src$core$procedures.mutateCallers(this),null!==(b=b.getFieldValue("STATEMENTS"))&&this.hasStatements_!==(b="TRUE"===b)&&(b?(this.setStatements_(!0),S.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(b=this.getInput("STACK").connection,(this.statementConnection_=b.targetConnection)&&((b=b.targetBlock()).unplug(),b.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(b,D){var M=this.workspace.getVariableById(b);if(""===M.type){M=M.name,D=this.workspace.getVariableById(D);var U=!1;for(let j=0;j<this.argumentVarModels_.length;j++)this.argumentVarModels_[j].getId()===b&&(this.arguments_[j]=D.name,this.argumentVarModels_[j]=D,U=!0);U&&(this.displayRenamedVar_(M,D.name),S.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(b){const D=b.name;let U,M=!1;for(let j=0;j<this.argumentVarModels_.length;j++)this.argumentVarModels_[j].getId()===b.getId()&&(U=this.arguments_[j],this.arguments_[j]=D,M=!0);M&&(this.displayRenamedVar_(U,D),S.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(b,D){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const M=this.mutator.workspace_.getAllBlocks(!1);for(let j,U=0;j=M[U];U++)"procedures_mutatorarg"===j.type&&S.module$build$src$core$names.Names.equals(b,j.getFieldValue("NAME"))&&j.setFieldValue(D,"NAME")}},customContextMenu:function(b){if(!this.isInFlyout){var D={enabled:!0},M=this.getFieldValue("NAME");D.text=ge.PROCEDURES_CREATE_DO.replace("%1",M);var U=S.module$build$src$core$utils$xml.createElement("mutation");for(U.setAttribute("name",M),M=0;M<this.arguments_.length;M++){var j=S.module$build$src$core$utils$xml.createElement("arg");j.setAttribute("name",this.arguments_[M]),U.appendChild(j)}if((M=S.module$build$src$core$utils$xml.createElement("block")).setAttribute("type",this.callType_),M.appendChild(U),D.callback=S.module$build$src$core$contextmenu.callbackFactory(this,M),b.push(D),!this.isCollapsed())for(D=0;D<this.argumentVarModels_.length;D++)(U={enabled:!0}).text=ge.VARIABLES_SET_CREATE_GET.replace("%1",(M=this.argumentVarModels_[D]).name),M=S.module$build$src$core$variables.generateVariableFieldDom(M),(j=S.module$build$src$core$utils$xml.createElement("block")).setAttribute("type","variables_get"),j.appendChild(M),U.callback=S.module$build$src$core$contextmenu.callbackFactory(this,j),b.push(U)}}};Bt.blocks.procedures_defnoreturn=Object.assign({},Rl,{init:function(){var b=S.module$build$src$core$procedures.findLegalName("",this);(b=new S.FieldTextInput$$module$build$src$core$field_textinput(b,S.module$build$src$core$procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(ge.PROCEDURES_DEFNORETURN_TITLE).appendField(b,"NAME").appendField("","PARAMS"),this.setMutator(new S.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&ge.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(ge.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(ge.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(ge.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),Bt.blocks.procedures_defreturn=Object.assign({},Rl,{init:function(){var b=S.module$build$src$core$procedures.findLegalName("",this);(b=new S.FieldTextInput$$module$build$src$core$field_textinput(b,S.module$build$src$core$procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(ge.PROCEDURES_DEFRETURN_TITLE).appendField(b,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(S.Align$$module$build$src$core$input.RIGHT).appendField(ge.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new S.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&ge.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(ge.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(ge.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(ge.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),Bt.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(ge.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(ge.PROCEDURES_ALLOW_STATEMENTS).appendField(new S.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(ge.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},Bt.blocks.procedures_mutatorarg={init:function(){const b=new S.FieldTextInput$$module$build$src$core$field_textinput(S.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);b.oldShowEditorFn_=b.showEditor_,b.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(ge.PROCEDURES_MUTATORARG_TITLE).appendField(b,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(ge.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,b.onFinishEditing_=this.deleteIntermediateVars_,b.createdVariables_=[],b.onFinishEditing_("x")},validator_:function(b){var D=this.getSourceBlock();const M=S.Mutator$$module$build$src$core$mutator.findParentWs(D.workspace);if(!(b=b.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;const U=(D.workspace.targetWorkspace||D.workspace).getAllBlocks(!1),j=b.toLowerCase();for(let at=0;at<U.length;at++){if(U[at].id===this.getSourceBlock().id)continue;const hs=U[at].getFieldValue("NAME");if(hs&&hs.toLowerCase()===j)return null}return D.isInFlyout||((D=M.getVariable(b,""))&&D.name!==b&&M.renameVariableById(D.getId(),b),D||(D=M.createVariable(b,""))&&this.createdVariables_&&this.createdVariables_.push(D)),b},deleteIntermediateVars_:function(b){const D=S.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(D)for(let M=0;M<this.createdVariables_.length;M++){const U=this.createdVariables_[M];U.name!==b&&D.deleteVariableById(U.getId())}}};var Xa={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(b,D){S.module$build$src$core$names.Names.equals(b,this.getProcedureCall())&&(this.setFieldValue(D,"NAME"),this.setTooltip((this.outputConnection?ge.PROCEDURES_CALLRETURN_TOOLTIP:ge.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",D)))},setProcedureParameters_:function(b,D){var M=S.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),U=M&&M.mutator&&M.mutator.isVisible();if(U?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),b.join("\n")===this.arguments_.join("\n"))this.quarkIds_=D;else{if(D.length!==b.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),M=this.rendered,this.rendered=!1;for(let at=0;at<this.arguments_.length;at++){var j=this.getInput("ARG"+at);j&&(this.quarkConnections_[this.quarkIds_[at]]=j=j.connection.targetConnection,U&&j&&-1===D.indexOf(this.quarkIds_[at])&&(j.disconnect(),j.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(b),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)U=S.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(U);if(this.updateShape_(),this.quarkIds_=D)for(D=0;D<this.arguments_.length;D++)(b=this.quarkIds_[D])in this.quarkConnections_&&(S.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[b],this,"ARG"+D)||delete this.quarkConnections_[b]);(this.rendered=M)&&this.render()}},updateShape_:function(){for(var b=0;b<this.arguments_.length;b++){var D=this.getField("ARGNAME"+b);if(D){S.module$build$src$core$events$events.disable();try{D.setValue(this.arguments_[b])}finally{S.module$build$src$core$events$events.enable()}}else D=new S.FieldLabel$$module$build$src$core$field_label(this.arguments_[b]),this.appendValueInput("ARG"+b).setAlign(S.Align$$module$build$src$core$input.RIGHT).appendField(D,"ARGNAME"+b).init()}for(b=this.arguments_.length;this.getInput("ARG"+b);b++)this.removeInput("ARG"+b);(b=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(b.appendField(ge.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),b.init()):this.getField("WITH")&&b.removeField("WITH"))},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");b.setAttribute("name",this.getProcedureCall());for(let D=0;D<this.arguments_.length;D++){const M=S.module$build$src$core$utils$xml.createElement("arg");M.setAttribute("name",this.arguments_[D]),b.appendChild(M)}return b},domToMutation:function(b){var D=b.getAttribute("name");this.renameProcedure(this.getProcedureCall(),D),D=[];const M=[];for(let j,U=0;j=b.childNodes[U];U++)"arg"===j.nodeName.toLowerCase()&&(D.push(j.getAttribute("name")),M.push(j.getAttribute("paramId")));this.setProcedureParameters_(D,M)},saveExtraState:function(){const b=Object.create(null);return b.name=this.getProcedureCall(),this.arguments_.length&&(b.params=this.arguments_),b},loadExtraState:function(b){if(this.renameProcedure(this.getProcedureCall(),b.name),b=b.params){const D=[];D.length=b.length,D.fill(null),this.setProcedureParameters_(b,D)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(b){if(this.workspace&&!this.workspace.isFlyout&&b.recordUndo)if(b.type===S.module$build$src$core$events$events.BLOCK_CREATE&&-1!==b.ids.indexOf(this.id)){var D=this.getProcedureCall();if(!(D=S.module$build$src$core$procedures.getDefinition(D,this.workspace))||D.type===this.defType_&&JSON.stringify(D.getVars())===JSON.stringify(this.arguments_)||(D=null),!D){S.module$build$src$core$events$events.setGroup(b.group),b=S.module$build$src$core$utils$xml.createElement("xml"),(D=S.module$build$src$core$utils$xml.createElement("block")).setAttribute("type",this.defType_);var M=this.getRelativeToSurfaceXY(),U=M.y+2*S.config$$module$build$src$core$config.snapRadius;D.setAttribute("x",M.x+S.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),D.setAttribute("y",U),M=this.mutationToDom(),D.appendChild(M),(M=S.module$build$src$core$utils$xml.createElement("field")).setAttribute("name","NAME"),U=this.getProcedureCall();const j=S.module$build$src$core$procedures.findLegalName(U,this);U!==j&&this.renameProcedure(U,j),M.appendChild(S.module$build$src$core$utils$xml.createTextNode(U)),D.appendChild(M),b.appendChild(D),S.module$build$src$core$xml.domToWorkspace(b,this.workspace),S.module$build$src$core$events$events.setGroup(!1)}}else b.type===S.module$build$src$core$events$events.BLOCK_DELETE?(D=this.getProcedureCall(),S.module$build$src$core$procedures.getDefinition(D,this.workspace)||(S.module$build$src$core$events$events.setGroup(b.group),this.dispose(!0),S.module$build$src$core$events$events.setGroup(!1))):b.type===S.module$build$src$core$events$events.CHANGE&&"disabled"===b.element&&(D=this.getProcedureCall(),(D=S.module$build$src$core$procedures.getDefinition(D,this.workspace))&&D.id===b.blockId&&((D=S.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),S.module$build$src$core$events$events.setGroup(b.group),b.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),S.module$build$src$core$events$events.setGroup(D)))},customContextMenu:function(b){if(this.workspace.isMovable()){var D={enabled:!0};D.text=ge.PROCEDURES_HIGHLIGHT_DEF;var M=this.getProcedureCall(),U=this.workspace;D.callback=function(){const j=S.module$build$src$core$procedures.getDefinition(M,U);j&&(U.centerOnBlock(j.id),j.select())},b.push(D)}}};Bt.blocks.procedures_callnoreturn=Object.assign({},Xa,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(ge.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),Bt.blocks.procedures_callreturn=Object.assign({},Xa,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(ge.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),Bt.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(ge.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(ge.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(ge.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(ge.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");return b.setAttribute("value",Number(this.hasReturnValue_)),b},domToMutation:function(b){this.hasReturnValue_="1"===b.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(ge.PROCEDURES_DEFRETURN_RETURN))},onchange:function(b){if(!(this.workspace.isDragging&&this.workspace.isDragging()||b.type!==S.module$build$src$core$events$events.BLOCK_MOVE)){var D=!1,M=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(M.type)){D=!0;break}M=M.getSurroundParent()}while(M);D?("procedures_defnoreturn"===M.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(ge.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!==M.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(ge.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(ge.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(M=S.module$build$src$core$events$events.getGroup(),S.module$build$src$core$events$events.setGroup(b.group),this.setEnabled(D),S.module$build$src$core$events$events.setGroup(M))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},Wa(Bt.blocks);var Yn={},zs=S.module$build$src$core$common.defineBlocks;Yn.blocks=(0,S.module$build$src$core$common.createBlockDefinitionsFromJsonArray)([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),S.module$build$src$core$extensions.register("math_op_tooltip",S.module$build$src$core$extensions.buildTooltipForDropdown("OP",{ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"}));var Sl={mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation"),D="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return b.setAttribute("divisor_input",D),b},domToMutation:function(b){b="true"===b.getAttribute("divisor_input"),this.updateShape_(b)},updateShape_:function(b){const D=this.getInput("DIVISOR");b?D||this.appendValueInput("DIVISOR").setCheck("Number"):D&&this.removeInput("DIVISOR")}};S.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",Sl,function(){this.getField("PROPERTY").setValidator(function(b){b="DIVISIBLE_BY"===b,this.getSourceBlock().updateShape_(b)})}),S.module$build$src$core$extensions.register("math_change_tooltip",S.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Dl={updateType_:function(b){this.outputConnection.setCheck("MODE"===b?"Array":"Number")},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");return b.setAttribute("op",this.getFieldValue("OP")),b},domToMutation:function(b){this.updateType_(b.getAttribute("op"))}};S.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",Dl,function(){this.getField("OP").setValidator(function(b){this.updateType_(b)}.bind(this))}),zs(Yn.blocks);var Uo={},Le=S.module$build$src$core$msg.Msg,Ys=S.module$build$src$core$common.defineBlocks;Uo.blocks=(0,S.module$build$src$core$common.createBlockDefinitionsFromJsonArray)([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),S.module$build$src$core$extensions.register("controls_whileUntil_tooltip",S.module$build$src$core$extensions.buildTooltipForDropdown("MODE",{WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"})),S.module$build$src$core$extensions.register("controls_flow_tooltip",S.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",{BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"}));var Un={customContextMenu:function(b){if(!this.isInFlyout){var D=this.getField("VAR").getVariable(),M=D.name;if(!this.isCollapsed()&&null!==M){const U={enabled:!0};U.text=Le.VARIABLES_SET_CREATE_GET.replace("%1",M),D=S.module$build$src$core$variables.generateVariableFieldDom(D),(M=S.module$build$src$core$utils$xml.createElement("block")).setAttribute("type","variables_get"),M.appendChild(D),U.callback=S.module$build$src$core$contextmenu.callbackFactory(this,M),b.push(U)}}}};S.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",Un),S.module$build$src$core$extensions.register("controls_for_tooltip",S.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),S.module$build$src$core$extensions.register("controls_forEach_tooltip",S.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),Uo.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var Ai={getSurroundLoop:function(){let b=this;do{if(Uo.loopTypes.has(b.type))return b;b=b.getSurroundParent()}while(b);return null},onchange:function(b){if(this.workspace.isDragging&&!this.workspace.isDragging()&&b.type===S.module$build$src$core$events$events.BLOCK_MOVE){var D=this.getSurroundLoop(this);if(this.setWarningText(D?null:Le.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const M=S.module$build$src$core$events$events.getGroup();S.module$build$src$core$events$events.setGroup(b.group),this.setEnabled(D),S.module$build$src$core$events$events.setGroup(M)}}}};S.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",Ai),Ys(Uo.blocks);var Ot={},un=S.module$build$src$core$msg.Msg,Hr=S.module$build$src$core$common.defineBlocks;Ot.blocks=(0,S.module$build$src$core$common.createBlockDefinitionsFromJsonArray)([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),S.module$build$src$core$extensions.register("logic_op_tooltip",S.module$build$src$core$extensions.buildTooltipForDropdown("OP",{EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"}));var Js={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const b=S.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&b.setAttribute("elseif",this.elseifCount_),this.elseCount_&&b.setAttribute("else",1),b},domToMutation:function(b){this.elseifCount_=parseInt(b.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(b.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const b=Object.create(null);return this.elseifCount_&&(b.elseIfCount=this.elseifCount_),this.elseCount_&&(b.hasElse=!0),b},loadExtraState:function(b){this.elseifCount_=b.elseIfCount||0,this.elseCount_=b.hasElse?1:0,this.updateShape_()},decompose:function(b){const D=b.newBlock("controls_if_if");D.initSvg();let M=D.nextConnection;for(let U=1;U<=this.elseifCount_;U++){const j=b.newBlock("controls_if_elseif");j.initSvg(),M.connect(j.previousConnection),M=j.nextConnection}return this.elseCount_&&((b=b.newBlock("controls_if_else")).initSvg(),M.connect(b.previousConnection)),D},compose:function(b){b=b.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const D=[null],M=[null];let U=null;for(;b;){if(!b.isInsertionMarker())switch(b.type){case"controls_if_elseif":this.elseifCount_++,D.push(b.valueConnection_),M.push(b.statementConnection_);break;case"controls_if_else":this.elseCount_++,U=b.statementConnection_;break;default:throw TypeError("Unknown block type: "+b.type)}b=b.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(D,M,U)},saveConnections:function(b){b=b.nextConnection.targetBlock();let D=1;for(;b;){if(!b.isInsertionMarker())switch(b.type){case"controls_if_elseif":var M=this.getInput("IF"+D);const U=this.getInput("DO"+D);b.valueConnection_=M&&M.connection.targetConnection,b.statementConnection_=U&&U.connection.targetConnection,D++;break;case"controls_if_else":M=this.getInput("ELSE"),b.statementConnection_=M&&M.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+b.type)}b=b.getNextBlock()}},rebuildShape_:function(){const b=[null],D=[null];let M=null;this.getInput("ELSE")&&(M=this.getInput("ELSE").connection.targetConnection);for(let U=1;this.getInput("IF"+U);U++){const j=this.getInput("IF"+U),at=this.getInput("DO"+U);b.push(j.connection.targetConnection),D.push(at.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(b,D,M)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var b=1;this.getInput("IF"+b);b++)this.removeInput("IF"+b),this.removeInput("DO"+b);for(b=1;b<=this.elseifCount_;b++)this.appendValueInput("IF"+b).setCheck("Boolean").appendField(un.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+b).appendField(un.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(un.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(b,D,M){for(let U=1;U<=this.elseifCount_;U++)S.Mutator$$module$build$src$core$mutator.reconnect(b[U],this,"IF"+U),S.Mutator$$module$build$src$core$mutator.reconnect(D[U],this,"DO"+U);S.Mutator$$module$build$src$core$mutator.reconnect(M,this,"ELSE")}};S.module$build$src$core$extensions.registerMutator("controls_if_mutator",Js,null,["controls_if_elseif","controls_if_else"]),S.module$build$src$core$extensions.register("controls_if_tooltip",function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?un.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?un.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?un.CONTROLS_IF_TOOLTIP_4:"":un.CONTROLS_IF_TOOLTIP_1}.bind(this))});var Gt={onchange:function(b){this.prevBlocks_||(this.prevBlocks_=[null,null]);var D=this.getInputTargetBlock("A");const M=this.getInputTargetBlock("B");D&&M&&!this.workspace.connectionChecker.doTypeChecks(D.outputConnection,M.outputConnection)&&(S.module$build$src$core$events$events.setGroup(b.group),(b=this.prevBlocks_[0])!==D&&(D.unplug(),!b||b.isDisposed()||b.isShadow()||this.getInput("A").connection.connect(b.outputConnection)),(D=this.prevBlocks_[1])!==M&&(M.unplug(),!D||D.isDisposed()||D.isShadow()||this.getInput("B").connection.connect(D.outputConnection)),this.bumpNeighbours(),S.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}};S.module$build$src$core$extensions.register("logic_compare",function(){this.mixin(Gt)});var yt={prevParentConnection_:null,onchange:function(b){const D=this.getInputTargetBlock("THEN"),M=this.getInputTargetBlock("ELSE"),U=this.outputConnection.targetConnection;if((D||M)&&U)for(let j=0;2>j;j++){const at=1===j?D:M;at&&!at.workspace.connectionChecker.doTypeChecks(at.outputConnection,U)&&(S.module$build$src$core$events$events.setGroup(b.group),U===this.prevParentConnection_?(this.unplug(),U.getSourceBlock().bumpNeighbours()):(at.unplug(),at.bumpNeighbours()),S.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=U}};S.module$build$src$core$extensions.registerMixin("logic_ternary",yt),Hr(Ot.blocks);var de={},Ho=S.module$build$src$core$field_dropdown.FieldDropdown,oe=S.module$build$src$core$msg.Msg,be=S.module$build$src$core$common.defineBlocks;de.blocks=(0,S.module$build$src$core$common.createBlockDefinitionsFromJsonArray)([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),de.blocks.lists_create_with={init:function(){this.setHelpUrl(oe.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new S.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(oe.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");return b.setAttribute("items",this.itemCount_),b},domToMutation:function(b){this.itemCount_=parseInt(b.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(b){this.itemCount_=b.itemCount,this.updateShape_()},decompose:function(b){const D=b.newBlock("lists_create_with_container");D.initSvg();let M=D.getInput("STACK").connection;for(let U=0;U<this.itemCount_;U++){const j=b.newBlock("lists_create_with_item");j.initSvg(),M.connect(j.previousConnection),M=j.nextConnection}return D},compose:function(b){var D=b.getInputTargetBlock("STACK");for(b=[];D;)D.isInsertionMarker()||b.push(D.valueConnection_),D=D.getNextBlock();for(D=0;D<this.itemCount_;D++){const M=this.getInput("ADD"+D).connection.targetConnection;M&&-1===b.indexOf(M)&&M.disconnect()}for(this.itemCount_=b.length,this.updateShape_(),D=0;D<this.itemCount_;D++)S.Mutator$$module$build$src$core$mutator.reconnect(b[D],this,"ADD"+D)},saveConnections:function(b){b=b.getInputTargetBlock("STACK");let D=0;for(;b;){if(b.isInsertionMarker()){b=b.getNextBlock();continue}const M=this.getInput("ADD"+D);b.valueConnection_=M&&M.connection.targetConnection,b=b.getNextBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(oe.LISTS_CREATE_EMPTY_TITLE);for(var b=0;b<this.itemCount_;b++)if(!this.getInput("ADD"+b)){const D=this.appendValueInput("ADD"+b).setAlign(S.Align$$module$build$src$core$input.RIGHT);0===b&&D.appendField(oe.LISTS_CREATE_WITH_INPUT_WITH)}for(b=this.itemCount_;this.getInput("ADD"+b);b++)this.removeInput("ADD"+b)}},de.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(oe.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(oe.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},de.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(oe.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(oe.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},de.blocks.lists_indexOf={init:function(){const b=[[oe.LISTS_INDEX_OF_FIRST,"FIRST"],[oe.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(oe.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(oe.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Ho(b),"END"),this.setInputsInline(!0);const D=this;this.setTooltip(function(){return oe.LISTS_INDEX_OF_TOOLTIP.replace("%1",D.workspace.options.oneBasedIndex?"0":"-1")})}},de.blocks.lists_getIndex={init:function(){var b=[[oe.LISTS_GET_INDEX_GET,"GET"],[oe.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[oe.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[oe.LISTS_GET_INDEX_FROM_START,"FROM_START"],[oe.LISTS_GET_INDEX_FROM_END,"FROM_END"],[oe.LISTS_GET_INDEX_FIRST,"FIRST"],[oe.LISTS_GET_INDEX_LAST,"LAST"],[oe.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(oe.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),b=new Ho(b,function(M){M="REMOVE"===M,this.getSourceBlock().updateStatement_(M)}),this.appendValueInput("VALUE").setCheck("Array").appendField(oe.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(b,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),oe.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(oe.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const D=this;this.setTooltip(function(){const M=D.getFieldValue("MODE"),U=D.getFieldValue("WHERE");let j="";switch(M+" "+U){case"GET FROM_START":case"GET FROM_END":j=oe.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":j=oe.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":j=oe.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":j=oe.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":j=oe.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":j=oe.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":j=oe.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":j=oe.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":j=oe.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":j=oe.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":j=oe.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":j=oe.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"===U||"FROM_END"===U)&&(j+="  "+("FROM_START"===U?oe.LISTS_INDEX_FROM_START_TOOLTIP:oe.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",D.workspace.options.oneBasedIndex?"#1":"#0")),j})},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");b.setAttribute("statement",!this.outputConnection);const D=this.getInput("AT").type===S.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return b.setAttribute("at",D),b},domToMutation:function(b){const D="true"===b.getAttribute("statement");this.updateStatement_(D),b="false"!==b.getAttribute("at"),this.updateAt_(b)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(b){b.isStatement?this.updateStatement_(!0):"string"==typeof b&&this.domToMutation(S.module$build$src$core$xml.textToDom(b))},updateStatement_:function(b){b!==!this.outputConnection&&(this.unplug(!0,!0),b?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(b){this.removeInput("AT"),this.removeInput("ORDINAL",!0),b?(this.appendValueInput("AT").setCheck("Number"),oe.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(oe.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const D=new Ho(this.WHERE_OPTIONS,function(M){const U="FROM_START"===M||"FROM_END"===M;if(U!==b){const j=this.getSourceBlock();return j.updateAt_(U),j.setFieldValue(M,"WHERE"),null}});this.getInput("AT").appendField(D,"WHERE"),oe.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},de.blocks.lists_setIndex={init:function(){const b=[[oe.LISTS_SET_INDEX_SET,"SET"],[oe.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[oe.LISTS_GET_INDEX_FROM_START,"FROM_START"],[oe.LISTS_GET_INDEX_FROM_END,"FROM_END"],[oe.LISTS_GET_INDEX_FIRST,"FIRST"],[oe.LISTS_GET_INDEX_LAST,"LAST"],[oe.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(oe.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(oe.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Ho(b),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(oe.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(oe.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const D=this;this.setTooltip(function(){const M=D.getFieldValue("MODE"),U=D.getFieldValue("WHERE");let j="";switch(M+" "+U){case"SET FROM_START":case"SET FROM_END":j=oe.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":j=oe.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":j=oe.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":j=oe.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":j=oe.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":j=oe.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":j=oe.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":j=oe.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"===U||"FROM_END"===U)&&(j+="  "+oe.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",D.workspace.options.oneBasedIndex?"#1":"#0")),j})},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation"),D=this.getInput("AT").type===S.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return b.setAttribute("at",D),b},domToMutation:function(b){b="false"!==b.getAttribute("at"),this.updateAt_(b)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(b){this.removeInput("AT"),this.removeInput("ORDINAL",!0),b?(this.appendValueInput("AT").setCheck("Number"),oe.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(oe.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const D=new Ho(this.WHERE_OPTIONS,function(M){const U="FROM_START"===M||"FROM_END"===M;if(U!==b){const j=this.getSourceBlock();return j.updateAt_(U),j.setFieldValue(M,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(D,"WHERE")}},de.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[oe.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[oe.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[oe.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[oe.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[oe.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[oe.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(oe.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(oe.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),oe.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(oe.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(oe.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");var D=this.getInput("AT1").type===S.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return b.setAttribute("at1",D),D=this.getInput("AT2").type===S.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,b.setAttribute("at2",D),b},domToMutation:function(b){const D="true"===b.getAttribute("at1");b="true"===b.getAttribute("at2"),this.updateAt_(1,D),this.updateAt_(2,b)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(b,D){this.removeInput("AT"+b),this.removeInput("ORDINAL"+b,!0),D?(this.appendValueInput("AT"+b).setCheck("Number"),oe.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+b).appendField(oe.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+b);const M=new Ho(this["WHERE_OPTIONS_"+b],function(U){const j="FROM_START"===U||"FROM_END"===U;if(j!==D){const at=this.getSourceBlock();return at.updateAt_(b,j),at.setFieldValue(U,"WHERE"+b),null}});this.getInput("AT"+b).appendField(M,"WHERE"+b),1===b&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),oe.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},de.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},de.blocks.lists_split={init:function(){const b=this,D=new Ho([[oe.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[oe.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(M){b.updateType_(M)});this.setHelpUrl(oe.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(D,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(oe.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){const M=b.getFieldValue("MODE");if("SPLIT"===M)return oe.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"===M)return oe.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+M)})},updateType_:function(b){if(this.getFieldValue("MODE")!==b){const D=this.getInput("INPUT").connection;D.setShadowDom(null);const M=D.targetBlock();M&&(D.disconnect(),M.isShadow()?M.dispose():this.bumpNeighbours())}"SPLIT"===b?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const b=S.module$build$src$core$utils$xml.createElement("mutation");return b.setAttribute("mode",this.getFieldValue("MODE")),b},domToMutation:function(b){this.updateType_(b.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},be(de.blocks);var Jn={},we=S.module$build$src$core$common.defineBlocks;Jn.blocks=(0,S.module$build$src$core$common.createBlockDefinitionsFromJsonArray)([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),we(Jn.blocks);var en={};return en.colour=Jn,en.lists=de,en.logic=Ot,en.loops=Uo,en.math=Yn,en.procedures=Bt,en.texts=Mt,en.variables=St,en.variablesDynamic=g,en.blocks=Object.assign({},Jn.blocks,de.blocks,Ot.blocks,Uo.blocks,Yn.blocks,Bt.blocks,St.blocks,g.blocks),en.__namespace__=S,en}.apply(Ee,G))&&(Rt.exports=h)},552:function(Rt,Ee,Ae){var G,h;G=[Ae(210),Ae(266),Ae(783),Ae(700)],void 0!==(h=function(Z,S,g,wt){"use strict";return Z.setLocale(S),Z}.apply(Ee,G))&&(Rt.exports=h)},210:function(Rt,Ee,Ae){var G,h;G=[Ae(931)],void 0!==(h=function(Z){"use strict";return Z}.apply(Ee,G))&&(Rt.exports=h)},279:function(Rt,Ee,Ae){var G,h;G=[Ae(552)],void 0!==(h=function(Z){return Z}.apply(Ee,G))&&(Rt.exports=h)},700:function(Rt,Ee,Ae){var G,h;G=[Ae(210),Ae(957)],void 0!==(h=function(Z,S){return S}.apply(Ee,G))&&(Rt.exports=h)},957:function(Rt,Ee,Ae){var G,h;G=[Ae(69)],void 0!==(h=function(Z){var S=Z.__namespace__,g={};g.javascriptGenerator=new S.CodeGenerator$$module$build$src$core$generator("JavaScript"),g.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),g.javascriptGenerator.ORDER_ATOMIC=0,g.javascriptGenerator.ORDER_NEW=1.1,g.javascriptGenerator.ORDER_MEMBER=1.2,g.javascriptGenerator.ORDER_FUNCTION_CALL=2,g.javascriptGenerator.ORDER_INCREMENT=3,g.javascriptGenerator.ORDER_DECREMENT=3,g.javascriptGenerator.ORDER_BITWISE_NOT=4.1,g.javascriptGenerator.ORDER_UNARY_PLUS=4.2,g.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,g.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,g.javascriptGenerator.ORDER_TYPEOF=4.5,g.javascriptGenerator.ORDER_VOID=4.6,g.javascriptGenerator.ORDER_DELETE=4.7,g.javascriptGenerator.ORDER_AWAIT=4.8,g.javascriptGenerator.ORDER_EXPONENTIATION=5,g.javascriptGenerator.ORDER_MULTIPLICATION=5.1,g.javascriptGenerator.ORDER_DIVISION=5.2,g.javascriptGenerator.ORDER_MODULUS=5.3,g.javascriptGenerator.ORDER_SUBTRACTION=6.1,g.javascriptGenerator.ORDER_ADDITION=6.2,g.javascriptGenerator.ORDER_BITWISE_SHIFT=7,g.javascriptGenerator.ORDER_RELATIONAL=8,g.javascriptGenerator.ORDER_IN=8,g.javascriptGenerator.ORDER_INSTANCEOF=8,g.javascriptGenerator.ORDER_EQUALITY=9,g.javascriptGenerator.ORDER_BITWISE_AND=10,g.javascriptGenerator.ORDER_BITWISE_XOR=11,g.javascriptGenerator.ORDER_BITWISE_OR=12,g.javascriptGenerator.ORDER_LOGICAL_AND=13,g.javascriptGenerator.ORDER_LOGICAL_OR=14,g.javascriptGenerator.ORDER_CONDITIONAL=15,g.javascriptGenerator.ORDER_ASSIGNMENT=16,g.javascriptGenerator.ORDER_YIELD=17,g.javascriptGenerator.ORDER_COMMA=18,g.javascriptGenerator.ORDER_NONE=99,g.javascriptGenerator.ORDER_OVERRIDES=[[g.javascriptGenerator.ORDER_FUNCTION_CALL,g.javascriptGenerator.ORDER_MEMBER],[g.javascriptGenerator.ORDER_FUNCTION_CALL,g.javascriptGenerator.ORDER_FUNCTION_CALL],[g.javascriptGenerator.ORDER_MEMBER,g.javascriptGenerator.ORDER_MEMBER],[g.javascriptGenerator.ORDER_MEMBER,g.javascriptGenerator.ORDER_FUNCTION_CALL],[g.javascriptGenerator.ORDER_LOGICAL_NOT,g.javascriptGenerator.ORDER_LOGICAL_NOT],[g.javascriptGenerator.ORDER_MULTIPLICATION,g.javascriptGenerator.ORDER_MULTIPLICATION],[g.javascriptGenerator.ORDER_ADDITION,g.javascriptGenerator.ORDER_ADDITION],[g.javascriptGenerator.ORDER_LOGICAL_AND,g.javascriptGenerator.ORDER_LOGICAL_AND],[g.javascriptGenerator.ORDER_LOGICAL_OR,g.javascriptGenerator.ORDER_LOGICAL_OR]],g.javascriptGenerator.isInitialized=!1,g.javascriptGenerator.init=function(v){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new S.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(v.getVariableMap()),this.nameDB_.populateVariables(v),this.nameDB_.populateProcedures(v);const $=[];var w=S.module$build$src$core$variables.allDeveloperVariables(v);for(let O=0;O<w.length;O++)$.push(this.nameDB_.getName(w[O],S.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(v=S.module$build$src$core$variables.allUsedVarModels(v),w=0;w<v.length;w++)$.push(this.nameDB_.getName(v[w].getId(),S.NameType$$module$build$src$core$names.VARIABLE));$.length&&(this.definitions_.variables="var "+$.join(", ")+";"),this.isInitialized=!0},g.javascriptGenerator.finish=function(v){const $=Object.values(this.definitions_);return v=Object.getPrototypeOf(this).finish.call(this,v),this.isInitialized=!1,this.nameDB_.reset(),$.join("\n\n")+"\n\n\n"+v},g.javascriptGenerator.scrubNakedValue=function(v){return v+";\n"},g.javascriptGenerator.quote_=function(v){return"'"+(v=v.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},g.javascriptGenerator.multiline_quote_=function(v){return v.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},g.javascriptGenerator.scrub_=function(v,$,w){let O="";if(!v.outputConnection||!v.outputConnection.targetConnection){var F=v.getCommentText();F&&(F=S.module$build$src$core$utils$string.wrap(F,this.COMMENT_WRAP-3),O+=this.prefixLines(F+"\n","// "));for(let k=0;k<v.inputList.length;k++)v.inputList[k].type===S.module$build$src$core$input_types.inputTypes.VALUE&&(F=v.inputList[k].connection.targetBlock())&&(F=this.allNestedComments(F))&&(O+=this.prefixLines(F,"// "))}return v=v.nextConnection&&v.nextConnection.targetBlock(),O+$+(w?"":this.blockToCode(v))},g.javascriptGenerator.getAdjusted=function(v,$,w,O,F){w=w||0,v.workspace.options.oneBasedIndex&&w--;const k=v.workspace.options.oneBasedIndex?"1":"0";let Q,Ge=F=F||this.ORDER_NONE;return 0<w?Q=Ge=this.ORDER_ADDITION:0>w?Q=Ge=this.ORDER_SUBTRACTION:O&&(Q=Ge=this.ORDER_UNARY_NEGATION),v=this.valueToCode(v,$,Ge)||k,S.module$build$src$core$utils$string.isNumber(v)?(v=Number(v)+w,O&&(v=-v)):(0<w?v=v+" + "+w:0>w&&(v=v+" - "+-w),O&&(v=w?"-("+v+")":"-"+v),Q=Math.floor(Q),F=Math.floor(F),Q&&F>=Q&&(v="("+v+")")),v},g.javascriptGenerator.variables_get=function(v){return[g.javascriptGenerator.nameDB_.getName(v.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE),g.javascriptGenerator.ORDER_ATOMIC]},g.javascriptGenerator.variables_set=function(v){const $=g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return g.javascriptGenerator.nameDB_.getName(v.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE)+" = "+$+";\n"},g.javascriptGenerator.variables_get_dynamic=g.javascriptGenerator.variables_get,g.javascriptGenerator.variables_set_dynamic=g.javascriptGenerator.variables_set;var St=/^\s*'([^']|\\')*'\s*$/,Ve=function(v){return St.test(v)?[v,g.javascriptGenerator.ORDER_ATOMIC]:["String("+v+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},Qt=function(v,$,w){return"FIRST"===$?"0":"FROM_END"===$?v+".length - 1 - "+w:"LAST"===$?v+".length - 1":w};g.javascriptGenerator.text=function(v){return[g.javascriptGenerator.quote_(v.getFieldValue("TEXT")),g.javascriptGenerator.ORDER_ATOMIC]},g.javascriptGenerator.text_multiline=function(v){const $=-1!==(v=g.javascriptGenerator.multiline_quote_(v.getFieldValue("TEXT"))).indexOf("+")?g.javascriptGenerator.ORDER_ADDITION:g.javascriptGenerator.ORDER_ATOMIC;return[v,$]},g.javascriptGenerator.text_join=function(v){switch(v.itemCount_){case 0:return["''",g.javascriptGenerator.ORDER_ATOMIC];case 1:return v=g.javascriptGenerator.valueToCode(v,"ADD0",g.javascriptGenerator.ORDER_NONE)||"''",Ve(v);case 2:var $=g.javascriptGenerator.valueToCode(v,"ADD0",g.javascriptGenerator.ORDER_NONE)||"''";return v=g.javascriptGenerator.valueToCode(v,"ADD1",g.javascriptGenerator.ORDER_NONE)||"''",[Ve($)[0]+" + "+Ve(v)[0],g.javascriptGenerator.ORDER_ADDITION];default:$=Array(v.itemCount_);for(let w=0;w<v.itemCount_;w++)$[w]=g.javascriptGenerator.valueToCode(v,"ADD"+w,g.javascriptGenerator.ORDER_NONE)||"''";return["["+$.join(",")+"].join('')",g.javascriptGenerator.ORDER_FUNCTION_CALL]}},g.javascriptGenerator.text_append=function(v){const $=g.javascriptGenerator.nameDB_.getName(v.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE);return v=g.javascriptGenerator.valueToCode(v,"TEXT",g.javascriptGenerator.ORDER_NONE)||"''",$+" += "+Ve(v)[0]+";\n"},g.javascriptGenerator.text_length=function(v){return[(g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_MEMBER)||"''")+".length",g.javascriptGenerator.ORDER_MEMBER]},g.javascriptGenerator.text_isEmpty=function(v){return["!"+(g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_MEMBER)||"''")+".length",g.javascriptGenerator.ORDER_LOGICAL_NOT]},g.javascriptGenerator.text_indexOf=function(v){var $="FIRST"===v.getFieldValue("END")?"indexOf":"lastIndexOf";const w=g.javascriptGenerator.valueToCode(v,"FIND",g.javascriptGenerator.ORDER_NONE)||"''";return $=(g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_MEMBER)||"''")+"."+$+"("+w+")",v.workspace.options.oneBasedIndex?[$+" + 1",g.javascriptGenerator.ORDER_ADDITION]:[$,g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.text_charAt=function(v){const $=v.getFieldValue("WHERE")||"FROM_START",w=g.javascriptGenerator.valueToCode(v,"VALUE","RANDOM"===$?g.javascriptGenerator.ORDER_NONE:g.javascriptGenerator.ORDER_MEMBER)||"''";switch($){case"FIRST":return[w+".charAt(0)",g.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[w+".slice(-1)",g.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return[w+".charAt("+(v=g.javascriptGenerator.getAdjusted(v,"AT"))+")",g.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return[w+".slice("+(v=g.javascriptGenerator.getAdjusted(v,"AT",1,!0))+").charAt(0)",g.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[g.javascriptGenerator.provideFunction_("textRandomLetter",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {\n  var x = Math.floor(Math.random() * text.length);\n  return text[x];\n}\n`)+"("+w+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},g.javascriptGenerator.text_getSubstring=function(v){var $=v.getFieldValue("WHERE1"),w=v.getFieldValue("WHERE2"),O="FROM_END"!==$&&"LAST"!==$&&"FROM_END"!==w&&"LAST"!==w,F=g.javascriptGenerator.valueToCode(v,"STRING",O?g.javascriptGenerator.ORDER_MEMBER:g.javascriptGenerator.ORDER_NONE)||"''";if("FIRST"===$&&"LAST"===w)return[F,g.javascriptGenerator.ORDER_NONE];if(F.match(/^'?\w+'?$/)||O){switch($){case"FROM_START":$=g.javascriptGenerator.getAdjusted(v,"AT1");break;case"FROM_END":$=F+".length - "+($=g.javascriptGenerator.getAdjusted(v,"AT1",1,!1,g.javascriptGenerator.ORDER_SUBTRACTION));break;case"FIRST":$="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(w){case"FROM_START":w=g.javascriptGenerator.getAdjusted(v,"AT2",1);break;case"FROM_END":w=F+".length - "+(w=g.javascriptGenerator.getAdjusted(v,"AT2",0,!1,g.javascriptGenerator.ORDER_SUBTRACTION));break;case"LAST":w=F+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}F=F+".slice("+$+", "+w+")"}else{O=g.javascriptGenerator.getAdjusted(v,"AT1"),v=g.javascriptGenerator.getAdjusted(v,"AT2");const k={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};F=g.javascriptGenerator.provideFunction_("subsequence"+k[$]+k[w],`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===$||"FROM_START"===$?", at1":""}${"FROM_END"===w||"FROM_START"===w?", at2":""}) {\n  var start = ${Qt("sequence",$,"at1")};\n  var end = ${Qt("sequence",w,"at2")} + 1;\n  return sequence.slice(start, end);\n}\n`)+"("+F+("FROM_END"===$||"FROM_START"===$?", "+O:"")+("FROM_END"===w||"FROM_START"===w?", "+v:"")+")"}return[F,g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.text_changeCase=function(v){const $={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[v.getFieldValue("CASE")];return v=g.javascriptGenerator.valueToCode(v,"TEXT",$?g.javascriptGenerator.ORDER_MEMBER:g.javascriptGenerator.ORDER_NONE)||"''",[$?v+$:g.javascriptGenerator.provideFunction_("textToTitleCase",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {\n  return str.replace(/\\S+/g,\n      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});\n}\n`)+"("+v+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.text_trim=function(v){const $={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[v.getFieldValue("MODE")];return[(g.javascriptGenerator.valueToCode(v,"TEXT",g.javascriptGenerator.ORDER_MEMBER)||"''")+$,g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.text_print=function(v){return"window.alert("+(g.javascriptGenerator.valueToCode(v,"TEXT",g.javascriptGenerator.ORDER_NONE)||"''")+");\n"},g.javascriptGenerator.text_prompt_ext=function(v){let $="window.prompt("+(v.getField("TEXT")?g.javascriptGenerator.quote_(v.getFieldValue("TEXT")):g.javascriptGenerator.valueToCode(v,"TEXT",g.javascriptGenerator.ORDER_NONE)||"''")+")";return"NUMBER"===v.getFieldValue("TYPE")&&($="Number("+$+")"),[$,g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.text_prompt=g.javascriptGenerator.text_prompt_ext,g.javascriptGenerator.text_count=function(v){const $=g.javascriptGenerator.valueToCode(v,"TEXT",g.javascriptGenerator.ORDER_NONE)||"''";return v=g.javascriptGenerator.valueToCode(v,"SUB",g.javascriptGenerator.ORDER_NONE)||"''",[g.javascriptGenerator.provideFunction_("textCount",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {\n  if (needle.length === 0) {\n    return haystack.length + 1;\n  } else {\n    return haystack.split(needle).length - 1;\n  }\n}\n`)+"("+$+", "+v+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.text_replace=function(v){const $=g.javascriptGenerator.valueToCode(v,"TEXT",g.javascriptGenerator.ORDER_NONE)||"''",w=g.javascriptGenerator.valueToCode(v,"FROM",g.javascriptGenerator.ORDER_NONE)||"''";return v=g.javascriptGenerator.valueToCode(v,"TO",g.javascriptGenerator.ORDER_NONE)||"''",[g.javascriptGenerator.provideFunction_("textReplace",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {\n  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')\n                 .replace(/\\x08/g, '\\\\x08');\n  return haystack.replace(new RegExp(needle, 'g'), replacement);\n}\n`)+"("+$+", "+w+", "+v+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.text_reverse=function(v){return[(g.javascriptGenerator.valueToCode(v,"TEXT",g.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.procedures_defreturn=function(v){const $=g.javascriptGenerator.nameDB_.getName(v.getFieldValue("NAME"),S.NameType$$module$build$src$core$names.PROCEDURE);var w="";g.javascriptGenerator.STATEMENT_PREFIX&&(w+=g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_PREFIX,v)),g.javascriptGenerator.STATEMENT_SUFFIX&&(w+=g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_SUFFIX,v)),w&&(w=g.javascriptGenerator.prefixLines(w,g.javascriptGenerator.INDENT));let O="";g.javascriptGenerator.INFINITE_LOOP_TRAP&&(O=g.javascriptGenerator.prefixLines(g.javascriptGenerator.injectId(g.javascriptGenerator.INFINITE_LOOP_TRAP,v),g.javascriptGenerator.INDENT));const F=g.javascriptGenerator.statementToCode(v,"STACK");let k=g.javascriptGenerator.valueToCode(v,"RETURN",g.javascriptGenerator.ORDER_NONE)||"",Q="";F&&k&&(Q=w),k&&(k=g.javascriptGenerator.INDENT+"return "+k+";\n");const Ge=[],ce=v.getVars();for(let Pt=0;Pt<ce.length;Pt++)Ge[Pt]=g.javascriptGenerator.nameDB_.getName(ce[Pt],S.NameType$$module$build$src$core$names.VARIABLE);return w="function "+$+"("+Ge.join(", ")+") {\n"+w+O+F+Q+k+"}",w=g.javascriptGenerator.scrub_(v,w),g.javascriptGenerator.definitions_["%"+$]=w,null},g.javascriptGenerator.procedures_defnoreturn=g.javascriptGenerator.procedures_defreturn,g.javascriptGenerator.procedures_callreturn=function(v){const $=g.javascriptGenerator.nameDB_.getName(v.getFieldValue("NAME"),S.NameType$$module$build$src$core$names.PROCEDURE),w=[],O=v.getVars();for(let F=0;F<O.length;F++)w[F]=g.javascriptGenerator.valueToCode(v,"ARG"+F,g.javascriptGenerator.ORDER_NONE)||"null";return[$+"("+w.join(", ")+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.procedures_callnoreturn=function(v){return g.javascriptGenerator.procedures_callreturn(v)[0]+";\n"},g.javascriptGenerator.procedures_ifreturn=function(v){let $="if ("+(g.javascriptGenerator.valueToCode(v,"CONDITION",g.javascriptGenerator.ORDER_NONE)||"false")+") {\n";return g.javascriptGenerator.STATEMENT_SUFFIX&&($+=g.javascriptGenerator.prefixLines(g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_SUFFIX,v),g.javascriptGenerator.INDENT)),v.hasReturnValue_?(v=g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_NONE)||"null",$+=g.javascriptGenerator.INDENT+"return "+v+";\n"):$+=g.javascriptGenerator.INDENT+"return;\n",$+"}\n"},g.javascriptGenerator.math_number=function(v){return[v=Number(v.getFieldValue("NUM")),0<=v?g.javascriptGenerator.ORDER_ATOMIC:g.javascriptGenerator.ORDER_UNARY_NEGATION]},g.javascriptGenerator.math_arithmetic=function(v){var $={ADD:[" + ",g.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",g.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",g.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",g.javascriptGenerator.ORDER_DIVISION],POWER:[null,g.javascriptGenerator.ORDER_NONE]}[v.getFieldValue("OP")];const w=$[0],O=g.javascriptGenerator.valueToCode(v,"A",$=$[1])||"0";return v=g.javascriptGenerator.valueToCode(v,"B",$)||"0",w?[O+w+v,$]:["Math.pow("+O+", "+v+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.math_single=function(v){const $=v.getFieldValue("OP");let w;if("NEG"===$)return"-"===(v=g.javascriptGenerator.valueToCode(v,"NUM",g.javascriptGenerator.ORDER_UNARY_NEGATION)||"0")[0]&&(v=" "+v),["-"+v,g.javascriptGenerator.ORDER_UNARY_NEGATION];switch(v="SIN"===$||"COS"===$||"TAN"===$?g.javascriptGenerator.valueToCode(v,"NUM",g.javascriptGenerator.ORDER_DIVISION)||"0":g.javascriptGenerator.valueToCode(v,"NUM",g.javascriptGenerator.ORDER_NONE)||"0",$){case"ABS":w="Math.abs("+v+")";break;case"ROOT":w="Math.sqrt("+v+")";break;case"LN":w="Math.log("+v+")";break;case"EXP":w="Math.exp("+v+")";break;case"POW10":w="Math.pow(10,"+v+")";break;case"ROUND":w="Math.round("+v+")";break;case"ROUNDUP":w="Math.ceil("+v+")";break;case"ROUNDDOWN":w="Math.floor("+v+")";break;case"SIN":w="Math.sin("+v+" / 180 * Math.PI)";break;case"COS":w="Math.cos("+v+" / 180 * Math.PI)";break;case"TAN":w="Math.tan("+v+" / 180 * Math.PI)"}if(w)return[w,g.javascriptGenerator.ORDER_FUNCTION_CALL];switch($){case"LOG10":w="Math.log("+v+") / Math.log(10)";break;case"ASIN":w="Math.asin("+v+") / Math.PI * 180";break;case"ACOS":w="Math.acos("+v+") / Math.PI * 180";break;case"ATAN":w="Math.atan("+v+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+$)}return[w,g.javascriptGenerator.ORDER_DIVISION]},g.javascriptGenerator.math_constant=function(v){return{PI:["Math.PI",g.javascriptGenerator.ORDER_MEMBER],E:["Math.E",g.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",g.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",g.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",g.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",g.javascriptGenerator.ORDER_ATOMIC]}[v.getFieldValue("CONSTANT")]},g.javascriptGenerator.math_number_property=function(v){var $={EVEN:[" % 2 === 0",g.javascriptGenerator.ORDER_MODULUS,g.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",g.javascriptGenerator.ORDER_MODULUS,g.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",g.javascriptGenerator.ORDER_MODULUS,g.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",g.javascriptGenerator.ORDER_RELATIONAL,g.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",g.javascriptGenerator.ORDER_RELATIONAL,g.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,g.javascriptGenerator.ORDER_MODULUS,g.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,g.javascriptGenerator.ORDER_NONE,g.javascriptGenerator.ORDER_FUNCTION_CALL]};const w=v.getFieldValue("PROPERTY"),[O,F,k]=$[w];return $=g.javascriptGenerator.valueToCode(v,"NUMBER_TO_CHECK",F)||"0",[v="PRIME"===w?g.javascriptGenerator.provideFunction_("mathIsPrime",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {\n  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  if (n == 2 || n == 3) {\n    return true;\n  }\n  // False if n is NaN, negative, is 1, or not whole.\n  // And false if n is divisible by 2 or 3.\n  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {\n    return false;\n  }\n  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {\n    if (n % (x - 1) === 0 || n % (x + 1) === 0) {\n      return false;\n    }\n  }\n  return true;\n}\n`)+"("+$+")":"DIVISIBLE_BY"===w?$+" % "+(v=g.javascriptGenerator.valueToCode(v,"DIVISOR",g.javascriptGenerator.ORDER_MODULUS)||"0")+" === 0":$+O,k]},g.javascriptGenerator.math_change=function(v){const $=g.javascriptGenerator.valueToCode(v,"DELTA",g.javascriptGenerator.ORDER_ADDITION)||"0";return(v=g.javascriptGenerator.nameDB_.getName(v.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE))+" = (typeof "+v+" === 'number' ? "+v+" : 0) + "+$+";\n"},g.javascriptGenerator.math_round=g.javascriptGenerator.math_single,g.javascriptGenerator.math_trig=g.javascriptGenerator.math_single,g.javascriptGenerator.math_on_list=function(v){var $=v.getFieldValue("OP");switch($){case"SUM":v=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_MEMBER)||"[]",v+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":v="Math.min.apply(null, "+(v=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"MAX":v="Math.max.apply(null, "+(v=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"AVERAGE":v=($=g.javascriptGenerator.provideFunction_("mathMean",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;\n}\n`))+"("+(v=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"MEDIAN":v=($=g.javascriptGenerator.provideFunction_("mathMedian",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  var localList = myList.filter(function (x) {return typeof x === 'number';});\n  if (!localList.length) return null;\n  localList.sort(function(a, b) {return b - a;});\n  if (localList.length % 2 === 0) {\n    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\n  } else {\n    return localList[(localList.length - 1) / 2];\n  }\n}\n`))+"("+(v=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"MODE":v=($=g.javascriptGenerator.provideFunction_("mathModes",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {\n  var modes = [];\n  var counts = [];\n  var maxCount = 0;\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    var found = false;\n    var thisCount;\n    for (var j = 0; j < counts.length; j++) {\n      if (counts[j][0] === value) {\n        thisCount = ++counts[j][1];\n        found = true;\n        break;\n      }\n    }\n    if (!found) {\n      counts.push([value, 1]);\n      thisCount = 1;\n    }\n    maxCount = Math.max(thisCount, maxCount);\n  }\n  for (var j = 0; j < counts.length; j++) {\n    if (counts[j][1] === maxCount) {\n        modes.push(counts[j][0]);\n    }\n  }\n  return modes;\n}\n`))+"("+(v=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"STD_DEV":v=($=g.javascriptGenerator.provideFunction_("mathStandardDeviation",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {\n  var n = numbers.length;\n  if (!n) return null;\n  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;\n  var variance = 0;\n  for (var j = 0; j < n; j++) {\n    variance += Math.pow(numbers[j] - mean, 2);\n  }\n  variance = variance / n;\n  return Math.sqrt(variance);\n}\n`))+"("+(v=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"RANDOM":v=($=g.javascriptGenerator.provideFunction_("mathRandomList",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {\n  var x = Math.floor(Math.random() * list.length);\n  return list[x];\n}\n`))+"("+(v=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+$)}return[v,g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.math_modulo=function(v){return[(g.javascriptGenerator.valueToCode(v,"DIVIDEND",g.javascriptGenerator.ORDER_MODULUS)||"0")+" % "+(v=g.javascriptGenerator.valueToCode(v,"DIVISOR",g.javascriptGenerator.ORDER_MODULUS)||"0"),g.javascriptGenerator.ORDER_MODULUS]},g.javascriptGenerator.math_constrain=function(v){return["Math.min(Math.max("+(g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_NONE)||"0")+", "+(g.javascriptGenerator.valueToCode(v,"LOW",g.javascriptGenerator.ORDER_NONE)||"0")+"), "+(v=g.javascriptGenerator.valueToCode(v,"HIGH",g.javascriptGenerator.ORDER_NONE)||"Infinity")+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.math_random_int=function(v){const $=g.javascriptGenerator.valueToCode(v,"FROM",g.javascriptGenerator.ORDER_NONE)||"0";return v=g.javascriptGenerator.valueToCode(v,"TO",g.javascriptGenerator.ORDER_NONE)||"0",[g.javascriptGenerator.provideFunction_("mathRandomInt",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n  if (a > b) {\n    // Swap a and b to ensure a is smaller.\n    var c = a;\n    a = b;\n    b = c;\n  }\n  return Math.floor(Math.random() * (b - a + 1) + a);\n}\n`)+"("+$+", "+v+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.math_random_float=function(v){return["Math.random()",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.math_atan2=function(v){const $=g.javascriptGenerator.valueToCode(v,"X",g.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(g.javascriptGenerator.valueToCode(v,"Y",g.javascriptGenerator.ORDER_NONE)||"0")+", "+$+") / Math.PI * 180",g.javascriptGenerator.ORDER_DIVISION]},g.javascriptGenerator.controls_repeat_ext=function(v){let $;$=v.getField("TIMES")?String(Number(v.getFieldValue("TIMES"))):g.javascriptGenerator.valueToCode(v,"TIMES",g.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let w=g.javascriptGenerator.statementToCode(v,"DO");w=g.javascriptGenerator.addLoopTrap(w,v),v="";const O=g.javascriptGenerator.nameDB_.getDistinctName("count",S.NameType$$module$build$src$core$names.VARIABLE);let F=$;return $.match(/^\w+$/)||S.module$build$src$core$utils$string.isNumber($)||(F=g.javascriptGenerator.nameDB_.getDistinctName("repeat_end",S.NameType$$module$build$src$core$names.VARIABLE),v+="var "+F+" = "+$+";\n"),v+"for (var "+O+" = 0; "+O+" < "+F+"; "+O+"++) {\n"+w+"}\n"},g.javascriptGenerator.controls_repeat=g.javascriptGenerator.controls_repeat_ext,g.javascriptGenerator.controls_whileUntil=function(v){const $="UNTIL"===v.getFieldValue("MODE");let w=g.javascriptGenerator.valueToCode(v,"BOOL",$?g.javascriptGenerator.ORDER_LOGICAL_NOT:g.javascriptGenerator.ORDER_NONE)||"false",O=g.javascriptGenerator.statementToCode(v,"DO");return O=g.javascriptGenerator.addLoopTrap(O,v),$&&(w="!"+w),"while ("+w+") {\n"+O+"}\n"},g.javascriptGenerator.controls_for=function(v){var $=g.javascriptGenerator.nameDB_.getName(v.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE),w=g.javascriptGenerator.valueToCode(v,"FROM",g.javascriptGenerator.ORDER_ASSIGNMENT)||"0",O=g.javascriptGenerator.valueToCode(v,"TO",g.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const F=g.javascriptGenerator.valueToCode(v,"BY",g.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let k=g.javascriptGenerator.statementToCode(v,"DO");if(k=g.javascriptGenerator.addLoopTrap(k,v),S.module$build$src$core$utils$string.isNumber(w)&&S.module$build$src$core$utils$string.isNumber(O)&&S.module$build$src$core$utils$string.isNumber(F)){var Q=Number(w)<=Number(O);v="for ("+$+" = "+w+"; "+$+(Q?" <= ":" >= ")+O+"; "+$,v=1===($=Math.abs(Number(F)))?v+(Q?"++":"--"):v+(Q?" += ":" -= ")+$,v+=") {\n"+k+"}\n"}else v="",Q=w,w.match(/^\w+$/)||S.module$build$src$core$utils$string.isNumber(w)||(v+="var "+(Q=g.javascriptGenerator.nameDB_.getDistinctName($+"_start",S.NameType$$module$build$src$core$names.VARIABLE))+" = "+w+";\n"),w=O,O.match(/^\w+$/)||S.module$build$src$core$utils$string.isNumber(O)||(v+="var "+(w=g.javascriptGenerator.nameDB_.getDistinctName($+"_end",S.NameType$$module$build$src$core$names.VARIABLE))+" = "+O+";\n"),v+="var "+(O=g.javascriptGenerator.nameDB_.getDistinctName($+"_inc",S.NameType$$module$build$src$core$names.VARIABLE))+" = ",v=S.module$build$src$core$utils$string.isNumber(F)?v+(Math.abs(F)+";\n"):v+"Math.abs("+F+");\n",v+="if ("+Q+" > "+w+") {\n",v=(v+=g.javascriptGenerator.INDENT+O+" = -"+O+";\n")+"}\nfor ("+$+" = "+Q+"; "+O+" >= 0 ? "+$+" <= "+w+" : "+$+" >= "+w+"; "+$+" += "+O+") {\n"+k+"}\n";return v},g.javascriptGenerator.controls_forEach=function(v){const $=g.javascriptGenerator.nameDB_.getName(v.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE);var w=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let O=g.javascriptGenerator.statementToCode(v,"DO");O=g.javascriptGenerator.addLoopTrap(O,v),v="";let F=w;return w.match(/^\w+$/)||(F=g.javascriptGenerator.nameDB_.getDistinctName($+"_list",S.NameType$$module$build$src$core$names.VARIABLE),v+="var "+F+" = "+w+";\n"),w=g.javascriptGenerator.nameDB_.getDistinctName($+"_index",S.NameType$$module$build$src$core$names.VARIABLE),O=g.javascriptGenerator.INDENT+$+" = "+F+"["+w+"];\n"+O,v+"for (var "+w+" in "+F+") {\n"+O+"}\n"},g.javascriptGenerator.controls_flow_statements=function(v){let $="";if(g.javascriptGenerator.STATEMENT_PREFIX&&($+=g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_PREFIX,v)),g.javascriptGenerator.STATEMENT_SUFFIX&&($+=g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_SUFFIX,v)),g.javascriptGenerator.STATEMENT_PREFIX){const w=v.getSurroundLoop();w&&!w.suppressPrefixSuffix&&($+=g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_PREFIX,w))}switch(v.getFieldValue("FLOW")){case"BREAK":return $+"break;\n";case"CONTINUE":return $+"continue;\n"}throw Error("Unknown flow statement.")},g.javascriptGenerator.controls_if=function(v){var $=0;let w="";g.javascriptGenerator.STATEMENT_PREFIX&&(w+=g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_PREFIX,v));do{const O=g.javascriptGenerator.valueToCode(v,"IF"+$,g.javascriptGenerator.ORDER_NONE)||"false";let F=g.javascriptGenerator.statementToCode(v,"DO"+$);g.javascriptGenerator.STATEMENT_SUFFIX&&(F=g.javascriptGenerator.prefixLines(g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_SUFFIX,v),g.javascriptGenerator.INDENT)+F),w+=(0<$?" else ":"")+"if ("+O+") {\n"+F+"}",$++}while(v.getInput("IF"+$));return(v.getInput("ELSE")||g.javascriptGenerator.STATEMENT_SUFFIX)&&($=g.javascriptGenerator.statementToCode(v,"ELSE"),g.javascriptGenerator.STATEMENT_SUFFIX&&($=g.javascriptGenerator.prefixLines(g.javascriptGenerator.injectId(g.javascriptGenerator.STATEMENT_SUFFIX,v),g.javascriptGenerator.INDENT)+$),w+=" else {\n"+$+"}"),w+"\n"},g.javascriptGenerator.controls_ifelse=g.javascriptGenerator.controls_if,g.javascriptGenerator.logic_compare=function(v){const $={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[v.getFieldValue("OP")],w="=="===$||"!="===$?g.javascriptGenerator.ORDER_EQUALITY:g.javascriptGenerator.ORDER_RELATIONAL;return[(g.javascriptGenerator.valueToCode(v,"A",w)||"0")+" "+$+" "+(v=g.javascriptGenerator.valueToCode(v,"B",w)||"0"),w]},g.javascriptGenerator.logic_operation=function(v){const $="AND"===v.getFieldValue("OP")?"&&":"||",w="&&"===$?g.javascriptGenerator.ORDER_LOGICAL_AND:g.javascriptGenerator.ORDER_LOGICAL_OR;let O=g.javascriptGenerator.valueToCode(v,"A",w);if(v=g.javascriptGenerator.valueToCode(v,"B",w),O||v){const F="&&"===$?"true":"false";O||(O=F),v||(v=F)}else v=O="false";return[O+" "+$+" "+v,w]},g.javascriptGenerator.logic_negate=function(v){const $=g.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(g.javascriptGenerator.valueToCode(v,"BOOL",$)||"true"),$]},g.javascriptGenerator.logic_boolean=function(v){return["TRUE"===v.getFieldValue("BOOL")?"true":"false",g.javascriptGenerator.ORDER_ATOMIC]},g.javascriptGenerator.logic_null=function(v){return["null",g.javascriptGenerator.ORDER_ATOMIC]},g.javascriptGenerator.logic_ternary=function(v){return[(g.javascriptGenerator.valueToCode(v,"IF",g.javascriptGenerator.ORDER_CONDITIONAL)||"false")+" ? "+(g.javascriptGenerator.valueToCode(v,"THEN",g.javascriptGenerator.ORDER_CONDITIONAL)||"null")+" : "+(v=g.javascriptGenerator.valueToCode(v,"ELSE",g.javascriptGenerator.ORDER_CONDITIONAL)||"null"),g.javascriptGenerator.ORDER_CONDITIONAL]},g.javascriptGenerator.lists_create_empty=function(v){return["[]",g.javascriptGenerator.ORDER_ATOMIC]},g.javascriptGenerator.lists_create_with=function(v){const $=Array(v.itemCount_);for(let w=0;w<v.itemCount_;w++)$[w]=g.javascriptGenerator.valueToCode(v,"ADD"+w,g.javascriptGenerator.ORDER_NONE)||"null";return["["+$.join(", ")+"]",g.javascriptGenerator.ORDER_ATOMIC]},g.javascriptGenerator.lists_repeat=function(v){return[g.javascriptGenerator.provideFunction_("listsRepeat",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n  var array = [];\n  for (var i = 0; i < n; i++) {\n    array[i] = value;\n  }\n  return array;\n}\n`)+"("+(g.javascriptGenerator.valueToCode(v,"ITEM",g.javascriptGenerator.ORDER_NONE)||"null")+", "+(v=g.javascriptGenerator.valueToCode(v,"NUM",g.javascriptGenerator.ORDER_NONE)||"0")+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.lists_length=function(v){return[(g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",g.javascriptGenerator.ORDER_MEMBER]},g.javascriptGenerator.lists_isEmpty=function(v){return["!"+(g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",g.javascriptGenerator.ORDER_LOGICAL_NOT]},g.javascriptGenerator.lists_indexOf=function(v){var $="FIRST"===v.getFieldValue("END")?"indexOf":"lastIndexOf";const w=g.javascriptGenerator.valueToCode(v,"FIND",g.javascriptGenerator.ORDER_NONE)||"''";return $=(g.javascriptGenerator.valueToCode(v,"VALUE",g.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+$+"("+w+")",v.workspace.options.oneBasedIndex?[$+" + 1",g.javascriptGenerator.ORDER_ADDITION]:[$,g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.lists_getIndex=function(v){const $=v.getFieldValue("MODE")||"GET",w=v.getFieldValue("WHERE")||"FROM_START";var O=g.javascriptGenerator.valueToCode(v,"VALUE","RANDOM"===w?g.javascriptGenerator.ORDER_NONE:g.javascriptGenerator.ORDER_MEMBER)||"[]";switch(w){case"FIRST":if("GET"===$)return[O+"[0]",g.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===$)return[O+".shift()",g.javascriptGenerator.ORDER_MEMBER];if("REMOVE"===$)return O+".shift();\n";break;case"LAST":if("GET"===$)return[O+".slice(-1)[0]",g.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===$)return[O+".pop()",g.javascriptGenerator.ORDER_MEMBER];if("REMOVE"===$)return O+".pop();\n";break;case"FROM_START":if(v=g.javascriptGenerator.getAdjusted(v,"AT"),"GET"===$)return[O+"["+v+"]",g.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===$)return[O+".splice("+v+", 1)[0]",g.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===$)return O+".splice("+v+", 1);\n";break;case"FROM_END":if(v=g.javascriptGenerator.getAdjusted(v,"AT",1,!0),"GET"===$)return[O+".slice("+v+")[0]",g.javascriptGenerator.ORDER_FUNCTION_CALL];if("GET_REMOVE"===$)return[O+".splice("+v+", 1)[0]",g.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===$)return O+".splice("+v+", 1);";break;case"RANDOM":if(O=g.javascriptGenerator.provideFunction_("listsGetRandomItem",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n  var x = Math.floor(Math.random() * list.length);\n  if (remove) {\n    return list.splice(x, 1)[0];\n  } else {\n    return list[x];\n  }\n}\n`)+"("+O+", "+("GET"!==$)+")","GET"===$||"GET_REMOVE"===$)return[O,g.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===$)return O+";\n"}throw Error("Unhandled combination (lists_getIndex).")},g.javascriptGenerator.lists_setIndex=function(v){function $(){if(w.match(/^\w+$/))return"";const Q=g.javascriptGenerator.nameDB_.getDistinctName("tmpList",S.NameType$$module$build$src$core$names.VARIABLE),Ge="var "+Q+" = "+w+";\n";return w=Q,Ge}let w=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_MEMBER)||"[]";const O=v.getFieldValue("MODE")||"GET";var F=v.getFieldValue("WHERE")||"FROM_START";const k=g.javascriptGenerator.valueToCode(v,"TO",g.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(F){case"FIRST":if("SET"===O)return w+"[0] = "+k+";\n";if("INSERT"===O)return w+".unshift("+k+");\n";break;case"LAST":if("SET"===O)return $()+(w+"[")+w+".length - 1] = "+k+";\n";if("INSERT"===O)return w+".push("+k+");\n";break;case"FROM_START":if(v=g.javascriptGenerator.getAdjusted(v,"AT"),"SET"===O)return w+"["+v+"] = "+k+";\n";if("INSERT"===O)return w+".splice("+v+", 0, "+k+");\n";break;case"FROM_END":if(v=g.javascriptGenerator.getAdjusted(v,"AT",1,!1,g.javascriptGenerator.ORDER_SUBTRACTION),F=$(),"SET"===O)return F+(w+"[")+w+".length - "+v+"] = "+k+";\n";if("INSERT"===O)return F+(w+".splice(")+w+".length - "+v+", 0, "+k+");\n";break;case"RANDOM":if(v=$(),v+="var "+(F=g.javascriptGenerator.nameDB_.getDistinctName("tmpX",S.NameType$$module$build$src$core$names.VARIABLE))+" = Math.floor(Math.random() * "+w+".length);\n","SET"===O)return v+(w+"[")+F+"] = "+k+";\n";if("INSERT"===O)return v+(w+".splice(")+F+", 0, "+k+");\n"}throw Error("Unhandled combination (lists_setIndex).")};var bo=function(v,$,w){return"FIRST"===$?"0":"FROM_END"===$?v+".length - 1 - "+w:"LAST"===$?v+".length - 1":w};return g.javascriptGenerator.lists_getSublist=function(v){var $=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_MEMBER)||"[]",w=v.getFieldValue("WHERE1"),O=v.getFieldValue("WHERE2");if("FIRST"===w&&"LAST"===O)$+=".slice(0)";else if($.match(/^\w+$/)||"FROM_END"!==w&&"FROM_START"===O){switch(w){case"FROM_START":w=g.javascriptGenerator.getAdjusted(v,"AT1");break;case"FROM_END":w=$+".length - "+(w=g.javascriptGenerator.getAdjusted(v,"AT1",1,!1,g.javascriptGenerator.ORDER_SUBTRACTION));break;case"FIRST":w="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(O){case"FROM_START":O=g.javascriptGenerator.getAdjusted(v,"AT2",1);break;case"FROM_END":O=$+".length - "+(O=g.javascriptGenerator.getAdjusted(v,"AT2",0,!1,g.javascriptGenerator.ORDER_SUBTRACTION));break;case"LAST":O=$+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}$=$+".slice("+w+", "+O+")"}else{const F=g.javascriptGenerator.getAdjusted(v,"AT1");v=g.javascriptGenerator.getAdjusted(v,"AT2");const k={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};$=g.javascriptGenerator.provideFunction_("subsequence"+k[w]+k[O],`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===w||"FROM_START"===w?", at1":""}${"FROM_END"===O||"FROM_START"===O?", at2":""}) {\n  var start = ${bo("sequence",w,"at1")};\n  var end = ${bo("sequence",O,"at2")} + 1;\n  return sequence.slice(start, end);\n}\n`)+"("+$+("FROM_END"===w||"FROM_START"===w?", "+F:"")+("FROM_END"===O||"FROM_START"===O?", "+v:"")+")"}return[$,g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.lists_sort=function(v){const $=g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",w="1"===v.getFieldValue("DIRECTION")?1:-1;return v=v.getFieldValue("TYPE"),[$+".slice().sort("+g.javascriptGenerator.provideFunction_("listsGetSortCompare",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n  var compareFuncs = {\n    'NUMERIC': function(a, b) {\n        return Number(a) - Number(b); },\n    'TEXT': function(a, b) {\n        return a.toString() > b.toString() ? 1 : -1; },\n    'IGNORE_CASE': function(a, b) {\n        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },\n  };\n  var compare = compareFuncs[type];\n  return function(a, b) { return compare(a, b) * direction; };\n}\n      `)+'("'+v+'", '+w+"))",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.lists_split=function(v){let $=g.javascriptGenerator.valueToCode(v,"INPUT",g.javascriptGenerator.ORDER_MEMBER);const w=g.javascriptGenerator.valueToCode(v,"DELIM",g.javascriptGenerator.ORDER_NONE)||"''";if("SPLIT"===(v=v.getFieldValue("MODE")))$||($="''"),v="split";else{if("JOIN"!==v)throw Error("Unknown mode: "+v);$||($="[]"),v="join"}return[$+"."+v+"("+w+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.lists_reverse=function(v){return[(g.javascriptGenerator.valueToCode(v,"LIST",g.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.colour_picker=function(v){return[g.javascriptGenerator.quote_(v.getFieldValue("COLOUR")),g.javascriptGenerator.ORDER_ATOMIC]},g.javascriptGenerator.colour_random=function(v){return[g.javascriptGenerator.provideFunction_("colourRandom",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {\n  var num = Math.floor(Math.random() * Math.pow(2, 24));\n  return '#' + ('00000' + num.toString(16)).substr(-6);\n}\n`)+"()",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.colour_rgb=function(v){const $=g.javascriptGenerator.valueToCode(v,"RED",g.javascriptGenerator.ORDER_NONE)||0,w=g.javascriptGenerator.valueToCode(v,"GREEN",g.javascriptGenerator.ORDER_NONE)||0;return v=g.javascriptGenerator.valueToCode(v,"BLUE",g.javascriptGenerator.ORDER_NONE)||0,[g.javascriptGenerator.provideFunction_("colourRgb",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {\n  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\n  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\n  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\n  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\n  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\n  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`)+"("+$+", "+w+", "+v+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.javascriptGenerator.colour_blend=function(v){const $=g.javascriptGenerator.valueToCode(v,"COLOUR1",g.javascriptGenerator.ORDER_NONE)||"'#000000'",w=g.javascriptGenerator.valueToCode(v,"COLOUR2",g.javascriptGenerator.ORDER_NONE)||"'#000000'";return v=g.javascriptGenerator.valueToCode(v,"RATIO",g.javascriptGenerator.ORDER_NONE)||.5,[g.javascriptGenerator.provideFunction_("colourBlend",`\nfunction ${g.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {\n  ratio = Math.max(Math.min(Number(ratio), 1), 0);\n  var r1 = parseInt(c1.substring(1, 3), 16);\n  var g1 = parseInt(c1.substring(3, 5), 16);\n  var b1 = parseInt(c1.substring(5, 7), 16);\n  var r2 = parseInt(c2.substring(1, 3), 16);\n  var g2 = parseInt(c2.substring(3, 5), 16);\n  var b2 = parseInt(c2.substring(5, 7), 16);\n  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\n  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\n  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\n  r = ('0' + (r || 0).toString(16)).slice(-2);\n  g = ('0' + (g || 0).toString(16)).slice(-2);\n  b = ('0' + (b || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`)+"("+$+", "+w+", "+v+")",g.javascriptGenerator.ORDER_FUNCTION_CALL]},g.__namespace__=S,g}.apply(Ee,G))&&(Rt.exports=h)},266:function(Rt,Ee){var G;void 0!==(G=function(){"use strict";var h=h||{Msg:Object.create(null)};return h.Msg.ADD_COMMENT="Add Comment",h.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",h.Msg.CHANGE_VALUE_TITLE="Change value:",h.Msg.CLEAN_UP="Clean up Blocks",h.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",h.Msg.COLLAPSE_ALL="Collapse Blocks",h.Msg.COLLAPSE_BLOCK="Collapse Block",h.Msg.COLOUR_BLEND_COLOUR1="colour 1",h.Msg.COLOUR_BLEND_COLOUR2="colour 2",h.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",h.Msg.COLOUR_BLEND_RATIO="ratio",h.Msg.COLOUR_BLEND_TITLE="blend",h.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",h.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",h.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",h.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",h.Msg.COLOUR_RANDOM_TITLE="random colour",h.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",h.Msg.COLOUR_RGB_BLUE="blue",h.Msg.COLOUR_RGB_GREEN="green",h.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",h.Msg.COLOUR_RGB_RED="red",h.Msg.COLOUR_RGB_TITLE="colour with",h.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",h.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",h.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",h.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",h.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",h.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",h.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",h.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",h.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",h.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",h.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",h.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",h.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",h.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",h.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",h.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",h.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",h.Msg.CONTROLS_IF_MSG_ELSE="else",h.Msg.CONTROLS_IF_MSG_ELSEIF="else if",h.Msg.CONTROLS_IF_MSG_IF="if",h.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",h.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",h.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",h.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",h.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",h.Msg.CONTROLS_REPEAT_INPUT_DO="do",h.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",h.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",h.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",h.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",h.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",h.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",h.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",h.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",h.Msg.DELETE_BLOCK="Delete Block",h.Msg.DELETE_VARIABLE="Delete the '%1' variable",h.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",h.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",h.Msg.DIALOG_CANCEL="Cancel",h.Msg.DIALOG_OK="OK",h.Msg.DISABLE_BLOCK="Disable Block",h.Msg.DUPLICATE_BLOCK="Duplicate",h.Msg.DUPLICATE_COMMENT="Duplicate Comment",h.Msg.ENABLE_BLOCK="Enable Block",h.Msg.EXPAND_ALL="Expand Blocks",h.Msg.EXPAND_BLOCK="Expand Block",h.Msg.EXTERNAL_INPUTS="External Inputs",h.Msg.HELP="Help",h.Msg.INLINE_INPUTS="Inline Inputs",h.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",h.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",h.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",h.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",h.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",h.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",h.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",h.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",h.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",h.Msg.LISTS_GET_INDEX_FIRST="first",h.Msg.LISTS_GET_INDEX_FROM_END="# from end",h.Msg.LISTS_GET_INDEX_FROM_START="#",h.Msg.LISTS_GET_INDEX_GET="get",h.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",h.Msg.LISTS_GET_INDEX_LAST="last",h.Msg.LISTS_GET_INDEX_RANDOM="random",h.Msg.LISTS_GET_INDEX_REMOVE="remove",h.Msg.LISTS_GET_INDEX_TAIL="",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",h.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",h.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",h.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",h.Msg.LISTS_GET_SUBLIST_END_LAST="to last",h.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",h.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",h.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",h.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",h.Msg.LISTS_GET_SUBLIST_TAIL="",h.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",h.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",h.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",h.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",h.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",h.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",h.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",h.Msg.LISTS_INLIST="in list",h.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",h.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",h.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",h.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",h.Msg.LISTS_LENGTH_TITLE="length of %1",h.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",h.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",h.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",h.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",h.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",h.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",h.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",h.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",h.Msg.LISTS_SET_INDEX_INPUT_TO="as",h.Msg.LISTS_SET_INDEX_INSERT="insert at",h.Msg.LISTS_SET_INDEX_SET="set",h.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",h.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",h.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",h.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",h.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",h.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",h.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",h.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",h.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",h.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",h.Msg.LISTS_SORT_ORDER_DESCENDING="descending",h.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",h.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",h.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",h.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",h.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",h.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",h.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",h.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",h.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",h.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",h.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",h.Msg.LOGIC_BOOLEAN_FALSE="false",h.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",h.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",h.Msg.LOGIC_BOOLEAN_TRUE="true",h.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",h.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",h.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",h.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",h.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",h.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",h.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",h.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",h.Msg.LOGIC_NEGATE_TITLE="not %1",h.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",h.Msg.LOGIC_NULL="null",h.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",h.Msg.LOGIC_NULL_TOOLTIP="Returns null.",h.Msg.LOGIC_OPERATION_AND="and",h.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",h.Msg.LOGIC_OPERATION_OR="or",h.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",h.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",h.Msg.LOGIC_TERNARY_CONDITION="test",h.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",h.Msg.LOGIC_TERNARY_IF_FALSE="if false",h.Msg.LOGIC_TERNARY_IF_TRUE="if true",h.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",h.Msg.MATH_ADDITION_SYMBOL="+",h.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",h.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",h.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",h.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",h.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",h.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",h.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",h.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",h.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",h.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",h.Msg.MATH_CHANGE_TITLE="change %1 by %2",h.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",h.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",h.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",h.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",h.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",h.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",h.Msg.MATH_DIVISION_SYMBOL="\xf7",h.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",h.Msg.MATH_IS_EVEN="is even",h.Msg.MATH_IS_NEGATIVE="is negative",h.Msg.MATH_IS_ODD="is odd",h.Msg.MATH_IS_POSITIVE="is positive",h.Msg.MATH_IS_PRIME="is prime",h.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",h.Msg.MATH_IS_WHOLE="is whole",h.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",h.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",h.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",h.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",h.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",h.Msg.MATH_NUMBER_TOOLTIP="A number.",h.Msg.MATH_ONLIST_HELPURL="",h.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",h.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",h.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",h.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",h.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",h.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",h.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",h.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",h.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",h.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",h.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",h.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",h.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",h.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",h.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",h.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",h.Msg.MATH_POWER_SYMBOL="^",h.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",h.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",h.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",h.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",h.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",h.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",h.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",h.Msg.MATH_ROUND_OPERATOR_ROUND="round",h.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",h.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",h.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",h.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",h.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",h.Msg.MATH_SINGLE_OP_ROOT="square root",h.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",h.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",h.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",h.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",h.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",h.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",h.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",h.Msg.MATH_SUBTRACTION_SYMBOL="-",h.Msg.MATH_TRIG_ACOS="acos",h.Msg.MATH_TRIG_ASIN="asin",h.Msg.MATH_TRIG_ATAN="atan",h.Msg.MATH_TRIG_COS="cos",h.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",h.Msg.MATH_TRIG_SIN="sin",h.Msg.MATH_TRIG_TAN="tan",h.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",h.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",h.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",h.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",h.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",h.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",h.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",h.Msg.NEW_NUMBER_VARIABLE="Create number variable...",h.Msg.NEW_STRING_VARIABLE="Create string variable...",h.Msg.NEW_VARIABLE="Create variable...",h.Msg.NEW_VARIABLE_TITLE="New variable name:",h.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",h.Msg.ORDINAL_NUMBER_SUFFIX="",h.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",h.Msg.PROCEDURES_BEFORE_PARAMS="with:",h.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",h.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",h.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",h.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",h.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",h.Msg.PROCEDURES_CREATE_DO="Create '%1'",h.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",h.Msg.PROCEDURES_DEFNORETURN_DO="",h.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",h.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",h.Msg.PROCEDURES_DEFNORETURN_TITLE="to",h.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",h.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",h.Msg.PROCEDURES_DEFRETURN_RETURN="return",h.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",h.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",h.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",h.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",h.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",h.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",h.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",h.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",h.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",h.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",h.Msg.REDO="Redo",h.Msg.REMOVE_COMMENT="Remove Comment",h.Msg.RENAME_VARIABLE="Rename variable...",h.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",h.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",h.Msg.TEXT_APPEND_TITLE="to %1 append text %2",h.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",h.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",h.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",h.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",h.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",h.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",h.Msg.TEXT_CHARAT_FIRST="get first letter",h.Msg.TEXT_CHARAT_FROM_END="get letter # from end",h.Msg.TEXT_CHARAT_FROM_START="get letter #",h.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",h.Msg.TEXT_CHARAT_LAST="get last letter",h.Msg.TEXT_CHARAT_RANDOM="get random letter",h.Msg.TEXT_CHARAT_TAIL="",h.Msg.TEXT_CHARAT_TITLE="in text %1 %2",h.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",h.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",h.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",h.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",h.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",h.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",h.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",h.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",h.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",h.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",h.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",h.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",h.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",h.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",h.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",h.Msg.TEXT_GET_SUBSTRING_TAIL="",h.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",h.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",h.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",h.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",h.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",h.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",h.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",h.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",h.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",h.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",h.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",h.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",h.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",h.Msg.TEXT_LENGTH_TITLE="length of %1",h.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",h.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",h.Msg.TEXT_PRINT_TITLE="print %1",h.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",h.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",h.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",h.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",h.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",h.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",h.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",h.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",h.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",h.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",h.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",h.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",h.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",h.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",h.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",h.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",h.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",h.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",h.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",h.Msg.TODAY="Today",h.Msg.UNDO="Undo",h.Msg.UNNAMED_KEY="unnamed",h.Msg.VARIABLES_DEFAULT_NAME="item",h.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",h.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",h.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",h.Msg.VARIABLES_SET="set %1 to %2",h.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",h.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",h.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",h.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",h.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",h.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",h.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",h.Msg.CONTROLS_FOREACH_INPUT_DO=h.Msg.CONTROLS_REPEAT_INPUT_DO,h.Msg.CONTROLS_FOR_INPUT_DO=h.Msg.CONTROLS_REPEAT_INPUT_DO,h.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=h.Msg.CONTROLS_IF_MSG_ELSEIF,h.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=h.Msg.CONTROLS_IF_MSG_ELSE,h.Msg.CONTROLS_IF_IF_TITLE_IF=h.Msg.CONTROLS_IF_MSG_IF,h.Msg.CONTROLS_IF_MSG_THEN=h.Msg.CONTROLS_REPEAT_INPUT_DO,h.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=h.Msg.CONTROLS_REPEAT_INPUT_DO,h.Msg.LISTS_CREATE_WITH_ITEM_TITLE=h.Msg.VARIABLES_DEFAULT_NAME,h.Msg.LISTS_GET_INDEX_HELPURL=h.Msg.LISTS_INDEX_OF_HELPURL,h.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=h.Msg.LISTS_INLIST,h.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=h.Msg.LISTS_INLIST,h.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=h.Msg.LISTS_INLIST,h.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=h.Msg.LISTS_INLIST,h.Msg.MATH_CHANGE_TITLE_ITEM=h.Msg.VARIABLES_DEFAULT_NAME,h.Msg.PROCEDURES_DEFRETURN_COMMENT=h.Msg.PROCEDURES_DEFNORETURN_COMMENT,h.Msg.PROCEDURES_DEFRETURN_DO=h.Msg.PROCEDURES_DEFNORETURN_DO,h.Msg.PROCEDURES_DEFRETURN_PROCEDURE=h.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,h.Msg.PROCEDURES_DEFRETURN_TITLE=h.Msg.PROCEDURES_DEFNORETURN_TITLE,h.Msg.TEXT_APPEND_VARIABLE=h.Msg.VARIABLES_DEFAULT_NAME,h.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=h.Msg.VARIABLES_DEFAULT_NAME,h.Msg.MATH_HUE="230",h.Msg.LOOPS_HUE="120",h.Msg.LISTS_HUE="260",h.Msg.LOGIC_HUE="210",h.Msg.VARIABLES_HUE="330",h.Msg.TEXTS_HUE="160",h.Msg.PROCEDURES_HUE="290",h.Msg.COLOUR_HUE="20",h.Msg.VARIABLES_DYNAMIC_HUE="310",h.Msg}.apply(Ee,[]))&&(Rt.exports=G)},482:function(Rt,Ee){var G;void 0!==(G=function(){"use strict";var h=h||{Msg:Object.create(null)};return h.Msg.ADD_COMMENT="A\xf1adir comentario",h.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="No se puede eliminar la variable '%1' porque es parte de la definici\xf3n de la funci\xf3n '%2'",h.Msg.CHANGE_VALUE_TITLE="Cambiar el valor:",h.Msg.CLEAN_UP="Limpiar los bloques",h.Msg.COLLAPSED_WARNINGS_WARNING="Bloques colapsados contienen advertencias.",h.Msg.COLLAPSE_ALL="Contraer bloques",h.Msg.COLLAPSE_BLOCK="Contraer bloque",h.Msg.COLOUR_BLEND_COLOUR1="color 1",h.Msg.COLOUR_BLEND_COLOUR2="color 2",h.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",h.Msg.COLOUR_BLEND_RATIO="proporci\xf3n",h.Msg.COLOUR_BLEND_TITLE="combinar",h.Msg.COLOUR_BLEND_TOOLTIP="Combina dos colores con una proporci\xf3n determinada (0,0 - 1,0).",h.Msg.COLOUR_PICKER_HELPURL="https://es.wikipedia.org/wiki/Color",h.Msg.COLOUR_PICKER_TOOLTIP="Elige un color de la paleta.",h.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",h.Msg.COLOUR_RANDOM_TITLE="color aleatorio",h.Msg.COLOUR_RANDOM_TOOLTIP="Elige un color al azar.",h.Msg.COLOUR_RGB_BLUE="azul",h.Msg.COLOUR_RGB_GREEN="verde",h.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",h.Msg.COLOUR_RGB_RED="rojo",h.Msg.COLOUR_RGB_TITLE="colorear con",h.Msg.COLOUR_RGB_TOOLTIP="Crea un color con cantidades espec\xedficas de rojo, verde y azul. Todos los valores deben encontrarse entre 0 y 100.",h.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",h.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="romper el bucle",h.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continuar con la siguiente iteraci\xf3n del bucle",h.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Romper el bucle que lo contiene.",h.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Saltar el resto de este bucle, y continuar con la siguiente iteraci\xf3n.",h.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Atenci\xf3n: este bloque puede usarse solamente dentro de un bucle.",h.Msg.CONTROLS_FOREACH_HELPURL="https://es.wikipedia.org/wiki/Foreach",h.Msg.CONTROLS_FOREACH_TITLE="para cada elemento %1 en la lista %2",h.Msg.CONTROLS_FOREACH_TOOLTIP="Para cada elemento en una lista, establecer la variable '%1' al elemento y luego hacer algunas declaraciones.",h.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",h.Msg.CONTROLS_FOR_TITLE="contar con %1 desde %2 hasta %3 de a %4",h.Msg.CONTROLS_FOR_TOOLTIP='Hacer que la variable "%1" tome los valores desde el n\xfamero de inicio hasta el n\xfamero final, contando con el intervalo especificado, y hacer los bloques especificados.',h.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Agregar una condici\xf3n a este bloque.",h.Msg.CONTROLS_IF_ELSE_TOOLTIP="Agregar una condici\xf3n general final a este bloque.",h.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",h.Msg.CONTROLS_IF_IF_TOOLTIP="Agregar, eliminar o reordenar las secciones para reconfigurar este bloque.",h.Msg.CONTROLS_IF_MSG_ELSE="sino",h.Msg.CONTROLS_IF_MSG_ELSEIF="sino si",h.Msg.CONTROLS_IF_MSG_IF="si",h.Msg.CONTROLS_IF_TOOLTIP_1="Si un valor es verdadero, entonces hacer algunas declaraciones.",h.Msg.CONTROLS_IF_TOOLTIP_2="Si un valor es verdadero, entonces hacer el primer bloque de declaraciones.  De lo contrario, hacer el segundo bloque de declaraciones.",h.Msg.CONTROLS_IF_TOOLTIP_3="Si el primer valor es verdadero, entonces hacer el primer bloque de declaraciones. De lo contrario, si el segundo valor es verdadero, hacer el segundo bloque de declaraciones.",h.Msg.CONTROLS_IF_TOOLTIP_4="Si el primer valor es verdadero, entonces hacer el primer bloque de declaraciones. De lo contrario, si el segundo valor es verdadero, hacer el segundo bloque de declaraciones. Si ninguno de los valores son verdaderos, hacer el \xfaltimo bloque de declaraciones.",h.Msg.CONTROLS_REPEAT_HELPURL="https://es.wikipedia.org/wiki/Bucle_for",h.Msg.CONTROLS_REPEAT_INPUT_DO="hacer",h.Msg.CONTROLS_REPEAT_TITLE="repetir %1 veces",h.Msg.CONTROLS_REPEAT_TOOLTIP="Hacer algunas declaraciones varias veces.",h.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",h.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repetir hasta",h.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repetir mientras",h.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="Mientras un valor sea falso, entonces hacer algunas declaraciones.",h.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="Mientras un valor sea verdadero, entonces hacer algunas declaraciones.",h.Msg.DELETE_ALL_BLOCKS="\xbfEliminar todos los %1 bloques?",h.Msg.DELETE_BLOCK="Eliminar bloque",h.Msg.DELETE_VARIABLE="Borrar la variable '%1'",h.Msg.DELETE_VARIABLE_CONFIRMATION="\xbfBorrar %1 usos de la variable '%2'?",h.Msg.DELETE_X_BLOCKS="Eliminar %1 bloques",h.Msg.DIALOG_CANCEL="Cancelar",h.Msg.DIALOG_OK="Aceptar",h.Msg.DISABLE_BLOCK="Desactivar bloque",h.Msg.DUPLICATE_BLOCK="Duplicar",h.Msg.DUPLICATE_COMMENT="Duplicar comentario",h.Msg.ENABLE_BLOCK="Activar bloque",h.Msg.EXPAND_ALL="Expandir bloques",h.Msg.EXPAND_BLOCK="Expandir bloque",h.Msg.EXTERNAL_INPUTS="Entradas externas",h.Msg.HELP="Ayuda",h.Msg.INLINE_INPUTS="Entradas en l\xednea",h.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",h.Msg.LISTS_CREATE_EMPTY_TITLE="crear lista vac\xeda",h.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Devuelve una lista, de longitud 0, sin ning\xfan dato",h.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="lista",h.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Agregar, eliminar o reorganizar las secciones para reconfigurar este bloque de lista.",h.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",h.Msg.LISTS_CREATE_WITH_INPUT_WITH="crear lista con",h.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Agregar un elemento a la lista.",h.Msg.LISTS_CREATE_WITH_TOOLTIP="Crear una lista con cualquier n\xfamero de elementos.",h.Msg.LISTS_GET_INDEX_FIRST="primero",h.Msg.LISTS_GET_INDEX_FROM_END="# del final",h.Msg.LISTS_GET_INDEX_FROM_START="#",h.Msg.LISTS_GET_INDEX_GET="obtener",h.Msg.LISTS_GET_INDEX_GET_REMOVE="obtener y eliminar",h.Msg.LISTS_GET_INDEX_LAST="\xfaltimo",h.Msg.LISTS_GET_INDEX_RANDOM="aleatorio",h.Msg.LISTS_GET_INDEX_REMOVE="eliminar",h.Msg.LISTS_GET_INDEX_TAIL="",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Devuelve el primer elemento de una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Devuelve el elemento en la posici\xf3n especificada en una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Devuelve el \xfaltimo elemento de una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Devuelve un elemento aleatorio en una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Elimina y devuelve el primer elemento de una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Elimina y devuelve el elemento en la posici\xf3n especificada en una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Elimina y devuelve el \xfaltimo elemento de una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Elimina y devuelve un elemento aleatorio en una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Elimina el primer elemento de una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Elimina el elemento en la posici\xf3n especificada en una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Elimina el \xfaltimo elemento de una lista.",h.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Elimina un elemento aleatorio en una lista.",h.Msg.LISTS_GET_SUBLIST_END_FROM_END="hasta # del final",h.Msg.LISTS_GET_SUBLIST_END_FROM_START="hasta #",h.Msg.LISTS_GET_SUBLIST_END_LAST="hasta el \xfaltimo",h.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",h.Msg.LISTS_GET_SUBLIST_START_FIRST="obtener sublista desde el primero",h.Msg.LISTS_GET_SUBLIST_START_FROM_END="obtener sublista desde # del final",h.Msg.LISTS_GET_SUBLIST_START_FROM_START="obtener sublista desde #",h.Msg.LISTS_GET_SUBLIST_TAIL="",h.Msg.LISTS_GET_SUBLIST_TOOLTIP="Crea una copia de la parte especificada de una lista.",h.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 es el \xfaltimo elemento.",h.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 es el primer elemento.",h.Msg.LISTS_INDEX_OF_FIRST="encontrar la primera aparici\xf3n del elemento",h.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",h.Msg.LISTS_INDEX_OF_LAST="encontrar la \xfaltima aparici\xf3n del elemento",h.Msg.LISTS_INDEX_OF_TOOLTIP="Devuelve el \xedndice de la primera/\xfaltima aparici\xf3n del elemento en la lista. Devuelve %1 si el elemento no se encuentra.",h.Msg.LISTS_INLIST="en la lista",h.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",h.Msg.LISTS_ISEMPTY_TITLE="%1 est\xe1 vac\xeda",h.Msg.LISTS_ISEMPTY_TOOLTIP="Devuelve verdadero si la lista est\xe1 vac\xeda.",h.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",h.Msg.LISTS_LENGTH_TITLE="longitud de %1",h.Msg.LISTS_LENGTH_TOOLTIP="Devuelve la longitud de una lista.",h.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",h.Msg.LISTS_REPEAT_TITLE="crear lista con el elemento %1 repetido %2 veces",h.Msg.LISTS_REPEAT_TOOLTIP="Crea una lista que consta de un valor dado repetido el n\xfamero de veces especificado.",h.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",h.Msg.LISTS_REVERSE_MESSAGE0="invertir %1",h.Msg.LISTS_REVERSE_TOOLTIP="Invertir una copia de una lista.",h.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",h.Msg.LISTS_SET_INDEX_INPUT_TO="como",h.Msg.LISTS_SET_INDEX_INSERT="insertar en",h.Msg.LISTS_SET_INDEX_SET="establecer",h.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserta el elemento al inicio de una lista.",h.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserta el elemento en la posici\xf3n especificada en una lista.",h.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="A\xf1ade el elemento al final de una lista.",h.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserta el elemento aleatoriamente en una lista.",h.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Establece el primer elemento de una lista.",h.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Establece el elemento en la posici\xf3n especificada en una lista.",h.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Establece el \xfaltimo elemento de una lista.",h.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Establece un elemento aleatorio en una lista.",h.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",h.Msg.LISTS_SORT_ORDER_ASCENDING="ascendente",h.Msg.LISTS_SORT_ORDER_DESCENDING="descendente",h.Msg.LISTS_SORT_TITLE="orden %1 %2 %3",h.Msg.LISTS_SORT_TOOLTIP="Ordenar una copia de una lista.",h.Msg.LISTS_SORT_TYPE_IGNORECASE="alfab\xe9tico, ignorar may\xfascula/min\xfascula",h.Msg.LISTS_SORT_TYPE_NUMERIC="num\xe9rico",h.Msg.LISTS_SORT_TYPE_TEXT="alfab\xe9tico",h.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",h.Msg.LISTS_SPLIT_LIST_FROM_TEXT="hacer lista a partir de texto",h.Msg.LISTS_SPLIT_TEXT_FROM_LIST="hacer texto a partir de lista",h.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Unir una lista de textos en un solo texto, separado por un delimitador.",h.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Dividir el texto en una lista de textos, separando en cada delimitador.",h.Msg.LISTS_SPLIT_WITH_DELIMITER="con delimitador",h.Msg.LOGIC_BOOLEAN_FALSE="falso",h.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",h.Msg.LOGIC_BOOLEAN_TOOLTIP="Devuelve verdadero o falso.",h.Msg.LOGIC_BOOLEAN_TRUE="verdadero",h.Msg.LOGIC_COMPARE_HELPURL="https://es.wikipedia.org/wiki/Desigualdad_matem\xe1tica",h.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Devuelve verdadero si ambas entradas son iguales.",h.Msg.LOGIC_COMPARE_TOOLTIP_GT="Devuelve verdadero si la primera entrada es mayor que la segunda entrada.",h.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Devuelve verdadero si la primera entrada es mayor o igual a la segunda entrada.",h.Msg.LOGIC_COMPARE_TOOLTIP_LT="Devuelve verdadero si la primera entrada es menor que la segunda entrada.",h.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Devuelve verdadero si la primera entrada es menor que o igual a la segunda entrada.",h.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Devuelve verdadero si ambas entradas son distintas.",h.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",h.Msg.LOGIC_NEGATE_TITLE="no %1",h.Msg.LOGIC_NEGATE_TOOLTIP="Devuelve verdadero si la entrada es falsa. Devuelve falso si la entrada es verdadera.",h.Msg.LOGIC_NULL="nulo",h.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",h.Msg.LOGIC_NULL_TOOLTIP="Devuelve nulo.",h.Msg.LOGIC_OPERATION_AND="y",h.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",h.Msg.LOGIC_OPERATION_OR="o",h.Msg.LOGIC_OPERATION_TOOLTIP_AND="Devuelve verdadero si ambas entradas son verdaderas.",h.Msg.LOGIC_OPERATION_TOOLTIP_OR="Devuelve verdadero si al menos una de las entradas es verdadera.",h.Msg.LOGIC_TERNARY_CONDITION="prueba",h.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",h.Msg.LOGIC_TERNARY_IF_FALSE="si es falso",h.Msg.LOGIC_TERNARY_IF_TRUE="si es verdadero",h.Msg.LOGIC_TERNARY_TOOLTIP='Comprueba la condici\xf3n en "prueba". Si la condici\xf3n es verdadera, devuelve el valor "si es verdadero"; de lo contrario, devuelve el valor "si es falso".',h.Msg.MATH_ADDITION_SYMBOL="+",h.Msg.MATH_ARITHMETIC_HELPURL="https://es.wikipedia.org/wiki/Aritm\xe9tica",h.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Devuelve la suma de ambos n\xfameros.",h.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Devuelve el cociente de ambos n\xfameros.",h.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Devuelve la diferencia de ambos n\xfameros.",h.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Devuelve el producto de ambos n\xfameros.",h.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Devuelve el primer n\xfamero elevado a la potencia del segundo.",h.Msg.MATH_ATAN2_HELPURL="https://es.wikipedia.org/wiki/Arcotangente_de_dos_par%C3%A1metros",h.Msg.MATH_ATAN2_TITLE="Arcotangente de X:%1 Y:%2",h.Msg.MATH_ATAN2_TOOLTIP="Regresar el arcotangente del punto (X,Y) en grados de -180 a 180.",h.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",h.Msg.MATH_CHANGE_TITLE="a\xf1adir %2 a %1",h.Msg.MATH_CHANGE_TOOLTIP="A\xf1adir un n\xfamero a la variable \xab%1\xbb.",h.Msg.MATH_CONSTANT_HELPURL="https://es.wikipedia.org/wiki/Anexo:Constantes_matem\xe1ticas",h.Msg.MATH_CONSTANT_TOOLTIP="Devuelve una de las constantes comunes: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026) o \u221e (infinito).",h.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",h.Msg.MATH_CONSTRAIN_TITLE="limitar %1 entre %2 y %3",h.Msg.MATH_CONSTRAIN_TOOLTIP="Limitar un n\xfamero entre los l\xedmites especificados (inclusive).",h.Msg.MATH_DIVISION_SYMBOL="\xf7",h.Msg.MATH_IS_DIVISIBLE_BY="es divisible por",h.Msg.MATH_IS_EVEN="es par",h.Msg.MATH_IS_NEGATIVE="es negativo",h.Msg.MATH_IS_ODD="es impar",h.Msg.MATH_IS_POSITIVE="es positivo",h.Msg.MATH_IS_PRIME="es primo",h.Msg.MATH_IS_TOOLTIP="Comprueba si un n\xfamero es par, impar, primo, entero, positivo, negativo, o si es divisible por un n\xfamero determinado. Devuelve verdadero o falso.",h.Msg.MATH_IS_WHOLE="es entero",h.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",h.Msg.MATH_MODULO_TITLE="resto de %1 \xf7 %2",h.Msg.MATH_MODULO_TOOLTIP="Devuelve el resto al dividir los dos n\xfameros.",h.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",h.Msg.MATH_NUMBER_HELPURL="https://es.wikipedia.org/wiki/N\xfamero",h.Msg.MATH_NUMBER_TOOLTIP="Un n\xfamero.",h.Msg.MATH_ONLIST_HELPURL="",h.Msg.MATH_ONLIST_OPERATOR_AVERAGE="promedio de la lista",h.Msg.MATH_ONLIST_OPERATOR_MAX="m\xe1ximo de la lista",h.Msg.MATH_ONLIST_OPERATOR_MEDIAN="mediana de la lista",h.Msg.MATH_ONLIST_OPERATOR_MIN="m\xednimo de la lista",h.Msg.MATH_ONLIST_OPERATOR_MODE="modas de la lista",h.Msg.MATH_ONLIST_OPERATOR_RANDOM="elemento aleatorio de la lista",h.Msg.MATH_ONLIST_OPERATOR_STD_DEV="desviaci\xf3n est\xe1ndar de la lista",h.Msg.MATH_ONLIST_OPERATOR_SUM="suma de la lista",h.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Devuelve el promedio (media aritm\xe9tica) de los valores num\xe9ricos en la lista.",h.Msg.MATH_ONLIST_TOOLTIP_MAX="Devuelve el n\xfamero m\xe1s grande en la lista.",h.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Devuelve la mediana en la lista.",h.Msg.MATH_ONLIST_TOOLTIP_MIN="Devuelve el n\xfamero m\xe1s peque\xf1o en la lista.",h.Msg.MATH_ONLIST_TOOLTIP_MODE="Devuelve una lista de los elementos m\xe1s comunes en la lista.",h.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Devuelve un elemento aleatorio de la lista.",h.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Devuelve la desviaci\xf3n est\xe1ndar de la lista.",h.Msg.MATH_ONLIST_TOOLTIP_SUM="Devuelve la suma de todos los n\xfameros en la lista.",h.Msg.MATH_POWER_SYMBOL="^",h.Msg.MATH_RANDOM_FLOAT_HELPURL="https://es.wikipedia.org/wiki/Generador_de_n\xfameros_aleatorios",h.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="fracci\xf3n aleatoria",h.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Devuelve una fracci\xf3n aleatoria entre 0,0 (ambos inclusive) y 1.0 (exclusivo).",h.Msg.MATH_RANDOM_INT_HELPURL="https://es.wikipedia.org/wiki/Generador_de_n\xfameros_aleatorios",h.Msg.MATH_RANDOM_INT_TITLE="entero aleatorio de %1 a %2",h.Msg.MATH_RANDOM_INT_TOOLTIP="Devuelve un entero aleatorio entre los dos l\xedmites especificados, inclusive.",h.Msg.MATH_ROUND_HELPURL="https://es.wikipedia.org/wiki/Redondeo",h.Msg.MATH_ROUND_OPERATOR_ROUND="redondear",h.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="redondear a la baja",h.Msg.MATH_ROUND_OPERATOR_ROUNDUP="redondear al alza",h.Msg.MATH_ROUND_TOOLTIP="Redondear un n\xfamero al alza o a la baja.",h.Msg.MATH_SINGLE_HELPURL="https://es.wikipedia.org/wiki/Ra%C3%ADz_cuadrada",h.Msg.MATH_SINGLE_OP_ABSOLUTE="absoluto",h.Msg.MATH_SINGLE_OP_ROOT="ra\xedz cuadrada",h.Msg.MATH_SINGLE_TOOLTIP_ABS="Devuelve el valor absoluto de un n\xfamero.",h.Msg.MATH_SINGLE_TOOLTIP_EXP="Devuelve e a la potencia de un n\xfamero.",h.Msg.MATH_SINGLE_TOOLTIP_LN="Devuelve el logaritmo natural de un n\xfamero.",h.Msg.MATH_SINGLE_TOOLTIP_LOG10="Devuelve el logaritmo base 10 de un n\xfamero.",h.Msg.MATH_SINGLE_TOOLTIP_NEG="Devuelve la negaci\xf3n de un n\xfamero.",h.Msg.MATH_SINGLE_TOOLTIP_POW10="Devuelve 10 a la potencia de un n\xfamero.",h.Msg.MATH_SINGLE_TOOLTIP_ROOT="Devuelve la ra\xedz cuadrada de un n\xfamero.",h.Msg.MATH_SUBTRACTION_SYMBOL="-",h.Msg.MATH_TRIG_ACOS="acos",h.Msg.MATH_TRIG_ASIN="asin",h.Msg.MATH_TRIG_ATAN="atan",h.Msg.MATH_TRIG_COS="cos",h.Msg.MATH_TRIG_HELPURL="https://es.wikipedia.org/wiki/Funci\xf3n_trigonom\xe9trica",h.Msg.MATH_TRIG_SIN="sin",h.Msg.MATH_TRIG_TAN="tan",h.Msg.MATH_TRIG_TOOLTIP_ACOS="Devuelve el arcocoseno de un n\xfamero.",h.Msg.MATH_TRIG_TOOLTIP_ASIN="Devuelve el arcoseno de un n\xfamero.",h.Msg.MATH_TRIG_TOOLTIP_ATAN="Devuelve el arcotangente de un n\xfamero.",h.Msg.MATH_TRIG_TOOLTIP_COS="Devuelve el coseno de un grado (no radi\xe1n).",h.Msg.MATH_TRIG_TOOLTIP_SIN="Devuelve el seno de un grado (no radi\xe1n).",h.Msg.MATH_TRIG_TOOLTIP_TAN="Devuelve la tangente de un grado (no radi\xe1n).",h.Msg.NEW_COLOUR_VARIABLE="Crear una variable de color...",h.Msg.NEW_NUMBER_VARIABLE="Crear una variable de n\xfamero...",h.Msg.NEW_STRING_VARIABLE="Crear una variable de cadena...",h.Msg.NEW_VARIABLE="Crear variable...",h.Msg.NEW_VARIABLE_TITLE="Nombre de variable nueva:",h.Msg.NEW_VARIABLE_TYPE_TITLE="Nuevo tipo de variable:",h.Msg.ORDINAL_NUMBER_SUFFIX="",h.Msg.PROCEDURES_ALLOW_STATEMENTS="permitir declaraciones",h.Msg.PROCEDURES_BEFORE_PARAMS="con:",h.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://es.wikipedia.org/wiki/Subrutina",h.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Ejecuta la funci\xf3n definida por el usuario '%1'.",h.Msg.PROCEDURES_CALLRETURN_HELPURL="https://es.wikipedia.org/wiki/Subrutina",h.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Ejecuta la funci\xf3n definida por el usuario '%1' y usa su salida.",h.Msg.PROCEDURES_CALL_BEFORE_PARAMS="con:",h.Msg.PROCEDURES_CREATE_DO="Crear '%1'",h.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe esta funci\xf3n...",h.Msg.PROCEDURES_DEFNORETURN_DO="",h.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",h.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="hacer algo",h.Msg.PROCEDURES_DEFNORETURN_TITLE="para",h.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Crea una funci\xf3n sin salida.",h.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",h.Msg.PROCEDURES_DEFRETURN_RETURN="devuelve",h.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Crea una funci\xf3n con una salida.",h.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Advertencia: Esta funci\xf3n tiene par\xe1metros duplicados.",h.Msg.PROCEDURES_HIGHLIGHT_DEF="Destacar definici\xf3n de la funci\xf3n",h.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",h.Msg.PROCEDURES_IFRETURN_TOOLTIP="Si un valor es verdadero, entonces devuelve un segundo valor.",h.Msg.PROCEDURES_IFRETURN_WARNING="Advertencia: Este bloque solo puede ser utilizado dentro de la definici\xf3n de una funci\xf3n.",h.Msg.PROCEDURES_MUTATORARG_TITLE="nombre de entrada:",h.Msg.PROCEDURES_MUTATORARG_TOOLTIP="A\xf1adir una entrada a la funci\xf3n.",h.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="entradas",h.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="A\xf1adir, eliminar o reordenar entradas para esta funci\xf3n.",h.Msg.REDO="Rehacer",h.Msg.REMOVE_COMMENT="Eliminar comentario",h.Msg.RENAME_VARIABLE="Renombrar variable...",h.Msg.RENAME_VARIABLE_TITLE="Renombrar todas las variables '%1' a:",h.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",h.Msg.TEXT_APPEND_TITLE="a %1 a\xf1ade el texto %2",h.Msg.TEXT_APPEND_TOOLTIP="A\xf1adir texto a la variable '%1'.",h.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",h.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="a min\xfasculas",h.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="a May\xfasculas Cada Palabra",h.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="a MAY\xdaSCULAS",h.Msg.TEXT_CHANGECASE_TOOLTIP="Devuelve una copia del texto en un tama\xf1o diferente.",h.Msg.TEXT_CHARAT_FIRST="obtener la primera letra",h.Msg.TEXT_CHARAT_FROM_END="obtener la letra # del final",h.Msg.TEXT_CHARAT_FROM_START="obtener la letra #",h.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",h.Msg.TEXT_CHARAT_LAST="obtener la \xfaltima letra",h.Msg.TEXT_CHARAT_RANDOM="obtener letra aleatoria",h.Msg.TEXT_CHARAT_TAIL="",h.Msg.TEXT_CHARAT_TITLE="en el texto %1 %2",h.Msg.TEXT_CHARAT_TOOLTIP="Devuelve la letra en la posici\xf3n especificada.",h.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",h.Msg.TEXT_COUNT_MESSAGE0="contar %1 en %2",h.Msg.TEXT_COUNT_TOOLTIP="Cuantas veces aparece un texto dentro de otro texto.",h.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Agregar un elemento al texto.",h.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="unir",h.Msg.TEXT_CREATE_JOIN_TOOLTIP="Agregar, eliminar o reordenar las secciones para reconfigurar este bloque de texto.",h.Msg.TEXT_GET_SUBSTRING_END_FROM_END="hasta la letra # del final",h.Msg.TEXT_GET_SUBSTRING_END_FROM_START="hasta la letra #",h.Msg.TEXT_GET_SUBSTRING_END_LAST="hasta la \xfaltima letra",h.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",h.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="en el texto",h.Msg.TEXT_GET_SUBSTRING_START_FIRST="obtener subcadena desde la primera letra",h.Msg.TEXT_GET_SUBSTRING_START_FROM_END="obtener subcadena desde la letra # del final",h.Msg.TEXT_GET_SUBSTRING_START_FROM_START="obtener subcadena desde la letra #",h.Msg.TEXT_GET_SUBSTRING_TAIL="",h.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Devuelve una porci\xf3n determinada del texto.",h.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",h.Msg.TEXT_INDEXOF_OPERATOR_FIRST="encontrar la primera aparici\xf3n del texto",h.Msg.TEXT_INDEXOF_OPERATOR_LAST="encontrar la \xfaltima aparici\xf3n del texto",h.Msg.TEXT_INDEXOF_TITLE="en el texto %1 %2 %3",h.Msg.TEXT_INDEXOF_TOOLTIP="Devuelve el \xedndice de la primera/\xfaltima aparici\xf3n del primer texto en el segundo texto. Devuelve %1 si el texto no se encuentra.",h.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",h.Msg.TEXT_ISEMPTY_TITLE="%1 est\xe1 vac\xedo",h.Msg.TEXT_ISEMPTY_TOOLTIP="Devuelve verdadero si el texto proporcionado est\xe1 vac\xedo.",h.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",h.Msg.TEXT_JOIN_TITLE_CREATEWITH="crear texto con",h.Msg.TEXT_JOIN_TOOLTIP="Crear un fragmento de texto al unir cualquier n\xfamero de elementos.",h.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",h.Msg.TEXT_LENGTH_TITLE="longitud de %1",h.Msg.TEXT_LENGTH_TOOLTIP="Devuelve el n\xfamero de letras (espacios incluidos) del texto proporcionado.",h.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",h.Msg.TEXT_PRINT_TITLE="imprimir %1",h.Msg.TEXT_PRINT_TOOLTIP="Imprimir el texto, n\xfamero u otro valor especificado.",h.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",h.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Solicitar al usuario un n\xfamero.",h.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Solicitar al usuario un texto.",h.Msg.TEXT_PROMPT_TYPE_NUMBER="solicitar n\xfamero con el mensaje",h.Msg.TEXT_PROMPT_TYPE_TEXT="solicitar texto con el mensaje",h.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",h.Msg.TEXT_REPLACE_MESSAGE0="reemplazar %1 con %2 en %3",h.Msg.TEXT_REPLACE_TOOLTIP="Reemplazar todas las veces que un texto dentro de otro texto.",h.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",h.Msg.TEXT_REVERSE_MESSAGE0="invertir %1",h.Msg.TEXT_REVERSE_TOOLTIP="Invierte el orden de los caracteres en el texto.",h.Msg.TEXT_TEXT_HELPURL="https://es.wikipedia.org/wiki/Cadena_de_caracteres",h.Msg.TEXT_TEXT_TOOLTIP="Una letra, palabra o l\xednea de texto.",h.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",h.Msg.TEXT_TRIM_OPERATOR_BOTH="quitar espacios de ambos lados de",h.Msg.TEXT_TRIM_OPERATOR_LEFT="quitar espacios iniciales de",h.Msg.TEXT_TRIM_OPERATOR_RIGHT="quitar espacios finales de",h.Msg.TEXT_TRIM_TOOLTIP="Devuelve una copia del texto sin los espacios de uno o ambos extremos.",h.Msg.TODAY="Hoy",h.Msg.UNDO="Deshacer",h.Msg.UNNAMED_KEY="sin nombre",h.Msg.VARIABLES_DEFAULT_NAME="elemento",h.Msg.VARIABLES_GET_CREATE_SET="Crear 'establecer %1'",h.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",h.Msg.VARIABLES_GET_TOOLTIP="Devuelve el valor de esta variable.",h.Msg.VARIABLES_SET="establecer %1 a %2",h.Msg.VARIABLES_SET_CREATE_GET="Crear 'obtener %1'",h.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",h.Msg.VARIABLES_SET_TOOLTIP="Establece esta variable para que sea igual a la entrada.",h.Msg.VARIABLE_ALREADY_EXISTS="Ya existe una variable nombrada '%1'.",h.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="Ya existe una variable nombrada '%1' para otra variable del tipo: '%2'.",h.Msg.WORKSPACE_ARIA_LABEL="Espacio de trabajo de Blockly",h.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Di algo\u2026",h.Msg.CONTROLS_FOREACH_INPUT_DO=h.Msg.CONTROLS_REPEAT_INPUT_DO,h.Msg.CONTROLS_FOR_INPUT_DO=h.Msg.CONTROLS_REPEAT_INPUT_DO,h.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=h.Msg.CONTROLS_IF_MSG_ELSEIF,h.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=h.Msg.CONTROLS_IF_MSG_ELSE,h.Msg.CONTROLS_IF_IF_TITLE_IF=h.Msg.CONTROLS_IF_MSG_IF,h.Msg.CONTROLS_IF_MSG_THEN=h.Msg.CONTROLS_REPEAT_INPUT_DO,h.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=h.Msg.CONTROLS_REPEAT_INPUT_DO,h.Msg.LISTS_CREATE_WITH_ITEM_TITLE=h.Msg.VARIABLES_DEFAULT_NAME,h.Msg.LISTS_GET_INDEX_HELPURL=h.Msg.LISTS_INDEX_OF_HELPURL,h.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=h.Msg.LISTS_INLIST,h.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=h.Msg.LISTS_INLIST,h.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=h.Msg.LISTS_INLIST,h.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=h.Msg.LISTS_INLIST,h.Msg.MATH_CHANGE_TITLE_ITEM=h.Msg.VARIABLES_DEFAULT_NAME,h.Msg.PROCEDURES_DEFRETURN_COMMENT=h.Msg.PROCEDURES_DEFNORETURN_COMMENT,h.Msg.PROCEDURES_DEFRETURN_DO=h.Msg.PROCEDURES_DEFNORETURN_DO,h.Msg.PROCEDURES_DEFRETURN_PROCEDURE=h.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,h.Msg.PROCEDURES_DEFRETURN_TITLE=h.Msg.PROCEDURES_DEFNORETURN_TITLE,h.Msg.TEXT_APPEND_VARIABLE=h.Msg.VARIABLES_DEFAULT_NAME,h.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=h.Msg.VARIABLES_DEFAULT_NAME,h.Msg.MATH_HUE="230",h.Msg.LOOPS_HUE="120",h.Msg.LISTS_HUE="260",h.Msg.LOGIC_HUE="210",h.Msg.VARIABLES_HUE="330",h.Msg.TEXTS_HUE="160",h.Msg.PROCEDURES_HUE="290",h.Msg.COLOUR_HUE="20",h.Msg.VARIABLES_DYNAMIC_HUE="310",h.Msg}.apply(Ee,[]))&&(Rt.exports=G)},782:function(Rt,Ee,Ae){var G,h;G=[Ae(210),Ae(778)],void 0!==(h=function(Z,S){return S}.apply(Ee,G))&&(Rt.exports=h)},778:function(Rt,Ee,Ae){var G,h;G=[Ae(69)],void 0!==(h=function(Z){var S=Z.__namespace__,g={};g.pythonGenerator=new S.CodeGenerator$$module$build$src$core$generator("Python"),g.pythonGenerator.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),g.pythonGenerator.ORDER_ATOMIC=0,g.pythonGenerator.ORDER_COLLECTION=1,g.pythonGenerator.ORDER_STRING_CONVERSION=1,g.pythonGenerator.ORDER_MEMBER=2.1,g.pythonGenerator.ORDER_FUNCTION_CALL=2.2,g.pythonGenerator.ORDER_EXPONENTIATION=3,g.pythonGenerator.ORDER_UNARY_SIGN=4,g.pythonGenerator.ORDER_BITWISE_NOT=4,g.pythonGenerator.ORDER_MULTIPLICATIVE=5,g.pythonGenerator.ORDER_ADDITIVE=6,g.pythonGenerator.ORDER_BITWISE_SHIFT=7,g.pythonGenerator.ORDER_BITWISE_AND=8,g.pythonGenerator.ORDER_BITWISE_XOR=9,g.pythonGenerator.ORDER_BITWISE_OR=10,g.pythonGenerator.ORDER_RELATIONAL=11,g.pythonGenerator.ORDER_LOGICAL_NOT=12,g.pythonGenerator.ORDER_LOGICAL_AND=13,g.pythonGenerator.ORDER_LOGICAL_OR=14,g.pythonGenerator.ORDER_CONDITIONAL=15,g.pythonGenerator.ORDER_LAMBDA=16,g.pythonGenerator.ORDER_NONE=99,g.pythonGenerator.ORDER_OVERRIDES=[[g.pythonGenerator.ORDER_FUNCTION_CALL,g.pythonGenerator.ORDER_MEMBER],[g.pythonGenerator.ORDER_FUNCTION_CALL,g.pythonGenerator.ORDER_FUNCTION_CALL],[g.pythonGenerator.ORDER_MEMBER,g.pythonGenerator.ORDER_MEMBER],[g.pythonGenerator.ORDER_MEMBER,g.pythonGenerator.ORDER_FUNCTION_CALL],[g.pythonGenerator.ORDER_LOGICAL_NOT,g.pythonGenerator.ORDER_LOGICAL_NOT],[g.pythonGenerator.ORDER_LOGICAL_AND,g.pythonGenerator.ORDER_LOGICAL_AND],[g.pythonGenerator.ORDER_LOGICAL_OR,g.pythonGenerator.ORDER_LOGICAL_OR]],g.pythonGenerator.isInitialized=!1,g.pythonGenerator.init=function($){Object.getPrototypeOf(this).init.call(this),this.PASS=this.INDENT+"pass\n",this.nameDB_?this.nameDB_.reset():this.nameDB_=new S.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap($.getVariableMap()),this.nameDB_.populateVariables($),this.nameDB_.populateProcedures($);const w=[];var O=S.module$build$src$core$variables.allDeveloperVariables($);for(let F=0;F<O.length;F++)w.push(this.nameDB_.getName(O[F],S.module$build$src$core$names.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for($=S.module$build$src$core$variables.allUsedVarModels($),O=0;O<$.length;O++)w.push(this.nameDB_.getName($[O].getId(),S.NameType$$module$build$src$core$names.VARIABLE)+" = None");this.definitions_.variables=w.join("\n"),this.isInitialized=!0},g.pythonGenerator.finish=function($){const w=[],O=[];for(let F in this.definitions_){const k=this.definitions_[F];k.match(/^(from\s+\S+\s+)?import\s+\S+/)?w.push(k):O.push(k)}return $=Object.getPrototypeOf(this).finish.call(this,$),this.isInitialized=!1,this.nameDB_.reset(),(w.join("\n")+"\n\n"+O.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+$},g.pythonGenerator.scrubNakedValue=function($){return $+"\n"},g.pythonGenerator.quote_=function($){let w="'";return-1!==($=$.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n")).indexOf("'")&&(-1===$.indexOf('"')?w='"':$=$.replace(/'/g,"\\'")),w+$+w},g.pythonGenerator.multiline_quote_=function($){return $.split(/\n/g).map(this.quote_).join(" + '\\n' + \n")},g.pythonGenerator.scrub_=function($,w,O){let F="";if(!$.outputConnection||!$.outputConnection.targetConnection){var k=$.getCommentText();k&&(k=S.module$build$src$core$utils$string.wrap(k,this.COMMENT_WRAP-3),F+=this.prefixLines(k+"\n","# "));for(let Q=0;Q<$.inputList.length;Q++)$.inputList[Q].type===S.module$build$src$core$input_types.inputTypes.VALUE&&(k=$.inputList[Q].connection.targetBlock())&&(k=this.allNestedComments(k))&&(F+=this.prefixLines(k,"# "))}return $=$.nextConnection&&$.nextConnection.targetBlock(),F+w+(O?"":this.blockToCode($))},g.pythonGenerator.getAdjustedInt=function($,w,O,F){O=O||0,$.workspace.options.oneBasedIndex&&O--;const k=$.workspace.options.oneBasedIndex?"1":"0";return $=this.valueToCode($,w,O?this.ORDER_ADDITIVE:this.ORDER_NONE)||k,S.module$build$src$core$utils$string.isNumber($)?($=parseInt($,10)+O,F&&($=-$)):($=0<O?"int("+$+" + "+O+")":0>O?"int("+$+" - "+-O+")":"int("+$+")",F&&($="-"+$)),$},g.pythonGenerator.variables_get=function($){return[g.pythonGenerator.nameDB_.getName($.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE),g.pythonGenerator.ORDER_ATOMIC]},g.pythonGenerator.variables_set=function($){const w=g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_NONE)||"0";return g.pythonGenerator.nameDB_.getName($.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE)+" = "+w+"\n"},g.pythonGenerator.variables_get_dynamic=g.pythonGenerator.variables_get,g.pythonGenerator.variables_set_dynamic=g.pythonGenerator.variables_set,g.pythonGenerator.text=function($){return[g.pythonGenerator.quote_($.getFieldValue("TEXT")),g.pythonGenerator.ORDER_ATOMIC]},g.pythonGenerator.text_multiline=function($){const w=-1!==($=g.pythonGenerator.multiline_quote_($.getFieldValue("TEXT"))).indexOf("+")?g.pythonGenerator.ORDER_ADDITIVE:g.pythonGenerator.ORDER_ATOMIC;return[$,w]};var Ve=/^\s*'([^']|\\')*'\s*$/,Qt=function($){return Ve.test($)?[$,g.pythonGenerator.ORDER_ATOMIC]:["str("+$+")",g.pythonGenerator.ORDER_FUNCTION_CALL]};return g.pythonGenerator.text_join=function($){switch($.itemCount_){case 0:return["''",g.pythonGenerator.ORDER_ATOMIC];case 1:return $=g.pythonGenerator.valueToCode($,"ADD0",g.pythonGenerator.ORDER_NONE)||"''",Qt($);case 2:var w=g.pythonGenerator.valueToCode($,"ADD0",g.pythonGenerator.ORDER_NONE)||"''";return $=g.pythonGenerator.valueToCode($,"ADD1",g.pythonGenerator.ORDER_NONE)||"''",[Qt(w)[0]+" + "+Qt($)[0],g.pythonGenerator.ORDER_ADDITIVE];default:w=[];for(let O=0;O<$.itemCount_;O++)w[O]=g.pythonGenerator.valueToCode($,"ADD"+O,g.pythonGenerator.ORDER_NONE)||"''";return["''.join([str("+($=g.pythonGenerator.nameDB_.getDistinctName("x",S.NameType$$module$build$src$core$names.VARIABLE))+") for "+$+" in ["+w.join(", ")+"]])",g.pythonGenerator.ORDER_FUNCTION_CALL]}},g.pythonGenerator.text_append=function($){const w=g.pythonGenerator.nameDB_.getName($.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE);return $=g.pythonGenerator.valueToCode($,"TEXT",g.pythonGenerator.ORDER_NONE)||"''",w+" = str("+w+") + "+Qt($)[0]+"\n"},g.pythonGenerator.text_length=function($){return["len("+(g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_NONE)||"''")+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.text_isEmpty=function($){return["not len("+(g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_NONE)||"''")+")",g.pythonGenerator.ORDER_LOGICAL_NOT]},g.pythonGenerator.text_indexOf=function($){var w="FIRST"===$.getFieldValue("END")?"find":"rfind";const O=g.pythonGenerator.valueToCode($,"FIND",g.pythonGenerator.ORDER_NONE)||"''";return w=(g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_MEMBER)||"''")+"."+w+"("+O+")",$.workspace.options.oneBasedIndex?[w+" + 1",g.pythonGenerator.ORDER_ADDITIVE]:[w,g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.text_charAt=function($){const w=$.getFieldValue("WHERE")||"FROM_START",O=g.pythonGenerator.valueToCode($,"VALUE","RANDOM"===w?g.pythonGenerator.ORDER_NONE:g.pythonGenerator.ORDER_MEMBER)||"''";switch(w){case"FIRST":return[O+"[0]",g.pythonGenerator.ORDER_MEMBER];case"LAST":return[O+"[-1]",g.pythonGenerator.ORDER_MEMBER];case"FROM_START":return[O+"["+($=g.pythonGenerator.getAdjustedInt($,"AT"))+"]",g.pythonGenerator.ORDER_MEMBER];case"FROM_END":return[O+"["+($=g.pythonGenerator.getAdjustedInt($,"AT",1,!0))+"]",g.pythonGenerator.ORDER_MEMBER];case"RANDOM":return g.pythonGenerator.definitions_.import_random="import random",[g.pythonGenerator.provideFunction_("text_random_letter",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(text):\n  x = int(random.random() * len(text))\n  return text[x]\n`)+"("+O+")",g.pythonGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},g.pythonGenerator.text_getSubstring=function($){var w=$.getFieldValue("WHERE1");const O=$.getFieldValue("WHERE2"),F=g.pythonGenerator.valueToCode($,"STRING",g.pythonGenerator.ORDER_MEMBER)||"''";switch(w){case"FROM_START":0===(w=g.pythonGenerator.getAdjustedInt($,"AT1"))&&(w="");break;case"FROM_END":w=g.pythonGenerator.getAdjustedInt($,"AT1",1,!0);break;case"FIRST":w="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(O){case"FROM_START":$=g.pythonGenerator.getAdjustedInt($,"AT2",1);break;case"FROM_END":$=g.pythonGenerator.getAdjustedInt($,"AT2",0,!0),S.module$build$src$core$utils$string.isNumber(String($))?0===$&&($=""):(g.pythonGenerator.definitions_.import_sys="import sys",$+=" or sys.maxsize");break;case"LAST":$="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[F+"["+w+" : "+$+"]",g.pythonGenerator.ORDER_MEMBER]},g.pythonGenerator.text_changeCase=function($){const w={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[$.getFieldValue("CASE")];return[(g.pythonGenerator.valueToCode($,"TEXT",g.pythonGenerator.ORDER_MEMBER)||"''")+w,g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.text_trim=function($){const w={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[$.getFieldValue("MODE")];return[(g.pythonGenerator.valueToCode($,"TEXT",g.pythonGenerator.ORDER_MEMBER)||"''")+w,g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.text_print=function($){return"print("+(g.pythonGenerator.valueToCode($,"TEXT",g.pythonGenerator.ORDER_NONE)||"''")+")\n"},g.pythonGenerator.text_prompt_ext=function($){var w=g.pythonGenerator.provideFunction_("text_prompt",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(msg):\n  try:\n    return raw_input(msg)\n  except NameError:\n    return input(msg)\n`);let O;return O=$.getField("TEXT")?g.pythonGenerator.quote_($.getFieldValue("TEXT")):g.pythonGenerator.valueToCode($,"TEXT",g.pythonGenerator.ORDER_NONE)||"''",w=w+"("+O+")","NUMBER"===$.getFieldValue("TYPE")&&(w="float("+w+")"),[w,g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.text_prompt=g.pythonGenerator.text_prompt_ext,g.pythonGenerator.text_count=function($){return[(g.pythonGenerator.valueToCode($,"TEXT",g.pythonGenerator.ORDER_MEMBER)||"''")+".count("+($=g.pythonGenerator.valueToCode($,"SUB",g.pythonGenerator.ORDER_NONE)||"''")+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.text_replace=function($){return[(g.pythonGenerator.valueToCode($,"TEXT",g.pythonGenerator.ORDER_MEMBER)||"''")+".replace("+(g.pythonGenerator.valueToCode($,"FROM",g.pythonGenerator.ORDER_NONE)||"''")+", "+($=g.pythonGenerator.valueToCode($,"TO",g.pythonGenerator.ORDER_NONE)||"''")+")",g.pythonGenerator.ORDER_MEMBER]},g.pythonGenerator.text_reverse=function($){return[(g.pythonGenerator.valueToCode($,"TEXT",g.pythonGenerator.ORDER_MEMBER)||"''")+"[::-1]",g.pythonGenerator.ORDER_MEMBER]},g.pythonGenerator.procedures_defreturn=function($){var w=[],O=$.workspace,F=S.module$build$src$core$variables.allUsedVarModels(O)||[];for(let Cn,Xe=0;Cn=F[Xe];Xe++){var k=Cn.name;-1===$.getVars().indexOf(k)&&w.push(g.pythonGenerator.nameDB_.getName(k,S.NameType$$module$build$src$core$names.VARIABLE))}for(O=S.module$build$src$core$variables.allDeveloperVariables(O),F=0;F<O.length;F++)w.push(g.pythonGenerator.nameDB_.getName(O[F],S.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));O=w.length?g.pythonGenerator.INDENT+"global "+w.join(", ")+"\n":"",w=g.pythonGenerator.nameDB_.getName($.getFieldValue("NAME"),S.NameType$$module$build$src$core$names.PROCEDURE),F="",g.pythonGenerator.STATEMENT_PREFIX&&(F+=g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_PREFIX,$)),g.pythonGenerator.STATEMENT_SUFFIX&&(F+=g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_SUFFIX,$)),F&&(F=g.pythonGenerator.prefixLines(F,g.pythonGenerator.INDENT)),k="",g.pythonGenerator.INFINITE_LOOP_TRAP&&(k=g.pythonGenerator.prefixLines(g.pythonGenerator.injectId(g.pythonGenerator.INFINITE_LOOP_TRAP,$),g.pythonGenerator.INDENT));let Q=g.pythonGenerator.statementToCode($,"STACK"),Ge=g.pythonGenerator.valueToCode($,"RETURN",g.pythonGenerator.ORDER_NONE)||"",ce="";Q&&Ge&&(ce=F),Ge?Ge=g.pythonGenerator.INDENT+"return "+Ge+"\n":Q||(Q=g.pythonGenerator.PASS);const Pt=[],ie=$.getVars();for(let Xe=0;Xe<ie.length;Xe++)Pt[Xe]=g.pythonGenerator.nameDB_.getName(ie[Xe],S.NameType$$module$build$src$core$names.VARIABLE);return O="def "+w+"("+Pt.join(", ")+"):\n"+O+F+k+Q+ce+Ge,O=g.pythonGenerator.scrub_($,O),g.pythonGenerator.definitions_["%"+w]=O,null},g.pythonGenerator.procedures_defnoreturn=g.pythonGenerator.procedures_defreturn,g.pythonGenerator.procedures_callreturn=function($){const w=g.pythonGenerator.nameDB_.getName($.getFieldValue("NAME"),S.NameType$$module$build$src$core$names.PROCEDURE),O=[],F=$.getVars();for(let k=0;k<F.length;k++)O[k]=g.pythonGenerator.valueToCode($,"ARG"+k,g.pythonGenerator.ORDER_NONE)||"None";return[w+"("+O.join(", ")+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.procedures_callnoreturn=function($){return g.pythonGenerator.procedures_callreturn($)[0]+"\n"},g.pythonGenerator.procedures_ifreturn=function($){let w="if "+(g.pythonGenerator.valueToCode($,"CONDITION",g.pythonGenerator.ORDER_NONE)||"False")+":\n";return g.pythonGenerator.STATEMENT_SUFFIX&&(w+=g.pythonGenerator.prefixLines(g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_SUFFIX,$),g.pythonGenerator.INDENT)),$.hasReturnValue_?($=g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_NONE)||"None",w+=g.pythonGenerator.INDENT+"return "+$+"\n"):w+=g.pythonGenerator.INDENT+"return\n",w},g.pythonGenerator.addReservedWords("math,random,Number"),g.pythonGenerator.math_number=function($){let w;return($=Number($.getFieldValue("NUM")))===1/0?($='float("inf")',w=g.pythonGenerator.ORDER_FUNCTION_CALL):$===-1/0?($='-float("inf")',w=g.pythonGenerator.ORDER_UNARY_SIGN):w=0>$?g.pythonGenerator.ORDER_UNARY_SIGN:g.pythonGenerator.ORDER_ATOMIC,[$,w]},g.pythonGenerator.math_arithmetic=function($){var w={ADD:[" + ",g.pythonGenerator.ORDER_ADDITIVE],MINUS:[" - ",g.pythonGenerator.ORDER_ADDITIVE],MULTIPLY:[" * ",g.pythonGenerator.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",g.pythonGenerator.ORDER_MULTIPLICATIVE],POWER:[" ** ",g.pythonGenerator.ORDER_EXPONENTIATION]}[$.getFieldValue("OP")];const O=w[0];return[(g.pythonGenerator.valueToCode($,"A",w=w[1])||"0")+O+($=g.pythonGenerator.valueToCode($,"B",w)||"0"),w]},g.pythonGenerator.math_single=function($){const w=$.getFieldValue("OP");let O;if("NEG"===w)return O=g.pythonGenerator.valueToCode($,"NUM",g.pythonGenerator.ORDER_UNARY_SIGN)||"0",["-"+O,g.pythonGenerator.ORDER_UNARY_SIGN];switch(g.pythonGenerator.definitions_.import_math="import math",$="SIN"===w||"COS"===w||"TAN"===w?g.pythonGenerator.valueToCode($,"NUM",g.pythonGenerator.ORDER_MULTIPLICATIVE)||"0":g.pythonGenerator.valueToCode($,"NUM",g.pythonGenerator.ORDER_NONE)||"0",w){case"ABS":O="math.fabs("+$+")";break;case"ROOT":O="math.sqrt("+$+")";break;case"LN":O="math.log("+$+")";break;case"LOG10":O="math.log10("+$+")";break;case"EXP":O="math.exp("+$+")";break;case"POW10":O="math.pow(10,"+$+")";break;case"ROUND":O="round("+$+")";break;case"ROUNDUP":O="math.ceil("+$+")";break;case"ROUNDDOWN":O="math.floor("+$+")";break;case"SIN":O="math.sin("+$+" / 180.0 * math.pi)";break;case"COS":O="math.cos("+$+" / 180.0 * math.pi)";break;case"TAN":O="math.tan("+$+" / 180.0 * math.pi)"}if(O)return[O,g.pythonGenerator.ORDER_FUNCTION_CALL];switch(w){case"ASIN":O="math.asin("+$+") / math.pi * 180";break;case"ACOS":O="math.acos("+$+") / math.pi * 180";break;case"ATAN":O="math.atan("+$+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+w)}return[O,g.pythonGenerator.ORDER_MULTIPLICATIVE]},g.pythonGenerator.math_constant=function($){const w={PI:["math.pi",g.pythonGenerator.ORDER_MEMBER],E:["math.e",g.pythonGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",g.pythonGenerator.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",g.pythonGenerator.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",g.pythonGenerator.ORDER_MEMBER],INFINITY:["float('inf')",g.pythonGenerator.ORDER_ATOMIC]};return"INFINITY"!==($=$.getFieldValue("CONSTANT"))&&(g.pythonGenerator.definitions_.import_math="import math"),w[$]},g.pythonGenerator.math_number_property=function($){var w={EVEN:[" % 2 == 0",g.pythonGenerator.ORDER_MULTIPLICATIVE,g.pythonGenerator.ORDER_RELATIONAL],ODD:[" % 2 == 1",g.pythonGenerator.ORDER_MULTIPLICATIVE,g.pythonGenerator.ORDER_RELATIONAL],WHOLE:[" % 1 == 0",g.pythonGenerator.ORDER_MULTIPLICATIVE,g.pythonGenerator.ORDER_RELATIONAL],POSITIVE:[" > 0",g.pythonGenerator.ORDER_RELATIONAL,g.pythonGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",g.pythonGenerator.ORDER_RELATIONAL,g.pythonGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,g.pythonGenerator.ORDER_MULTIPLICATIVE,g.pythonGenerator.ORDER_RELATIONAL],PRIME:[null,g.pythonGenerator.ORDER_NONE,g.pythonGenerator.ORDER_FUNCTION_CALL]};const O=$.getFieldValue("PROPERTY"),[F,k,Q]=w[O];if(w=g.pythonGenerator.valueToCode($,"NUMBER_TO_CHECK",k)||"0","PRIME"===O)g.pythonGenerator.definitions_.import_math="import math",g.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",$=g.pythonGenerator.provideFunction_("math_isPrime",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(n):\n  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  # If n is not a number but a string, try parsing it.\n  if not isinstance(n, Number):\n    try:\n      n = float(n)\n    except:\n      return False\n  if n == 2 or n == 3:\n    return True\n  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.\n  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:\n    return False\n  # Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for x in range(6, int(math.sqrt(n)) + 2, 6):\n    if n % (x - 1) == 0 or n % (x + 1) == 0:\n      return False\n  return True\n`)+"("+w+")";else if("DIVISIBLE_BY"===O){if("0"===($=g.pythonGenerator.valueToCode($,"DIVISOR",g.pythonGenerator.ORDER_MULTIPLICATIVE)||"0"))return["False",g.pythonGenerator.ORDER_ATOMIC];$=w+" % "+$+" == 0"}else $=w+F;return[$,Q]},g.pythonGenerator.math_change=function($){g.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number";const w=g.pythonGenerator.valueToCode($,"DELTA",g.pythonGenerator.ORDER_ADDITIVE)||"0";return($=g.pythonGenerator.nameDB_.getName($.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE))+" = ("+$+" if isinstance("+$+", Number) else 0) + "+w+"\n"},g.pythonGenerator.math_round=g.pythonGenerator.math_single,g.pythonGenerator.math_trig=g.pythonGenerator.math_single,g.pythonGenerator.math_on_list=function($){var w=$.getFieldValue("OP");switch($=g.pythonGenerator.valueToCode($,"LIST",g.pythonGenerator.ORDER_NONE)||"[]",w){case"SUM":w="sum("+$+")";break;case"MIN":w="min("+$+")";break;case"MAX":w="max("+$+")";break;case"AVERAGE":g.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",w=g.pythonGenerator.provideFunction_("math_mean",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  localList = [e for e in myList if isinstance(e, Number)]\n  if not localList: return\n  return float(sum(localList)) / len(localList)\n`)+"("+$+")";break;case"MEDIAN":g.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",w=g.pythonGenerator.provideFunction_("math_median",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  localList = sorted([e for e in myList if isinstance(e, Number)])\n  if not localList: return\n  if len(localList) % 2 == 0:\n    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0\n  else:\n    return localList[(len(localList) - 1) // 2]\n`)+"("+$+")";break;case"MODE":w=g.pythonGenerator.provideFunction_("math_modes",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(some_list):\n  modes = []\n  # Using a lists of [item, count] to keep count rather than dict\n  # to avoid "unhashable" errors when the counted item is itself a list or dict.\n  counts = []\n  maxCount = 1\n  for item in some_list:\n    found = False\n    for count in counts:\n      if count[0] == item:\n        count[1] += 1\n        maxCount = max(maxCount, count[1])\n        found = True\n    if not found:\n      counts.append([item, 1])\n  for counted_item, item_count in counts:\n    if item_count == maxCount:\n      modes.append(counted_item)\n  return modes\n`)+"("+$+")";break;case"STD_DEV":g.pythonGenerator.definitions_.import_math="import math",w=g.pythonGenerator.provideFunction_("math_standard_deviation",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers):\n  n = len(numbers)\n  if n == 0: return\n  mean = float(sum(numbers)) / n\n  variance = sum((x - mean) ** 2 for x in numbers) / n\n  return math.sqrt(variance)\n`)+"("+$+")";break;case"RANDOM":g.pythonGenerator.definitions_.import_random="import random",w="random.choice("+$+")";break;default:throw Error("Unknown operator: "+w)}return[w,g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.math_modulo=function($){return[(g.pythonGenerator.valueToCode($,"DIVIDEND",g.pythonGenerator.ORDER_MULTIPLICATIVE)||"0")+" % "+($=g.pythonGenerator.valueToCode($,"DIVISOR",g.pythonGenerator.ORDER_MULTIPLICATIVE)||"0"),g.pythonGenerator.ORDER_MULTIPLICATIVE]},g.pythonGenerator.math_constrain=function($){return["min(max("+(g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_NONE)||"0")+", "+(g.pythonGenerator.valueToCode($,"LOW",g.pythonGenerator.ORDER_NONE)||"0")+"), "+($=g.pythonGenerator.valueToCode($,"HIGH",g.pythonGenerator.ORDER_NONE)||"float('inf')")+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.math_random_int=function($){return g.pythonGenerator.definitions_.import_random="import random",["random.randint("+(g.pythonGenerator.valueToCode($,"FROM",g.pythonGenerator.ORDER_NONE)||"0")+", "+($=g.pythonGenerator.valueToCode($,"TO",g.pythonGenerator.ORDER_NONE)||"0")+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.math_random_float=function($){return g.pythonGenerator.definitions_.import_random="import random",["random.random()",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.math_atan2=function($){g.pythonGenerator.definitions_.import_math="import math";const w=g.pythonGenerator.valueToCode($,"X",g.pythonGenerator.ORDER_NONE)||"0";return["math.atan2("+(g.pythonGenerator.valueToCode($,"Y",g.pythonGenerator.ORDER_NONE)||"0")+", "+w+") / math.pi * 180",g.pythonGenerator.ORDER_MULTIPLICATIVE]},g.pythonGenerator.controls_repeat_ext=function($){let w;w=$.getField("TIMES")?String(parseInt($.getFieldValue("TIMES"),10)):g.pythonGenerator.valueToCode($,"TIMES",g.pythonGenerator.ORDER_NONE)||"0",w=S.module$build$src$core$utils$string.isNumber(w)?parseInt(w,10):"int("+w+")";let O=g.pythonGenerator.statementToCode($,"DO");return O=g.pythonGenerator.addLoopTrap(O,$)||g.pythonGenerator.PASS,"for "+g.pythonGenerator.nameDB_.getDistinctName("count",S.NameType$$module$build$src$core$names.VARIABLE)+" in range("+w+"):\n"+O},g.pythonGenerator.controls_repeat=g.pythonGenerator.controls_repeat_ext,g.pythonGenerator.controls_whileUntil=function($){const w="UNTIL"===$.getFieldValue("MODE");let O=g.pythonGenerator.valueToCode($,"BOOL",w?g.pythonGenerator.ORDER_LOGICAL_NOT:g.pythonGenerator.ORDER_NONE)||"False",F=g.pythonGenerator.statementToCode($,"DO");return F=g.pythonGenerator.addLoopTrap(F,$)||g.pythonGenerator.PASS,w&&(O="not "+O),"while "+O+":\n"+F},g.pythonGenerator.controls_for=function($){const w=g.pythonGenerator.nameDB_.getName($.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE);var O=g.pythonGenerator.valueToCode($,"FROM",g.pythonGenerator.ORDER_NONE)||"0",F=g.pythonGenerator.valueToCode($,"TO",g.pythonGenerator.ORDER_NONE)||"0",k=g.pythonGenerator.valueToCode($,"BY",g.pythonGenerator.ORDER_NONE)||"1";let Q=g.pythonGenerator.statementToCode($,"DO");Q=g.pythonGenerator.addLoopTrap(Q,$)||g.pythonGenerator.PASS;let Ge="";const ce=function(){return g.pythonGenerator.provideFunction_("upRange",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):\n  while start <= stop:\n    yield start\n    start += abs(step)\n`)},Pt=function(){return g.pythonGenerator.provideFunction_("downRange",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):\n  while start >= stop:\n    yield start\n    start -= abs(step)\n`)};if($=function(ie,Xe,Cn){return"("+ie+" <= "+Xe+") and "+ce()+"("+ie+", "+Xe+", "+Cn+") or "+Pt()+"("+ie+", "+Xe+", "+Cn+")"},S.module$build$src$core$utils$string.isNumber(O)&&S.module$build$src$core$utils$string.isNumber(F)&&S.module$build$src$core$utils$string.isNumber(k))O=Number(O),F=Number(F),k=Math.abs(Number(k)),O%1==0&&F%1==0&&k%1==0?(O<=F?(F++,$=0===O&&1===k?F:O+", "+F,1!==k&&($+=", "+k)):$=O+", "+--F+", -"+k,$="range("+$+")"):($=O<F?ce():Pt(),$+="("+O+", "+F+", "+k+")");else{const ie=function(Xe,Cn){return S.module$build$src$core$utils$string.isNumber(Xe)?Xe=Number(Xe):Xe.match(/^\w+$/)||(Cn=g.pythonGenerator.nameDB_.getDistinctName(w+Cn,S.NameType$$module$build$src$core$names.VARIABLE),Ge+=Cn+" = "+Xe+"\n",Xe=Cn),Xe};O=ie(O,"_start"),F=ie(F,"_end"),k=ie(k,"_inc"),"number"==typeof O&&"number"==typeof F?($=O<F?ce():Pt(),$+="("+O+", "+F+", "+k+")"):$=$(O,F,k)}return Ge+="for "+w+" in "+$+":\n"+Q},g.pythonGenerator.controls_forEach=function($){const w=g.pythonGenerator.nameDB_.getName($.getFieldValue("VAR"),S.NameType$$module$build$src$core$names.VARIABLE),O=g.pythonGenerator.valueToCode($,"LIST",g.pythonGenerator.ORDER_RELATIONAL)||"[]";let F=g.pythonGenerator.statementToCode($,"DO");return F=g.pythonGenerator.addLoopTrap(F,$)||g.pythonGenerator.PASS,"for "+w+" in "+O+":\n"+F},g.pythonGenerator.controls_flow_statements=function($){let w="";if(g.pythonGenerator.STATEMENT_PREFIX&&(w+=g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_PREFIX,$)),g.pythonGenerator.STATEMENT_SUFFIX&&(w+=g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_SUFFIX,$)),g.pythonGenerator.STATEMENT_PREFIX){const O=$.getSurroundLoop();O&&!O.suppressPrefixSuffix&&(w+=g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_PREFIX,O))}switch($.getFieldValue("FLOW")){case"BREAK":return w+"break\n";case"CONTINUE":return w+"continue\n"}throw Error("Unknown flow statement.")},g.pythonGenerator.controls_if=function($){let F,k,w=0,O="";g.pythonGenerator.STATEMENT_PREFIX&&(O+=g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_PREFIX,$));do{k=g.pythonGenerator.valueToCode($,"IF"+w,g.pythonGenerator.ORDER_NONE)||"False",F=g.pythonGenerator.statementToCode($,"DO"+w)||g.pythonGenerator.PASS,g.pythonGenerator.STATEMENT_SUFFIX&&(F=g.pythonGenerator.prefixLines(g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_SUFFIX,$),g.pythonGenerator.INDENT)+F),O+=(0===w?"if ":"elif ")+k+":\n"+F,w++}while($.getInput("IF"+w));return($.getInput("ELSE")||g.pythonGenerator.STATEMENT_SUFFIX)&&(F=g.pythonGenerator.statementToCode($,"ELSE")||g.pythonGenerator.PASS,g.pythonGenerator.STATEMENT_SUFFIX&&(F=g.pythonGenerator.prefixLines(g.pythonGenerator.injectId(g.pythonGenerator.STATEMENT_SUFFIX,$),g.pythonGenerator.INDENT)+F),O+="else:\n"+F),O},g.pythonGenerator.controls_ifelse=g.pythonGenerator.controls_if,g.pythonGenerator.logic_compare=function($){const w={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[$.getFieldValue("OP")],O=g.pythonGenerator.ORDER_RELATIONAL;return[(g.pythonGenerator.valueToCode($,"A",O)||"0")+" "+w+" "+($=g.pythonGenerator.valueToCode($,"B",O)||"0"),O]},g.pythonGenerator.logic_operation=function($){const w="AND"===$.getFieldValue("OP")?"and":"or",O="and"===w?g.pythonGenerator.ORDER_LOGICAL_AND:g.pythonGenerator.ORDER_LOGICAL_OR;let F=g.pythonGenerator.valueToCode($,"A",O);if($=g.pythonGenerator.valueToCode($,"B",O),F||$){const k="and"===w?"True":"False";F||(F=k),$||($=k)}else $=F="False";return[F+" "+w+" "+$,O]},g.pythonGenerator.logic_negate=function($){return["not "+(g.pythonGenerator.valueToCode($,"BOOL",g.pythonGenerator.ORDER_LOGICAL_NOT)||"True"),g.pythonGenerator.ORDER_LOGICAL_NOT]},g.pythonGenerator.logic_boolean=function($){return["TRUE"===$.getFieldValue("BOOL")?"True":"False",g.pythonGenerator.ORDER_ATOMIC]},g.pythonGenerator.logic_null=function($){return["None",g.pythonGenerator.ORDER_ATOMIC]},g.pythonGenerator.logic_ternary=function($){const w=g.pythonGenerator.valueToCode($,"IF",g.pythonGenerator.ORDER_CONDITIONAL)||"False";return[(g.pythonGenerator.valueToCode($,"THEN",g.pythonGenerator.ORDER_CONDITIONAL)||"None")+" if "+w+" else "+($=g.pythonGenerator.valueToCode($,"ELSE",g.pythonGenerator.ORDER_CONDITIONAL)||"None"),g.pythonGenerator.ORDER_CONDITIONAL]},g.pythonGenerator.lists_create_empty=function($){return["[]",g.pythonGenerator.ORDER_ATOMIC]},g.pythonGenerator.lists_create_with=function($){const w=Array($.itemCount_);for(let O=0;O<$.itemCount_;O++)w[O]=g.pythonGenerator.valueToCode($,"ADD"+O,g.pythonGenerator.ORDER_NONE)||"None";return["["+w.join(", ")+"]",g.pythonGenerator.ORDER_ATOMIC]},g.pythonGenerator.lists_repeat=function($){return["["+(g.pythonGenerator.valueToCode($,"ITEM",g.pythonGenerator.ORDER_NONE)||"None")+"] * "+($=g.pythonGenerator.valueToCode($,"NUM",g.pythonGenerator.ORDER_MULTIPLICATIVE)||"0"),g.pythonGenerator.ORDER_MULTIPLICATIVE]},g.pythonGenerator.lists_length=function($){return["len("+(g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_NONE)||"[]")+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.lists_isEmpty=function($){return["not len("+(g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_NONE)||"[]")+")",g.pythonGenerator.ORDER_LOGICAL_NOT]},g.pythonGenerator.lists_indexOf=function($){const w=g.pythonGenerator.valueToCode($,"FIND",g.pythonGenerator.ORDER_NONE)||"[]",O=g.pythonGenerator.valueToCode($,"VALUE",g.pythonGenerator.ORDER_NONE)||"''";let F=" -1",k="",Q=" - 1";return $.workspace.options.oneBasedIndex&&(F=" 0",k=" + 1",Q=""),[("FIRST"===$.getFieldValue("END")?g.pythonGenerator.provideFunction_("first_index",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):\n  try: index = my_list.index(elem)${k}\n  except: index =${F}\n  return index\n`):g.pythonGenerator.provideFunction_("last_index",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):\n  try: index = len(my_list) - my_list[::-1].index(elem)${Q}\n  except: index =${F}\n  return index\n`))+"("+O+", "+w+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.lists_getIndex=function($){const w=$.getFieldValue("MODE")||"GET",O=$.getFieldValue("WHERE")||"FROM_START";var F=g.pythonGenerator.valueToCode($,"VALUE","RANDOM"===O?g.pythonGenerator.ORDER_NONE:g.pythonGenerator.ORDER_MEMBER)||"[]";switch(O){case"FIRST":if("GET"===w)return[F+"[0]",g.pythonGenerator.ORDER_MEMBER];if("GET_REMOVE"===w)return[F+".pop(0)",g.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===w)return F+".pop(0)\n";break;case"LAST":if("GET"===w)return[F+"[-1]",g.pythonGenerator.ORDER_MEMBER];if("GET_REMOVE"===w)return[F+".pop()",g.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===w)return F+".pop()\n";break;case"FROM_START":if($=g.pythonGenerator.getAdjustedInt($,"AT"),"GET"===w)return[F+"["+$+"]",g.pythonGenerator.ORDER_MEMBER];if("GET_REMOVE"===w)return[F+".pop("+$+")",g.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===w)return F+".pop("+$+")\n";break;case"FROM_END":if($=g.pythonGenerator.getAdjustedInt($,"AT",1,!0),"GET"===w)return[F+"["+$+"]",g.pythonGenerator.ORDER_MEMBER];if("GET_REMOVE"===w)return[F+".pop("+$+")",g.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===w)return F+".pop("+$+")\n";break;case"RANDOM":if(g.pythonGenerator.definitions_.import_random="import random","GET"===w)return["random.choice("+F+")",g.pythonGenerator.ORDER_FUNCTION_CALL];if(F=g.pythonGenerator.provideFunction_("lists_remove_random_item",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  x = int(random.random() * len(myList))\n  return myList.pop(x)\n`)+"("+F+")","GET_REMOVE"===w)return[F,g.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===w)return F+"\n"}throw Error("Unhandled combination (lists_getIndex).")},g.pythonGenerator.lists_setIndex=function($){let w=g.pythonGenerator.valueToCode($,"LIST",g.pythonGenerator.ORDER_MEMBER)||"[]";const O=$.getFieldValue("MODE")||"GET";var F=$.getFieldValue("WHERE")||"FROM_START";const k=g.pythonGenerator.valueToCode($,"TO",g.pythonGenerator.ORDER_NONE)||"None";switch(F){case"FIRST":if("SET"===O)return w+"[0] = "+k+"\n";if("INSERT"===O)return w+".insert(0, "+k+")\n";break;case"LAST":if("SET"===O)return w+"[-1] = "+k+"\n";if("INSERT"===O)return w+".append("+k+")\n";break;case"FROM_START":if($=g.pythonGenerator.getAdjustedInt($,"AT"),"SET"===O)return w+"["+$+"] = "+k+"\n";if("INSERT"===O)return w+".insert("+$+", "+k+")\n";break;case"FROM_END":if($=g.pythonGenerator.getAdjustedInt($,"AT",1,!0),"SET"===O)return w+"["+$+"] = "+k+"\n";if("INSERT"===O)return w+".insert("+$+", "+k+")\n";break;case"RANDOM":if(g.pythonGenerator.definitions_.import_random="import random",w.match(/^\w+$/)?$="":(F=($=g.pythonGenerator.nameDB_.getDistinctName("tmp_list",S.NameType$$module$build$src$core$names.VARIABLE))+" = "+w+"\n",w=$,$=F),$+=(F=g.pythonGenerator.nameDB_.getDistinctName("tmp_x",S.NameType$$module$build$src$core$names.VARIABLE))+" = int(random.random() * len("+w+"))\n","SET"===O)return $+(w+"[")+F+"] = "+k+"\n";if("INSERT"===O)return $+(w+".insert(")+F+", "+k+")\n"}throw Error("Unhandled combination (lists_setIndex).")},g.pythonGenerator.lists_getSublist=function($){const w=g.pythonGenerator.valueToCode($,"LIST",g.pythonGenerator.ORDER_MEMBER)||"[]";var O=$.getFieldValue("WHERE1");const F=$.getFieldValue("WHERE2");switch(O){case"FROM_START":0===(O=g.pythonGenerator.getAdjustedInt($,"AT1"))&&(O="");break;case"FROM_END":O=g.pythonGenerator.getAdjustedInt($,"AT1",1,!0);break;case"FIRST":O="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(F){case"FROM_START":$=g.pythonGenerator.getAdjustedInt($,"AT2",1);break;case"FROM_END":$=g.pythonGenerator.getAdjustedInt($,"AT2",0,!0),S.module$build$src$core$utils$string.isNumber(String($))?0===$&&($=""):(g.pythonGenerator.definitions_.import_sys="import sys",$+=" or sys.maxsize");break;case"LAST":$="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[w+"["+O+" : "+$+"]",g.pythonGenerator.ORDER_MEMBER]},g.pythonGenerator.lists_sort=function($){const w=g.pythonGenerator.valueToCode($,"LIST",g.pythonGenerator.ORDER_NONE)||"[]",O=$.getFieldValue("TYPE");return $="1"===$.getFieldValue("DIRECTION")?"False":"True",[g.pythonGenerator.provideFunction_("lists_sort",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):\n  def try_float(s):\n    try:\n      return float(s)\n    except:\n      return 0\n  key_funcs = {\n    "NUMERIC": try_float,\n    "TEXT": str,\n    "IGNORE_CASE": lambda s: str(s).lower()\n  }\n  key_func = key_funcs[type]\n  list_cpy = list(my_list)\n  return sorted(list_cpy, key=key_func, reverse=reverse)\n`)+"("+w+', "'+O+'", '+$+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.lists_split=function($){var w=$.getFieldValue("MODE");if("SPLIT"===w)$=(w=g.pythonGenerator.valueToCode($,"INPUT",g.pythonGenerator.ORDER_MEMBER)||"''")+".split("+($=g.pythonGenerator.valueToCode($,"DELIM",g.pythonGenerator.ORDER_NONE))+")";else{if("JOIN"!==w)throw Error("Unknown mode: "+w);w=g.pythonGenerator.valueToCode($,"INPUT",g.pythonGenerator.ORDER_NONE)||"[]",$=(g.pythonGenerator.valueToCode($,"DELIM",g.pythonGenerator.ORDER_MEMBER)||"''")+".join("+w+")"}return[$,g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.lists_reverse=function($){return["list(reversed("+(g.pythonGenerator.valueToCode($,"LIST",g.pythonGenerator.ORDER_NONE)||"[]")+"))",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.colour_picker=function($){return[g.pythonGenerator.quote_($.getFieldValue("COLOUR")),g.pythonGenerator.ORDER_ATOMIC]},g.pythonGenerator.colour_random=function($){return g.pythonGenerator.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.colour_rgb=function($){return[g.pythonGenerator.provideFunction_("colour_rgb",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):\n  r = round(min(100, max(0, r)) * 2.55)\n  g = round(min(100, max(0, g)) * 2.55)\n  b = round(min(100, max(0, b)) * 2.55)\n  return '#%02x%02x%02x' % (r, g, b)\n`)+"("+(g.pythonGenerator.valueToCode($,"RED",g.pythonGenerator.ORDER_NONE)||0)+", "+(g.pythonGenerator.valueToCode($,"GREEN",g.pythonGenerator.ORDER_NONE)||0)+", "+($=g.pythonGenerator.valueToCode($,"BLUE",g.pythonGenerator.ORDER_NONE)||0)+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.pythonGenerator.colour_blend=function($){return[g.pythonGenerator.provideFunction_("colour_blend",`\ndef ${g.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):\n  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)\n  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)\n  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)\n  ratio = min(1, max(0, ratio))\n  r = round(r1 * (1 - ratio) + r2 * ratio)\n  g = round(g1 * (1 - ratio) + g2 * ratio)\n  b = round(b1 * (1 - ratio) + b2 * ratio)\n  return '#%02x%02x%02x' % (r, g, b)\n`)+"("+(g.pythonGenerator.valueToCode($,"COLOUR1",g.pythonGenerator.ORDER_NONE)||"'#000000'")+", "+(g.pythonGenerator.valueToCode($,"COLOUR2",g.pythonGenerator.ORDER_NONE)||"'#000000'")+", "+($=g.pythonGenerator.valueToCode($,"RATIO",g.pythonGenerator.ORDER_NONE)||0)+")",g.pythonGenerator.ORDER_FUNCTION_CALL]},g.__namespace__=S,g}.apply(Ee,G))&&(Rt.exports=h)},226:function(Rt){Rt.exports=function(){"use strict";var Ee={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const ne=m=>{const T={};for(const C in m)T[m[C]]="swal2-"+m[C];return T},G=ne(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),h=ne(["success","warning","info","question","error"]),Z="SweetAlert2:",g=m=>m.charAt(0).toUpperCase()+m.slice(1),wt=m=>{console.warn(`${Z} ${"object"==typeof m?m.join(" "):m}`)},so=m=>{console.error(`${Z} ${m}`)},zn=[],Cl=(m,T)=>{(m=>{zn.includes(m)||(zn.push(m),wt(m))})(`"${m}" is deprecated and will be removed in the next major release. Please use "${T}" instead.`)},Fo=m=>"function"==typeof m?m():m,js=m=>m&&"function"==typeof m.toPromise,xr=m=>js(m)?m.toPromise():Promise.resolve(m),ue=m=>m&&Promise.resolve(m)===m,ot=()=>document.body.querySelector(`.${G.container}`),ve=m=>{const T=ot();return T?T.querySelector(m):null},St=m=>ve(`.${m}`),Ve=()=>St(G.popup),Qt=()=>St(G.icon),To=()=>St(G.title),Tr=()=>St(G["html-container"]),io=()=>St(G.image),Qo=()=>St(G["progress-steps"]),sn=()=>St(G["validation-message"]),ln=()=>ve(`.${G.actions} .${G.confirm}`),Qe=()=>ve(`.${G.actions} .${G.cancel}`),an=()=>ve(`.${G.actions} .${G.deny}`),bo=()=>ve(`.${G.loader}`),pe=()=>St(G.actions),Dt=()=>St(G.footer),v=()=>St(G["timer-progress-bar"]),$=()=>St(G.close),O=()=>{const m=Array.from(Ve().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((C,N)=>{const W=parseInt(C.getAttribute("tabindex")),ye=parseInt(N.getAttribute("tabindex"));return W>ye?1:W<ye?-1:0}),T=Array.from(Ve().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(C=>"-1"!==C.getAttribute("tabindex"));return(m=>{const T=[];for(let C=0;C<m.length;C++)-1===T.indexOf(m[C])&&T.push(m[C]);return T})(m.concat(T)).filter(C=>Gn(C))},F=()=>Pt(document.body,G.shown)&&!Pt(document.body,G["toast-shown"])&&!Pt(document.body,G["no-backdrop"]),k=()=>Ve()&&Pt(Ve(),G.toast),Ge={previousBodyPadding:null},ce=(m,T)=>{if(m.textContent="",T){const N=(new DOMParser).parseFromString(T,"text/html");Array.from(N.querySelector("head").childNodes).forEach(W=>{m.appendChild(W)}),Array.from(N.querySelector("body").childNodes).forEach(W=>{W instanceof HTMLVideoElement||W instanceof HTMLAudioElement?m.appendChild(W.cloneNode(!0)):m.appendChild(W)})}},Pt=(m,T)=>{if(!T)return!1;const C=T.split(/\s+/);for(let N=0;N<C.length;N++)if(!m.classList.contains(C[N]))return!1;return!0},Xe=(m,T,C)=>{if(((m,T)=>{Array.from(m.classList).forEach(C=>{!Object.values(G).includes(C)&&!Object.values(h).includes(C)&&!Object.values(T.showClass).includes(C)&&m.classList.remove(C)})})(m,T),T.customClass&&T.customClass[C]){if("string"!=typeof T.customClass[C]&&!T.customClass[C].forEach)return void wt(`Invalid type of customClass.${C}! Expected string or iterable object, got "${typeof T.customClass[C]}"`);Je(m,T.customClass[C])}},Cn=(m,T)=>{if(!T)return null;switch(T){case"select":case"textarea":case"file":return m.querySelector(`.${G.popup} > .${G[T]}`);case"checkbox":return m.querySelector(`.${G.popup} > .${G.checkbox} input`);case"radio":return m.querySelector(`.${G.popup} > .${G.radio} input:checked`)||m.querySelector(`.${G.popup} > .${G.radio} input:first-child`);case"range":return m.querySelector(`.${G.popup} > .${G.range} input`);default:return m.querySelector(`.${G.popup} > .${G.input}`)}},br=m=>{if(m.focus(),"file"!==m.type){const T=m.value;m.value="",m.value=T}},Pr=(m,T,C)=>{!m||!T||("string"==typeof T&&(T=T.split(/\s+/).filter(Boolean)),T.forEach(N=>{Array.isArray(m)?m.forEach(W=>{C?W.classList.add(N):W.classList.remove(N)}):C?m.classList.add(N):m.classList.remove(N)}))},Je=(m,T)=>{Pr(m,T,!0)},er=(m,T)=>{Pr(m,T,!1)},Bt=(m,T)=>{const C=Array.from(m.children);for(let N=0;N<C.length;N++){const W=C[N];if(W instanceof HTMLElement&&Pt(W,T))return W}},ds=(m,T,C)=>{C===`${parseInt(C)}`&&(C=parseInt(C)),C||0===parseInt(C)?m.style[T]="number"==typeof C?`${C}px`:C:m.style.removeProperty(T)},En=function(m){m.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},Wt=m=>{m.style.display="none"},Iu=(m,T,C,N)=>{const W=m.querySelector(T);W&&(W.style[C]=N)},Br=function(m,T){T?En(m,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Wt(m)},Gn=m=>!(!m||!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)),Ru=m=>m.scrollHeight>m.clientHeight,Go=m=>{const T=window.getComputedStyle(m),C=parseFloat(T.getPropertyValue("animation-duration")||"0"),N=parseFloat(T.getPropertyValue("transition-duration")||"0");return C>0||N>0},ja=function(m){let T=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const C=v();Gn(C)&&(T&&(C.style.transition="none",C.style.width="100%"),setTimeout(()=>{C.style.transition=`width ${m/1e3}s linear`,C.style.width="0%"},10))},ge={},wu=m=>new Promise(T=>{if(!m)return T();const C=window.scrollX,N=window.scrollY;ge.restoreFocusTimeout=setTimeout(()=>{ge.previousActiveElement instanceof HTMLElement?(ge.previousActiveElement.focus(),ge.previousActiveElement=null):document.body&&document.body.focus(),T()},100),window.scrollTo(C,N)}),Wa=()=>typeof window>"u"||typeof document>"u",Rl=`\n <div aria-labelledby="${G.title}" aria-describedby="${G["html-container"]}" class="${G.popup}" tabindex="-1">\n   <button type="button" class="${G.close}"></button>\n   <ul class="${G["progress-steps"]}"></ul>\n   <div class="${G.icon}"></div>\n   <img class="${G.image}" />\n   <h2 class="${G.title}" id="${G.title}"></h2>\n   <div class="${G["html-container"]}" id="${G["html-container"]}"></div>\n   <input class="${G.input}" />\n   <input type="file" class="${G.file}" />\n   <div class="${G.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${G.select}"></select>\n   <div class="${G.radio}"></div>\n   <label for="${G.checkbox}" class="${G.checkbox}">\n     <input type="checkbox" />\n     <span class="${G.label}"></span>\n   </label>\n   <textarea class="${G.textarea}"></textarea>\n   <div class="${G["validation-message"]}" id="${G["validation-message"]}"></div>\n   <div class="${G.actions}">\n     <div class="${G.loader}"></div>\n     <button type="button" class="${G.confirm}"></button>\n     <button type="button" class="${G.deny}"></button>\n     <button type="button" class="${G.cancel}"></button>\n   </div>\n   <div class="${G.footer}"></div>\n   <div class="${G["timer-progress-bar-container"]}">\n     <div class="${G["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),Yn=()=>{ge.currentInstance.resetValidationMessage()},Ou=m=>{const T=(()=>{const m=ot();return!!m&&(m.remove(),er([document.documentElement,document.body],[G["no-backdrop"],G["toast-shown"],G["has-column"]]),!0)})();if(Wa())return void so("SweetAlert2 requires document to initialize");const C=document.createElement("div");C.className=G.container,T&&Je(C,G["no-transition"]),ce(C,Rl);const N=(m=>"string"==typeof m?document.querySelector(m):m)(m.target);N.appendChild(C),(m=>{const T=Ve();T.setAttribute("role",m.toast?"alert":"dialog"),T.setAttribute("aria-live",m.toast?"polite":"assertive"),m.toast||T.setAttribute("aria-modal","true")})(m),(m=>{"rtl"===window.getComputedStyle(m).direction&&Je(ot(),G.rtl)})(N),(()=>{const m=Ve(),T=Bt(m,G.input),C=Bt(m,G.file),N=m.querySelector(`.${G.range} input`),W=m.querySelector(`.${G.range} output`),ye=Bt(m,G.select),It=m.querySelector(`.${G.checkbox} input`),Ro=Bt(m,G.textarea);T.oninput=Yn,C.onchange=Yn,ye.onchange=Yn,It.onchange=Yn,Ro.oninput=Yn,N.oninput=()=>{Yn(),W.value=N.value},N.onchange=()=>{Yn(),W.value=N.value}})()},zs=(m,T)=>{m instanceof HTMLElement?T.appendChild(m):"object"==typeof m?wl(m,T):m&&ce(T,m)},wl=(m,T)=>{m.jquery?Sl(T,m):ce(T,m.toString())},Sl=(m,T)=>{if(m.textContent="",0 in T)for(let C=0;C in T;C++)m.appendChild(T[C].cloneNode(!0));else m.appendChild(T.cloneNode(!0))},Gr=(()=>{if(Wa())return!1;const m=document.createElement("div"),T={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const C in T)if(Object.prototype.hasOwnProperty.call(T,C)&&typeof m.style[C]<"u")return T[C];return!1})(),Au=(m,T)=>{const C=pe(),N=bo();T.showConfirmButton||T.showDenyButton||T.showCancelButton?En(C):Wt(C),Xe(C,T,"actions"),function Uo(m,T,C){const N=ln(),W=an(),ye=Qe();Ur(N,"confirm",C),Ur(W,"deny",C),Ur(ye,"cancel",C),function Ya(m,T,C,N){N.buttonsStyling?(Je([m,T,C],G.styled),N.confirmButtonColor&&(m.style.backgroundColor=N.confirmButtonColor,Je(m,G["default-outline"])),N.denyButtonColor&&(T.style.backgroundColor=N.denyButtonColor,Je(T,G["default-outline"])),N.cancelButtonColor&&(C.style.backgroundColor=N.cancelButtonColor,Je(C,G["default-outline"]))):er([m,T,C],G.styled)}(N,W,ye,C),C.reverseButtons&&(C.toast?(m.insertBefore(ye,N),m.insertBefore(W,N)):(m.insertBefore(ye,T),m.insertBefore(W,T),m.insertBefore(N,T)))}(C,N,T),ce(N,T.loaderHtml),Xe(N,T,"loader")};function Ur(m,T,C){Br(m,C[`show${g(T)}Button`],"inline-block"),ce(m,C[`${T}ButtonText`]),m.setAttribute("aria-label",C[`${T}ButtonAriaLabel`]),m.className=G[T],Xe(m,C,`${T}Button`),Je(m,C[`${T}ButtonClass`])}const cn=(m,T)=>{const C=ot();!C||(function ku(m,T){"string"==typeof T?m.style.background=T:T||Je([document.documentElement,document.body],G["no-backdrop"])}(C,T.backdrop),function bh(m,T){T in G?Je(m,G[T]):(wt('The "position" parameter is not valid, defaulting to "center"'),Je(m,G.center))}(C,T.position),function Le(m,T){if(T&&"string"==typeof T){const C=`grow-${T}`;C in G&&Je(m,G[C])}}(C,T.grow),Xe(C,T,"container"))};const Mu=["input","file","range","select","radio","checkbox","textarea"],Ka=m=>{if(!Ct[m.input])return void so(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${m.input}"`);const T=Kn(m.input),C=Ct[m.input](T,m);En(T),m.inputAutoFocus&&setTimeout(()=>{br(C)})},Un=(m,T)=>{const C=Cn(Ve(),m);if(C){(m=>{for(let T=0;T<m.attributes.length;T++){const C=m.attributes[T].name;["type","value","style"].includes(C)||m.removeAttribute(C)}})(C);for(const N in T)C.setAttribute(N,T[N])}},Ai=m=>{const T=Kn(m.input);"object"==typeof m.customClass&&Je(T,m.customClass.input)},Ot=(m,T)=>{(!m.placeholder||T.inputPlaceholder)&&(m.placeholder=T.inputPlaceholder)},Xt=(m,T,C)=>{if(C.inputLabel){m.id=G.input;const N=document.createElement("label"),W=G["input-label"];N.setAttribute("for",m.id),N.className=W,"object"==typeof C.customClass&&Je(N,C.customClass.inputLabel),N.innerText=C.inputLabel,T.insertAdjacentElement("beforebegin",N)}},Kn=m=>Bt(Ve(),G[m]||G.input),lo=(m,T)=>{["string","number"].includes(typeof T)?m.value=`${T}`:ue(T)||wt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof T}"`)},Ct={};Ct.text=Ct.email=Ct.password=Ct.number=Ct.tel=Ct.url=(m,T)=>(lo(m,T.inputValue),Xt(m,m,T),Ot(m,T),m.type=T.input,m),Ct.file=(m,T)=>(Xt(m,m,T),Ot(m,T),m),Ct.range=(m,T)=>{const C=m.querySelector("input"),N=m.querySelector("output");return lo(C,T.inputValue),C.type=T.input,lo(N,T.inputValue),Xt(C,m,T),m},Ct.select=(m,T)=>{if(m.textContent="",T.inputPlaceholder){const C=document.createElement("option");ce(C,T.inputPlaceholder),C.value="",C.disabled=!0,C.selected=!0,m.appendChild(C)}return Xt(m,m,T),m},Ct.radio=m=>(m.textContent="",m),Ct.checkbox=(m,T)=>{const C=Cn(Ve(),"checkbox");C.value="1",C.id=G.checkbox,C.checked=Boolean(T.inputValue);const N=m.querySelector("span");return ce(N,T.inputPlaceholder),C},Ct.textarea=(m,T)=>{lo(m,T.inputValue),Ot(m,T),Xt(m,m,T);return setTimeout(()=>{if("MutationObserver"in window){const N=parseInt(window.getComputedStyle(Ve()).width);new MutationObserver(()=>{const ye=m.offsetWidth+(N=>parseInt(window.getComputedStyle(N).marginLeft)+parseInt(window.getComputedStyle(N).marginRight))(m);Ve().style.width=ye>N?`${ye}px`:null}).observe(m,{attributes:!0,attributeFilter:["style"]})}}),m};const un=(m,T)=>{const C=Tr();Xe(C,T,"htmlContainer"),T.html?(zs(T.html,C),En(C,"block")):T.text?(C.textContent=T.text,En(C,"block")):Wt(C),((m,T)=>{const C=Ve(),N=Ee.innerParams.get(m),W=!N||T.input!==N.input;Mu.forEach(ye=>{const It=Bt(C,G[ye]);Un(ye,T.inputAttributes),It.className=G[ye],W&&Wt(It)}),T.input&&(W&&Ka(T),Ai(T))})(m,T)},Hr=(m,T)=>{for(const C in h)T.icon!==C&&er(m,h[C]);Je(m,h[T.icon]),zt(m,T),Ks(),Xe(m,T,"icon")},Ks=()=>{const m=Ve(),T=window.getComputedStyle(m).getPropertyValue("background-color"),C=m.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let N=0;N<C.length;N++)C[N].style.backgroundColor=T},Gt=(m,T)=>{let N,C=m.innerHTML;T.iconHtml?N=yt(T.iconHtml):"success"===T.icon?(N='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',C=C.replace(/ style=".*?"/g,"")):N="error"===T.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':yt({question:"?",warning:"!",info:"i"}[T.icon]),C.trim()!==N.trim()&&ce(m,N)},zt=(m,T)=>{if(T.iconColor){m.style.color=T.iconColor,m.style.borderColor=T.iconColor;for(const C of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Iu(m,C,"backgroundColor",T.iconColor);Iu(m,".swal2-success-ring","borderColor",T.iconColor)}},yt=m=>`<div class="${G["icon-content"]}">${m}</div>`,ki=(m,T)=>{m.className=`${G.popup} ${Gn(m)?T.showClass.popup:""}`,T.toast?(Je([document.documentElement,document.body],G["toast-shown"]),Je(m,G.toast)):Je(m,G.modal),Xe(m,T,"popup"),"string"==typeof T.customClass&&Je(m,T.customClass),T.icon&&Je(m,G[`icon-${T.icon}`])},dn=m=>{const T=document.createElement("li");return Je(T,G["progress-step"]),ce(T,m),T},Te=m=>{const T=document.createElement("li");return Je(T,G["progress-step-line"]),m.progressStepsDistance&&ds(T,"width",m.progressStepsDistance),T},oe=(m,T)=>{((m,T)=>{const C=ot(),N=Ve();T.toast?(ds(C,"width",T.width),N.style.width="100%",N.insertBefore(bo(),Qt())):ds(N,"width",T.width),ds(N,"padding",T.padding),T.color&&(N.style.color=T.color),T.background&&(N.style.background=T.background),Wt(sn()),ki(N,T)})(0,T),cn(0,T),((m,T)=>{const C=Qo();T.progressSteps&&0!==T.progressSteps.length?(En(C),C.textContent="",T.currentProgressStep>=T.progressSteps.length&&wt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),T.progressSteps.forEach((N,W)=>{const ye=dn(N);if(C.appendChild(ye),W===T.currentProgressStep&&Je(ye,G["active-progress-step"]),W!==T.progressSteps.length-1){const It=Te(T);C.appendChild(It)}})):Wt(C)})(0,T),((m,T)=>{const C=Ee.innerParams.get(m),N=Qt();C&&T.icon===C.icon?(Gt(N,T),Hr(N,T)):T.icon||T.iconHtml?T.icon&&-1===Object.keys(h).indexOf(T.icon)?(so(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${T.icon}"`),Wt(N)):(En(N),Gt(N,T),Hr(N,T),Je(N,T.showClass.icon)):Wt(N)})(m,T),((m,T)=>{const C=io();T.imageUrl?(En(C,""),C.setAttribute("src",T.imageUrl),C.setAttribute("alt",T.imageAlt),ds(C,"width",T.imageWidth),ds(C,"height",T.imageHeight),C.className=G.image,Xe(C,T,"image")):Wt(C)})(0,T),((m,T)=>{const C=To();Br(C,T.title||T.titleText,"block"),T.title&&zs(T.title,C),T.titleText&&(C.innerText=T.titleText),Xe(C,T,"title")})(0,T),((m,T)=>{const C=$();ce(C,T.closeButtonHtml),Xe(C,T,"closeButton"),Br(C,T.showCloseButton),C.setAttribute("aria-label",T.closeButtonAriaLabel)})(0,T),un(m,T),Au(0,T),((m,T)=>{const C=Dt();Br(C,T.footer),T.footer&&zs(T.footer,C),Xe(C,T,"footer")})(0,T),"function"==typeof T.didRender&&T.didRender(Ve())};function vt(){const m=Ee.innerParams.get(this);if(!m)return;const T=Ee.domCache.get(this);Wt(T.loader),k()?m.icon&&En(Qt()):Al(T),er([T.popup,T.actions],G.loading),T.popup.removeAttribute("aria-busy"),T.popup.removeAttribute("data-loading"),T.confirmButton.disabled=!1,T.denyButton.disabled=!1,T.cancelButton.disabled=!1}const Al=m=>{const T=m.popup.getElementsByClassName(m.loader.getAttribute("data-button-to-replace"));T.length?En(T[0],"inline-block"):!Gn(ln())&&!Gn(an())&&!Gn(Qe())&&Wt(m.actions)};const Za=()=>ln()&&ln().click(),en=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Qa=m=>{m.keydownTarget&&m.keydownHandlerAdded&&(m.keydownTarget.removeEventListener("keydown",m.keydownHandler,{capture:m.keydownListenerCapture}),m.keydownHandlerAdded=!1)},D=(m,T)=>{const C=O();if(C.length)return(m+=T)===C.length?m=0:-1===m&&(m=C.length-1),void C[m].focus();Ve().focus()},M=["ArrowRight","ArrowDown"],U=["ArrowLeft","ArrowUp"],j=(m,T,C)=>{const N=Ee.innerParams.get(m);!N||T.isComposing||229===T.keyCode||(N.stopKeydownPropagation&&T.stopPropagation(),"Enter"===T.key?at(m,T,N):"Tab"===T.key?hs(T):[...M,...U].includes(T.key)?kl(T.key):"Escape"===T.key&&ao(T,N,C))},at=(m,T,C)=>{if(Fo(C.allowEnterKey)&&T.target&&m.getInput()&&T.target instanceof HTMLElement&&T.target.outerHTML===m.getInput().outerHTML){if(["textarea","file"].includes(C.input))return;Za(),T.preventDefault()}},hs=m=>{const T=m.target,C=O();let N=-1;for(let W=0;W<C.length;W++)if(T===C[W]){N=W;break}D(N,m.shiftKey?-1:1),m.stopPropagation(),m.preventDefault()},kl=m=>{const T=ln(),C=an(),N=Qe();if(document.activeElement instanceof HTMLElement&&![T,C,N].includes(document.activeElement))return;const ye=M.includes(m)?"nextElementSibling":"previousElementSibling";let It=document.activeElement;for(let Ro=0;Ro<pe().children.length;Ro++){if(It=It[ye],!It)return;if(It instanceof HTMLButtonElement&&Gn(It))break}It instanceof HTMLButtonElement&&It.focus()},ao=(m,T,C)=>{Fo(T.allowEscapeKey)&&(m.preventDefault(),C(en.esc))};var ec={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Ml=()=>{Array.from(document.body.children).forEach(T=>{T.hasAttribute("data-previous-aria-hidden")?(T.setAttribute("aria-hidden",T.getAttribute("data-previous-aria-hidden")),T.removeAttribute("data-previous-aria-hidden")):T.removeAttribute("aria-hidden")})},yh=()=>{const m=navigator.userAgent,T=!!m.match(/iPad/i)||!!m.match(/iPhone/i),C=!!m.match(/WebKit/i);T&&C&&!m.match(/CriOS/i)&&Ve().scrollHeight>window.innerHeight-44&&(ot().style.paddingBottom="44px")},rm=()=>{const m=ot();let T;m.ontouchstart=C=>{T=vg(C)},m.ontouchmove=C=>{T&&(C.preventDefault(),C.stopPropagation())}},vg=m=>{const T=m.target,C=ot();return!Nl(m)&&!tc(m)&&(T===C||!Ru(C)&&T instanceof HTMLElement&&"INPUT"!==T.tagName&&"TEXTAREA"!==T.tagName&&!(Ru(Tr())&&Tr().contains(T)))},Nl=m=>m.touches&&m.touches.length&&"stylus"===m.touches[0].touchType,tc=m=>m.touches&&m.touches.length>1,Ig=()=>{null===Ge.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Ge.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Ge.previousBodyPadding+(()=>{const m=document.createElement("div");m.className=G["scrollbar-measure"],document.body.appendChild(m);const T=m.getBoundingClientRect().width-m.clientWidth;return document.body.removeChild(m),T})()}px`)};function Ut(m,T,C,N){k()?Li(m,N):(wu(C).then(()=>Li(m,N)),Qa(ge)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(T.setAttribute("style","display:none !important"),T.removeAttribute("class"),T.innerHTML=""):T.remove(),F()&&(null!==Ge.previousBodyPadding&&(document.body.style.paddingRight=`${Ge.previousBodyPadding}px`,Ge.previousBodyPadding=null),(()=>{if(Pt(document.body,G.iosfix)){const m=parseInt(document.body.style.top,10);er(document.body,G.iosfix),document.body.style.top="",document.body.scrollTop=-1*m}})(),Ml()),function gt(){er([document.documentElement,document.body],[G.shown,G["height-auto"],G["no-backdrop"],G["toast-shown"]])}()}function yo(m){m=Vr(m);const T=ec.swalPromiseResolve.get(this),C=Cg(this);this.isAwaitingPromise()?m.isDismissed||(Ni(this),T(m)):C&&T(m)}const Cg=m=>{const T=Ve();if(!T)return!1;const C=Ee.innerParams.get(m);if(!C||Pt(T,C.hideClass.popup))return!1;er(T,C.showClass.popup),Je(T,C.hideClass.popup);const N=ot();return er(N,C.showClass.backdrop),Je(N,C.hideClass.backdrop),nc(m,T,C),!0};const Ni=m=>{m.isAwaitingPromise()&&(Ee.awaitingPromise.delete(m),Ee.innerParams.get(m)||m._destroy())},Vr=m=>typeof m>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},m),nc=(m,T,C)=>{const N=ot(),W=Gr&&Go(T);"function"==typeof C.willClose&&C.willClose(T),W?Ih(m,T,N,C.returnFocus,C.didClose):Ut(m,N,C.returnFocus,C.didClose)},Ih=(m,T,C,N,W)=>{ge.swalCloseEventFinishedCallback=Ut.bind(null,m,C,N,W),T.addEventListener(Gr,function(ye){ye.target===T&&(ge.swalCloseEventFinishedCallback(),delete ge.swalCloseEventFinishedCallback)})},Li=(m,T)=>{setTimeout(()=>{"function"==typeof T&&T.bind(m.params)(),m._destroy()})};function Ch(m,T,C){const N=Ee.domCache.get(m);T.forEach(W=>{N[W].disabled=C})}function Rh(m,T){if(m)if("radio"===m.type){const N=m.parentNode.parentNode.querySelectorAll("input");for(let W=0;W<N.length;W++)N[W].disabled=T}else m.disabled=T}const Vo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Rg=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],An={},Fu=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],wg=m=>Object.prototype.hasOwnProperty.call(Vo,m),jr=m=>-1!==Rg.indexOf(m),vo=m=>An[m],sm=m=>{wg(m)||wt(`Unknown parameter "${m}"`)},im=m=>{Fu.includes(m)&&wt(`The parameter "${m}" is incompatible with toasts`)},tr=m=>{vo(m)&&Cl(m,vo(m))};const Sh=m=>{const T={};return Object.keys(m).forEach(C=>{jr(C)?T[C]=m[C]:wt(`Invalid parameter to update: ${C}`)}),T};const ft=m=>{xl(m),delete m.params,delete ge.keydownHandler,delete ge.keydownTarget,delete ge.currentInstance},xl=m=>{m.isAwaitingPromise()?(gs(Ee,m),Ee.awaitingPromise.set(m,!0)):(gs(ec,m),gs(Ee,m))},gs=(m,T)=>{for(const C in m)m[C].delete(T)};var Pl=Object.freeze({__proto__:null,hideLoading:vt,disableLoading:vt,getInput:function be(m){const T=Ee.innerParams.get(m||this),C=Ee.domCache.get(m||this);return C?Cn(C.popup,T.input):null},close:yo,isAwaitingPromise:function Bu(){return!!Ee.awaitingPromise.get(this)},rejectPromise:function Ke(m){const T=ec.swalPromiseReject.get(this);Ni(this),T&&T(m)},handleAwaitingPromise:Ni,closePopup:yo,closeModal:yo,closeToast:yo,enableButtons:function ps(){Ch(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function Ll(){Ch(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function co(){Rh(this.getInput(),!1)},disableInput:function wh(){Rh(this.getInput(),!0)},showValidationMessage:function qn(m){const T=Ee.domCache.get(this),C=Ee.innerParams.get(this);ce(T.validationMessage,m),T.validationMessage.className=G["validation-message"],C.customClass&&C.customClass.validationMessage&&Je(T.validationMessage,C.customClass.validationMessage),En(T.validationMessage);const N=this.getInput();N&&(N.setAttribute("aria-invalid",!0),N.setAttribute("aria-describedby",G["validation-message"]),br(N),Je(N,G.inputerror))},resetValidationMessage:function ke(){const m=Ee.domCache.get(this);m.validationMessage&&Wt(m.validationMessage);const T=this.getInput();T&&(T.removeAttribute("aria-invalid"),T.removeAttribute("aria-describedby"),er(T,G.inputerror))},update:function lm(m){const T=Ve(),C=Ee.innerParams.get(this);if(!T||Pt(T,C.hideClass.popup))return void wt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const N=Sh(m),W=Object.assign({},C,N);oe(this,W),Ee.innerParams.set(this,W),Object.defineProperties(this,{params:{value:Object.assign({},this.params,m),writable:!1,enumerable:!0}})},_destroy:function xi(){const m=Ee.domCache.get(this),T=Ee.innerParams.get(this);T?(m.popup&&ge.swalCloseEventFinishedCallback&&(ge.swalCloseEventFinishedCallback(),delete ge.swalCloseEventFinishedCallback),"function"==typeof T.didDestroy&&T.didDestroy(),ft(this)):xl(this)}});const fs=m=>{let T=Ve();T||new ti,T=Ve();const C=bo();k()?Wt(Qt()):vr(T,m),En(C),T.setAttribute("data-loading","true"),T.setAttribute("aria-busy","true"),T.focus()},vr=(m,T)=>{const C=pe(),N=bo();!T&&Gn(ln())&&(T=ln()),En(C),T&&(Wt(T),N.setAttribute("data-button-to-replace",T.className)),N.parentNode.insertBefore(N,T),Je([m,C],G.loading)},Fl=m=>m.checked?1:0,Sg=m=>m.checked?m.value:null,Uu=m=>m.files.length?null!==m.getAttribute("multiple")?m.files:m.files[0]:null,Dh=(m,T)=>{const C=Ve(),N=W=>{Dg[T.input](C,oc(W),T)};js(T.inputOptions)||ue(T.inputOptions)?(fs(ln()),xr(T.inputOptions).then(W=>{m.hideLoading(),N(W)})):"object"==typeof T.inputOptions?N(T.inputOptions):so("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof T.inputOptions)},qs=(m,T)=>{const C=m.getInput();Wt(C),xr(T.inputValue).then(N=>{C.value="number"===T.input?`${parseFloat(N)||0}`:`${N}`,En(C),C.focus(),m.hideLoading()}).catch(N=>{so(`Error in inputValue promise: ${N}`),C.value="",En(C),C.focus(),m.hideLoading()})},Dg={select:(m,T,C)=>{const N=Bt(m,G.select),W=(ye,It,Ro)=>{const no=document.createElement("option");no.value=Ro,ce(no,It),no.selected=tn(Ro,C.inputValue),ye.appendChild(no)};T.forEach(ye=>{const It=ye[0],Ro=ye[1];if(Array.isArray(Ro)){const no=document.createElement("optgroup");no.label=It,no.disabled=!1,N.appendChild(no),Ro.forEach(ni=>W(no,ni[1],ni[0]))}else W(N,Ro,It)}),N.focus()},radio:(m,T,C)=>{const N=Bt(m,G.radio);T.forEach(ye=>{const It=ye[0],Ro=ye[1],no=document.createElement("input"),ni=document.createElement("label");no.type="radio",no.name=G.radio,no.value=It,tn(It,C.inputValue)&&(no.checked=!0);const Ul=document.createElement("span");ce(Ul,Ro),Ul.className=G.label,ni.appendChild(no),ni.appendChild(Ul),N.appendChild(ni)});const W=N.querySelectorAll("input");W.length&&W[0].focus()}},oc=m=>{const T=[];return typeof Map<"u"&&m instanceof Map?m.forEach((C,N)=>{let W=C;"object"==typeof W&&(W=oc(W)),T.push([N,W])}):Object.keys(m).forEach(C=>{let N=m[C];"object"==typeof N&&(N=oc(N)),T.push([C,N])}),T},tn=(m,T)=>T&&T.toString()===m.toString(),Tn=(m,T)=>{const C=Ee.innerParams.get(m);if(!C.input)return void so(`The "input" parameter is needed to be set when using returnInputValueOn${g(T)}`);const N=((m,T)=>{const C=m.getInput();if(!C)return null;switch(T.input){case"checkbox":return Fl(C);case"radio":return Sg(C);case"file":return Uu(C);default:return T.inputAutoTrim?C.value.trim():C.value}})(m,C);C.inputValidator?Pi(m,N,T):m.getInput().checkValidity()?"deny"===T?Qn(m,N):Me(m,N):(m.enableButtons(),m.showValidationMessage(C.validationMessage))},Pi=(m,T,C)=>{const N=Ee.innerParams.get(m);m.disableInput(),Promise.resolve().then(()=>xr(N.inputValidator(T,N.validationMessage))).then(ye=>{m.enableButtons(),m.enableInput(),ye?m.showValidationMessage(ye):"deny"===C?Qn(m,T):Me(m,T)})},Qn=(m,T)=>{const C=Ee.innerParams.get(m||void 0);C.showLoaderOnDeny&&fs(an()),C.preDeny?(Ee.awaitingPromise.set(m||void 0,!0),Promise.resolve().then(()=>xr(C.preDeny(T,C.validationMessage))).then(W=>{!1===W?(m.hideLoading(),Ni(m)):m.close({isDenied:!0,value:typeof W>"u"?T:W})}).catch(W=>le(m||void 0,W))):m.close({isDenied:!0,value:T})},uo=(m,T)=>{m.close({isConfirmed:!0,value:T})},le=(m,T)=>{m.rejectPromise(T)},Me=(m,T)=>{const C=Ee.innerParams.get(m||void 0);C.showLoaderOnConfirm&&fs(),C.preConfirm?(m.resetValidationMessage(),Ee.awaitingPromise.set(m||void 0,!0),Promise.resolve().then(()=>xr(C.preConfirm(T,C.validationMessage))).then(W=>{Gn(sn())||!1===W?(m.hideLoading(),Ni(m)):uo(m,typeof W>"u"?T:W)}).catch(W=>le(m||void 0,W))):uo(m,T)},ho=(m,T,C)=>{T.popup.onclick=()=>{const N=Ee.innerParams.get(m);N&&(Zs(N)||N.timer||N.input)||C(en.close)}},Zs=m=>m.showConfirmButton||m.showDenyButton||m.showCancelButton||m.showCloseButton;let nn=!1;const Qs=m=>{m.popup.onmousedown=()=>{m.container.onmouseup=function(T){m.container.onmouseup=void 0,T.target===m.container&&(nn=!0)}}},Yt=m=>{m.container.onmousedown=()=>{m.popup.onmouseup=function(T){m.popup.onmouseup=void 0,(T.target===m.popup||m.popup.contains(T.target))&&(nn=!0)}}},Bi=(m,T,C)=>{T.container.onclick=N=>{const W=Ee.innerParams.get(m);nn?nn=!1:N.target===T.container&&Fo(W.allowOutsideClick)&&C(en.backdrop)}},ze=m=>m instanceof Element||(m=>"object"==typeof m&&m.jquery)(m);const bn=()=>{if(ge.timeout)return(()=>{const m=v(),T=parseInt(window.getComputedStyle(m).width);m.style.removeProperty("transition"),m.style.width="100%";const C=parseInt(window.getComputedStyle(m).width);m.style.width=T/C*100+"%"})(),ge.timeout.stop()},nr=()=>{if(ge.timeout){const m=ge.timeout.start();return ja(m),m}};let Lt=!1;const _t={};const Ui=m=>{for(let T=m.target;T&&T!==document;T=T.parentNode)for(const C in _t){const N=T.getAttribute(C);if(N)return void _t[C].fire({template:N})}};var sc=Object.freeze({__proto__:null,isValidParameter:wg,isUpdatableParameter:jr,isDeprecatedParameter:vo,argsToParams:m=>{const T={};return"object"!=typeof m[0]||ze(m[0])?["title","html","icon"].forEach((C,N)=>{const W=m[N];"string"==typeof W||ze(W)?T[C]=W:void 0!==W&&so(`Unexpected type of ${C}! Expected "string" or "Element", got ${typeof W}`)}):Object.assign(T,m[0]),T},getContainer:ot,getPopup:Ve,getTitle:To,getHtmlContainer:Tr,getImage:io,getIcon:Qt,getIconContent:()=>St(G["icon-content"]),getInputLabel:()=>St(G["input-label"]),getCloseButton:$,getActions:pe,getConfirmButton:ln,getDenyButton:an,getCancelButton:Qe,getLoader:bo,getFooter:Dt,getTimerProgressBar:v,getFocusableElements:O,getValidationMessage:sn,getProgressSteps:Qo,isLoading:()=>Ve().hasAttribute("data-loading"),isVisible:()=>Gn(Ve()),clickConfirm:Za,clickDeny:()=>an()&&an().click(),clickCancel:()=>Qe()&&Qe().click(),fire:function jo(){const m=this;for(var T=arguments.length,C=new Array(T),N=0;N<T;N++)C[N]=arguments[N];return new m(...C)},mixin:function Fi(m){return class T extends(this){_main(N,W){return super._main(N,Object.assign({},m,W))}}},showLoading:fs,enableLoading:fs,getTimerLeft:()=>ge.timeout&&ge.timeout.getTimerLeft(),stopTimer:bn,resumeTimer:nr,toggleTimer:()=>{const m=ge.timeout;return m&&(m.running?bn():nr())},increaseTimer:m=>{if(ge.timeout){const T=ge.timeout.increase(m);return ja(T,!0),T}},isTimerRunning:()=>ge.timeout&&ge.timeout.isRunning(),bindClickHandler:function Gi(){_t[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Lt||(document.body.addEventListener("click",Ui),Lt=!0)}});class ic{constructor(T,C){this.callback=T,this.remaining=C,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(T){const C=this.running;return C&&this.stop(),this.remaining+=T,C&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const $s=["swal-title","swal-html","swal-footer"],Es=m=>{const T={};return Array.from(m.querySelectorAll("swal-param")).forEach(N=>{yn(N,["name","value"]);const W=N.getAttribute("name"),ye=N.getAttribute("value");T[W]="boolean"==typeof Vo[W]?"false"!==ye:"object"==typeof Vo[W]?JSON.parse(ye):ye}),T},wn=m=>{const T={};return Array.from(m.querySelectorAll("swal-function-param")).forEach(N=>{const W=N.getAttribute("name"),ye=N.getAttribute("value");T[W]=new Function(`return ${ye}`)()}),T},Oh=m=>{const T={};return Array.from(m.querySelectorAll("swal-button")).forEach(N=>{yn(N,["type","color","aria-label"]);const W=N.getAttribute("type");T[`${W}ButtonText`]=N.innerHTML,T[`show${g(W)}Button`]=!0,N.hasAttribute("color")&&(T[`${W}ButtonColor`]=N.getAttribute("color")),N.hasAttribute("aria-label")&&(T[`${W}ButtonAriaLabel`]=N.getAttribute("aria-label"))}),T},eo=m=>{const T={},C=m.querySelector("swal-image");return C&&(yn(C,["src","width","height","alt"]),C.hasAttribute("src")&&(T.imageUrl=C.getAttribute("src")),C.hasAttribute("width")&&(T.imageWidth=C.getAttribute("width")),C.hasAttribute("height")&&(T.imageHeight=C.getAttribute("height")),C.hasAttribute("alt")&&(T.imageAlt=C.getAttribute("alt"))),T},or=m=>{const T={},C=m.querySelector("swal-icon");return C&&(yn(C,["type","color"]),C.hasAttribute("type")&&(T.icon=C.getAttribute("type")),C.hasAttribute("color")&&(T.iconColor=C.getAttribute("color")),T.iconHtml=C.innerHTML),T},Hu=m=>{const T={},C=m.querySelector("swal-input");C&&(yn(C,["type","label","placeholder","value"]),T.input=C.getAttribute("type")||"text",C.hasAttribute("label")&&(T.inputLabel=C.getAttribute("label")),C.hasAttribute("placeholder")&&(T.inputPlaceholder=C.getAttribute("placeholder")),C.hasAttribute("value")&&(T.inputValue=C.getAttribute("value")));const N=Array.from(m.querySelectorAll("swal-input-option"));return N.length&&(T.inputOptions={},N.forEach(W=>{yn(W,["value"]);const ye=W.getAttribute("value");T.inputOptions[ye]=W.innerHTML})),T},to=(m,T)=>{const C={};for(const N in T){const W=T[N],ye=m.querySelector(W);ye&&(yn(ye,[]),C[W.replace(/^swal-/,"")]=ye.innerHTML.trim())}return C},lc=m=>{const T=$s.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(m.children).forEach(C=>{const N=C.tagName.toLowerCase();T.includes(N)||wt(`Unrecognized element <${N}>`)})},yn=(m,T)=>{Array.from(m.attributes).forEach(C=>{-1===T.indexOf(C.name)&&wt([`Unrecognized attribute "${C.name}" on <${m.tagName.toLowerCase()}>.`,T.length?`Allowed attributes are: ${T.join(", ")}`:"To set the value, use HTML within the element."])})},Xr=m=>{const T=ot(),C=Ve();"function"==typeof m.willOpen&&m.willOpen(C);const W=window.getComputedStyle(document.body).overflowY;cm(T,C,m),setTimeout(()=>{Og(T,C)},10),F()&&(am(T,m.scrollbarPadding,W),Array.from(document.body.children).forEach(T=>{T===ot()||T.contains(ot())||(T.hasAttribute("aria-hidden")&&T.setAttribute("data-previous-aria-hidden",T.getAttribute("aria-hidden")),T.setAttribute("aria-hidden","true"))})),!k()&&!ge.previousActiveElement&&(ge.previousActiveElement=document.activeElement),"function"==typeof m.didOpen&&setTimeout(()=>m.didOpen(C)),er(T,G["no-transition"])},xt=m=>{const T=Ve();if(m.target!==T)return;const C=ot();T.removeEventListener(Gr,xt),C.style.overflowY="auto"},Og=(m,T)=>{Gr&&Go(T)?(m.style.overflowY="hidden",T.addEventListener(Gr,xt)):m.style.overflowY="auto"},am=(m,T,C)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Pt(document.body,G.iosfix)){const T=document.body.scrollTop;document.body.style.top=-1*T+"px",Je(document.body,G.iosfix),rm(),yh()}})(),T&&"hidden"!==C&&Ig(),setTimeout(()=>{m.scrollTop=0})},cm=(m,T,C)=>{Je(m,C.showClass.backdrop),T.style.setProperty("opacity","0","important"),En(T,"grid"),setTimeout(()=>{Je(T,C.showClass.popup),T.style.removeProperty("opacity")},10),Je([document.documentElement,document.body],G.shown),C.heightAuto&&C.backdrop&&!C.toast&&Je([document.documentElement,document.body],G["height-auto"])};var kh={email:(m,T)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(m)?Promise.resolve():Promise.resolve(T||"Invalid email address"),url:(m,T)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(m)?Promise.resolve():Promise.resolve(T||"Invalid URL")};function ei(m){(function um(m){m.inputValidator||Object.keys(kh).forEach(T=>{m.input===T&&(m.inputValidator=kh[T])})})(m),m.showLoaderOnConfirm&&!m.preConfirm&&wt("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function dm(m){(!m.target||"string"==typeof m.target&&!document.querySelector(m.target)||"string"!=typeof m.target&&!m.target.appendChild)&&(wt('Target parameter is not valid, defaulting to "body"'),m.target="body")}(m),"string"==typeof m.title&&(m.title=m.title.split("\n").join("<br />")),Ou(m)}let zr;class Ts{constructor(){if(typeof window>"u")return;zr=this;for(var T=arguments.length,C=new Array(T),N=0;N<T;N++)C[N]=arguments[N];const W=Object.freeze(this.constructor.argsToParams(C));Object.defineProperties(this,{params:{value:W,writable:!1,enumerable:!0,configurable:!0}});const ye=zr._main(zr.params);Ee.promise.set(this,ye)}_main(T){let C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(m=>{!1===m.backdrop&&m.allowOutsideClick&&wt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const T in m)sm(T),m.toast&&im(T),tr(T)})(Object.assign({},C,T)),ge.currentInstance&&(ge.currentInstance._destroy(),F()&&Ml()),ge.currentInstance=zr;const N=Vu(T,C);ei(N),Object.freeze(N),ge.timeout&&(ge.timeout.stop(),delete ge.timeout),clearTimeout(ge.restoreFocusTimeout);const W=Mh(zr);return oe(zr,N),Ee.innerParams.set(zr,N),hm(zr,W,N)}then(T){return Ee.promise.get(this).then(T)}finally(T){return Ee.promise.get(this).finally(T)}}const hm=(m,T,C)=>new Promise((N,W)=>{const ye=It=>{m.close({isDismissed:!0,dismiss:It})};ec.swalPromiseResolve.set(m,N),ec.swalPromiseReject.set(m,W),T.confirmButton.onclick=()=>{(m=>{const T=Ee.innerParams.get(m);m.disableButtons(),T.input?Tn(m,"confirm"):Me(m,!0)})(m)},T.denyButton.onclick=()=>{(m=>{const T=Ee.innerParams.get(m);m.disableButtons(),T.returnInputValueOnDeny?Tn(m,"deny"):Qn(m,!1)})(m)},T.cancelButton.onclick=()=>{((m,T)=>{m.disableButtons(),T(en.cancel)})(m,ye)},T.closeButton.onclick=()=>{ye(en.close)},((m,T,C)=>{Ee.innerParams.get(m).toast?ho(m,T,C):(Qs(T),Yt(T),Bi(m,T,C))})(m,T,ye),((m,T,C,N)=>{Qa(T),C.toast||(T.keydownHandler=W=>j(m,W,N),T.keydownTarget=C.keydownListenerCapture?window:Ve(),T.keydownListenerCapture=C.keydownListenerCapture,T.keydownTarget.addEventListener("keydown",T.keydownHandler,{capture:T.keydownListenerCapture}),T.keydownHandlerAdded=!0)})(m,ge,C,ye),((m,T)=>{"select"===T.input||"radio"===T.input?Dh(m,T):["text","email","number","tel","textarea"].includes(T.input)&&(js(T.inputValue)||ue(T.inputValue))&&(fs(ln()),qs(m,T))})(m,C),Xr(C),pm(ge,C,ye),Nh(T,C),setTimeout(()=>{T.container.scrollTop=0})}),Vu=(m,T)=>{const C=(m=>{const T="string"==typeof m.template?document.querySelector(m.template):m.template;if(!T)return{};const C=T.content;return lc(C),Object.assign(Es(C),wn(C),Oh(C),eo(C),or(C),Hu(C),to(C,$s))})(m),N=Object.assign({},Vo,T,C,m);return N.showClass=Object.assign({},Vo.showClass,N.showClass),N.hideClass=Object.assign({},Vo.hideClass,N.hideClass),N},Mh=m=>{const T={popup:Ve(),container:ot(),actions:pe(),confirmButton:ln(),denyButton:an(),cancelButton:Qe(),loader:bo(),closeButton:$(),validationMessage:sn(),progressSteps:Qo()};return Ee.domCache.set(m,T),T},pm=(m,T,C)=>{const N=v();Wt(N),T.timer&&(m.timeout=new ic(()=>{C("timer"),delete m.timeout},T.timer),T.timerProgressBar&&(En(N),Xe(N,T,"timerProgressBar"),setTimeout(()=>{m.timeout&&m.timeout.running&&ja(T.timer)})))},Nh=(m,T)=>{if(!T.toast){if(!Fo(T.allowEnterKey))return void ac();gm(m,T)||D(-1,1)}},gm=(m,T)=>T.focusDeny&&Gn(m.denyButton)?(m.denyButton.focus(),!0):T.focusCancel&&Gn(m.cancelButton)?(m.cancelButton.focus(),!0):!(!T.focusConfirm||!Gn(m.confirmButton)||(m.confirmButton.focus(),0)),ac=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const m=new Date,T=localStorage.getItem("swal-initiation");T?(m.getTime()-Date.parse(T))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const C=document.createElement("audio");C.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",C.loop=!0,document.body.appendChild(C),setTimeout(()=>{C.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${m}`)}Object.assign(Ts.prototype,Pl),Object.assign(Ts,sc),Object.keys(Pl).forEach(m=>{Ts[m]=function(){if(zr)return zr[m](...arguments)}}),Ts.DismissReason=en,Ts.version="11.7.1";const ti=Ts;return ti.default=ti,ti}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Ee,Ae){var ne=Ee.createElement("style");if(Ee.getElementsByTagName("head")[0].appendChild(ne),ne.styleSheet)ne.styleSheet.disabled||(ne.styleSheet.cssText=Ae);else try{ne.innerHTML=Ae}catch{ne.innerText=Ae}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')}},Rt=>{Rt(Rt.s=202)}]);